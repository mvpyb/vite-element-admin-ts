import{Y as au}from"./index.9873ddc8.js";import{ei as ou,d as Wi,r as ln,z as su,o as Lr,c as lu,_ as cu,m as uu,w as li,a as wr,i as Or,v as kr,f as an,e as cn}from"./index.d69e1802.js";var Nr={exports:{}},on={exports:{}};/*!
 * TOAST UI Color Picker
 * @version 2.2.8
 * @author NHN Cloud FE Development Team <dl_javascript@nhn.com>
 * @license MIT
 */var Pr;function hu(){return Pr||(Pr=1,function(Fe,Je){(function(Wt,$){Fe.exports=$()})(window,function(){return function(It){var Wt={};function $(X){if(Wt[X])return Wt[X].exports;var dt=Wt[X]={i:X,l:!1,exports:{}};return It[X].call(dt.exports,dt,dt.exports,$),dt.l=!0,dt.exports}return $.m=It,$.c=Wt,$.d=function(X,dt,S){$.o(X,dt)||Object.defineProperty(X,dt,{enumerable:!0,get:S})},$.r=function(X){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(X,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(X,"__esModule",{value:!0})},$.t=function(X,dt){if(dt&1&&(X=$(X)),dt&8||dt&4&&typeof X=="object"&&X&&X.__esModule)return X;var S=Object.create(null);if($.r(S),Object.defineProperty(S,"default",{enumerable:!0,value:X}),dt&2&&typeof X!="string")for(var D in X)$.d(S,D,function(v){return X[v]}.bind(null,D));return S},$.n=function(X){var dt=X&&X.__esModule?function(){return X.default}:function(){return X};return $.d(dt,"a",dt),dt},$.o=function(X,dt){return Object.prototype.hasOwnProperty.call(X,dt)},$.p="dist",$($.s=33)}([function(It,Wt,$){function X(dt,S){var D=Object.prototype.hasOwnProperty,v,f,A,O;for(A=1,O=arguments.length;A<O;A+=1){v=arguments[A];for(f in v)D.call(v,f)&&(dt[f]=v[f])}return dt}It.exports=X},function(It,Wt,$){function X(dt){return dt instanceof Array}It.exports=X},function(It,Wt,$){var X=$(1),dt=$(6),S=$(7);function D(v,f,A){X(v)?dt(v,f,A):S(v,f,A)}It.exports=D},function(It,Wt,$){function X(dt){return dt===void 0}It.exports=X},function(It,Wt,$){var X=$(22),dt=$(2),S=$(6),D=$(7),v=$(37),f=0,A={getLength:function(O){var L=0;return D(O,function(){L+=1}),L},map:function(O,L,w){var k=[];return dt(O,function(){k.push(L.apply(w||null,arguments))}),k},filter:function(O,L,w){var k=[];return S(O,function(d){L.apply(w||null,arguments)&&k.push(d)}),k},generateId:function(){return f+=1,f},isOldBrowser:function(){return X.msie&&X.version<9}(),sendHostName:function(){v("color-picker","UA-129987462-1")}};It.exports=A},function(It,Wt,$){var X=$(1);function dt(S,D,v){var f,A;if(v=v||0,!X(D))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(D,S,v);for(A=D.length,f=v;v>=0&&f<A;f+=1)if(D[f]===S)return f;return-1}It.exports=dt},function(It,Wt,$){function X(dt,S,D){var v=0,f=dt.length;for(D=D||null;v<f&&S.call(D,dt[v],v,dt)!==!1;v+=1);}It.exports=X},function(It,Wt,$){function X(dt,S,D){var v;D=D||null;for(v in dt)if(dt.hasOwnProperty(v)&&S.call(D,dt[v],v,dt)===!1)break}It.exports=X},function(It,Wt,$){var X=$(39),dt=$(13),S=$(41),D=$(3),v=$(9),f=$(19),A=$(4);function O(L,w){var k=A.generateId();D(w)&&(w=v.appendHTMLElement("div")),X(w,"tui-view-"+k),this.id=k,this.container=w,this.childs=new f(function(d){return d.id}),this.parent=null}O.prototype.addChild=function(L,w){w&&w.call(L,this),L.parent=this,this.childs.add(L)},O.prototype.removeChild=function(L,w){var k=S(L)?this.childs.items[L]:L;w&&w.call(k,this),this.childs.remove(k.id)},O.prototype.render=function(){this.childs.each(function(L){L.render()})},O.prototype.recursive=function(L,w){!dt(L)||(w||L(this),this.childs.each(function(k){k.recursive(L)}))},O.prototype.resize=function(){for(var L=Array.prototype.slice.call(arguments),w=this.parent;w;)dt(w._onResize)&&w._onResize.apply(w,L),w=w.parent},O.prototype._beforeDestroy=function(){},O.prototype._destroy=function(){this._beforeDestroy(),this.container.innerHTML="",this.id=this.parent=this.childs=this.container=null},O.prototype.destroy=function(L){this.childs&&(this.childs.each(function(w){w.destroy(!0),w._destroy()}),this.childs.clear()),!L&&this._destroy()},O.prototype.getViewBound=function(){var L=this.container.getBoundingClientRect();return{x:L.left,y:L.top,width:L.right-L.left,height:L.bottom-L.top}},It.exports=O},function(It,Wt,$){var X={appendHTMLElement:function(dt,S,D){var v=document.createElement(dt);return v.className=D||"",S?S.appendChild(v):document.body.appendChild(v),v}};It.exports=X},function(It,Wt,$){var X=$(0),dt=$(20),S=$(11),D=$(21),v=$(1),f=$(13),A=$(2),O=/\s+/g;function L(){this.events=null,this.contexts=null}L.mixin=function(w){X(w.prototype,L.prototype)},L.prototype._getHandlerItem=function(w,k){var d={handler:w};return k&&(d.context=k),d},L.prototype._safeEvent=function(w){var k=this.events,d;return k||(k=this.events={}),w&&(d=k[w],d||(d=[],k[w]=d),k=d),k},L.prototype._safeContext=function(){var w=this.contexts;return w||(w=this.contexts=[]),w},L.prototype._indexOfContext=function(w){for(var k=this._safeContext(),d=0;k[d];){if(w===k[d][0])return d;d+=1}return-1},L.prototype._memorizeContext=function(w){var k,d;!dt(w)||(k=this._safeContext(),d=this._indexOfContext(w),d>-1?k[d][1]+=1:k.push([w,1]))},L.prototype._forgetContext=function(w){var k,d;!dt(w)||(k=this._safeContext(),d=this._indexOfContext(w),d>-1&&(k[d][1]-=1,k[d][1]<=0&&k.splice(d,1)))},L.prototype._bindEvent=function(w,k,d){var r=this._safeEvent(w);this._memorizeContext(d),r.push(this._getHandlerItem(k,d))},L.prototype.on=function(w,k,d){var r=this;S(w)?(w=w.split(O),A(w,function(h){r._bindEvent(h,k,d)})):D(w)&&(d=k,A(w,function(h,u){r.on(u,h,d)}))},L.prototype.once=function(w,k,d){var r=this;if(D(w)){d=k,A(w,function(u,t){r.once(t,u,d)});return}function h(){k.apply(d,arguments),r.off(w,h,d)}this.on(w,h,d)},L.prototype._spliceMatches=function(w,k){var d=0,r;if(!!v(w))for(r=w.length;d<r;d+=1)k(w[d])===!0&&(w.splice(d,1),r-=1,d-=1)},L.prototype._matchHandler=function(w){var k=this;return function(d){var r=w===d.handler;return r&&k._forgetContext(d.context),r}},L.prototype._matchContext=function(w){var k=this;return function(d){var r=w===d.context;return r&&k._forgetContext(d.context),r}},L.prototype._matchHandlerAndContext=function(w,k){var d=this;return function(r){var h=w===r.handler,u=k===r.context,t=h&&u;return t&&d._forgetContext(r.context),t}},L.prototype._offByEventName=function(w,k){var d=this,r=f(k),h=d._matchHandler(k);w=w.split(O),A(w,function(u){var t=d._safeEvent(u);r?d._spliceMatches(t,h):(A(t,function(a){d._forgetContext(a.context)}),d.events[u]=[])})},L.prototype._offByHandler=function(w){var k=this,d=this._matchHandler(w);A(this._safeEvent(),function(r){k._spliceMatches(r,d)})},L.prototype._offByObject=function(w,k){var d=this,r;this._indexOfContext(w)<0?A(w,function(h,u){d.off(u,h)}):S(k)?(r=this._matchContext(w),d._spliceMatches(this._safeEvent(k),r)):f(k)?(r=this._matchHandlerAndContext(k,w),A(this._safeEvent(),function(h){d._spliceMatches(h,r)})):(r=this._matchContext(w),A(this._safeEvent(),function(h){d._spliceMatches(h,r)}))},L.prototype.off=function(w,k){S(w)?this._offByEventName(w,k):arguments.length?f(w)?this._offByHandler(w):D(w)&&this._offByObject(w,k):(this.events={},this.contexts=[])},L.prototype.fire=function(w){this.invoke.apply(this,arguments)},L.prototype.invoke=function(w){var k,d,r,h;if(!this.hasListener(w))return!0;for(k=this._safeEvent(w),d=Array.prototype.slice.call(arguments,1),r=0;k[r];){if(h=k[r],h.handler.apply(h.context,d)===!1)return!1;r+=1}return!0},L.prototype.hasListener=function(w){return this.getListenerLength(w)>0},L.prototype.getListenerLength=function(w){var k=this._safeEvent(w);return k.length},It.exports=L},function(It,Wt,$){function X(dt){return typeof dt=="string"||dt instanceof String}It.exports=X},function(It,Wt,$){var X=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,dt={leadingZero:function(S,D){var v="",f=0;if((S+"").length>D)return S+"";for(;f<D-1;f+=1)v+="0";return(v+S).slice(D*-1)},isValidRGB:function(S){return X.test(S)},hexToRGB:function(S){var D,v,f;return dt.isValidRGB(S)?(S=S.substring(1),D=parseInt(S.substr(0,2),16),v=parseInt(S.substr(2,2),16),f=parseInt(S.substr(4,2),16),[D,v,f]):!1},rgbToHEX:function(S,D,v){var f="#"+dt.leadingZero(S.toString(16),2)+dt.leadingZero(D.toString(16),2)+dt.leadingZero(v.toString(16),2);return dt.isValidRGB(f)?f:!1},rgbToHSV:function(S,D,v){var f,A,O,L,w,k;if(S/=255,D/=255,v/=255,f=Math.max(S,D,v),A=Math.min(S,D,v),w=f,k=f-A,L=f===0?0:k/f,f===A)O=0;else{switch(f){case S:O=(D-v)/k+(D<v?6:0);break;case D:O=(v-S)/k+2;break;case v:O=(S-D)/k+4;break}O/=6}return[Math.round(O*360),Math.round(L*100),Math.round(w*100)]},hsvToRGB:function(S,D,v){var f,A,O,L,w,k,d,r;if(S=Math.max(0,Math.min(360,S)),D=Math.max(0,Math.min(100,D)),v=Math.max(0,Math.min(100,v)),D/=100,v/=100,D===0)return f=A=O=v,[Math.round(f*255),Math.round(A*255),Math.round(O*255)];switch(S/=60,L=Math.floor(S),w=S-L,k=v*(1-D),d=v*(1-D*w),r=v*(1-D*(1-w)),L){case 0:f=v,A=r,O=k;break;case 1:f=d,A=v,O=k;break;case 2:f=k,A=v,O=r;break;case 3:f=k,A=d,O=v;break;case 4:f=r,A=k,O=v;break;default:f=v,A=k,O=d;break}return[Math.round(f*255),Math.round(A*255),Math.round(O*255)]}};It.exports=dt},function(It,Wt,$){function X(dt){return dt instanceof Function}It.exports=X},function(It,Wt,$){var X=$(11),dt=$(2),S=$(26);function D(A,O,L,w){if(X(O)){dt(O.split(/\s+/g),function(k){v(A,k,L,w)});return}dt(O,function(k,d){v(A,d,k,L)})}function v(A,O,L,w){function k(d){L.call(w||A,d||window.event)}"addEventListener"in A?A.addEventListener(O,k):"attachEvent"in A&&A.attachEvent("on"+O,k),f(A,O,L,k)}function f(A,O,L,w){var k=S(A,O),d=!1;dt(k,function(r){return r.handler===L?(d=!0,!1):!0}),d||k.push({handler:L,wrappedHandler:w})}It.exports=D},function(It,Wt,$){function X(dt){if(dt.preventDefault){dt.preventDefault();return}dt.returnValue=!1}It.exports=X},function(It,Wt,$){function X(dt){return dt.replace(/([A-Z])/g,function(S){return"-"+S.toLowerCase()})}It.exports=X},function(It,Wt,$){var X=$(11),dt=$(2),S=$(26);function D(A,O,L){if(X(O)){dt(O.split(/\s+/g),function(w){v(A,w,L)});return}dt(O,function(w,k){v(A,k,w)})}function v(A,O,L){var w=S(A,O),k;L?(dt(w,function(d,r){return L===d.handler?(f(A,O,d.wrappedHandler),k=r,!1):!0}),w.splice(k,1)):(dt(w,function(d){f(A,O,d.wrappedHandler)}),w.splice(0,w.length))}function f(A,O,L){"removeEventListener"in A?A.removeEventListener(O,L):"detachEvent"in A&&A.detachEvent("on"+O,L)}It.exports=D},function(It,Wt,$){var X=$(50);function dt(S,D){var v=X(D.prototype);v.constructor=S,S.prototype=v}It.exports=dt},function(It,Wt,$){var X=$(6),dt=$(7),S=$(0),D=$(1),v=$(20),f=$(13),A=$(21),O=$(4),L=Array.prototype.slice;function w(k){this.items={},this.length=0,f(k)&&(this.getItemID=k)}w.and=function(k){var d;return k=L.call(arguments),d=k.length,function(r){for(var h=0;h<d;h+=1)if(!k[h].call(null,r))return!1;return!0}},w.or=function(k){var d;return k=L.call(arguments),d=k.length,function(r){for(var h=1,u=k[0].call(null,r);h<d;h+=1)u=u||k[h].call(null,r);return u}},w.merge=function(k){var d={},r=new w(k.getItemID);return X(arguments,function(h){S(d,h.items)}),r.items=d,r.length=O.getLength(r.items),r},w.prototype.getItemID=function(k){return k._id+""},w.prototype.add=function(k){var d,r;if(arguments.length>1){X(L.call(arguments),function(h){this.add(h)},this);return}d=this.getItemID(k),r=this.items,r[d]||(this.length+=1),r[d]=k},w.prototype.remove=function(k){var d=[],r,h;return this.length?arguments.length>1?(d=O.map(L.call(arguments),function(u){return this.remove(u)},this),d):(r=this.items,A(k)&&(k=this.getItemID(k)),r[k]?(this.length-=1,h=r[k],delete r[k],h):d):d},w.prototype.clear=function(){this.items={},this.length=0},w.prototype.has=function(k){var d,r;return this.length?(d=f(k),r=!1,d?this.each(function(h){return k(h)===!0?(r=!0,!1):!0}):(k=A(k)?this.getItemID(k):k,r=v(this.items[k])),r):!1},w.prototype.doWhenHas=function(k,d,r){var h=this.items[k];!v(h)||d.call(r||this,h)},w.prototype.find=function(k){var d=new w;return this.hasOwnProperty("getItemID")&&(d.getItemID=this.getItemID),this.each(function(r){k(r)===!0&&d.add(r)}),d},w.prototype.groupBy=function(k,d){var r={},h=f(k),u=this.getItemID,t,a;if(D(k)){if(X(k,function(n){r[n+""]=new w(u)}),!d)return r;k=d,h=!0}return this.each(function(n){h?a=k(n):(a=n[k],f(a)&&(a=a.apply(n))),t=r[a],t||(t=r[a]=new w(u)),t.add(n)}),r},w.prototype.single=function(){var k;return this.each(function(d){return k=d,!1},this),k},w.prototype.sort=function(k){var d=[];return this.each(function(r){d.push(r)}),f(k)&&(d=d.sort(k)),d},w.prototype.each=function(k,d){dt(this.items,k,d||this)},w.prototype.toArray=function(){return this.length?O.map(this.items,function(k){return k}):[]},It.exports=w},function(It,Wt,$){var X=$(3),dt=$(36);function S(D){return!X(D)&&!dt(D)}It.exports=S},function(It,Wt,$){function X(dt){return dt===Object(dt)}It.exports=X},function(It,Wt,$){var X={chrome:!1,firefox:!1,safari:!1,msie:!1,edge:!1,others:!1,version:0};typeof window<"u"&&window.navigator&&dt();function dt(){var S=window.navigator,D=S.appName.replace(/\s/g,"_"),v=S.userAgent,f=/MSIE\s([0-9]+[.0-9]*)/,A=/Trident.*rv:11\./,O=/Edge\/(\d+)\./,L={firefox:/Firefox\/(\d+)\./,chrome:/Chrome\/(\d+)\./,safari:/Version\/([\d.]+).*Safari\/(\d+)/},w,k,d={Microsoft_Internet_Explorer:function(){var h=v.match(f);h?(X.msie=!0,X.version=parseFloat(h[1])):X.others=!0},Netscape:function(){var h=!1;if(A.exec(v))X.msie=!0,X.version=11,h=!0;else if(O.exec(v))X.edge=!0,X.version=v.match(O)[1],h=!0;else for(w in L)if(L.hasOwnProperty(w)&&(k=v.match(L[w]),k&&k.length>1)){X[w]=h=!0,X.version=parseFloat(k[1]||0);break}h||(X.others=!0)}},r=d[D];r&&d[D]()}It.exports=X},function(It,Wt,$){var X=$(3);function dt(S){return!S||!S.className?"":X(S.className.baseVal)?S.className:S.className.baseVal}It.exports=dt},function(It,Wt,$){(function(X){var dt=$(10),S=$(42),D=$(44),v=$(47),f=$(28),A=$(17),O=$(14),L=$(15),w=$(0);function k(d,r){O(r,"mousedown",this._onMouseDown,this),this.options=w({distance:10},d),this.container=r,this._isMoved=!1,this._distance=0,this._dragStartFired=!1,this._dragStartEventData=null}k.prototype.destroy=function(){A(this.container,"mousedown",this._onMouseDown),this.options=this.container=this._isMoved=this._distance=this._dragStartFired=this._dragStartEventData=null},k.prototype._toggleDragEvent=function(d){var r=this.container;d?(S(r),O(window,"dragstart",L),O(X.document,{mousemove:this._onMouseMove,mouseup:this._onMouseUp},this)):(D(r),A(window,"dragstart",L),A(X.document,{mousemove:this._onMouseMove,mouseup:this._onMouseUp}))},k.prototype._getEventData=function(d){return{target:f(d),originEvent:d}},k.prototype._onMouseDown=function(d){v(d)===0&&(this._distance=0,this._dragStartFired=!1,this._dragStartEventData=this._getEventData(d),this._toggleDragEvent(!0))},k.prototype._onMouseMove=function(d){var r=this.options.distance;if(L(d),this._isMoved=!0,this._distance<r){this._distance+=1;return}if(!this._dragStartFired&&(this._dragStartFired=!0,!this.invoke("dragStart",this._dragStartEventData))){this._toggleDragEvent(!1);return}this.fire("drag",this._getEventData(d))},k.prototype._onMouseUp=function(d){if(this._toggleDragEvent(!1),this._isMoved){this._isMoved=!1,this.fire("dragEnd",this._getEventData(d));return}this.fire("click",this._getEventData(d))},dt.mixin(k),It.exports=k}).call(this,$(25))},function(It,Wt){var $;$=function(){return this}();try{$=$||new Function("return this")()}catch{typeof window=="object"&&($=window)}It.exports=$},function(It,Wt,$){var X="_feEventKey";function dt(S,D){var v=S[X],f;return v||(v=S[X]={}),f=v[D],f||(f=v[D]=[]),f}It.exports=dt},function(It,Wt,$){function X(dt){var S=document.documentElement.style,D,v;for(D=0,v=dt.length;D<v;D+=1)if(dt[D]in S)return dt[D];return!1}It.exports=X},function(It,Wt,$){function X(dt){return dt.target||dt.srcElement}It.exports=X},function(It,Wt,$){var X=$(10),dt=$(28),S=$(17),D=$(14),v=$(30),f=$(0),A=$(18),O=$(9),L=$(12),w=$(8),k=$(51);function d(r,h){this.options=f({cssPrefix:"tui-colorpicker-",preset:["#181818","#282828","#383838","#585858","#B8B8B8","#D8D8D8","#E8E8E8","#F8F8F8","#AB4642","#DC9656","#F7CA88","#A1B56C","#86C1B9","#7CAFC2","#BA8BAF","#A16946"],detailTxt:"Detail"},r),h=O.appendHTMLElement("div",h,this.options.cssPrefix+"palette-container"),w.call(this,r,h)}A(d,w),d.prototype._onClick=function(r){var h=this.options,u=dt(r),t={};if(v(u,h.cssPrefix+"palette-button")){t.color=u.value,this.fire("_selectColor",t);return}v(u,h.cssPrefix+"palette-toggle-slider")&&this.fire("_toggleSlider")},d.prototype._onChange=function(r){var h=this.options,u=dt(r),t={};v(u,h.cssPrefix+"palette-hex")&&(t.color=u.value,this.fire("_selectColor",t))},d.prototype._beforeDestroy=function(){this._toggleEvent(!1)},d.prototype._toggleEvent=function(r){var h=this.options,u=this.container,t=r?D:S,a;t(u,"click",this._onClick,this),a=u.querySelector("."+h.cssPrefix+"palette-hex",u),a&&t(a,"change",this._onChange,this)},d.prototype.render=function(r){var h=this.options,u="";this._toggleEvent(!1),u=k({cssPrefix:h.cssPrefix,preset:h.preset,detailTxt:h.detailTxt,color:r,isValidRGB:L.isValidRGB,getItemClass:function(t){return t?"":" "+h.cssPrefix+"color-transparent"},isSelected:function(t){return t===r?" "+h.cssPrefix+"selected":""}}),this.container.innerHTML=u,this._toggleEvent(!0)},X.mixin(d),It.exports=d},function(It,Wt,$){var X=$(5),dt=$(23);function S(D,v){var f;return D.classList?D.classList.contains(v):(f=dt(D).split(/\s+/),X(v,f)>-1)}It.exports=S},function(It,Wt,$){var X=$(10),dt=$(53),S=$(54),D=$(30),v=$(0),f=$(18),A=$(9),O=$(32),L=$(12),w=$(8),k=$(24),d=$(57),r=-7,h=112,u=-3,t=115,a=359.99;function n(s,m){m=A.appendHTMLElement("div",m,s.cssPrefix+"slider-container"),m.style.display="none",w.call(this,s,m),this.options=v({color:"#f8f8f8",cssPrefix:"tui-colorpicker-"},s),this._dragDataCache={},this.sliderHandleElement=null,this.huebarHandleElement=null,this.baseColorElement=null,this.drag=new k({distance:0},m),this.colorSliderPosLimitRange=[r,h],this.huebarPosLimitRange=[u,t],this.drag.on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd,click:this._onClick},this)}f(n,w),n.prototype._beforeDestroy=function(){this.drag.off(),this.drag=this.options=this._dragDataCache=this.sliderHandleElement=this.huebarHandleElement=this.baseColorElement=null},n.prototype.toggle=function(s){this.container.style.display=s?"block":"none"},n.prototype.isVisible=function(){return this.container.style.display==="block"},n.prototype.render=function(s){var m=this.container,o=this.options,p=d.layout,y,I;!L.isValidRGB(s)||(p=p.replace(/{{slider}}/,d.slider),p=p.replace(/{{huebar}}/,d.huebar),p=p.replace(/{{cssPrefix}}/g,o.cssPrefix),p=p.replace(/{{id}}/g,o.id),this.container.innerHTML=p,this.sliderSvgElement=m.querySelector("."+o.cssPrefix+"svg-slider"),this.huebarSvgElement=m.querySelector("."+o.cssPrefix+"svg-huebar"),this.sliderHandleElement=m.querySelector("."+o.cssPrefix+"slider-handle"),this.huebarHandleElement=m.querySelector("."+o.cssPrefix+"huebar-handle"),this.baseColorElement=m.querySelector("."+o.cssPrefix+"slider-basecolor"),y=L.hexToRGB(s),I=L.rgbToHSV.apply(null,y),this.moveHue(I[0],!0),this.moveSaturationAndValue(I[1],I[2],!0))},n.prototype._setColorSliderPosMax=function(){var s=this.sliderSvgElement.getClientRects()[0];s&&(this.colorSliderPosLimitRange[1]=s.height-10)},n.prototype._moveColorSliderHandle=function(s,m,o){var p=this.sliderHandleElement,y;m=Math.max(this.colorSliderPosLimitRange[0],m),m=Math.min(this.colorSliderPosLimitRange[1],m),s=Math.max(this.colorSliderPosLimitRange[0],s),s=Math.min(this.colorSliderPosLimitRange[1],s),O.setTranslateXY(p,s,m),y=m>50?"white":"black",O.setStrokeColor(p,y),o||this.fire("_selectColor",{color:L.rgbToHEX.apply(null,this.getRGB())})},n.prototype.moveSaturationAndValue=function(s,m,o){var p,y,I,b;s=s||0,m=m||0,p=Math.abs(this.colorSliderPosLimitRange[0]),y=this.colorSliderPosLimitRange[1],I=s*y/100-p,b=y-m*y/100-p,this._moveColorSliderHandle(I,b,o)},n.prototype._moveColorSliderByPosition=function(s,m){var o=this.colorSliderPosLimitRange[0];this._moveColorSliderHandle(s+o,m+o)},n.prototype.getSaturationAndValue=function(){var s=Math.abs(this.colorSliderPosLimitRange[0]),m=s+this.colorSliderPosLimitRange[1],o=O.getTranslateXY(this.sliderHandleElement),p,y;return p=(o[1]+s)/m*100,y=100-(o[0]+s)/m*100,[p,y]},n.prototype._setHueBarPosMax=function(){var s=this.huebarSvgElement.getClientRects()[0];s&&(this.huebarPosLimitRange[1]=s.height-7)},n.prototype._moveHueHandle=function(s,m){var o=this.huebarHandleElement,p=this.baseColorElement,y,I;s=Math.max(this.huebarPosLimitRange[0],s),s=Math.min(this.huebarPosLimitRange[1],s),O.setTranslateY(o,s),y=L.hsvToRGB(this.getHue(),100,100),I=L.rgbToHEX.apply(null,y),O.setGradientColorStop(p,I),m||this.fire("_selectColor",{color:L.rgbToHEX.apply(null,this.getRGB())})},n.prototype.moveHue=function(s,m){var o=0,p,y;p=Math.abs(this.huebarPosLimitRange[0]),y=p+this.huebarPosLimitRange[1],s=s||0,o=y*s/a-p,this._moveHueHandle(o,m)},n.prototype._moveHueByPosition=function(s){var m=this.huebarPosLimitRange[0];this._moveHueHandle(s+m)},n.prototype.getHue=function(){var s=this.huebarHandleElement,m=O.getTranslateXY(s),o,p;return o=Math.abs(this.huebarPosLimitRange[0]),p=o+this.huebarPosLimitRange[1],(m[0]+o)*a/p},n.prototype.getHSV=function(){var s=this.getSaturationAndValue(),m=this.getHue();return[m].concat(s)},n.prototype.getRGB=function(){return L.hsvToRGB.apply(null,this.getHSV())},n.prototype._prepareColorSliderForMouseEvent=function(s){var m=this.options,o=S(s.target,"."+m.cssPrefix+"slider-part"),p;return p=this._dragDataCache={isColorSlider:D(o,m.cssPrefix+"slider-left"),parentElement:o},p},n.prototype._onClick=function(s){var m=this._prepareColorSliderForMouseEvent(s),o=dt(s.originEvent,m.parentElement);m.isColorSlider?this._moveColorSliderByPosition(o[0],o[1]):this._moveHueByPosition(o[1]),this._dragDataCache=null},n.prototype._onDragStart=function(s){this._setColorSliderPosMax(),this._setHueBarPosMax(),this._prepareColorSliderForMouseEvent(s)},n.prototype._onDrag=function(s){var m=this._dragDataCache,o=dt(s.originEvent,m.parentElement);m.isColorSlider?this._moveColorSliderByPosition(o[0],o[1]):this._moveHueByPosition(o[1])},n.prototype._onDragEnd=function(){this._dragDataCache=null},X.mixin(n),It.exports=n},function(It,Wt,$){var X=$(4).isOldBrowser,dt=/[\.\-0-9]+/g,S=-6,D={getTranslateXY:function(v){var f;return X?(f=v.style,[parseFloat(f.top),parseFloat(f.left)]):(f=v.getAttribute("transform"),f?(f=f.match(dt),[parseFloat(f[1]),parseFloat(f[0])]):[0,0])},setTranslateXY:function(v,f,A){X?(v.style.left=f+"px",v.style.top=A+"px"):v.setAttribute("transform","translate("+f+","+A+")")},setTranslateY:function(v,f){X?v.style.top=f+"px":v.setAttribute("transform","translate("+S+","+f+")")},setStrokeColor:function(v,f){X?v.strokecolor=f:v.setAttribute("stroke",f)},setGradientColorStop:function(v,f){X?v.color=f:v.setAttribute("stop-color",f)}};It.exports=D},function(It,Wt,$){$(34),It.exports=$(35)},function(It,Wt,$){},function(It,Wt,$){var X=$(19),dt=$(8),S=$(24),D=$(48),v=$(29),f=$(31),A=$(12),O=$(32),L={Collection:X,View:dt,Drag:S,create:D,Palette:v,Slider:f,colorutil:A,svgvml:O};It.exports=L},function(It,Wt,$){function X(dt){return dt===null}It.exports=X},function(It,Wt,$){var X=$(3),dt=$(38),S=7*24*60*60*1e3;function D(f){var A=new Date().getTime();return A-f>S}function v(f,A){var O="https://www.google-analytics.com/collect",L=location.hostname,w="event",k="use",d="TOAST UI "+f+" for "+L+": Statistics",r=window.localStorage.getItem(d);!X(window.tui)&&window.tui.usageStatistics===!1||r&&!D(r)||(window.localStorage.setItem(d,new Date().getTime()),setTimeout(function(){(document.readyState==="interactive"||document.readyState==="complete")&&dt(O,{v:1,t:w,tid:A,cid:L,dp:L,dh:f,el:f,ec:k})},1e3))}It.exports=v},function(It,Wt,$){var X=$(7);function dt(S,D){var v=document.createElement("img"),f="";return X(D,function(A,O){f+="&"+O+"="+A}),f=f.substring(1),v.src=S+"?"+f,v.style.display="none",document.body.appendChild(v),document.body.removeChild(v),v}It.exports=dt},function(It,Wt,$){var X=$(2),dt=$(5),S=$(23),D=$(40);function v(f){var A=Array.prototype.slice.call(arguments,1),O=f.classList,L=[],w;if(O){X(A,function(k){f.classList.add(k)});return}w=S(f),w&&(A=[].concat(w.split(/\s+/),A)),X(A,function(k){dt(k,L)<0&&L.push(k)}),D(f,L)}It.exports=v},function(It,Wt,$){var X=$(1),dt=$(3);function S(D,v){if(v=X(v)?v.join(" "):v,v=v.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),dt(D.className.baseVal)){D.className=v;return}D.className.baseVal=v}It.exports=S},function(It,Wt,$){function X(dt){return typeof dt=="number"||dt instanceof Number}It.exports=X},function(It,Wt,$){var X=$(14),dt=$(15),S=$(43),D=$(27),v="onselectstart"in document,f="prevUserSelect",A=D(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);function O(L){L||(L=document),v?X(L,"selectstart",dt):(L=L===document?document.documentElement:L,S(L,f,L.style[A]),L.style[A]="none")}It.exports=O},function(It,Wt,$){var X=$(16);function dt(S,D,v){if(S.dataset){S.dataset[D]=v;return}S.setAttribute("data-"+X(D),v)}It.exports=dt},function(It,Wt,$){var X=$(17),dt=$(15),S=$(45),D=$(46),v=$(27),f="onselectstart"in document,A="prevUserSelect",O=v(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);function L(w){w||(w=document),f?X(w,"selectstart",dt):(w=w===document?document.documentElement:w,w.style[O]=S(w,A)||"auto",D(w,A))}It.exports=L},function(It,Wt,$){var X=$(16);function dt(S,D){return S.dataset?S.dataset[D]:S.getAttribute("data-"+X(D))}It.exports=dt},function(It,Wt,$){var X=$(16);function dt(S,D){if(S.dataset){delete S.dataset[D];return}S.removeAttribute("data-"+X(D))}It.exports=dt},function(It,Wt,$){var X=$(22),dt=$(5),S=["0","1","3","5","7"],D=["2","6"],v=["4"];function f(O){return X.msie&&X.version<=8?A(O):O.button}function A(O){var L=String(O.button);return dt(L,S)>-1?0:dt(L,D)>-1?2:dt(L,v)>-1?1:null}It.exports=f},function(It,Wt,$){var X=$(10),dt=$(0),S=$(4),D=$(12),v=$(49),f=$(29),A=$(31),O=0;function L(){return O+=1,O}function w(k){var d;if(!(this instanceof w))return new w(k);if(k=this.options=dt({container:null,color:"#f8f8f8",preset:["#181818","#282828","#383838","#585858","#b8b8b8","#d8d8d8","#e8e8e8","#f8f8f8","#ab4642","#dc9656","#f7ca88","#a1b56c","#86c1b9","#7cafc2","#ba8baf","#a16946"],cssPrefix:"tui-colorpicker-",detailTxt:"Detail",id:L(),usageStatistics:!0},k),!k.container)throw new Error("ColorPicker(): need container option.");d=this.layout=new v(k,k.container),this.palette=new f(k,d.container),this.palette.on({_selectColor:this._onSelectColorInPalette,_toggleSlider:this._onToggleSlider},this),this.slider=new A(k,d.container),this.slider.on("_selectColor",this._onSelectColorInSlider,this),d.addChild(this.palette),d.addChild(this.slider),this.render(k.color),k.usageStatistics&&S.sendHostName()}w.prototype._onSelectColorInPalette=function(k){var d=k.color,r=this.options;if(!D.isValidRGB(d)&&d!==""){this.render();return}this.fire("selectColor",{color:d,origin:"palette"}),r.color!==d&&(r.color=d,this.render(d))},w.prototype._onToggleSlider=function(){this.slider.toggle(!this.slider.isVisible())},w.prototype._onSelectColorInSlider=function(k){var d=k.color,r=this.options;this.fire("selectColor",{color:d,origin:"slider"}),r.color!==d&&(r.color=d,this.palette.render(d))},w.prototype.setColor=function(k){if(!D.isValidRGB(k))throw new Error("ColorPicker#setColor(): need valid hex string color value");this.options.color=k,this.render(k)},w.prototype.getColor=function(){return this.options.color},w.prototype.toggle=function(k){this.layout.container.style.display=k?"block":"none"},w.prototype.render=function(k){this.layout.render(k||this.options.color)},w.prototype.destroy=function(){this.layout.destroy(),this.options.container.innerHTML="",this.layout=this.slider=this.palette=this.options=null},X.mixin(w),It.exports=w},function(It,Wt,$){var X=$(0),dt=$(18),S=$(9),D=$(8);function v(f,A){this.options=X({cssPrefix:"tui-colorpicker-"},f),A=S.appendHTMLElement("div",A,this.options.cssPrefix+"container"),D.call(this,f,A),this.render()}dt(v,D),v.prototype.render=function(f){this.recursive(function(A){A.render(f)},!0)},It.exports=v},function(It,Wt,$){function X(dt){function S(){}return S.prototype=dt,new S}It.exports=X},function(It,Wt,$){var X=$(52);It.exports=function(dt){var S=['<li><input class="{{cssPrefix}}palette-button{{isSelected @this}}{{getItemClass @this}}" type="button"',"{{if isValidRGB @this}}",' style="background-color:{{@this}};color:{{@this}}"',"{{/if}}",' title="{{@this}}" value="{{@this}}" /></li>'].join(""),D=['<ul class="{{cssPrefix}}clearfix">',"{{each preset}}",S,"{{/each}}","</ul>",'<div class="{{cssPrefix}}clearfix" style="overflow:hidden">','<input type="button" class="{{cssPrefix}}palette-toggle-slider" value="{{detailTxt}}" />','<input type="text" class="{{cssPrefix}}palette-hex" value="{{color}}" maxlength="7" />','<span class="{{cssPrefix}}palette-preview" style="background-color:{{color}};color:{{color}}">{{color}}</span>',"</div>"].join(`
`);return X(D,dt)}},function(It,Wt,$){var X=$(5),dt=$(2),S=$(1),D=$(11),v=$(0),f=/{{\s?|\s?}}/g,A=/^[a-zA-Z0-9_@]+\[[a-zA-Z0-9_@"']+\]$/,O=/\[\s?|\s?\]/,L=/^[a-zA-Z_]+\.[a-zA-Z_]+$/,w=/\./,k=/^["']\w+["']$/,d=/"|'/g,r=/^-?\d+\.?\d*$/,h=2,u={if:m,each:o,with:p},t="a".split(/a/).length===3,a=function(){return t?function(j,H){return j.split(H)}:function(j,H){var nt=[],q=0,Ct,V;for(H.global||(H=new RegExp(H,"g")),Ct=H.exec(j);Ct!==null;)V=Ct.index,nt.push(j.slice(q,V)),q=V+Ct[0].length,Ct=H.exec(j);return nt.push(j.slice(q)),nt}}();function n(j,H){var nt,q=H[j];return j==="true"?q=!0:j==="false"?q=!1:k.test(j)?q=j.replace(d,""):A.test(j)?(nt=j.split(O),q=n(nt[0],H)[n(nt[1],H)]):L.test(j)?(nt=j.split(w),q=n(nt[0],H)[nt[1]]):r.test(j)&&(q=parseFloat(j)),q}function s(j,H){var nt=[j],q=[],Ct=0,V=0;return dt(H,function(pt,F){pt.indexOf("if")===0?Ct+=1:pt==="/if"?Ct-=1:!Ct&&(pt.indexOf("elseif")===0||pt==="else")&&(nt.push(pt==="else"?["true"]:pt.split(" ").slice(1)),q.push(H.slice(V,F)),V=F+1)}),q.push(H.slice(V)),{exps:nt,sourcesInsideIf:q}}function m(j,H,nt){var q=s(j,H),Ct=!1,V="";return dt(q.exps,function(pt,F){return Ct=b(pt,nt),Ct&&(V=P(q.sourcesInsideIf[F],nt)),!Ct}),V}function o(j,H,nt){var q=b(j,nt),Ct=S(q)?"@index":"@key",V={},pt="";return dt(q,function(F,Rt){V[Ct]=Rt,V["@this"]=F,v(nt,V),pt+=P(H.slice(),nt)}),pt}function p(j,H,nt){var q=X("as",j),Ct=j[q+1],V=b(j.slice(0,q),nt),pt={};return pt[Ct]=V,P(H,v(nt,pt))||""}function y(j,H,nt){var q=j.splice(H+1,nt-H);return q.pop(),q}function I(j,H,nt){for(var q=u[j],Ct=1,V=0,pt,F=V+h,Rt=H[F];Ct&&D(Rt);)Rt.indexOf(j)===0?Ct+=1:Rt.indexOf("/"+j)===0&&(Ct-=1,pt=F),F+=h,Rt=H[F];if(Ct)throw Error(j+" needs {{/"+j+"}} expression.");return H[V]=q(H[V].split(" ").slice(1),y(H,V,pt),nt),H}function b(j,H){var nt=n(j[0],H);return nt instanceof Function?T(nt,j.slice(1),H):nt}function T(j,H,nt){var q=[];return dt(H,function(Ct){q.push(n(Ct,nt))}),j.apply(null,q)}function P(j,H){for(var nt=1,q=j[nt],Ct,V,pt;D(q);)Ct=q.split(" "),V=Ct[0],u[V]?(pt=I(V,j.splice(nt,j.length-nt),H),j=j.concat(pt)):j[nt]=b(Ct,H),nt+=h,q=j[nt];return j.join("")}function z(j,H){return P(a(j,f),H)}It.exports=z},function(It,Wt,$){var X=$(1);function dt(S,D){var v=X(S),f=v?S[0]:S.clientX,A=v?S[1]:S.clientY,O;return D?(O=D.getBoundingClientRect(),[f-O.left-D.clientLeft,A-O.top-D.clientTop]):[f,A]}It.exports=dt},function(It,Wt,$){var X=$(55);function dt(S,D){var v=S.parentNode;if(X(S,D))return S;for(;v&&v!==document;){if(X(v,D))return v;v=v.parentNode}return null}It.exports=dt},function(It,Wt,$){var X=$(5),dt=$(56),S=Element.prototype,D=S.matches||S.webkitMatchesSelector||S.mozMatchesSelector||S.msMatchesSelector||function(f){var A=this.document||this.ownerDocument;return X(this,dt(A.querySelectorAll(f)))>-1};function v(f,A){return D.call(f,A)}It.exports=v},function(It,Wt,$){var X=$(6);function dt(S){var D;try{D=Array.prototype.slice.call(S)}catch{D=[],X(S,function(f){D.push(f)})}return D}It.exports=dt},function(It,Wt,$){(function(X){var dt=$(4).isOldBrowser,S=['<div class="{{cssPrefix}}slider-left {{cssPrefix}}slider-part">{{slider}}</div>','<div class="{{cssPrefix}}slider-right {{cssPrefix}}slider-part">{{huebar}}</div>'].join(`
`),D=['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-slider">',"<defs>",'<linearGradient id="{{cssPrefix}}svg-fill-color-{{id}}" x1="0%" y1="0%" x2="100%" y2="0%">','<stop offset="0%" stop-color="rgb(255,255,255)" />','<stop class="{{cssPrefix}}slider-basecolor" offset="100%" stop-color="rgb(255,0,0)" />',"</linearGradient>",'<linearGradient id="{{cssPrefix}}svn-fill-black-{{id}}" x1="0%" y1="0%" x2="0%" y2="100%">','<stop offset="0%" style="stop-color:rgb(0,0,0);stop-opacity:0" />','<stop offset="100%" style="stop-color:rgb(0,0,0);stop-opacity:1" />',"</linearGradient>","</defs>",'<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svg-fill-color-{{id}})"></rect>','<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svn-fill-black-{{id}})"></rect>','<path transform="translate(0,0)" class="{{cssPrefix}}slider-handle" d="M0 7.5 L15 7.5 M7.5 15 L7.5 0 M2 7 a5.5 5.5 0 1 1 0 1 Z" stroke="black" stroke-width="0.75" fill="none" />',"</svg>"].join(`
`),v=['<div class="{{cssPrefix}}vml-slider">','<v:rect strokecolor="none" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">','<v:fill class="{{cssPrefix}}vml {{cssPrefix}}slider-basecolor" type="gradient" method="none" color="#ff0000" color2="#fff" angle="90" />',"</v:rect>",'<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">','<v:fill type="gradient" method="none" color="black" color2="white" o:opacity2="0%" class="{{cssPrefix}}vml" />',"</v:rect>",'<v:shape class="{{cssPrefix}}vml {{cssPrefix}}slider-handle" coordsize="1 1" style="width:1px;height:1px;"path="m 0,7 l 14,7 m 7,14 l 7,0 ar 12,12 2,2 z" filled="false" stroked="true" />',"</div>"].join(`
`),f=['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-huebar">',"<defs>",'<linearGradient id="g-{{id}}" x1="0%" y1="0%" x2="0%" y2="100%">','<stop offset="0%" stop-color="rgb(255,0,0)" />','<stop offset="16.666%" stop-color="rgb(255,255,0)" />','<stop offset="33.333%" stop-color="rgb(0,255,0)" />','<stop offset="50%" stop-color="rgb(0,255,255)" />','<stop offset="66.666%" stop-color="rgb(0,0,255)" />','<stop offset="83.333%" stop-color="rgb(255,0,255)" />','<stop offset="100%" stop-color="rgb(255,0,0)" />',"</linearGradient>","</defs>",'<rect width="18px" height="100%" fill="url(#g-{{id}})"></rect>','<path transform="translate(-6,-3)" class="{{cssPrefix}}huebar-handle" d="M0 0 L4 4 L0 8 L0 0 Z" fill="black" stroke="none" />',"</svg>"].join(`
`),A=['<div class="{{cssPrefix}}vml-huebar">','<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-huebar-bg">','<v:fill type="gradient" method="none" colors="0% rgb(255,0,0), 16.666% rgb(255,255,0), 33.333% rgb(0,255,0), 50% rgb(0,255,255), 66.666% rgb(0,0,255), 83.333% rgb(255,0,255), 100% rgb(255,0,0)" angle="180" class="{{cssPrefix}}vml" />',"</v:rect>",'<v:shape class="{{cssPrefix}}vml {{cssPrefix}}huebar-handle" coordsize="1 1" style="width:1px;height:1px;position:absolute;z-index:1;right:22px;top:-3px;"path="m 0,0 l 4,4 l 0,8 l 0,0 z" filled="true" fillcolor="black" stroked="false" />',"</div>"].join(`
`);dt&&X.document.namespaces.add("v","urn:schemas-microsoft-com:vml"),It.exports={layout:S,slider:dt?v:D,huebar:dt?A:f}}).call(this,$(25))}])})}(on)),on.exports}/*!
 * TOAST UI ImageEditor
 * @version 3.15.3
 * @license MIT
 */(function(Fe,Je){(function(Wt,$){Fe.exports=$(hu())})(self,function(It){return function(){var Wt={2777:function(S,D,v){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var f=f||{version:"4.6.0"};if(D.fabric=f,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?f.document=document:f.document=document.implementation.createHTMLDocument(""),f.window=window;else{var A=v(4960),O=new A.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;f.document=O.document,f.jsdomImplForWrapper=v(6759).implForWrapper,f.nodeCanvas=v(6272).Canvas,f.window=O,DOMParser=f.window.DOMParser}f.isTouchSupported="ontouchstart"in f.window||"ontouchstart"in f.document||f.window&&f.window.navigator&&f.window.navigator.maxTouchPoints>0,f.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",f.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],f.DPI=96,f.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",f.commaWsp="(?:\\s+,?\\s*|,\\s*)",f.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,f.reNonWord=/[ \n\.,;!\?\-]/,f.fontPaths={},f.iMatrix=[1,0,0,1,0,0],f.svgNS="http://www.w3.org/2000/svg",f.perfLimitSizeTotal=2097152,f.maxCacheSideLimit=4096,f.minCacheSideLimit=256,f.charWidthsCache={},f.textureSize=2048,f.disableStyleCopyPaste=!1,f.enableGLFiltering=!0,f.devicePixelRatio=f.window.devicePixelRatio||f.window.webkitDevicePixelRatio||f.window.mozDevicePixelRatio||1,f.browserShadowBlurConstant=1,f.arcToSegmentsCache={},f.boundsOfCurveCache={},f.cachesBoundsOfCurve=!0,f.forceGLPutImageData=!1,f.initFilterBackend=function(){if(f.enableGLFiltering&&f.isWebglSupported&&f.isWebglSupported(f.textureSize))return console.log("max texture size: "+f.maxTextureSize),new f.WebglFilterBackend({tileSize:f.textureSize});if(f.Canvas2dFilterBackend)return new f.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=f),function(){function d(n,s){if(!!this.__eventListeners[n]){var m=this.__eventListeners[n];s?m[m.indexOf(s)]=!1:f.util.array.fill(m,!1)}}function r(n,s){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var m in n)this.on(m,n[m]);else this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(s);return this}function h(n,s){var m=function(){s.apply(this,arguments),this.off(n,m)}.bind(this);this.on(n,m)}function u(n,s){if(arguments.length===1)for(var m in n)h.call(this,m,n[m]);else h.call(this,n,s);return this}function t(n,s){if(!this.__eventListeners)return this;if(arguments.length===0)for(n in this.__eventListeners)d.call(this,n);else if(arguments.length===1&&typeof arguments[0]=="object")for(var m in n)d.call(this,m,n[m]);else d.call(this,n,s);return this}function a(n,s){if(!this.__eventListeners)return this;var m=this.__eventListeners[n];if(!m)return this;for(var o=0,p=m.length;o<p;o++)m[o]&&m[o].call(this,s||{});return this.__eventListeners[n]=m.filter(function(y){return y!==!1}),this}f.Observable={fire:a,on:r,once:u,off:t}}(),f.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var d=0,r=arguments.length;d<r;d++)this._onObjectAdded(arguments[d]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(d,r,h){var u=this._objects;return h?u[r]=d:u.splice(r,0,d),this._onObjectAdded&&this._onObjectAdded(d),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var d=this._objects,r,h=!1,u=0,t=arguments.length;u<t;u++)r=d.indexOf(arguments[u]),r!==-1&&(h=!0,d.splice(r,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[u]));return this.renderOnAddRemove&&h&&this.requestRenderAll(),this},forEachObject:function(d,r){for(var h=this.getObjects(),u=0,t=h.length;u<t;u++)d.call(r,h[u],u,h);return this},getObjects:function(d){return typeof d>"u"?this._objects.concat():this._objects.filter(function(r){return r.type===d})},item:function(d){return this._objects[d]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(d,r){return this._objects.indexOf(d)>-1?!0:r?this._objects.some(function(h){return typeof h.contains=="function"&&h.contains(d,!0)}):!1},complexity:function(){return this._objects.reduce(function(d,r){return d+=r.complexity?r.complexity():0,d},0)}},f.CommonMethods={_setOptions:function(d){for(var r in d)this.set(r,d[r])},_initGradient:function(d,r){d&&d.colorStops&&!(d instanceof f.Gradient)&&this.set(r,new f.Gradient(d))},_initPattern:function(d,r,h){d&&d.source&&!(d instanceof f.Pattern)?this.set(r,new f.Pattern(d,h)):h&&h()},_setObject:function(d){for(var r in d)this._set(r,d[r])},set:function(d,r){return typeof d=="object"?this._setObject(d):this._set(d,r),this},_set:function(d,r){this[d]=r},toggle:function(d){var r=this.get(d);return typeof r=="boolean"&&this.set(d,!r),this},get:function(d){return this[d]}},function(d){var r=Math.sqrt,h=Math.atan2,u=Math.pow,t=Math.PI/180,a=Math.PI/2;f.util={cos:function(n){if(n===0)return 1;n<0&&(n=-n);var s=n/a;switch(s){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},sin:function(n){if(n===0)return 0;var s=n/a,m=1;switch(n<0&&(m=-1),s){case 1:return m;case 2:return 0;case 3:return-m}return Math.sin(n)},removeFromArray:function(n,s){var m=n.indexOf(s);return m!==-1&&n.splice(m,1),n},getRandomInt:function(n,s){return Math.floor(Math.random()*(s-n+1))+n},degreesToRadians:function(n){return n*t},radiansToDegrees:function(n){return n/t},rotatePoint:function(n,s,m){var o=new f.Point(n.x-s.x,n.y-s.y),p=f.util.rotateVector(o,m);return new f.Point(p.x,p.y).addEquals(s)},rotateVector:function(n,s){var m=f.util.sin(s),o=f.util.cos(s),p=n.x*o-n.y*m,y=n.x*m+n.y*o;return{x:p,y}},transformPoint:function(n,s,m){return m?new f.Point(s[0]*n.x+s[2]*n.y,s[1]*n.x+s[3]*n.y):new f.Point(s[0]*n.x+s[2]*n.y+s[4],s[1]*n.x+s[3]*n.y+s[5])},makeBoundingBoxFromPoints:function(n,s){if(s)for(var m=0;m<n.length;m++)n[m]=f.util.transformPoint(n[m],s);var o=[n[0].x,n[1].x,n[2].x,n[3].x],p=f.util.array.min(o),y=f.util.array.max(o),I=y-p,b=[n[0].y,n[1].y,n[2].y,n[3].y],T=f.util.array.min(b),P=f.util.array.max(b),z=P-T;return{left:p,top:T,width:I,height:z}},invertTransform:function(n){var s=1/(n[0]*n[3]-n[1]*n[2]),m=[s*n[3],-s*n[1],-s*n[2],s*n[0]],o=f.util.transformPoint({x:n[4],y:n[5]},m,!0);return m[4]=-o.x,m[5]=-o.y,m},toFixed:function(n,s){return parseFloat(Number(n).toFixed(s))},parseUnit:function(n,s){var m=/\D{0,2}$/.exec(n),o=parseFloat(n);switch(s||(s=f.Text.DEFAULT_SVG_FONT_SIZE),m[0]){case"mm":return o*f.DPI/25.4;case"cm":return o*f.DPI/2.54;case"in":return o*f.DPI;case"pt":return o*f.DPI/72;case"pc":return o*f.DPI/72*12;case"em":return o*s;default:return o}},falseFunction:function(){return!1},getKlass:function(n,s){return n=f.util.string.camelize(n.charAt(0).toUpperCase()+n.slice(1)),f.util.resolveNamespace(s)[n]},getSvgAttributes:function(n){var s=["instantiated_by_use","style","id","class"];switch(n){case"linearGradient":s=s.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":s=s.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":s=s.concat(["offset","stop-color","stop-opacity"]);break}return s},resolveNamespace:function(n){if(!n)return f;var s=n.split("."),m=s.length,o,p=d||f.window;for(o=0;o<m;++o)p=p[s[o]];return p},loadImage:function(n,s,m,o){if(!n){s&&s.call(m,n);return}var p=f.util.createImage(),y=function(){s&&s.call(m,p,!1),p=p.onload=p.onerror=null};p.onload=y,p.onerror=function(){f.log("Error loading "+p.src),s&&s.call(m,null,!0),p=p.onload=p.onerror=null},n.indexOf("data")!==0&&o!==void 0&&o!==null&&(p.crossOrigin=o),n.substring(0,14)==="data:image/svg"&&(p.onload=null,f.util.loadImageInDom(p,y)),p.src=n},loadImageInDom:function(n,s){var m=f.document.createElement("div");m.style.width=m.style.height="1px",m.style.left=m.style.top="-100%",m.style.position="absolute",m.appendChild(n),f.document.querySelector("body").appendChild(m),n.onload=function(){s(),m.parentNode.removeChild(m),m=null}},enlivenObjects:function(n,s,m,o){n=n||[];var p=[],y=0,I=n.length;function b(){++y===I&&s&&s(p.filter(function(T){return T}))}if(!I){s&&s(p);return}n.forEach(function(T,P){if(!T||!T.type){b();return}var z=f.util.getKlass(T.type,m);z.fromObject(T,function(j,H){H||(p[P]=j),o&&o(T,j,H),b()})})},enlivenPatterns:function(n,s){n=n||[];function m(){++p===y&&s&&s(o)}var o=[],p=0,y=n.length;if(!y){s&&s(o);return}n.forEach(function(I,b){I&&I.source?new f.Pattern(I,function(T){o[b]=T,m()}):(o[b]=I,m())})},groupSVGElements:function(n,s,m){var o;return n&&n.length===1?n[0]:(s&&(s.width&&s.height?s.centerPoint={x:s.width/2,y:s.height/2}:(delete s.width,delete s.height)),o=new f.Group(n,s),typeof m<"u"&&(o.sourcePath=m),o)},populateWithProperties:function(n,s,m){if(m&&Object.prototype.toString.call(m)==="[object Array]")for(var o=0,p=m.length;o<p;o++)m[o]in n&&(s[m[o]]=n[m[o]])},drawDashedLine:function(n,s,m,o,p,y){var I=o-s,b=p-m,T=r(I*I+b*b),P=h(b,I),z=y.length,j=0,H=!0;for(n.save(),n.translate(s,m),n.moveTo(0,0),n.rotate(P),s=0;T>s;)s+=y[j++%z],s>T&&(s=T),n[H?"lineTo":"moveTo"](s,0),H=!H;n.restore()},createCanvasElement:function(){return f.document.createElement("canvas")},copyCanvasElement:function(n){var s=f.util.createCanvasElement();return s.width=n.width,s.height=n.height,s.getContext("2d").drawImage(n,0,0),s},toDataURL:function(n,s,m){return n.toDataURL("image/"+s,m)},createImage:function(){return f.document.createElement("img")},multiplyTransformMatrices:function(n,s,m){return[n[0]*s[0]+n[2]*s[1],n[1]*s[0]+n[3]*s[1],n[0]*s[2]+n[2]*s[3],n[1]*s[2]+n[3]*s[3],m?0:n[0]*s[4]+n[2]*s[5]+n[4],m?0:n[1]*s[4]+n[3]*s[5]+n[5]]},qrDecompose:function(n){var s=h(n[1],n[0]),m=u(n[0],2)+u(n[1],2),o=r(m),p=(n[0]*n[3]-n[2]*n[1])/o,y=h(n[0]*n[2]+n[1]*n[3],m);return{angle:s/t,scaleX:o,scaleY:p,skewX:y/t,skewY:0,translateX:n[4],translateY:n[5]}},calcRotateMatrix:function(n){if(!n.angle)return f.iMatrix.concat();var s=f.util.degreesToRadians(n.angle),m=f.util.cos(s),o=f.util.sin(s);return[m,o,-o,m,0,0]},calcDimensionsMatrix:function(n){var s=typeof n.scaleX>"u"?1:n.scaleX,m=typeof n.scaleY>"u"?1:n.scaleY,o=[n.flipX?-s:s,0,0,n.flipY?-m:m,0,0],p=f.util.multiplyTransformMatrices,y=f.util.degreesToRadians;return n.skewX&&(o=p(o,[1,0,Math.tan(y(n.skewX)),1],!0)),n.skewY&&(o=p(o,[1,Math.tan(y(n.skewY)),0,1],!0)),o},composeMatrix:function(n){var s=[1,0,0,1,n.translateX||0,n.translateY||0],m=f.util.multiplyTransformMatrices;return n.angle&&(s=m(s,f.util.calcRotateMatrix(n))),(n.scaleX!==1||n.scaleY!==1||n.skewX||n.skewY||n.flipX||n.flipY)&&(s=m(s,f.util.calcDimensionsMatrix(n))),s},resetObjectTransform:function(n){n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},saveObjectTransform:function(n){return{scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}},isTransparent:function(n,s,m,o){o>0&&(s>o?s-=o:s=0,m>o?m-=o:m=0);var p=!0,y,I,b=n.getImageData(s,m,o*2||1,o*2||1),T=b.data.length;for(y=3;y<T&&(I=b.data[y],p=I<=0,p!==!1);y+=4);return b=null,p},parsePreserveAspectRatioAttribute:function(n){var s="meet",m="Mid",o="Mid",p=n.split(" "),y;return p&&p.length&&(s=p.pop(),s!=="meet"&&s!=="slice"?(y=s,s="meet"):p.length&&(y=p.pop())),m=y!=="none"?y.slice(1,4):"none",o=y!=="none"?y.slice(5,8):"none",{meetOrSlice:s,alignX:m,alignY:o}},clearFabricFontCache:function(n){n=(n||"").toLowerCase(),n?f.charWidthsCache[n]&&delete f.charWidthsCache[n]:f.charWidthsCache={}},limitDimsByArea:function(n,s){var m=Math.sqrt(s*n),o=Math.floor(s/m);return{x:Math.floor(m),y:o}},capValue:function(n,s,m){return Math.max(n,Math.min(s,m))},findScaleToFit:function(n,s){return Math.min(s.width/n.width,s.height/n.height)},findScaleToCover:function(n,s){return Math.max(s.width/n.width,s.height/n.height)},matrixToSVG:function(n){return"matrix("+n.map(function(s){return f.util.toFixed(s,f.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(n,s){var m=f.util.invertTransform(s),o=f.util.multiplyTransformMatrices(m,n.calcOwnMatrix());f.util.applyTransformToObject(n,o)},addTransformToObject:function(n,s){f.util.applyTransformToObject(n,f.util.multiplyTransformMatrices(s,n.calcOwnMatrix()))},applyTransformToObject:function(n,s){var m=f.util.qrDecompose(s),o=new f.Point(m.translateX,m.translateY);n.flipX=!1,n.flipY=!1,n.set("scaleX",m.scaleX),n.set("scaleY",m.scaleY),n.skewX=m.skewX,n.skewY=m.skewY,n.angle=m.angle,n.setPositionByOrigin(o,"center","center")},sizeAfterTransform:function(n,s,m){var o=n/2,p=s/2,y=[{x:-o,y:-p},{x:o,y:-p},{x:-o,y:p},{x:o,y:p}],I=f.util.calcDimensionsMatrix(m),b=f.util.makeBoundingBoxFromPoints(y,I);return{x:b.width,y:b.height}}}}(D),function(){var d=Array.prototype.join,r={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},h={m:"l",M:"L"};function u(J,Y,lt,B,U,G,Z,gt,ht,St,bt){var xt=f.util.cos(J),rt=f.util.sin(J),Q=f.util.cos(Y),tt=f.util.sin(Y),ot=lt*U*Q-B*G*tt+Z,ct=B*U*Q+lt*G*tt+gt,vt=St+ht*(-lt*U*rt-B*G*xt),Ot=bt+ht*(-B*U*rt+lt*G*xt),Ut=ot+ht*(lt*U*tt+B*G*Q),Bt=ct+ht*(B*U*tt-lt*G*Q);return["C",vt,Ot,Ut,Bt,ot,ct]}function t(J,Y,lt,B,U,G,Z){var gt=Math.PI,ht=Z*gt/180,St=f.util.sin(ht),bt=f.util.cos(ht),xt=0,rt=0;lt=Math.abs(lt),B=Math.abs(B);var Q=-bt*J*.5-St*Y*.5,tt=-bt*Y*.5+St*J*.5,ot=lt*lt,ct=B*B,vt=tt*tt,Ot=Q*Q,Ut=ot*ct-ot*vt-ct*Ot,Bt=0;if(Ut<0){var mt=Math.sqrt(1-Ut/(ot*ct));lt*=mt,B*=mt}else Bt=(U===G?-1:1)*Math.sqrt(Ut/(ot*vt+ct*Ot));var Yt=Bt*lt*tt/B,Zt=-Bt*B*Q/lt,te=bt*Yt-St*Zt+J*.5,ve=St*Yt+bt*Zt+Y*.5,ae=a(1,0,(Q-Yt)/lt,(tt-Zt)/B),le=a((Q-Yt)/lt,(tt-Zt)/B,(-Q-Yt)/lt,(-tt-Zt)/B);G===0&&le>0?le-=2*gt:G===1&&le<0&&(le+=2*gt);for(var ee=Math.ceil(Math.abs(le/gt*2)),ce=[],ye=le/ee,be=8/3*Math.sin(ye/4)*Math.sin(ye/4)/Math.sin(ye/2),Tt=ae+ye,At=0;At<ee;At++)ce[At]=u(ae,Tt,bt,St,lt,B,te,ve,be,xt,rt),xt=ce[At][5],rt=ce[At][6],ae=Tt,Tt+=ye;return ce}function a(J,Y,lt,B){var U=Math.atan2(Y,J),G=Math.atan2(B,lt);return G>=U?G-U:2*Math.PI-(U-G)}function n(J,Y,lt,B,U,G,Z,gt){var ht;if(f.cachesBoundsOfCurve&&(ht=d.call(arguments),f.boundsOfCurveCache[ht]))return f.boundsOfCurveCache[ht];var St=Math.sqrt,bt=Math.min,xt=Math.max,rt=Math.abs,Q=[],tt=[[],[]],ot,ct,vt,Ot,Ut,Bt,mt,Yt;ct=6*J-12*lt+6*U,ot=-3*J+9*lt-9*U+3*Z,vt=3*lt-3*J;for(var Zt=0;Zt<2;++Zt){if(Zt>0&&(ct=6*Y-12*B+6*G,ot=-3*Y+9*B-9*G+3*gt,vt=3*B-3*Y),rt(ot)<1e-12){if(rt(ct)<1e-12)continue;Ot=-vt/ct,0<Ot&&Ot<1&&Q.push(Ot);continue}mt=ct*ct-4*vt*ot,!(mt<0)&&(Yt=St(mt),Ut=(-ct+Yt)/(2*ot),0<Ut&&Ut<1&&Q.push(Ut),Bt=(-ct-Yt)/(2*ot),0<Bt&&Bt<1&&Q.push(Bt))}for(var te,ve,ae=Q.length,le=ae,ee;ae--;)Ot=Q[ae],ee=1-Ot,te=ee*ee*ee*J+3*ee*ee*Ot*lt+3*ee*Ot*Ot*U+Ot*Ot*Ot*Z,tt[0][ae]=te,ve=ee*ee*ee*Y+3*ee*ee*Ot*B+3*ee*Ot*Ot*G+Ot*Ot*Ot*gt,tt[1][ae]=ve;tt[0][le]=J,tt[1][le]=Y,tt[0][le+1]=Z,tt[1][le+1]=gt;var ce=[{x:bt.apply(null,tt[0]),y:bt.apply(null,tt[1])},{x:xt.apply(null,tt[0]),y:xt.apply(null,tt[1])}];return f.cachesBoundsOfCurve&&(f.boundsOfCurveCache[ht]=ce),ce}function s(J,Y,lt){for(var B=lt[1],U=lt[2],G=lt[3],Z=lt[4],gt=lt[5],ht=lt[6],St=lt[7],bt=t(ht-J,St-Y,B,U,Z,gt,G),xt=0,rt=bt.length;xt<rt;xt++)bt[xt][1]+=J,bt[xt][2]+=Y,bt[xt][3]+=J,bt[xt][4]+=Y,bt[xt][5]+=J,bt[xt][6]+=Y;return bt}function m(J){var Y=0,lt=0,B=J.length,U=0,G=0,Z,gt,ht,St=[],bt,xt,rt;for(gt=0;gt<B;++gt){switch(ht=!1,Z=J[gt].slice(0),Z[0]){case"l":Z[0]="L",Z[1]+=Y,Z[2]+=lt;case"L":Y=Z[1],lt=Z[2];break;case"h":Z[1]+=Y;case"H":Z[0]="L",Z[2]=lt,Y=Z[1];break;case"v":Z[1]+=lt;case"V":Z[0]="L",lt=Z[1],Z[1]=Y,Z[2]=lt;break;case"m":Z[0]="M",Z[1]+=Y,Z[2]+=lt;case"M":Y=Z[1],lt=Z[2],U=Z[1],G=Z[2];break;case"c":Z[0]="C",Z[1]+=Y,Z[2]+=lt,Z[3]+=Y,Z[4]+=lt,Z[5]+=Y,Z[6]+=lt;case"C":xt=Z[3],rt=Z[4],Y=Z[5],lt=Z[6];break;case"s":Z[0]="S",Z[1]+=Y,Z[2]+=lt,Z[3]+=Y,Z[4]+=lt;case"S":bt==="C"?(xt=2*Y-xt,rt=2*lt-rt):(xt=Y,rt=lt),Y=Z[3],lt=Z[4],Z[0]="C",Z[5]=Z[3],Z[6]=Z[4],Z[3]=Z[1],Z[4]=Z[2],Z[1]=xt,Z[2]=rt,xt=Z[3],rt=Z[4];break;case"q":Z[0]="Q",Z[1]+=Y,Z[2]+=lt,Z[3]+=Y,Z[4]+=lt;case"Q":xt=Z[1],rt=Z[2],Y=Z[3],lt=Z[4];break;case"t":Z[0]="T",Z[1]+=Y,Z[2]+=lt;case"T":bt==="Q"?(xt=2*Y-xt,rt=2*lt-rt):(xt=Y,rt=lt),Z[0]="Q",Y=Z[1],lt=Z[2],Z[1]=xt,Z[2]=rt,Z[3]=Y,Z[4]=lt;break;case"a":Z[0]="A",Z[6]+=Y,Z[7]+=lt;case"A":ht=!0,St=St.concat(s(Y,lt,Z)),Y=Z[6],lt=Z[7];break;case"z":case"Z":Y=U,lt=G;break}ht||St.push(Z),bt=Z[0]}return St}function o(J,Y,lt,B){return Math.sqrt((lt-J)*(lt-J)+(B-Y)*(B-Y))}function p(J){return J*J*J}function y(J){return 3*J*J*(1-J)}function I(J){return 3*J*(1-J)*(1-J)}function b(J){return(1-J)*(1-J)*(1-J)}function T(J,Y,lt,B,U,G,Z,gt){return function(ht){var St=p(ht),bt=y(ht),xt=I(ht),rt=b(ht);return{x:Z*St+U*bt+lt*xt+J*rt,y:gt*St+G*bt+B*xt+Y*rt}}}function P(J,Y,lt,B,U,G,Z,gt){return function(ht){var St=1-ht,bt=3*St*St*(lt-J)+6*St*ht*(U-lt)+3*ht*ht*(Z-U),xt=3*St*St*(B-Y)+6*St*ht*(G-B)+3*ht*ht*(gt-G);return Math.atan2(xt,bt)}}function z(J){return J*J}function j(J){return 2*J*(1-J)}function H(J){return(1-J)*(1-J)}function nt(J,Y,lt,B,U,G){return function(Z){var gt=z(Z),ht=j(Z),St=H(Z);return{x:U*gt+lt*ht+J*St,y:G*gt+B*ht+Y*St}}}function q(J,Y,lt,B,U,G){return function(Z){var gt=1-Z,ht=2*gt*(lt-J)+2*Z*(U-lt),St=2*gt*(B-Y)+2*Z*(G-B);return Math.atan2(St,ht)}}function Ct(J,Y,lt){var B={x:Y,y:lt},U,G=0,Z;for(Z=1;Z<=100;Z+=1)U=J(Z/100),G+=o(B.x,B.y,U.x,U.y),B=U;return G}function V(J,Y){for(var lt=0,B=0,U=J.iterator,G={x:J.x,y:J.y},Z,gt,ht=.01,St=J.angleFinder,bt;B<Y&&lt<=1&&ht>1e-4;)Z=U(lt),bt=lt,gt=o(G.x,G.y,Z.x,Z.y),gt+B>Y?(ht/=2,lt-=ht):(G=Z,lt+=ht,B+=gt);return Z.angle=St(bt),Z}function pt(J){for(var Y=0,lt=J.length,B,U=0,G=0,Z=0,gt=0,ht=[],St,bt,xt,rt=0;rt<lt;rt++){switch(B=J[rt],bt={x:U,y:G,command:B[0]},B[0]){case"M":bt.length=0,Z=U=B[1],gt=G=B[2];break;case"L":bt.length=o(U,G,B[1],B[2]),U=B[1],G=B[2];break;case"C":St=T(U,G,B[1],B[2],B[3],B[4],B[5],B[6]),xt=P(U,G,B[1],B[2],B[3],B[4],B[5],B[6]),bt.iterator=St,bt.angleFinder=xt,bt.length=Ct(St,U,G),U=B[5],G=B[6];break;case"Q":St=nt(U,G,B[1],B[2],B[3],B[4]),xt=q(U,G,B[1],B[2],B[3],B[4]),bt.iterator=St,bt.angleFinder=xt,bt.length=Ct(St,U,G),U=B[3],G=B[4];break;case"Z":case"z":bt.destX=Z,bt.destY=gt,bt.length=o(U,G,Z,gt),U=Z,G=gt;break}Y+=bt.length,ht.push(bt)}return ht.push({length:Y,x:U,y:G}),ht}function F(J,Y,lt){lt||(lt=pt(J));for(var B=0;Y-lt[B].length>0&&B<lt.length-2;)Y-=lt[B].length,B++;var U=lt[B],G=Y/U.length,Z=U.command,gt=J[B],ht;switch(Z){case"M":return{x:U.x,y:U.y,angle:0};case"Z":case"z":return ht=new f.Point(U.x,U.y).lerp(new f.Point(U.destX,U.destY),G),ht.angle=Math.atan2(U.destY-U.y,U.destX-U.x),ht;case"L":return ht=new f.Point(U.x,U.y).lerp(new f.Point(gt[1],gt[2]),G),ht.angle=Math.atan2(gt[2]-U.y,gt[1]-U.x),ht;case"C":return V(U,Y);case"Q":return V(U,Y)}}function Rt(J){var Y=[],lt=[],B,U,G=f.rePathCommand,Z="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",gt="("+Z+")"+f.commaWsp,ht="([01])"+f.commaWsp+"?",St=gt+"?"+gt+"?"+gt+ht+ht+gt+"?("+Z+")",bt=new RegExp(St,"g"),xt,rt,Q;if(!J||!J.match)return Y;Q=J.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var tt=0,ot,ct=Q.length;tt<ct;tt++){B=Q[tt],rt=B.slice(1).trim(),lt.length=0;var vt=B.charAt(0);if(ot=[vt],vt.toLowerCase()==="a")for(var Ot;Ot=bt.exec(rt);)for(var Ut=1;Ut<Ot.length;Ut++)lt.push(Ot[Ut]);else for(;xt=G.exec(rt);)lt.push(xt[0]);for(var Ut=0,Bt=lt.length;Ut<Bt;Ut++)U=parseFloat(lt[Ut]),isNaN(U)||ot.push(U);var mt=r[vt.toLowerCase()],Yt=h[vt]||vt;if(ot.length-1>mt)for(var Zt=1,te=ot.length;Zt<te;Zt+=mt)Y.push([vt].concat(ot.slice(Zt,Zt+mt))),vt=Yt;else Y.push(ot)}return Y}function yt(J,Y){var lt=[],B,U=new f.Point(J[0].x,J[0].y),G=new f.Point(J[1].x,J[1].y),Z=J.length,gt=1,ht=0,St=Z>2;for(Y=Y||0,St&&(gt=J[2].x<G.x?-1:J[2].x===G.x?0:1,ht=J[2].y<G.y?-1:J[2].y===G.y?0:1),lt.push(["M",U.x-gt*Y,U.y-ht*Y]),B=1;B<Z;B++){if(!U.eq(G)){var bt=U.midPointFrom(G);lt.push(["Q",U.x,U.y,bt.x,bt.y])}U=J[B],B+1<J.length&&(G=J[B+1])}return St&&(gt=U.x>J[B-2].x?1:U.x===J[B-2].x?0:-1,ht=U.y>J[B-2].y?1:U.y===J[B-2].y?0:-1),lt.push(["L",U.x+gt*Y,U.y+ht*Y]),lt}function Ft(J,Y,lt){return lt&&(Y=f.util.multiplyTransformMatrices(Y,[1,0,0,1,-lt.x,-lt.y])),J.map(function(B){for(var U=B.slice(0),G={},Z=1;Z<B.length-1;Z+=2)G.x=B[Z],G.y=B[Z+1],G=f.util.transformPoint(G,Y),U[Z]=G.x,U[Z+1]=G.y;return U})}function K(J,Y,lt,B,U,G,Z,gt,ht){for(var St=0,bt=0,xt,rt=[],Q=t(gt-J,ht-Y,lt,B,G,Z,U),tt=0,ot=Q.length;tt<ot;tt++)xt=n(St,bt,Q[tt][1],Q[tt][2],Q[tt][3],Q[tt][4],Q[tt][5],Q[tt][6]),rt.push({x:xt[0].x+J,y:xt[0].y+Y}),rt.push({x:xt[1].x+J,y:xt[1].y+Y}),St=Q[tt][5],bt=Q[tt][6];return rt}function at(J,Y,lt,B){B=B.slice(0).unshift("X");var U=s(Y,lt,B);U.forEach(function(G){J.bezierCurveTo.apply(J,G.slice(1))})}f.util.joinPath=function(J){return J.map(function(Y){return Y.join(" ")}).join(" ")},f.util.parsePath=Rt,f.util.makePathSimpler=m,f.util.getSmoothPathFromPoints=yt,f.util.getPathSegmentsInfo=pt,f.util.getBoundsOfCurve=n,f.util.getPointOnPath=F,f.util.transformPath=Ft,f.util.fromArcToBeizers=s,f.util.getBoundsOfArc=K,f.util.drawArc=at}(),function(){var d=Array.prototype.slice;function r(n,s){for(var m=d.call(arguments,2),o=[],p=0,y=n.length;p<y;p++)o[p]=m.length?n[p][s].apply(n[p],m):n[p][s].call(n[p]);return o}function h(n,s){return a(n,s,function(m,o){return m>=o})}function u(n,s){return a(n,s,function(m,o){return m<o})}function t(n,s){for(var m=n.length;m--;)n[m]=s;return n}function a(n,s,m){if(!(!n||n.length===0)){var o=n.length-1,p=s?n[o][s]:n[o];if(s)for(;o--;)m(n[o][s],p)&&(p=n[o][s]);else for(;o--;)m(n[o],p)&&(p=n[o]);return p}}f.util.array={fill:t,invoke:r,min:u,max:h}}(),function(){function d(h,u,t){if(t)if(!f.isLikelyNode&&u instanceof Element)h=u;else if(u instanceof Array){h=[];for(var a=0,n=u.length;a<n;a++)h[a]=d({},u[a],t)}else if(u&&typeof u=="object")for(var s in u)s==="canvas"||s==="group"?h[s]=null:u.hasOwnProperty(s)&&(h[s]=d({},u[s],t));else h=u;else for(var s in u)h[s]=u[s];return h}function r(h,u){return d({},h,u)}f.util.object={extend:d,clone:r},f.util.object.extend(f.util,f.Observable)}(),function(){function d(a){return a.replace(/-+(.)?/g,function(n,s){return s?s.toUpperCase():""})}function r(a,n){return a.charAt(0).toUpperCase()+(n?a.slice(1):a.slice(1).toLowerCase())}function h(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(a){var n=0,s,m=[];for(n=0,s;n<a.length;n++)(s=t(a,n))!==!1&&m.push(s);return m}function t(a,n){var s=a.charCodeAt(n);if(isNaN(s))return"";if(s<55296||s>57343)return a.charAt(n);if(55296<=s&&s<=56319){if(a.length<=n+1)throw"High surrogate without following low surrogate";var m=a.charCodeAt(n+1);if(56320>m||m>57343)throw"High surrogate without following low surrogate";return a.charAt(n)+a.charAt(n+1)}if(n===0)throw"Low surrogate without preceding high surrogate";var o=a.charCodeAt(n-1);if(55296>o||o>56319)throw"Low surrogate without preceding high surrogate";return!1}f.util.string={camelize:d,capitalize:r,escapeXml:h,graphemeSplit:u}}(),function(){var d=Array.prototype.slice,r=function(){},h=function(){for(var s in{toString:1})if(s==="toString")return!1;return!0}(),u=function(s,m,o){for(var p in m)p in s.prototype&&typeof s.prototype[p]=="function"&&(m[p]+"").indexOf("callSuper")>-1?s.prototype[p]=function(y){return function(){var I=this.constructor.superclass;this.constructor.superclass=o;var b=m[y].apply(this,arguments);if(this.constructor.superclass=I,y!=="initialize")return b}}(p):s.prototype[p]=m[p],h&&(m.toString!==Object.prototype.toString&&(s.prototype.toString=m.toString),m.valueOf!==Object.prototype.valueOf&&(s.prototype.valueOf=m.valueOf))};function t(){}function a(s){for(var m=null,o=this;o.constructor.superclass;){var p=o.constructor.superclass.prototype[s];if(o[s]!==p){m=p;break}o=o.constructor.superclass.prototype}return m?arguments.length>1?m.apply(this,d.call(arguments,1)):m.call(this):console.log("tried to callSuper "+s+", method not found in prototype chain",this)}function n(){var s=null,m=d.call(arguments,0);typeof m[0]=="function"&&(s=m.shift());function o(){this.initialize.apply(this,arguments)}o.superclass=s,o.subclasses=[],s&&(t.prototype=s.prototype,o.prototype=new t,s.subclasses.push(o));for(var p=0,y=m.length;p<y;p++)u(o,m[p],s);return o.prototype.initialize||(o.prototype.initialize=r),o.prototype.constructor=o,o.prototype.callSuper=a,o}f.util.createClass=n}(),function(){var d=!!f.document.createElement("div").attachEvent,r=["touchstart","touchmove","touchend"];f.util.addListener=function(u,t,a,n){u&&u.addEventListener(t,a,d?!1:n)},f.util.removeListener=function(u,t,a,n){u&&u.removeEventListener(t,a,d?!1:n)};function h(u){var t=u.changedTouches;return t&&t[0]?t[0]:u}f.util.getPointer=function(u){var t=u.target,a=f.util.getScrollLeftTop(t),n=h(u);return{x:n.clientX+a.left,y:n.clientY+a.top}},f.util.isTouchEvent=function(u){return r.indexOf(u.type)>-1||u.pointerType==="touch"}}(),function(){function d(n,s){var m=n.style;if(!m)return n;if(typeof s=="string")return n.style.cssText+=";"+s,s.indexOf("opacity")>-1?a(n,s.match(/opacity:\s*(\d?\.?\d*)/)[1]):n;for(var o in s)if(o==="opacity")a(n,s[o]);else{var p=o==="float"||o==="cssFloat"?typeof m.styleFloat>"u"?"cssFloat":"styleFloat":o;m[p]=s[o]}return n}var r=f.document.createElement("div"),h=typeof r.style.opacity=="string",u=typeof r.style.filter=="string",t=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,a=function(n){return n};h?a=function(n,s){return n.style.opacity=s,n}:u&&(a=function(n,s){var m=n.style;return n.currentStyle&&!n.currentStyle.hasLayout&&(m.zoom=1),t.test(m.filter)?(s=s>=.9999?"":"alpha(opacity="+s*100+")",m.filter=m.filter.replace(t,s)):m.filter+=" alpha(opacity="+s*100+")",n}),f.util.setStyle=d}(),function(){var d=Array.prototype.slice;function r(b){return typeof b=="string"?f.document.getElementById(b):b}var h,u=function(b){return d.call(b,0)};try{h=u(f.document.childNodes)instanceof Array}catch{}h||(u=function(b){for(var T=new Array(b.length),P=b.length;P--;)T[P]=b[P];return T});function t(b,T){var P=f.document.createElement(b);for(var z in T)z==="class"?P.className=T[z]:z==="for"?P.htmlFor=T[z]:P.setAttribute(z,T[z]);return P}function a(b,T){b&&(" "+b.className+" ").indexOf(" "+T+" ")===-1&&(b.className+=(b.className?" ":"")+T)}function n(b,T,P){return typeof T=="string"&&(T=t(T,P)),b.parentNode&&b.parentNode.replaceChild(T,b),T.appendChild(b),T}function s(b){for(var T=0,P=0,z=f.document.documentElement,j=f.document.body||{scrollLeft:0,scrollTop:0};b&&(b.parentNode||b.host)&&(b=b.parentNode||b.host,b===f.document?(T=j.scrollLeft||z.scrollLeft||0,P=j.scrollTop||z.scrollTop||0):(T+=b.scrollLeft||0,P+=b.scrollTop||0),!(b.nodeType===1&&b.style.position==="fixed")););return{left:T,top:P}}function m(b){var T,P=b&&b.ownerDocument,z={left:0,top:0},j={left:0,top:0},H,nt={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!P)return j;for(var q in nt)j[nt[q]]+=parseInt(o(b,q),10)||0;return T=P.documentElement,typeof b.getBoundingClientRect<"u"&&(z=b.getBoundingClientRect()),H=s(b),{left:z.left+H.left-(T.clientLeft||0)+j.left,top:z.top+H.top-(T.clientTop||0)+j.top}}var o;f.document.defaultView&&f.document.defaultView.getComputedStyle?o=function(b,T){var P=f.document.defaultView.getComputedStyle(b,null);return P?P[T]:void 0}:o=function(b,T){var P=b.style[T];return!P&&b.currentStyle&&(P=b.currentStyle[T]),P},function(){var b=f.document.documentElement.style,T="userSelect"in b?"userSelect":"MozUserSelect"in b?"MozUserSelect":"WebkitUserSelect"in b?"WebkitUserSelect":"KhtmlUserSelect"in b?"KhtmlUserSelect":"";function P(j){return typeof j.onselectstart<"u"&&(j.onselectstart=f.util.falseFunction),T?j.style[T]="none":typeof j.unselectable=="string"&&(j.unselectable="on"),j}function z(j){return typeof j.onselectstart<"u"&&(j.onselectstart=null),T?j.style[T]="":typeof j.unselectable=="string"&&(j.unselectable=""),j}f.util.makeElementUnselectable=P,f.util.makeElementSelectable=z}();function p(b){var T=f.jsdomImplForWrapper(b);return T._canvas||T._image}function y(b){if(!!f.isLikelyNode){var T=f.jsdomImplForWrapper(b);T&&(T._image=null,T._canvas=null,T._currentSrc=null,T._attributes=null,T._classList=null)}}function I(b,T){b.imageSmoothingEnabled=b.imageSmoothingEnabled||b.webkitImageSmoothingEnabled||b.mozImageSmoothingEnabled||b.msImageSmoothingEnabled||b.oImageSmoothingEnabled,b.imageSmoothingEnabled=T}f.util.setImageSmoothing=I,f.util.getById=r,f.util.toArray=u,f.util.addClass=a,f.util.makeElement=t,f.util.wrapElement=n,f.util.getScrollLeftTop=s,f.util.getElementOffset=m,f.util.getNodeCanvas=p,f.util.cleanUpJsdomNode=y}(),function(){function d(u,t){return u+(/\?/.test(u)?"&":"?")+t}function r(){}function h(u,t){t||(t={});var a=t.method?t.method.toUpperCase():"GET",n=t.onComplete||function(){},s=new f.window.XMLHttpRequest,m=t.body||t.parameters;return s.onreadystatechange=function(){s.readyState===4&&(n(s),s.onreadystatechange=r)},a==="GET"&&(m=null,typeof t.parameters=="string"&&(u=d(u,t.parameters))),s.open(a,u,!0),(a==="POST"||a==="PUT")&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(m),s}f.util.request=h}(),f.log=console.log,f.warn=console.warn,function(){function d(){return!1}function r(s,m,o,p){return-o*Math.cos(s/p*(Math.PI/2))+o+m}function h(s){var m=!1;return a(function(o){s||(s={});var p=o||+new Date,y=s.duration||500,I=p+y,b,T=s.onChange||d,P=s.abort||d,z=s.onComplete||d,j=s.easing||r,H="startValue"in s?s.startValue:0,nt="endValue"in s?s.endValue:100,q=s.byValue||nt-H;s.onStart&&s.onStart(),function Ct(V){b=V||+new Date;var pt=b>I?y:b-p,F=pt/y,Rt=j(pt,H,q,y),yt=Math.abs((Rt-H)/q);if(!m){if(P(Rt,yt,F)){z(nt,1,1);return}if(b>I){T(nt,1,1),z(nt,1,1);return}else T(Rt,yt,F),a(Ct)}}(p)}),function(){m=!0}}var u=f.window.requestAnimationFrame||f.window.webkitRequestAnimationFrame||f.window.mozRequestAnimationFrame||f.window.oRequestAnimationFrame||f.window.msRequestAnimationFrame||function(s){return f.window.setTimeout(s,1e3/60)},t=f.window.cancelAnimationFrame||f.window.clearTimeout;function a(){return u.apply(f.window,arguments)}function n(){return t.apply(f.window,arguments)}f.util.animate=h,f.util.requestAnimFrame=a,f.util.cancelAnimFrame=n}(),function(){function d(h,u,t){var a="rgba("+parseInt(h[0]+t*(u[0]-h[0]),10)+","+parseInt(h[1]+t*(u[1]-h[1]),10)+","+parseInt(h[2]+t*(u[2]-h[2]),10);return a+=","+(h&&u?parseFloat(h[3]+t*(u[3]-h[3])):1),a+=")",a}function r(h,u,t,a){var n=new f.Color(h).getSource(),s=new f.Color(u).getSource(),m=a.onComplete,o=a.onChange;return a=a||{},f.util.animate(f.util.object.extend(a,{duration:t||500,startValue:n,endValue:s,byValue:s,easing:function(p,y,I,b){var T=a.colorEasing?a.colorEasing(p,b):1-Math.cos(p/b*(Math.PI/2));return d(y,I,T)},onComplete:function(p,y,I){if(m)return m(d(s,s,0),y,I)},onChange:function(p,y,I){if(o){if(Array.isArray(p))return o(d(p,p,0),y,I);o(p,y,I)}}}))}f.util.animateColor=r}(),function(){function d(K,at,J,Y){return K<Math.abs(at)?(K=at,Y=J/4):at===0&&K===0?Y=J/(2*Math.PI)*Math.asin(1):Y=J/(2*Math.PI)*Math.asin(at/K),{a:K,c:at,p:J,s:Y}}function r(K,at,J){return K.a*Math.pow(2,10*(at-=1))*Math.sin((at*J-K.s)*(2*Math.PI)/K.p)}function h(K,at,J,Y){return J*((K=K/Y-1)*K*K+1)+at}function u(K,at,J,Y){return K/=Y/2,K<1?J/2*K*K*K+at:J/2*((K-=2)*K*K+2)+at}function t(K,at,J,Y){return J*(K/=Y)*K*K*K+at}function a(K,at,J,Y){return-J*((K=K/Y-1)*K*K*K-1)+at}function n(K,at,J,Y){return K/=Y/2,K<1?J/2*K*K*K*K+at:-J/2*((K-=2)*K*K*K-2)+at}function s(K,at,J,Y){return J*(K/=Y)*K*K*K*K+at}function m(K,at,J,Y){return J*((K=K/Y-1)*K*K*K*K+1)+at}function o(K,at,J,Y){return K/=Y/2,K<1?J/2*K*K*K*K*K+at:J/2*((K-=2)*K*K*K*K+2)+at}function p(K,at,J,Y){return-J*Math.cos(K/Y*(Math.PI/2))+J+at}function y(K,at,J,Y){return J*Math.sin(K/Y*(Math.PI/2))+at}function I(K,at,J,Y){return-J/2*(Math.cos(Math.PI*K/Y)-1)+at}function b(K,at,J,Y){return K===0?at:J*Math.pow(2,10*(K/Y-1))+at}function T(K,at,J,Y){return K===Y?at+J:J*(-Math.pow(2,-10*K/Y)+1)+at}function P(K,at,J,Y){return K===0?at:K===Y?at+J:(K/=Y/2,K<1?J/2*Math.pow(2,10*(K-1))+at:J/2*(-Math.pow(2,-10*--K)+2)+at)}function z(K,at,J,Y){return-J*(Math.sqrt(1-(K/=Y)*K)-1)+at}function j(K,at,J,Y){return J*Math.sqrt(1-(K=K/Y-1)*K)+at}function H(K,at,J,Y){return K/=Y/2,K<1?-J/2*(Math.sqrt(1-K*K)-1)+at:J/2*(Math.sqrt(1-(K-=2)*K)+1)+at}function nt(K,at,J,Y){var lt=1.70158,B=0,U=J;if(K===0)return at;if(K/=Y,K===1)return at+J;B||(B=Y*.3);var G=d(U,J,B,lt);return-r(G,K,Y)+at}function q(K,at,J,Y){var lt=1.70158,B=0,U=J;if(K===0)return at;if(K/=Y,K===1)return at+J;B||(B=Y*.3);var G=d(U,J,B,lt);return G.a*Math.pow(2,-10*K)*Math.sin((K*Y-G.s)*(2*Math.PI)/G.p)+G.c+at}function Ct(K,at,J,Y){var lt=1.70158,B=0,U=J;if(K===0)return at;if(K/=Y/2,K===2)return at+J;B||(B=Y*.44999999999999996);var G=d(U,J,B,lt);return K<1?-.5*r(G,K,Y)+at:G.a*Math.pow(2,-10*(K-=1))*Math.sin((K*Y-G.s)*(2*Math.PI)/G.p)*.5+G.c+at}function V(K,at,J,Y,lt){return lt===void 0&&(lt=1.70158),J*(K/=Y)*K*((lt+1)*K-lt)+at}function pt(K,at,J,Y,lt){return lt===void 0&&(lt=1.70158),J*((K=K/Y-1)*K*((lt+1)*K+lt)+1)+at}function F(K,at,J,Y,lt){return lt===void 0&&(lt=1.70158),K/=Y/2,K<1?J/2*(K*K*(((lt*=1.525)+1)*K-lt))+at:J/2*((K-=2)*K*(((lt*=1.525)+1)*K+lt)+2)+at}function Rt(K,at,J,Y){return J-yt(Y-K,0,J,Y)+at}function yt(K,at,J,Y){return(K/=Y)<.36363636363636365?J*(7.5625*K*K)+at:K<.7272727272727273?J*(7.5625*(K-=.5454545454545454)*K+.75)+at:K<.9090909090909091?J*(7.5625*(K-=.8181818181818182)*K+.9375)+at:J*(7.5625*(K-=.9545454545454546)*K+.984375)+at}function Ft(K,at,J,Y){return K<Y/2?Rt(K*2,0,J,Y)*.5+at:yt(K*2-Y,0,J,Y)*.5+J*.5+at}f.util.ease={easeInQuad:function(K,at,J,Y){return J*(K/=Y)*K+at},easeOutQuad:function(K,at,J,Y){return-J*(K/=Y)*(K-2)+at},easeInOutQuad:function(K,at,J,Y){return K/=Y/2,K<1?J/2*K*K+at:-J/2*(--K*(K-2)-1)+at},easeInCubic:function(K,at,J,Y){return J*(K/=Y)*K*K+at},easeOutCubic:h,easeInOutCubic:u,easeInQuart:t,easeOutQuart:a,easeInOutQuart:n,easeInQuint:s,easeOutQuint:m,easeInOutQuint:o,easeInSine:p,easeOutSine:y,easeInOutSine:I,easeInExpo:b,easeOutExpo:T,easeInOutExpo:P,easeInCirc:z,easeOutCirc:j,easeInOutCirc:H,easeInElastic:nt,easeOutElastic:q,easeInOutElastic:Ct,easeInBack:V,easeOutBack:pt,easeInOutBack:F,easeInBounce:Rt,easeOutBounce:yt,easeInOutBounce:Ft}}(),function(d){var r=d.fabric||(d.fabric={}),h=r.util.object.extend,u=r.util.object.clone,t=r.util.toFixed,a=r.util.parseUnit,n=r.util.multiplyTransformMatrices,s=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],m=["symbol","image","marker","pattern","view","svg"],o=["pattern","defs","symbol","metadata","clipPath","mask","desc"],p=["symbol","g","a","svg","clipPath","defs"],y={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},I={stroke:"strokeOpacity",fill:"fillOpacity"},b="font-size",T="clip-path";r.svgValidTagNamesRegEx=j(s),r.svgViewBoxElementsRegEx=j(m),r.svgInvalidAncestorsRegEx=j(o),r.svgValidParentsRegEx=j(p),r.cssRules={},r.gradientDefs={},r.clipPaths={};function P(B){return B in y?y[B]:B}function z(B,U,G,Z){var gt=Object.prototype.toString.call(U)==="[object Array]",ht;if((B==="fill"||B==="stroke")&&U==="none")U="";else{if(B==="strokeUniform")return U==="non-scaling-stroke";if(B==="strokeDashArray")U==="none"?U=null:U=U.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(B==="transformMatrix")G&&G.transformMatrix?U=n(G.transformMatrix,r.parseTransformAttribute(U)):U=r.parseTransformAttribute(U);else if(B==="visible")U=U!=="none"&&U!=="hidden",G&&G.visible===!1&&(U=!1);else if(B==="opacity")U=parseFloat(U),G&&typeof G.opacity<"u"&&(U*=G.opacity);else if(B==="textAnchor")U=U==="start"?"left":U==="end"?"right":"center";else if(B==="charSpacing")ht=a(U,Z)/Z*1e3;else if(B==="paintFirst"){var St=U.indexOf("fill"),bt=U.indexOf("stroke"),U="fill";(St>-1&&bt>-1&&bt<St||St===-1&&bt>-1)&&(U="stroke")}else{if(B==="href"||B==="xlink:href"||B==="font")return U;if(B==="imageSmoothing")return U==="optimizeQuality";ht=gt?U.map(a):a(U,Z)}}return!gt&&isNaN(ht)?U:ht}function j(B){return new RegExp("^("+B.join("|")+")\\b","i")}function H(B){for(var U in I)if(!(typeof B[I[U]]>"u"||B[U]==="")){if(typeof B[U]>"u"){if(!r.Object.prototype[U])continue;B[U]=r.Object.prototype[U]}if(B[U].indexOf("url(")!==0){var G=new r.Color(B[U]);B[U]=G.setAlpha(t(G.getAlpha()*B[I[U]],2)).toRgba()}}return B}function nt(B,U){var G,Z=[],gt,ht,St;for(ht=0,St=U.length;ht<St;ht++)G=U[ht],gt=B.getElementsByTagName(G),Z=Z.concat(Array.prototype.slice.call(gt));return Z}r.parseTransformAttribute=function(){function B(mt,Yt){var Zt=r.util.cos(Yt[0]),te=r.util.sin(Yt[0]),ve=0,ae=0;Yt.length===3&&(ve=Yt[1],ae=Yt[2]),mt[0]=Zt,mt[1]=te,mt[2]=-te,mt[3]=Zt,mt[4]=ve-(Zt*ve-te*ae),mt[5]=ae-(te*ve+Zt*ae)}function U(mt,Yt){var Zt=Yt[0],te=Yt.length===2?Yt[1]:Yt[0];mt[0]=Zt,mt[3]=te}function G(mt,Yt,Zt){mt[Zt]=Math.tan(r.util.degreesToRadians(Yt[0]))}function Z(mt,Yt){mt[4]=Yt[0],Yt.length===2&&(mt[5]=Yt[1])}var gt=r.iMatrix,ht=r.reNum,St=r.commaWsp,bt="(?:(skewX)\\s*\\(\\s*("+ht+")\\s*\\))",xt="(?:(skewY)\\s*\\(\\s*("+ht+")\\s*\\))",rt="(?:(rotate)\\s*\\(\\s*("+ht+")(?:"+St+"("+ht+")"+St+"("+ht+"))?\\s*\\))",Q="(?:(scale)\\s*\\(\\s*("+ht+")(?:"+St+"("+ht+"))?\\s*\\))",tt="(?:(translate)\\s*\\(\\s*("+ht+")(?:"+St+"("+ht+"))?\\s*\\))",ot="(?:(matrix)\\s*\\(\\s*("+ht+")"+St+"("+ht+")"+St+"("+ht+")"+St+"("+ht+")"+St+"("+ht+")"+St+"("+ht+")\\s*\\))",ct="(?:"+ot+"|"+tt+"|"+Q+"|"+rt+"|"+bt+"|"+xt+")",vt="(?:"+ct+"(?:"+St+"*"+ct+")*)",Ot="^\\s*(?:"+vt+"?)\\s*$",Ut=new RegExp(Ot),Bt=new RegExp(ct,"g");return function(mt){var Yt=gt.concat(),Zt=[];if(!mt||mt&&!Ut.test(mt))return Yt;mt.replace(Bt,function(ve){var ae=new RegExp(ct).exec(ve).filter(function(ce){return!!ce}),le=ae[1],ee=ae.slice(2).map(parseFloat);switch(le){case"translate":Z(Yt,ee);break;case"rotate":ee[0]=r.util.degreesToRadians(ee[0]),B(Yt,ee);break;case"scale":U(Yt,ee);break;case"skewX":G(Yt,ee,2);break;case"skewY":G(Yt,ee,1);break;case"matrix":Yt=ee;break}Zt.push(Yt.concat()),Yt=gt.concat()});for(var te=Zt[0];Zt.length>1;)Zt.shift(),te=r.util.multiplyTransformMatrices(te,Zt[0]);return te}}();function q(B,U){var G,Z;B.replace(/;\s*$/,"").split(";").forEach(function(gt){var ht=gt.split(":");G=ht[0].trim().toLowerCase(),Z=ht[1].trim(),U[G]=Z})}function Ct(B,U){var G,Z;for(var gt in B)typeof B[gt]>"u"||(G=gt.toLowerCase(),Z=B[gt],U[G]=Z)}function V(B,U){var G={};for(var Z in r.cssRules[U])if(pt(B,Z.split(" ")))for(var gt in r.cssRules[U][Z])G[gt]=r.cssRules[U][Z][gt];return G}function pt(B,U){var G,Z=!0;return G=Rt(B,U.pop()),G&&U.length&&(Z=F(B,U)),G&&Z&&U.length===0}function F(B,U){for(var G,Z=!0;B.parentNode&&B.parentNode.nodeType===1&&U.length;)Z&&(G=U.pop()),B=B.parentNode,Z=Rt(B,G);return U.length===0}function Rt(B,U){var G=B.nodeName,Z=B.getAttribute("class"),gt=B.getAttribute("id"),ht,St;if(ht=new RegExp("^"+G,"i"),U=U.replace(ht,""),gt&&U.length&&(ht=new RegExp("#"+gt+"(?![a-zA-Z\\-]+)","i"),U=U.replace(ht,"")),Z&&U.length)for(Z=Z.split(" "),St=Z.length;St--;)ht=new RegExp("\\."+Z[St]+"(?![a-zA-Z\\-]+)","i"),U=U.replace(ht,"");return U.length===0}function yt(B,U){var G;if(B.getElementById&&(G=B.getElementById(U)),G)return G;var Z,gt,ht,St=B.getElementsByTagName("*");for(gt=0,ht=St.length;gt<ht;gt++)if(Z=St[gt],U===Z.getAttribute("id"))return Z}function Ft(B){for(var U=nt(B,["use","svg:use"]),G=0;U.length&&G<U.length;){var Z=U[G],gt=Z.getAttribute("xlink:href")||Z.getAttribute("href");if(gt===null)return;var ht=gt.substr(1),St=Z.getAttribute("x")||0,bt=Z.getAttribute("y")||0,xt=yt(B,ht).cloneNode(!0),rt=(xt.getAttribute("transform")||"")+" translate("+St+", "+bt+")",Q,tt=U.length,ot,ct,vt,Ot,Ut=r.svgNS;if(at(xt),/^svg$/i.test(xt.nodeName)){var Bt=xt.ownerDocument.createElementNS(Ut,"g");for(ct=0,vt=xt.attributes,Ot=vt.length;ct<Ot;ct++)ot=vt.item(ct),Bt.setAttributeNS(Ut,ot.nodeName,ot.nodeValue);for(;xt.firstChild;)Bt.appendChild(xt.firstChild);xt=Bt}for(ct=0,vt=Z.attributes,Ot=vt.length;ct<Ot;ct++)ot=vt.item(ct),!(ot.nodeName==="x"||ot.nodeName==="y"||ot.nodeName==="xlink:href"||ot.nodeName==="href")&&(ot.nodeName==="transform"?rt=ot.nodeValue+" "+rt:xt.setAttribute(ot.nodeName,ot.nodeValue));xt.setAttribute("transform",rt),xt.setAttribute("instantiated_by_use","1"),xt.removeAttribute("id"),Q=Z.parentNode,Q.replaceChild(xt,Z),U.length===tt&&G++}}var K=new RegExp("^\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*$");function at(B){if(!r.svgViewBoxElementsRegEx.test(B.nodeName))return{};var U=B.getAttribute("viewBox"),G=1,Z=1,gt=0,ht=0,St,bt,xt,rt,Q=B.getAttribute("width"),tt=B.getAttribute("height"),ot=B.getAttribute("x")||0,ct=B.getAttribute("y")||0,vt=B.getAttribute("preserveAspectRatio")||"",Ot=!U||!(U=U.match(K)),Ut=!Q||!tt||Q==="100%"||tt==="100%",Bt=Ot&&Ut,mt={},Yt="",Zt=0,te=0;if(mt.width=0,mt.height=0,mt.toBeParsed=Bt,Ot&&(ot||ct)&&B.parentNode&&B.parentNode.nodeName!=="#document"&&(Yt=" translate("+a(ot)+" "+a(ct)+") ",xt=(B.getAttribute("transform")||"")+Yt,B.setAttribute("transform",xt),B.removeAttribute("x"),B.removeAttribute("y")),Bt)return mt;if(Ot)return mt.width=a(Q),mt.height=a(tt),mt;if(gt=-parseFloat(U[1]),ht=-parseFloat(U[2]),St=parseFloat(U[3]),bt=parseFloat(U[4]),mt.minX=gt,mt.minY=ht,mt.viewBoxWidth=St,mt.viewBoxHeight=bt,Ut?(mt.width=St,mt.height=bt):(mt.width=a(Q),mt.height=a(tt),G=mt.width/St,Z=mt.height/bt),vt=r.util.parsePreserveAspectRatioAttribute(vt),vt.alignX!=="none"&&(vt.meetOrSlice==="meet"&&(Z=G=G>Z?Z:G),vt.meetOrSlice==="slice"&&(Z=G=G>Z?G:Z),Zt=mt.width-St*G,te=mt.height-bt*G,vt.alignX==="Mid"&&(Zt/=2),vt.alignY==="Mid"&&(te/=2),vt.alignX==="Min"&&(Zt=0),vt.alignY==="Min"&&(te=0)),G===1&&Z===1&&gt===0&&ht===0&&ot===0&&ct===0)return mt;if((ot||ct)&&B.parentNode.nodeName!=="#document"&&(Yt=" translate("+a(ot)+" "+a(ct)+") "),xt=Yt+" matrix("+G+" 0 0 "+Z+" "+(gt*G+Zt)+" "+(ht*Z+te)+") ",B.nodeName==="svg"){for(rt=B.ownerDocument.createElementNS(r.svgNS,"g");B.firstChild;)rt.appendChild(B.firstChild);B.appendChild(rt)}else rt=B,rt.removeAttribute("x"),rt.removeAttribute("y"),xt=rt.getAttribute("transform")+xt;return rt.setAttribute("transform",xt),mt}function J(B,U){for(;B&&(B=B.parentNode);)if(B.nodeName&&U.test(B.nodeName.replace("svg:",""))&&!B.getAttribute("instantiated_by_use"))return!0;return!1}r.parseSVGDocument=function(B,U,G,Z){if(!!B){Ft(B);var gt=r.Object.__uid++,ht,St,bt=at(B),xt=r.util.toArray(B.getElementsByTagName("*"));if(bt.crossOrigin=Z&&Z.crossOrigin,bt.svgUid=gt,xt.length===0&&r.isLikelyNode){xt=B.selectNodes('//*[name(.)!="svg"]');var rt=[];for(ht=0,St=xt.length;ht<St;ht++)rt[ht]=xt[ht];xt=rt}var Q=xt.filter(function(ot){return at(ot),r.svgValidTagNamesRegEx.test(ot.nodeName.replace("svg:",""))&&!J(ot,r.svgInvalidAncestorsRegEx)});if(!Q||Q&&!Q.length){U&&U([],{});return}var tt={};xt.filter(function(ot){return ot.nodeName.replace("svg:","")==="clipPath"}).forEach(function(ot){var ct=ot.getAttribute("id");tt[ct]=r.util.toArray(ot.getElementsByTagName("*")).filter(function(vt){return r.svgValidTagNamesRegEx.test(vt.nodeName.replace("svg:",""))})}),r.gradientDefs[gt]=r.getGradientDefs(B),r.cssRules[gt]=r.getCSSRules(B),r.clipPaths[gt]=tt,r.parseElements(Q,function(ot,ct){U&&(U(ot,bt,ct,xt),delete r.gradientDefs[gt],delete r.cssRules[gt],delete r.clipPaths[gt])},u(bt),G,Z)}};function Y(B,U){var G=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],Z="xlink:href",gt=U.getAttribute(Z).substr(1),ht=yt(B,gt);if(ht&&ht.getAttribute(Z)&&Y(B,ht),G.forEach(function(bt){ht&&!U.hasAttribute(bt)&&ht.hasAttribute(bt)&&U.setAttribute(bt,ht.getAttribute(bt))}),!U.children.length)for(var St=ht.cloneNode(!0);St.firstChild;)U.appendChild(St.firstChild);U.removeAttribute(Z)}var lt=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+r.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+r.reNum+"))?\\s+(.*)");h(r,{parseFontDeclaration:function(B,U){var G=B.match(lt);if(!!G){var Z=G[1],gt=G[3],ht=G[4],St=G[5],bt=G[6];Z&&(U.fontStyle=Z),gt&&(U.fontWeight=isNaN(parseFloat(gt))?gt:parseFloat(gt)),ht&&(U.fontSize=a(ht)),bt&&(U.fontFamily=bt),St&&(U.lineHeight=St==="normal"?1:St)}},getGradientDefs:function(B){var U=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],G=nt(B,U),Z,gt=0,ht={};for(gt=G.length;gt--;)Z=G[gt],Z.getAttribute("xlink:href")&&Y(B,Z),ht[Z.getAttribute("id")]=Z;return ht},parseAttributes:function(B,U,G){if(!!B){var Z,gt={},ht,St;typeof G>"u"&&(G=B.getAttribute("svgUid")),B.parentNode&&r.svgValidParentsRegEx.test(B.parentNode.nodeName)&&(gt=r.parseAttributes(B.parentNode,U,G));var bt=U.reduce(function(vt,Ot){return Z=B.getAttribute(Ot),Z&&(vt[Ot]=Z),vt},{}),xt=h(V(B,G),r.parseStyleAttribute(B));bt=h(bt,xt),xt[T]&&B.setAttribute(T,xt[T]),ht=St=gt.fontSize||r.Text.DEFAULT_SVG_FONT_SIZE,bt[b]&&(bt[b]=ht=a(bt[b],St));var rt,Q,tt={};for(var ot in bt)rt=P(ot),Q=z(rt,bt[ot],gt,ht),tt[rt]=Q;tt&&tt.font&&r.parseFontDeclaration(tt.font,tt);var ct=h(gt,tt);return r.svgValidParentsRegEx.test(B.nodeName)?ct:H(ct)}},parseElements:function(B,U,G,Z,gt){new r.ElementsParser(B,U,G,Z,gt).parse()},parseStyleAttribute:function(B){var U={},G=B.getAttribute("style");return G&&(typeof G=="string"?q(G,U):Ct(G,U)),U},parsePointsAttribute:function(B){if(!B)return null;B=B.replace(/,/g," ").trim(),B=B.split(/\s+/);var U=[],G,Z;for(G=0,Z=B.length;G<Z;G+=2)U.push({x:parseFloat(B[G]),y:parseFloat(B[G+1])});return U},getCSSRules:function(B){var U=B.getElementsByTagName("style"),G,Z,gt={},ht;for(G=0,Z=U.length;G<Z;G++){var St=U[G].textContent;St=St.replace(/\/\*[\s\S]*?\*\//g,""),St.trim()!==""&&(ht=St.match(/[^{]*\{[\s\S]*?\}/g),ht=ht.map(function(bt){return bt.trim()}),ht.forEach(function(bt){var xt=bt.match(/([\s\S]*?)\s*\{([^}]*)\}/),rt={},Q=xt[2].trim(),tt=Q.replace(/;$/,"").split(/\s*;\s*/);for(G=0,Z=tt.length;G<Z;G++){var ot=tt[G].split(/\s*:\s*/),ct=ot[0],vt=ot[1];rt[ct]=vt}bt=xt[1],bt.split(",").forEach(function(Ot){Ot=Ot.replace(/^svg/i,"").trim(),Ot!==""&&(gt[Ot]?r.util.object.extend(gt[Ot],rt):gt[Ot]=r.util.object.clone(rt))})}))}return gt},loadSVGFromURL:function(B,U,G,Z){B=B.replace(/^\n\s*/,"").trim(),new r.util.request(B,{method:"get",onComplete:gt});function gt(ht){var St=ht.responseXML;if(!St||!St.documentElement)return U&&U(null),!1;r.parseSVGDocument(St.documentElement,function(bt,xt,rt,Q){U&&U(bt,xt,rt,Q)},G,Z)}},loadSVGFromString:function(B,U,G,Z){var gt=new r.window.DOMParser,ht=gt.parseFromString(B.trim(),"text/xml");r.parseSVGDocument(ht.documentElement,function(St,bt,xt,rt){U(St,bt,xt,rt)},G,Z)}})}(D),f.ElementsParser=function(d,r,h,u,t,a){this.elements=d,this.callback=r,this.options=h,this.reviver=u,this.svgUid=h&&h.svgUid||0,this.parsingOptions=t,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=a},function(d){d.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},d.createObjects=function(){var r=this;this.elements.forEach(function(h,u){h.setAttribute("svgUid",r.svgUid),r.createObject(h,u)})},d.findTag=function(r){return f[f.util.string.capitalize(r.tagName.replace("svg:",""))]},d.createObject=function(r,h){var u=this.findTag(r);if(u&&u.fromElement)try{u.fromElement(r,this.createCallback(h,r),this.options)}catch(t){f.log(t)}else this.checkIfDone()},d.createCallback=function(r,h){var u=this;return function(t){var a;u.resolveGradient(t,h,"fill"),u.resolveGradient(t,h,"stroke"),t instanceof f.Image&&t._originalElement&&(a=t.parsePreserveAspectRatioAttribute(h)),t._removeTransformMatrix(a),u.resolveClipPath(t,h),u.reviver&&u.reviver(h,t),u.instances[r]=t,u.checkIfDone()}},d.extractPropertyDefinition=function(r,h,u){var t=r[h],a=this.regexUrl;if(!!a.test(t)){a.lastIndex=0;var n=a.exec(t)[1];return a.lastIndex=0,f[u][this.svgUid][n]}},d.resolveGradient=function(r,h,u){var t=this.extractPropertyDefinition(r,u,"gradientDefs");if(t){var a=h.getAttribute(u+"-opacity"),n=f.Gradient.fromElement(t,r,a,this.options);r.set(u,n)}},d.createClipPathCallback=function(r,h){return function(u){u._removeTransformMatrix(),u.fillRule=u.clipRule,h.push(u)}},d.resolveClipPath=function(r,h){var u=this.extractPropertyDefinition(r,"clipPath","clipPaths"),t,a,n,s,m,o;if(u){s=[],n=f.util.invertTransform(r.calcTransformMatrix());for(var p=u[0].parentNode,y=h;y.parentNode&&y.getAttribute("clip-path")!==r.clipPath;)y=y.parentNode;y.parentNode.appendChild(p);for(var I=0;I<u.length;I++)t=u[I],a=this.findTag(t),a.fromElement(t,this.createClipPathCallback(r,s),this.options);s.length===1?u=s[0]:u=new f.Group(s),m=f.util.multiplyTransformMatrices(n,u.calcTransformMatrix()),u.clipPath&&this.resolveClipPath(u,y);var o=f.util.qrDecompose(m);u.flipX=!1,u.flipY=!1,u.set("scaleX",o.scaleX),u.set("scaleY",o.scaleY),u.angle=o.angle,u.skewX=o.skewX,u.skewY=0,u.setPositionByOrigin({x:o.translateX,y:o.translateY},"center","center"),r.clipPath=u}else delete r.clipPath},d.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(r){return r!=null}),this.callback(this.instances,this.elements))}}(f.ElementsParser.prototype),function(d){var r=d.fabric||(d.fabric={});if(r.Point){r.warn("fabric.Point is already defined");return}r.Point=h;function h(u,t){this.x=u,this.y=t}h.prototype={type:"point",constructor:h,add:function(u){return new h(this.x+u.x,this.y+u.y)},addEquals:function(u){return this.x+=u.x,this.y+=u.y,this},scalarAdd:function(u){return new h(this.x+u,this.y+u)},scalarAddEquals:function(u){return this.x+=u,this.y+=u,this},subtract:function(u){return new h(this.x-u.x,this.y-u.y)},subtractEquals:function(u){return this.x-=u.x,this.y-=u.y,this},scalarSubtract:function(u){return new h(this.x-u,this.y-u)},scalarSubtractEquals:function(u){return this.x-=u,this.y-=u,this},multiply:function(u){return new h(this.x*u,this.y*u)},multiplyEquals:function(u){return this.x*=u,this.y*=u,this},divide:function(u){return new h(this.x/u,this.y/u)},divideEquals:function(u){return this.x/=u,this.y/=u,this},eq:function(u){return this.x===u.x&&this.y===u.y},lt:function(u){return this.x<u.x&&this.y<u.y},lte:function(u){return this.x<=u.x&&this.y<=u.y},gt:function(u){return this.x>u.x&&this.y>u.y},gte:function(u){return this.x>=u.x&&this.y>=u.y},lerp:function(u,t){return typeof t>"u"&&(t=.5),t=Math.max(Math.min(1,t),0),new h(this.x+(u.x-this.x)*t,this.y+(u.y-this.y)*t)},distanceFrom:function(u){var t=this.x-u.x,a=this.y-u.y;return Math.sqrt(t*t+a*a)},midPointFrom:function(u){return this.lerp(u)},min:function(u){return new h(Math.min(this.x,u.x),Math.min(this.y,u.y))},max:function(u){return new h(Math.max(this.x,u.x),Math.max(this.y,u.y))},toString:function(){return this.x+","+this.y},setXY:function(u,t){return this.x=u,this.y=t,this},setX:function(u){return this.x=u,this},setY:function(u){return this.y=u,this},setFromPoint:function(u){return this.x=u.x,this.y=u.y,this},swap:function(u){var t=this.x,a=this.y;this.x=u.x,this.y=u.y,u.x=t,u.y=a},clone:function(){return new h(this.x,this.y)}}}(D),function(d){var r=d.fabric||(d.fabric={});if(r.Intersection){r.warn("fabric.Intersection is already defined");return}function h(u){this.status=u,this.points=[]}r.Intersection=h,r.Intersection.prototype={constructor:h,appendPoint:function(u){return this.points.push(u),this},appendPoints:function(u){return this.points=this.points.concat(u),this}},r.Intersection.intersectLineLine=function(u,t,a,n){var s,m=(n.x-a.x)*(u.y-a.y)-(n.y-a.y)*(u.x-a.x),o=(t.x-u.x)*(u.y-a.y)-(t.y-u.y)*(u.x-a.x),p=(n.y-a.y)*(t.x-u.x)-(n.x-a.x)*(t.y-u.y);if(p!==0){var y=m/p,I=o/p;0<=y&&y<=1&&0<=I&&I<=1?(s=new h("Intersection"),s.appendPoint(new r.Point(u.x+y*(t.x-u.x),u.y+y*(t.y-u.y)))):s=new h}else m===0||o===0?s=new h("Coincident"):s=new h("Parallel");return s},r.Intersection.intersectLinePolygon=function(u,t,a){var n=new h,s=a.length,m,o,p,y;for(y=0;y<s;y++)m=a[y],o=a[(y+1)%s],p=h.intersectLineLine(u,t,m,o),n.appendPoints(p.points);return n.points.length>0&&(n.status="Intersection"),n},r.Intersection.intersectPolygonPolygon=function(u,t){var a=new h,n=u.length,s;for(s=0;s<n;s++){var m=u[s],o=u[(s+1)%n],p=h.intersectLinePolygon(m,o,t);a.appendPoints(p.points)}return a.points.length>0&&(a.status="Intersection"),a},r.Intersection.intersectPolygonRectangle=function(u,t,a){var n=t.min(a),s=t.max(a),m=new r.Point(s.x,n.y),o=new r.Point(n.x,s.y),p=h.intersectLinePolygon(n,m,u),y=h.intersectLinePolygon(m,s,u),I=h.intersectLinePolygon(s,o,u),b=h.intersectLinePolygon(o,n,u),T=new h;return T.appendPoints(p.points),T.appendPoints(y.points),T.appendPoints(I.points),T.appendPoints(b.points),T.points.length>0&&(T.status="Intersection"),T}}(D),function(d){var r=d.fabric||(d.fabric={});if(r.Color){r.warn("fabric.Color is already defined.");return}function h(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}r.Color=h,r.Color.prototype={_tryParsingColor:function(t){var a;t in h.colorNameMap&&(t=h.colorNameMap[t]),t==="transparent"&&(a=[255,255,255,0]),a||(a=h.sourceFromHex(t)),a||(a=h.sourceFromRgb(t)),a||(a=h.sourceFromHsl(t)),a||(a=[0,0,0,1]),a&&this.setSource(a)},_rgbToHsl:function(t,a,n){t/=255,a/=255,n/=255;var s,m,o,p=r.util.array.max([t,a,n]),y=r.util.array.min([t,a,n]);if(o=(p+y)/2,p===y)s=m=0;else{var I=p-y;switch(m=o>.5?I/(2-p-y):I/(p+y),p){case t:s=(a-n)/I+(a<n?6:0);break;case a:s=(n-t)/I+2;break;case n:s=(t-a)/I+4;break}s/=6}return[Math.round(s*360),Math.round(m*100),Math.round(o*100)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),a=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+a[0]+","+a[1]+"%,"+a[2]+"%)"},toHsla:function(){var t=this.getSource(),a=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+a[0]+","+a[1]+"%,"+a[2]+"%,"+t[3]+")"},toHex:function(){var t=this.getSource(),a,n,s;return a=t[0].toString(16),a=a.length===1?"0"+a:a,n=t[1].toString(16),n=n.length===1?"0"+n:n,s=t[2].toString(16),s=s.length===1?"0"+s:s,a.toUpperCase()+n.toUpperCase()+s.toUpperCase()},toHexa:function(){var t=this.getSource(),a;return a=Math.round(t[3]*255),a=a.toString(16),a=a.length===1?"0"+a:a,this.toHex()+a.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var a=this.getSource();return a[3]=t,this.setSource(a),this},toGrayscale:function(){var t=this.getSource(),a=parseInt((t[0]*.3+t[1]*.59+t[2]*.11).toFixed(0),10),n=t[3];return this.setSource([a,a,a,n]),this},toBlackWhite:function(t){var a=this.getSource(),n=(a[0]*.3+a[1]*.59+a[2]*.11).toFixed(0),s=a[3];return t=t||127,n=Number(n)<Number(t)?0:255,this.setSource([n,n,n,s]),this},overlayWith:function(t){t instanceof h||(t=new h(t));var a=[],n=this.getAlpha(),s=.5,m=this.getSource(),o=t.getSource(),p;for(p=0;p<3;p++)a.push(Math.round(m[p]*(1-s)+o[p]*s));return a[3]=n,this.setSource(a),this}},r.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,r.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,r.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,r.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function u(t,a,n){return n<0&&(n+=1),n>1&&(n-=1),n<.16666666666666666?t+(a-t)*6*n:n<.5?a:n<.6666666666666666?t+(a-t)*(.6666666666666666-n)*6:t}r.Color.fromRgb=function(t){return h.fromSource(h.sourceFromRgb(t))},r.Color.sourceFromRgb=function(t){var a=t.match(h.reRGBa);if(a){var n=parseInt(a[1],10)/(/%$/.test(a[1])?100:1)*(/%$/.test(a[1])?255:1),s=parseInt(a[2],10)/(/%$/.test(a[2])?100:1)*(/%$/.test(a[2])?255:1),m=parseInt(a[3],10)/(/%$/.test(a[3])?100:1)*(/%$/.test(a[3])?255:1);return[parseInt(n,10),parseInt(s,10),parseInt(m,10),a[4]?parseFloat(a[4]):1]}},r.Color.fromRgba=h.fromRgb,r.Color.fromHsl=function(t){return h.fromSource(h.sourceFromHsl(t))},r.Color.sourceFromHsl=function(t){var a=t.match(h.reHSLa);if(!!a){var n=(parseFloat(a[1])%360+360)%360/360,s=parseFloat(a[2])/(/%$/.test(a[2])?100:1),m=parseFloat(a[3])/(/%$/.test(a[3])?100:1),o,p,y;if(s===0)o=p=y=m;else{var I=m<=.5?m*(s+1):m+s-m*s,b=m*2-I;o=u(b,I,n+.3333333333333333),p=u(b,I,n),y=u(b,I,n-.3333333333333333)}return[Math.round(o*255),Math.round(p*255),Math.round(y*255),a[4]?parseFloat(a[4]):1]}},r.Color.fromHsla=h.fromHsl,r.Color.fromHex=function(t){return h.fromSource(h.sourceFromHex(t))},r.Color.sourceFromHex=function(t){if(t.match(h.reHex)){var a=t.slice(t.indexOf("#")+1),n=a.length===3||a.length===4,s=a.length===8||a.length===4,m=n?a.charAt(0)+a.charAt(0):a.substring(0,2),o=n?a.charAt(1)+a.charAt(1):a.substring(2,4),p=n?a.charAt(2)+a.charAt(2):a.substring(4,6),y=s?n?a.charAt(3)+a.charAt(3):a.substring(6,8):"FF";return[parseInt(m,16),parseInt(o,16),parseInt(p,16),parseFloat((parseInt(y,16)/255).toFixed(2))]}},r.Color.fromSource=function(t){var a=new h;return a.setSource(t),a}}(D),function(d){var r=d.fabric||(d.fabric={}),h=["e","se","s","sw","w","nw","n","ne","e"],u=["ns","nesw","ew","nwse"],t={},a="left",n="top",s="right",m="bottom",o="center",p={top:m,bottom:n,left:s,right:a,center:o},y=r.util.radiansToDegrees,I=Math.sign||function(rt){return(rt>0)-(rt<0)||+rt};function b(rt,Q){var tt=rt.angle+y(Math.atan2(Q.y,Q.x))+360;return Math.round(tt%360/45)}function T(rt,Q){var tt=Q.transform.target,ot=tt.canvas,ct=r.util.object.clone(Q);ct.target=tt,ot&&ot.fire("object:"+rt,ct),tt.fire(rt,Q)}function P(rt,Q){var tt=Q.canvas,ot=tt.uniScaleKey,ct=rt[ot];return tt.uniformScaling&&!ct||!tt.uniformScaling&&ct}function z(rt){return rt.originX===o&&rt.originY===o}function j(rt,Q,tt){var ot=rt.lockScalingX,ct=rt.lockScalingY;return!!(ot&&ct||!Q&&(ot||ct)&&tt||ot&&Q==="x"||ct&&Q==="y")}function H(rt,Q,tt){var ot="not-allowed",ct=P(rt,tt),vt="";if(Q.x!==0&&Q.y===0?vt="x":Q.x===0&&Q.y!==0&&(vt="y"),j(tt,vt,ct))return ot;var Ot=b(tt,Q);return h[Ot]+"-resize"}function nt(rt,Q,tt){var ot="not-allowed";if(Q.x!==0&&tt.lockSkewingY||Q.y!==0&&tt.lockSkewingX)return ot;var ct=b(tt,Q)%4;return u[ct]+"-resize"}function q(rt,Q,tt){return rt[tt.canvas.altActionKey]?t.skewCursorStyleHandler(rt,Q,tt):t.scaleCursorStyleHandler(rt,Q,tt)}function Ct(rt,Q,tt){var ot=rt[tt.canvas.altActionKey];if(Q.x===0)return ot?"skewX":"scaleY";if(Q.y===0)return ot?"skewY":"scaleX"}function V(rt,Q,tt){return tt.lockRotation?"not-allowed":Q.cursorStyle}function pt(rt,Q,tt,ot){return{e:rt,transform:Q,pointer:{x:tt,y:ot}}}function F(rt){return function(Q,tt,ot,ct){var vt=tt.target,Ot=vt.getCenterPoint(),Ut=vt.translateToOriginPoint(Ot,tt.originX,tt.originY),Bt=rt(Q,tt,ot,ct);return vt.setPositionByOrigin(Ut,tt.originX,tt.originY),Bt}}function Rt(rt,Q){return function(tt,ot,ct,vt){var Ot=Q(tt,ot,ct,vt);return Ot&&T(rt,pt(tt,ot,ct,vt)),Ot}}function yt(rt,Q,tt,ot,ct){var vt=rt.target,Ot=vt.controls[rt.corner],Ut=vt.canvas.getZoom(),Bt=vt.padding/Ut,mt=vt.toLocalPoint(new r.Point(ot,ct),Q,tt);return mt.x>=Bt&&(mt.x-=Bt),mt.x<=-Bt&&(mt.x+=Bt),mt.y>=Bt&&(mt.y-=Bt),mt.y<=Bt&&(mt.y+=Bt),mt.x-=Ot.offsetX,mt.y-=Ot.offsetY,mt}function Ft(rt){return rt.flipX!==rt.flipY}function K(rt,Q,tt,ot,ct){if(rt[Q]!==0){var vt=rt._getTransformedDimensions()[ot],Ot=ct/vt*rt[tt];rt.set(tt,Ot)}}function at(rt,Q,tt,ot){var ct=Q.target,vt=ct._getTransformedDimensions(0,ct.skewY),Ot=yt(Q,Q.originX,Q.originY,tt,ot),Ut=Math.abs(Ot.x*2)-vt.x,Bt=ct.skewX,mt;Ut<2?mt=0:(mt=y(Math.atan2(Ut/ct.scaleX,vt.y/ct.scaleY)),Q.originX===a&&Q.originY===m&&(mt=-mt),Q.originX===s&&Q.originY===n&&(mt=-mt),Ft(ct)&&(mt=-mt));var Yt=Bt!==mt;if(Yt){var Zt=ct._getTransformedDimensions().y;ct.set("skewX",mt),K(ct,"skewY","scaleY","y",Zt)}return Yt}function J(rt,Q,tt,ot){var ct=Q.target,vt=ct._getTransformedDimensions(ct.skewX,0),Ot=yt(Q,Q.originX,Q.originY,tt,ot),Ut=Math.abs(Ot.y*2)-vt.y,Bt=ct.skewY,mt;Ut<2?mt=0:(mt=y(Math.atan2(Ut/ct.scaleY,vt.x/ct.scaleX)),Q.originX===a&&Q.originY===m&&(mt=-mt),Q.originX===s&&Q.originY===n&&(mt=-mt),Ft(ct)&&(mt=-mt));var Yt=Bt!==mt;if(Yt){var Zt=ct._getTransformedDimensions().x;ct.set("skewY",mt),K(ct,"skewX","scaleX","x",Zt)}return Yt}function Y(rt,Q,tt,ot){var ct=Q.target,vt=ct.skewX,Ot,Ut=Q.originY;if(ct.lockSkewingX)return!1;if(vt===0){var Bt=yt(Q,o,o,tt,ot);Bt.x>0?Ot=a:Ot=s}else vt>0&&(Ot=Ut===n?a:s),vt<0&&(Ot=Ut===n?s:a),Ft(ct)&&(Ot=Ot===a?s:a);Q.originX=Ot;var mt=Rt("skewing",F(at));return mt(rt,Q,tt,ot)}function lt(rt,Q,tt,ot){var ct=Q.target,vt=ct.skewY,Ot,Ut=Q.originX;if(ct.lockSkewingY)return!1;if(vt===0){var Bt=yt(Q,o,o,tt,ot);Bt.y>0?Ot=n:Ot=m}else vt>0&&(Ot=Ut===a?n:m),vt<0&&(Ot=Ut===a?m:n),Ft(ct)&&(Ot=Ot===n?m:n);Q.originY=Ot;var mt=Rt("skewing",F(J));return mt(rt,Q,tt,ot)}function B(rt,Q,tt,ot){var ct=Q,vt=ct.target,Ot=vt.translateToOriginPoint(vt.getCenterPoint(),ct.originX,ct.originY);if(vt.lockRotation)return!1;var Ut=Math.atan2(ct.ey-Ot.y,ct.ex-Ot.x),Bt=Math.atan2(ot-Ot.y,tt-Ot.x),mt=y(Bt-Ut+ct.theta),Yt=!0;if(vt.snapAngle>0){var Zt=vt.snapAngle,te=vt.snapThreshold||Zt,ve=Math.ceil(mt/Zt)*Zt,ae=Math.floor(mt/Zt)*Zt;Math.abs(mt-ae)<te?mt=ae:Math.abs(mt-ve)<te&&(mt=ve)}return mt<0&&(mt=360+mt),mt%=360,Yt=vt.angle!==mt,vt.angle=mt,Yt}function U(rt,Q,tt,ot,ct){ct=ct||{};var vt=Q.target,Ot=vt.lockScalingX,Ut=vt.lockScalingY,Bt=ct.by,mt,Yt,Zt,te,ve=P(rt,vt),ae=j(vt,Bt,ve),le,ee,ce=Q.gestureScale;if(ae)return!1;if(ce)Yt=Q.scaleX*ce,Zt=Q.scaleY*ce;else{if(mt=yt(Q,Q.originX,Q.originY,tt,ot),le=Bt!=="y"?I(mt.x):1,ee=Bt!=="x"?I(mt.y):1,Q.signX||(Q.signX=le),Q.signY||(Q.signY=ee),vt.lockScalingFlip&&(Q.signX!==le||Q.signY!==ee))return!1;if(te=vt._getTransformedDimensions(),ve&&!Bt){var ye=Math.abs(mt.x)+Math.abs(mt.y),be=Q.original,Tt=Math.abs(te.x*be.scaleX/vt.scaleX)+Math.abs(te.y*be.scaleY/vt.scaleY),At=ye/Tt;Yt=be.scaleX*At,Zt=be.scaleY*At}else Yt=Math.abs(mt.x*vt.scaleX/te.x),Zt=Math.abs(mt.y*vt.scaleY/te.y);z(Q)&&(Yt*=2,Zt*=2),Q.signX!==le&&Bt!=="y"&&(Q.originX=p[Q.originX],Yt*=-1,Q.signX=le),Q.signY!==ee&&Bt!=="x"&&(Q.originY=p[Q.originY],Zt*=-1,Q.signY=ee)}var jt=vt.scaleX,Ht=vt.scaleY;return Bt?(Bt==="x"&&vt.set("scaleX",Yt),Bt==="y"&&vt.set("scaleY",Zt)):(!Ot&&vt.set("scaleX",Yt),!Ut&&vt.set("scaleY",Zt)),jt!==vt.scaleX||Ht!==vt.scaleY}function G(rt,Q,tt,ot){return U(rt,Q,tt,ot)}function Z(rt,Q,tt,ot){return U(rt,Q,tt,ot,{by:"x"})}function gt(rt,Q,tt,ot){return U(rt,Q,tt,ot,{by:"y"})}function ht(rt,Q,tt,ot){return rt[Q.target.canvas.altActionKey]?t.skewHandlerX(rt,Q,tt,ot):t.scalingY(rt,Q,tt,ot)}function St(rt,Q,tt,ot){return rt[Q.target.canvas.altActionKey]?t.skewHandlerY(rt,Q,tt,ot):t.scalingX(rt,Q,tt,ot)}function bt(rt,Q,tt,ot){var ct=Q.target,vt=yt(Q,Q.originX,Q.originY,tt,ot),Ot=ct.strokeWidth/(ct.strokeUniform?ct.scaleX:1),Ut=z(Q)?2:1,Bt=ct.width,mt=Math.abs(vt.x*Ut/ct.scaleX)-Ot;return ct.set("width",Math.max(mt,0)),Bt!==mt}function xt(rt,Q,tt,ot){var ct=Q.target,vt=tt-Q.offsetX,Ot=ot-Q.offsetY,Ut=!ct.get("lockMovementX")&&ct.left!==vt,Bt=!ct.get("lockMovementY")&&ct.top!==Ot;return Ut&&ct.set("left",vt),Bt&&ct.set("top",Ot),(Ut||Bt)&&T("moving",pt(rt,Q,tt,ot)),Ut||Bt}t.scaleCursorStyleHandler=H,t.skewCursorStyleHandler=nt,t.scaleSkewCursorStyleHandler=q,t.rotationWithSnapping=Rt("rotating",F(B)),t.scalingEqually=Rt("scaling",F(G)),t.scalingX=Rt("scaling",F(Z)),t.scalingY=Rt("scaling",F(gt)),t.scalingYOrSkewingX=ht,t.scalingXOrSkewingY=St,t.changeWidth=Rt("resizing",F(bt)),t.skewHandlerX=Y,t.skewHandlerY=lt,t.dragHandler=xt,t.scaleOrSkewActionName=Ct,t.rotationStyleHandler=V,t.fireEvent=T,t.wrapWithFixedAnchor=F,t.wrapWithFireEvent=Rt,t.getLocalPoint=yt,r.controlsUtils=t}(D),function(d){var r=d.fabric||(d.fabric={}),h=r.util.degreesToRadians,u=r.controlsUtils;function t(n,s,m,o,p){o=o||{};var y=this.sizeX||o.cornerSize||p.cornerSize,I=this.sizeY||o.cornerSize||p.cornerSize,b=typeof o.transparentCorners<"u"?o.transparentCorners:p.transparentCorners,T=b?"stroke":"fill",P=!b&&(o.cornerStrokeColor||p.cornerStrokeColor),z=s,j=m,H;n.save(),n.fillStyle=o.cornerColor||p.cornerColor,n.strokeStyle=o.cornerStrokeColor||p.cornerStrokeColor,y>I?(H=y,n.scale(1,I/y),j=m*y/I):I>y?(H=I,n.scale(y/I,1),z=s*I/y):H=y,n.lineWidth=1,n.beginPath(),n.arc(z,j,H/2,0,2*Math.PI,!1),n[T](),P&&n.stroke(),n.restore()}function a(n,s,m,o,p){o=o||{};var y=this.sizeX||o.cornerSize||p.cornerSize,I=this.sizeY||o.cornerSize||p.cornerSize,b=typeof o.transparentCorners<"u"?o.transparentCorners:p.transparentCorners,T=b?"stroke":"fill",P=!b&&(o.cornerStrokeColor||p.cornerStrokeColor),z=y/2,j=I/2;n.save(),n.fillStyle=o.cornerColor||p.cornerColor,n.strokeStyle=o.cornerStrokeColor||p.cornerStrokeColor,n.lineWidth=1,n.translate(s,m),n.rotate(h(p.angle)),n[T+"Rect"](-z,-j,y,I),P&&n.strokeRect(-z,-j,y,I),n.restore()}u.renderCircleControl=t,u.renderSquareControl=a}(D),function(d){var r=d.fabric||(d.fabric={});function h(u){for(var t in u)this[t]=u[t]}r.Control=h,r.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(u,t){return t.cursorStyle},getActionName:function(u,t){return t.actionName},getVisibility:function(u,t){var a=u._controlsVisibility;return a&&typeof a[t]<"u"?a[t]:this.visible},setVisibility:function(u){this.visible=u},positionHandler:function(u,t){var a=r.util.transformPoint({x:this.x*u.x+this.offsetX,y:this.y*u.y+this.offsetY},t);return a},calcCornerCoords:function(u,t,a,n,s){var m,o,p,y,I=s?this.touchSizeX:this.sizeX,b=s?this.touchSizeY:this.sizeY;if(I&&b&&I!==b){var T=Math.atan2(b,I),P=Math.sqrt(I*I+b*b)/2,z=T-r.util.degreesToRadians(u),j=Math.PI/2-T-r.util.degreesToRadians(u);m=P*r.util.cos(z),o=P*r.util.sin(z),p=P*r.util.cos(j),y=P*r.util.sin(j)}else{var H=I&&b?I:t;P=H*.7071067812;var z=r.util.degreesToRadians(45-u);m=p=P*r.util.cos(z),o=y=P*r.util.sin(z)}return{tl:{x:a-y,y:n-p},tr:{x:a+m,y:n-o},bl:{x:a-m,y:n+o},br:{x:a+y,y:n+p}}},render:function(u,t,a,n,s){switch(n=n||{},n.cornerStyle||s.cornerStyle){case"circle":r.controlsUtils.renderCircleControl.call(this,u,t,a,n,s);break;default:r.controlsUtils.renderSquareControl.call(this,u,t,a,n,s)}}}}(D),function(){function d(a,n){var s=a.getAttribute("style"),m=a.getAttribute("offset")||0,o,p,y,I;if(m=parseFloat(m)/(/%$/.test(m)?100:1),m=m<0?0:m>1?1:m,s){var b=s.split(/\s*;\s*/);for(b[b.length-1]===""&&b.pop(),I=b.length;I--;){var T=b[I].split(/\s*:\s*/),P=T[0].trim(),z=T[1].trim();P==="stop-color"?o=z:P==="stop-opacity"&&(y=z)}}return o||(o=a.getAttribute("stop-color")||"rgb(0,0,0)"),y||(y=a.getAttribute("stop-opacity")),o=new f.Color(o),p=o.getAlpha(),y=isNaN(parseFloat(y))?1:parseFloat(y),y*=p*n,{offset:m,color:o.toRgb(),opacity:y}}function r(a){return{x1:a.getAttribute("x1")||0,y1:a.getAttribute("y1")||0,x2:a.getAttribute("x2")||"100%",y2:a.getAttribute("y2")||0}}function h(a){return{x1:a.getAttribute("fx")||a.getAttribute("cx")||"50%",y1:a.getAttribute("fy")||a.getAttribute("cy")||"50%",r1:0,x2:a.getAttribute("cx")||"50%",y2:a.getAttribute("cy")||"50%",r2:a.getAttribute("r")||"50%"}}var u=f.util.object.clone;f.Gradient=f.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(a){a||(a={}),a.coords||(a.coords={});var n,s=this;Object.keys(a).forEach(function(m){s[m]=a[m]}),this.id?this.id+="_"+f.Object.__uid++:this.id=f.Object.__uid++,n={x1:a.coords.x1||0,y1:a.coords.y1||0,x2:a.coords.x2||0,y2:a.coords.y2||0},this.type==="radial"&&(n.r1=a.coords.r1||0,n.r2=a.coords.r2||0),this.coords=n,this.colorStops=a.colorStops.slice()},addColorStop:function(a){for(var n in a){var s=new f.Color(a[n]);this.colorStops.push({offset:parseFloat(n),color:s.toRgb(),opacity:s.getAlpha()})}return this},toObject:function(a){var n={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return f.util.populateWithProperties(this,n,a),n},toSVG:function(a,p){var s=u(this.coords,!0),m,o,p=p||{},y,I,b=u(this.colorStops,!0),T=s.r1>s.r2,P=this.gradientTransform?this.gradientTransform.concat():f.iMatrix.concat(),z=-this.offsetX,j=-this.offsetY,H=!!p.additionalTransform,nt=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(b.sort(function(F,Rt){return F.offset-Rt.offset}),nt==="objectBoundingBox"?(z/=a.width,j/=a.height):(z+=a.width/2,j+=a.height/2),a.type==="path"&&this.gradientUnits!=="percentage"&&(z-=a.pathOffset.x,j-=a.pathOffset.y),P[4]-=z,P[5]-=j,I='id="SVGID_'+this.id+'" gradientUnits="'+nt+'"',I+=' gradientTransform="'+(H?p.additionalTransform+" ":"")+f.util.matrixToSVG(P)+'" ',this.type==="linear"?y=["<linearGradient ",I,' x1="',s.x1,'" y1="',s.y1,'" x2="',s.x2,'" y2="',s.y2,`">
`]:this.type==="radial"&&(y=["<radialGradient ",I,' cx="',T?s.x1:s.x2,'" cy="',T?s.y1:s.y2,'" r="',T?s.r1:s.r2,'" fx="',T?s.x2:s.x1,'" fy="',T?s.y2:s.y1,`">
`]),this.type==="radial"){if(T)for(b=b.concat(),b.reverse(),m=0,o=b.length;m<o;m++)b[m].offset=1-b[m].offset;var q=Math.min(s.r1,s.r2);if(q>0){var Ct=Math.max(s.r1,s.r2),V=q/Ct;for(m=0,o=b.length;m<o;m++)b[m].offset+=V*(1-b[m].offset)}}for(m=0,o=b.length;m<o;m++){var pt=b[m];y.push("<stop ",'offset="',pt.offset*100+"%",'" style="stop-color:',pt.color,typeof pt.opacity<"u"?";stop-opacity: "+pt.opacity:";",`"/>
`)}return y.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),y.join("")},toLive:function(a){var n,s=f.util.object.clone(this.coords),m,o;if(!!this.type){for(this.type==="linear"?n=a.createLinearGradient(s.x1,s.y1,s.x2,s.y2):this.type==="radial"&&(n=a.createRadialGradient(s.x1,s.y1,s.r1,s.x2,s.y2,s.r2)),m=0,o=this.colorStops.length;m<o;m++){var p=this.colorStops[m].color,y=this.colorStops[m].opacity,I=this.colorStops[m].offset;typeof y<"u"&&(p=new f.Color(p).setAlpha(y).toRgba()),n.addColorStop(I,p)}return n}}}),f.util.object.extend(f.Gradient,{fromElement:function(a,n,s,m){var o=parseFloat(s)/(/%$/.test(s)?100:1);o=o<0?0:o>1?1:o,isNaN(o)&&(o=1);var p=a.getElementsByTagName("stop"),y,I=a.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",b=a.getAttribute("gradientTransform")||"",T=[],P,z,j=0,H=0,nt;for(a.nodeName==="linearGradient"||a.nodeName==="LINEARGRADIENT"?(y="linear",P=r(a)):(y="radial",P=h(a)),z=p.length;z--;)T.push(d(p[z],o));nt=f.parseTransformAttribute(b),t(n,P,m,I),I==="pixels"&&(j=-n.left,H=-n.top);var q=new f.Gradient({id:a.getAttribute("id"),type:y,coords:P,colorStops:T,gradientUnits:I,gradientTransform:nt,offsetX:j,offsetY:H});return q}});function t(a,n,s,m){var o,p;Object.keys(n).forEach(function(y){o=n[y],o==="Infinity"?p=1:o==="-Infinity"?p=0:(p=parseFloat(n[y],10),typeof o=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(o)&&(p*=.01,m==="pixels"&&((y==="x1"||y==="x2"||y==="r2")&&(p*=s.viewBoxWidth||s.width),(y==="y1"||y==="y2")&&(p*=s.viewBoxHeight||s.height)))),n[y]=p})}}(),function(){var d=f.util.toFixed;f.Pattern=f.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(r,h){if(r||(r={}),this.id=f.Object.__uid++,this.setOptions(r),!r.source||r.source&&typeof r.source!="string"){h&&h(this);return}else{var u=this;this.source=f.util.createImage(),f.util.loadImage(r.source,function(t,a){u.source=t,h&&h(u,a)},null,this.crossOrigin)}},toObject:function(r){var h=f.Object.NUM_FRACTION_DIGITS,u,t;return typeof this.source.src=="string"?u=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(u=this.source.toDataURL()),t={type:"pattern",source:u,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:d(this.offsetX,h),offsetY:d(this.offsetY,h),patternTransform:this.patternTransform?this.patternTransform.concat():null},f.util.populateWithProperties(this,t,r),t},toSVG:function(r){var h=typeof this.source=="function"?this.source():this.source,u=h.width/r.width,t=h.height/r.height,a=this.offsetX/r.width,n=this.offsetY/r.height,s="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(t=1,n&&(t+=Math.abs(n))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(u=1,a&&(u+=Math.abs(a))),h.src?s=h.src:h.toDataURL&&(s=h.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+a+'" y="'+n+'" width="'+u+'" height="'+t+`">
<image x="0" y="0" width="`+h.width+'" height="'+h.height+'" xlink:href="'+s+`"></image>
</pattern>
`},setOptions:function(r){for(var h in r)this[h]=r[h]},toLive:function(r){var h=this.source;return!h||typeof h.src<"u"&&(!h.complete||h.naturalWidth===0||h.naturalHeight===0)?"":r.createPattern(h,this.repeat)}})}(),function(d){var r=d.fabric||(d.fabric={}),h=r.util.toFixed;if(r.Shadow){r.warn("fabric.Shadow is already defined.");return}r.Shadow=r.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(u){typeof u=="string"&&(u=this._parseShadow(u));for(var t in u)this[t]=u[t];this.id=r.Object.__uid++},_parseShadow:function(u){var t=u.trim(),a=r.Shadow.reOffsetsAndBlur.exec(t)||[],n=t.replace(r.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:n.trim(),offsetX:parseFloat(a[1],10)||0,offsetY:parseFloat(a[2],10)||0,blur:parseFloat(a[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(u){var t=40,a=40,n=r.Object.NUM_FRACTION_DIGITS,s=r.util.rotateVector({x:this.offsetX,y:this.offsetY},r.util.degreesToRadians(-u.angle)),m=20,o=new r.Color(this.color);return u.width&&u.height&&(t=h((Math.abs(s.x)+this.blur)/u.width,n)*100+m,a=h((Math.abs(s.y)+this.blur)/u.height,n)*100+m),u.flipX&&(s.x*=-1),u.flipY&&(s.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+a+'%" height="'+(100+2*a)+'%" x="-'+t+'%" width="'+(100+2*t)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+h(this.blur?this.blur/2:0,n)+`"></feGaussianBlur>
	<feOffset dx="`+h(s.x,n)+'" dy="'+h(s.y,n)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+o.toRgb()+'" flood-opacity="'+o.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var u={},t=r.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(a){this[a]!==t[a]&&(u[a]=this[a])},this),u}}),r.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(D),function(){if(f.StaticCanvas){f.warn("fabric.StaticCanvas is already defined.");return}var d=f.util.object.extend,r=f.util.getElementOffset,h=f.util.removeFromArray,u=f.util.toFixed,t=f.util.transformPoint,a=f.util.invertTransform,n=f.util.getNodeCanvas,s=f.util.createCanvasElement,m=new Error("Could not initialize `canvas` element");f.StaticCanvas=f.util.createClass(f.CommonMethods,{initialize:function(o,p){p||(p={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(o,p)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:f.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(o,p){var y=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(o),this._initOptions(p),this.interactive||this._initRetinaScaling(),p.overlayImage&&this.setOverlayImage(p.overlayImage,y),p.backgroundImage&&this.setBackgroundImage(p.backgroundImage,y),p.backgroundColor&&this.setBackgroundColor(p.backgroundColor,y),p.overlayColor&&this.setOverlayColor(p.overlayColor,y),this.calcOffset()},_isRetinaScaling:function(){return f.devicePixelRatio!==1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?f.devicePixelRatio:1},_initRetinaScaling:function(){if(!!this._isRetinaScaling()){var o=f.devicePixelRatio;this.__initRetinaScaling(o,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(o,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(o,p,y){p.setAttribute("width",this.width*o),p.setAttribute("height",this.height*o),y.scale(o,o)},calcOffset:function(){return this._offset=r(this.lowerCanvasEl),this},setOverlayImage:function(o,p,y){return this.__setBgOverlayImage("overlayImage",o,p,y)},setBackgroundImage:function(o,p,y){return this.__setBgOverlayImage("backgroundImage",o,p,y)},setOverlayColor:function(o,p){return this.__setBgOverlayColor("overlayColor",o,p)},setBackgroundColor:function(o,p){return this.__setBgOverlayColor("backgroundColor",o,p)},__setBgOverlayImage:function(o,p,y,I){return typeof p=="string"?f.util.loadImage(p,function(b,T){if(b){var P=new f.Image(b,I);this[o]=P,P.canvas=this}y&&y(b,T)},this,I&&I.crossOrigin):(I&&p.setOptions(I),this[o]=p,p&&(p.canvas=this),y&&y(p,!1)),this},__setBgOverlayColor:function(o,p,y){return this[o]=p,this._initGradient(p,o),this._initPattern(p,o,y),this},_createCanvasElement:function(){var o=s();if(!o||(o.style||(o.style={}),typeof o.getContext>"u"))throw m;return o},_initOptions:function(o){var p=this.lowerCanvasEl;this._setOptions(o),this.width=this.width||parseInt(p.width,10)||0,this.height=this.height||parseInt(p.height,10)||0,this.lowerCanvasEl.style&&(p.width=this.width,p.height=this.height,p.style.width=this.width+"px",p.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(o){o&&o.getContext?this.lowerCanvasEl=o:this.lowerCanvasEl=f.util.getById(o)||this._createCanvasElement(),f.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(o,p){return this.setDimensions({width:o},p)},setHeight:function(o,p){return this.setDimensions({height:o},p)},setDimensions:function(o,p){var y;p=p||{};for(var I in o)y=o[I],p.cssOnly||(this._setBackstoreDimension(I,o[I]),y+="px",this.hasLostContext=!0),p.backstoreOnly||this._setCssDimension(I,y);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this.calcOffset(),p.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(o,p){return this.lowerCanvasEl[o]=p,this.upperCanvasEl&&(this.upperCanvasEl[o]=p),this.cacheCanvasEl&&(this.cacheCanvasEl[o]=p),this[o]=p,this},_setCssDimension:function(o,p){return this.lowerCanvasEl.style[o]=p,this.upperCanvasEl&&(this.upperCanvasEl.style[o]=p),this.wrapperEl&&(this.wrapperEl.style[o]=p),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(o){var p=this._activeObject,y=this.backgroundImage,I=this.overlayImage,b,T,P;for(this.viewportTransform=o,T=0,P=this._objects.length;T<P;T++)b=this._objects[T],b.group||b.setCoords(!0);return p&&p.setCoords(),y&&y.setCoords(!0),I&&I.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(o,p){var y=o,I=this.viewportTransform.slice(0);o=t(o,a(this.viewportTransform)),I[0]=p,I[3]=p;var b=t(o,I);return I[4]+=y.x-b.x,I[5]+=y.y-b.y,this.setViewportTransform(I)},setZoom:function(o){return this.zoomToPoint(new f.Point(0,0),o),this},absolutePan:function(o){var p=this.viewportTransform.slice(0);return p[4]=-o.x,p[5]=-o.y,this.setViewportTransform(p)},relativePan:function(o){return this.absolutePan(new f.Point(-o.x-this.viewportTransform[4],-o.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(o){this.stateful&&o.setupState(),o._set("canvas",this),o.setCoords(),this.fire("object:added",{target:o}),o.fire("added")},_onObjectRemoved:function(o){this.fire("object:removed",{target:o}),o.fire("removed"),delete o.canvas},clearContext:function(o){return o.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var o=this.contextContainer;return this.renderCanvas(o,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=f.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var o={},p=this.width,y=this.height,I=a(this.viewportTransform);return o.tl=t({x:0,y:0},I),o.br=t({x:p,y},I),o.tr=new f.Point(o.br.x,o.tl.y),o.bl=new f.Point(o.tl.x,o.br.y),this.vptCoords=o,o},cancelRequestedRender:function(){this.isRendering&&(f.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(o,p){var y=this.viewportTransform,I=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(o),f.util.setImageSmoothing(o,this.imageSmoothingEnabled),this.fire("before:render",{ctx:o}),this._renderBackground(o),o.save(),o.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._renderObjects(o,p),o.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(o),I&&(I.canvas=this,I.shouldCache(),I._transformDone=!0,I.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(o)),this._renderOverlay(o),this.controlsAboveOverlay&&this.interactive&&this.drawControls(o),this.fire("after:render",{ctx:o})},drawClipPathOnCanvas:function(o){var p=this.viewportTransform,y=this.clipPath;o.save(),o.transform(p[0],p[1],p[2],p[3],p[4],p[5]),o.globalCompositeOperation="destination-in",y.transform(o),o.scale(1/y.zoomX,1/y.zoomY),o.drawImage(y._cacheCanvas,-y.cacheTranslationX,-y.cacheTranslationY),o.restore()},_renderObjects:function(o,p){var y,I;for(y=0,I=p.length;y<I;++y)p[y]&&p[y].render(o)},_renderBackgroundOrOverlay:function(o,p){var y=this[p+"Color"],I=this[p+"Image"],b=this.viewportTransform,T=this[p+"Vpt"];if(!(!y&&!I)){if(y){o.save(),o.beginPath(),o.moveTo(0,0),o.lineTo(this.width,0),o.lineTo(this.width,this.height),o.lineTo(0,this.height),o.closePath(),o.fillStyle=y.toLive?y.toLive(o,this):y,T&&o.transform(b[0],b[1],b[2],b[3],b[4],b[5]),o.transform(1,0,0,1,y.offsetX||0,y.offsetY||0);var P=y.gradientTransform||y.patternTransform;P&&o.transform(P[0],P[1],P[2],P[3],P[4],P[5]),o.fill(),o.restore()}I&&(o.save(),T&&o.transform(b[0],b[1],b[2],b[3],b[4],b[5]),I.render(o),o.restore())}},_renderBackground:function(o){this._renderBackgroundOrOverlay(o,"background")},_renderOverlay:function(o){this._renderBackgroundOrOverlay(o,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(o){return this._centerObject(o,new f.Point(this.getCenter().left,o.getCenterPoint().y))},centerObjectV:function(o){return this._centerObject(o,new f.Point(o.getCenterPoint().x,this.getCenter().top))},centerObject:function(o){var p=this.getCenter();return this._centerObject(o,new f.Point(p.left,p.top))},viewportCenterObject:function(o){var p=this.getVpCenter();return this._centerObject(o,p)},viewportCenterObjectH:function(o){var p=this.getVpCenter();return this._centerObject(o,new f.Point(p.x,o.getCenterPoint().y)),this},viewportCenterObjectV:function(o){var p=this.getVpCenter();return this._centerObject(o,new f.Point(o.getCenterPoint().x,p.y))},getVpCenter:function(){var o=this.getCenter(),p=a(this.viewportTransform);return t({x:o.left,y:o.top},p)},_centerObject:function(o,p){return o.setPositionByOrigin(p,"center","center"),o.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(o){return this.toDatalessObject(o)},toObject:function(o){return this._toObjectMethod("toObject",o)},toDatalessObject:function(o){return this._toObjectMethod("toDatalessObject",o)},_toObjectMethod:function(o,p){var y=this.clipPath,I={version:f.version,objects:this._toObjects(o,p)};return y&&!y.excludeFromExport&&(I.clipPath=this._toObject(this.clipPath,o,p)),d(I,this.__serializeBgOverlay(o,p)),f.util.populateWithProperties(this,I,p),I},_toObjects:function(o,p){return this._objects.filter(function(y){return!y.excludeFromExport}).map(function(y){return this._toObject(y,o,p)},this)},_toObject:function(o,p,y){var I;this.includeDefaultValues||(I=o.includeDefaultValues,o.includeDefaultValues=!1);var b=o[p](y);return this.includeDefaultValues||(o.includeDefaultValues=I),b},__serializeBgOverlay:function(o,p){var y={},I=this.backgroundImage,b=this.overlayImage,T=this.backgroundColor,P=this.overlayColor;return T&&T.toObject?T.excludeFromExport||(y.background=T.toObject(p)):T&&(y.background=T),P&&P.toObject?P.excludeFromExport||(y.overlay=P.toObject(p)):P&&(y.overlay=P),I&&!I.excludeFromExport&&(y.backgroundImage=this._toObject(I,o,p)),b&&!b.excludeFromExport&&(y.overlayImage=this._toObject(b,o,p)),y},svgViewportTransformation:!0,toSVG:function(o,p){o||(o={}),o.reviver=p;var y=[];return this._setSVGPreamble(y,o),this._setSVGHeader(y,o),this.clipPath&&y.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(y,"background"),this._setSVGBgOverlayImage(y,"backgroundImage",p),this._setSVGObjects(y,p),this.clipPath&&y.push(`</g>
`),this._setSVGBgOverlayColor(y,"overlay"),this._setSVGBgOverlayImage(y,"overlayImage",p),y.push("</svg>"),y.join("")},_setSVGPreamble:function(o,p){p.suppressPreamble||o.push('<?xml version="1.0" encoding="',p.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(o,p){var y=p.width||this.width,I=p.height||this.height,b,T='viewBox="0 0 '+this.width+" "+this.height+'" ',P=f.Object.NUM_FRACTION_DIGITS;p.viewBox?T='viewBox="'+p.viewBox.x+" "+p.viewBox.y+" "+p.viewBox.width+" "+p.viewBox.height+'" ':this.svgViewportTransformation&&(b=this.viewportTransform,T='viewBox="'+u(-b[4]/b[0],P)+" "+u(-b[5]/b[3],P)+" "+u(this.width/b[0],P)+" "+u(this.height/b[3],P)+'" '),o.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',y,'" ','height="',I,'" ',T,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",f.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(p),`</defs>
`)},createSVGClipPathMarkup:function(o){var p=this.clipPath;return p?(p.clipPathId="CLIPPATH_"+f.Object.__uid++,'<clipPath id="'+p.clipPathId+`" >
`+this.clipPath.toClipPathSVG(o.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var o=this,p=["background","overlay"].map(function(y){var I=o[y+"Color"];if(I&&I.toLive){var b=o[y+"Vpt"],T=o.viewportTransform,P={width:o.width/(b?T[0]:1),height:o.height/(b?T[3]:1)};return I.toSVG(P,{additionalTransform:b?f.util.matrixToSVG(T):""})}});return p.join("")},createSVGFontFacesMarkup:function(){var o="",p={},y,I,b,T,P,z,j,H,nt,q=f.fontPaths,Ct=[];for(this._objects.forEach(function pt(F){Ct.push(F),F._objects&&F._objects.forEach(pt)}),H=0,nt=Ct.length;H<nt;H++)if(y=Ct[H],I=y.fontFamily,!(y.type.indexOf("text")===-1||p[I]||!q[I])&&(p[I]=!0,!!y.styles)){b=y.styles;for(P in b){T=b[P];for(j in T)z=T[j],I=z.fontFamily,!p[I]&&q[I]&&(p[I]=!0)}}for(var V in p)o+=[`		@font-face {
`,"			font-family: '",V,`';
`,"			src: url('",q[V],`');
`,`		}
`].join("");return o&&(o=['	<style type="text/css">',`<![CDATA[
`,o,"]]>",`</style>
`].join("")),o},_setSVGObjects:function(o,p){var y,I,b,T=this._objects;for(I=0,b=T.length;I<b;I++)y=T[I],!y.excludeFromExport&&this._setSVGObject(o,y,p)},_setSVGObject:function(o,p,y){o.push(p.toSVG(y))},_setSVGBgOverlayImage:function(o,p,y){this[p]&&!this[p].excludeFromExport&&this[p].toSVG&&o.push(this[p].toSVG(y))},_setSVGBgOverlayColor:function(o,p){var y=this[p+"Color"],I=this.viewportTransform,b=this.width,T=this.height;if(!!y)if(y.toLive){var P=y.repeat,z=f.util.invertTransform(I),j=this[p+"Vpt"],H=j?f.util.matrixToSVG(z):"";o.push('<rect transform="'+H+" translate(",b/2,",",T/2,')"',' x="',y.offsetX-b/2,'" y="',y.offsetY-T/2,'" ','width="',P==="repeat-y"||P==="no-repeat"?y.source.width:b,'" height="',P==="repeat-x"||P==="no-repeat"?y.source.height:T,'" fill="url(#SVGID_'+y.id+')"',`></rect>
`)}else o.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',y,'"',`></rect>
`)},sendToBack:function(o){if(!o)return this;var p=this._activeObject,y,I,b;if(o===p&&o.type==="activeSelection")for(b=p._objects,y=b.length;y--;)I=b[y],h(this._objects,I),this._objects.unshift(I);else h(this._objects,o),this._objects.unshift(o);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(o){if(!o)return this;var p=this._activeObject,y,I,b;if(o===p&&o.type==="activeSelection")for(b=p._objects,y=0;y<b.length;y++)I=b[y],h(this._objects,I),this._objects.push(I);else h(this._objects,o),this._objects.push(o);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(o,p){if(!o)return this;var y=this._activeObject,I,b,T,P,z,j=0;if(o===y&&o.type==="activeSelection")for(z=y._objects,I=0;I<z.length;I++)b=z[I],T=this._objects.indexOf(b),T>0+j&&(P=T-1,h(this._objects,b),this._objects.splice(P,0,b)),j++;else T=this._objects.indexOf(o),T!==0&&(P=this._findNewLowerIndex(o,T,p),h(this._objects,o),this._objects.splice(P,0,o));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(o,p,y){var I,b;if(y)for(I=p,b=p-1;b>=0;--b){var T=o.intersectsWithObject(this._objects[b])||o.isContainedWithinObject(this._objects[b])||this._objects[b].isContainedWithinObject(o);if(T){I=b;break}}else I=p-1;return I},bringForward:function(o,p){if(!o)return this;var y=this._activeObject,I,b,T,P,z,j=0;if(o===y&&o.type==="activeSelection")for(z=y._objects,I=z.length;I--;)b=z[I],T=this._objects.indexOf(b),T<this._objects.length-1-j&&(P=T+1,h(this._objects,b),this._objects.splice(P,0,b)),j++;else T=this._objects.indexOf(o),T!==this._objects.length-1&&(P=this._findNewUpperIndex(o,T,p),h(this._objects,o),this._objects.splice(P,0,o));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(o,p,y){var I,b,T;if(y)for(I=p,b=p+1,T=this._objects.length;b<T;++b){var P=o.intersectsWithObject(this._objects[b])||o.isContainedWithinObject(this._objects[b])||this._objects[b].isContainedWithinObject(o);if(P){I=b;break}}else I=p+1;return I},moveTo:function(o,p){return h(this._objects,o),this._objects.splice(p,0,o),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(f.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(o){o.dispose&&o.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),this.lowerCanvasEl.style=this._originalCanvasStyle,delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),f.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),d(f.StaticCanvas.prototype,f.Observable),d(f.StaticCanvas.prototype,f.Collection),d(f.StaticCanvas.prototype,f.DataURLExporter),d(f.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(o){var p=s();if(!p||!p.getContext)return null;var y=p.getContext("2d");if(!y)return null;switch(o){case"setLineDash":return typeof y.setLineDash<"u";default:return null}}}),f.StaticCanvas.prototype.toJSON=f.StaticCanvas.prototype.toObject,f.isLikelyNode&&(f.StaticCanvas.prototype.createPNGStream=function(){var o=n(this.lowerCanvasEl);return o&&o.createPNGStream()},f.StaticCanvas.prototype.createJPEGStream=function(o){var p=n(this.lowerCanvasEl);return p&&p.createJPEGStream(o)})}(),f.BaseBrush=f.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(){var d=this.canvas.contextTop;d.strokeStyle=this.color,d.lineWidth=this.width,d.lineCap=this.strokeLineCap,d.miterLimit=this.strokeMiterLimit,d.lineJoin=this.strokeLineJoin,d.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(d){var r=this.canvas.viewportTransform;d.save(),d.transform(r[0],r[1],r[2],r[3],r[4],r[5])},_setShadow:function(){if(!!this.shadow){var d=this.canvas,r=this.shadow,h=d.contextTop,u=d.getZoom();d&&d._isRetinaScaling()&&(u*=f.devicePixelRatio),h.shadowColor=r.color,h.shadowBlur=r.blur*u,h.shadowOffsetX=r.offsetX*u,h.shadowOffsetY=r.offsetY*u}},needsFullRender:function(){var d=new f.Color(this.color);return d.getAlpha()<1||!!this.shadow},_resetShadow:function(){var d=this.canvas.contextTop;d.shadowColor="",d.shadowBlur=d.shadowOffsetX=d.shadowOffsetY=0},_isOutSideCanvas:function(d){return d.x<0||d.x>this.canvas.getWidth()||d.y<0||d.y>this.canvas.getHeight()}}),function(){f.PencilBrush=f.util.createClass(f.BaseBrush,{decimate:.4,initialize:function(d){this.canvas=d,this._points=[]},_drawSegment:function(d,r,h){var u=r.midPointFrom(h);return d.quadraticCurveTo(r.x,r.y,u.x,u.y),u},onMouseDown:function(d,r){!this.canvas._isMainEvent(r.e)||(this._prepareForDrawing(d),this._captureDrawingPath(d),this._render())},onMouseMove:function(d,r){if(!!this.canvas._isMainEvent(r.e)&&!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(d))&&this._captureDrawingPath(d)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var h=this._points,u=h.length,t=this.canvas.contextTop;this._saveAndTransform(t),this.oldEnd&&(t.beginPath(),t.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(t,h[u-2],h[u-1],!0),t.stroke(),t.restore()}},onMouseUp:function(d){return this.canvas._isMainEvent(d.e)?(this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(d){var r=new f.Point(d.x,d.y);this._reset(),this._addPoint(r),this.canvas.contextTop.moveTo(r.x,r.y)},_addPoint:function(d){return this._points.length>1&&d.eq(this._points[this._points.length-1])?!1:(this._points.push(d),!0)},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(d){var r=new f.Point(d.x,d.y);return this._addPoint(r)},_render:function(){var d=this.canvas.contextTop,r,h,u=this._points[0],t=this._points[1];if(this._saveAndTransform(d),d.beginPath(),this._points.length===2&&u.x===t.x&&u.y===t.y){var a=this.width/1e3;u=new f.Point(u.x,u.y),t=new f.Point(t.x,t.y),u.x-=a,t.x+=a}for(d.moveTo(u.x,u.y),r=1,h=this._points.length;r<h;r++)this._drawSegment(d,u,t),u=this._points[r],t=this._points[r+1];d.lineTo(u.x,u.y),d.stroke(),d.restore()},convertPointsToSVGPath:function(d){var r=this.width/1e3;return f.util.getSmoothPathFromPoints(d,r)},_isEmptySVGPath:function(d){var r=f.util.joinPath(d);return r==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(d){var r=new f.Path(d,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,r.shadow=new f.Shadow(this.shadow)),r},decimatePoints:function(d,r){if(d.length<=2)return d;var h=this.canvas.getZoom(),u=Math.pow(r/h,2),t,a=d.length-1,n=d[0],s=[n],m;for(t=1;t<a-1;t++)m=Math.pow(n.x-d[t].x,2)+Math.pow(n.y-d[t].y,2),m>=u&&(n=d[t],s.push(n));return s.push(d[a]),s},_finalizeAndAddPath:function(){var d=this.canvas.contextTop;d.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var r=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(r)){this.canvas.requestRenderAll();return}var h=this.createPath(r);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:h}),this.canvas.add(h),this.canvas.requestRenderAll(),h.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:h})}})}(),f.CircleBrush=f.util.createClass(f.BaseBrush,{width:10,initialize:function(d){this.canvas=d,this.points=[]},drawDot:function(d){var r=this.addPoint(d),h=this.canvas.contextTop;this._saveAndTransform(h),this.dot(h,r),h.restore()},dot:function(d,r){d.fillStyle=r.fill,d.beginPath(),d.arc(r.x,r.y,r.radius,0,Math.PI*2,!1),d.closePath(),d.fill()},onMouseDown:function(d){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(d)},_render:function(){var d=this.canvas.contextTop,r,h,u=this.points;for(this._saveAndTransform(d),r=0,h=u.length;r<h;r++)this.dot(d,u[r]);d.restore()},onMouseMove:function(d){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(d)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(d),this._render()):this.drawDot(d))},onMouseUp:function(){var d=this.canvas.renderOnAddRemove,r,h;this.canvas.renderOnAddRemove=!1;var u=[];for(r=0,h=this.points.length;r<h;r++){var t=this.points[r],a=new f.Circle({radius:t.radius,left:t.x,top:t.y,originX:"center",originY:"center",fill:t.fill});this.shadow&&(a.shadow=new f.Shadow(this.shadow)),u.push(a)}var n=new f.Group(u);n.canvas=this.canvas,this.canvas.fire("before:path:created",{path:n}),this.canvas.add(n),this.canvas.fire("path:created",{path:n}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=d,this.canvas.requestRenderAll()},addPoint:function(d){var r=new f.Point(d.x,d.y),h=f.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,u=new f.Color(this.color).setAlpha(f.util.getRandomInt(0,100)/100).toRgba();return r.radius=h,r.fill=u,this.points.push(r),r}}),f.SprayBrush=f.util.createClass(f.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(d){this.canvas=d,this.sprayChunks=[]},onMouseDown:function(d){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(d),this.render(this.sprayChunkPoints)},onMouseMove:function(d){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(d)||(this.addSprayChunk(d),this.render(this.sprayChunkPoints))},onMouseUp:function(){var d=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var r=[],h=0,u=this.sprayChunks.length;h<u;h++)for(var t=this.sprayChunks[h],a=0,n=t.length;a<n;a++){var s=new f.Rect({width:t[a].width,height:t[a].width,left:t[a].x+1,top:t[a].y+1,originX:"center",originY:"center",fill:this.color});r.push(s)}this.optimizeOverlapping&&(r=this._getOptimizedRects(r));var m=new f.Group(r);this.shadow&&m.set("shadow",new f.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:m}),this.canvas.add(m),this.canvas.fire("path:created",{path:m}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=d,this.canvas.requestRenderAll()},_getOptimizedRects:function(d){var r={},h,u,t;for(u=0,t=d.length;u<t;u++)h=d[u].left+""+d[u].top,r[h]||(r[h]=d[u]);var a=[];for(h in r)a.push(r[h]);return a},render:function(d){var r=this.canvas.contextTop,h,u;for(r.fillStyle=this.color,this._saveAndTransform(r),h=0,u=d.length;h<u;h++){var t=d[h];typeof t.opacity<"u"&&(r.globalAlpha=t.opacity),r.fillRect(t.x,t.y,t.width,t.width)}r.restore()},_render:function(){var d=this.canvas.contextTop,r,h;for(d.fillStyle=this.color,this._saveAndTransform(d),r=0,h=this.sprayChunks.length;r<h;r++)this.render(this.sprayChunks[r]);d.restore()},addSprayChunk:function(d){this.sprayChunkPoints=[];var r,h,u,t=this.width/2,a;for(a=0;a<this.density;a++){r=f.util.getRandomInt(d.x-t,d.x+t),h=f.util.getRandomInt(d.y-t,d.y+t),this.dotWidthVariance?u=f.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):u=this.dotWidth;var n=new f.Point(r,h);n.width=u,this.randomOpacity&&(n.opacity=f.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(n)}this.sprayChunks.push(this.sprayChunkPoints)}}),f.PatternBrush=f.util.createClass(f.PencilBrush,{getPatternSrc:function(){var d=20,r=5,h=f.util.createCanvasElement(),u=h.getContext("2d");return h.width=h.height=d+r,u.fillStyle=this.color,u.beginPath(),u.arc(d/2,d/2,d/2,0,Math.PI*2,!1),u.closePath(),u.fill(),h},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(d){var r=this.callSuper("createPath",d),h=r._getLeftTopCoords().scalarAdd(r.strokeWidth/2);return r.stroke=new f.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-h.x,offsetY:-h.y}),r}}),function(){var d=f.util.getPointer,r=f.util.degreesToRadians,h=f.util.isTouchEvent;f.Canvas=f.util.createClass(f.StaticCanvas,{initialize:function(t,a){a||(a={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,a),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=f.PencilBrush&&new f.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t=this.getActiveObjects(),a,n,s;if(t.length>0&&!this.preserveObjectStacking){n=[],s=[];for(var m=0,o=this._objects.length;m<o;m++)a=this._objects[m],t.indexOf(a)===-1?n.push(a):s.push(a);t.length>1&&(this._activeObject._objects=s),n.push.apply(n,s)}else n=this._objects;return n},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var t=this.contextContainer;return this.renderCanvas(t,this._chooseObjectsToRender()),this},renderTopLayer:function(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.renderTopLayer(t),this.fire("after:render"),this},_normalizePointer:function(t,a){var n=t.calcTransformMatrix(),s=f.util.invertTransform(n),m=this.restorePointerVpt(a);return f.util.transformPoint(m,s)},isTargetTransparent:function(t,a,n){if(t.shouldCache()&&t._cacheCanvas&&t!==this._activeObject){var s=this._normalizePointer(t,{x:a,y:n}),m=Math.max(t.cacheTranslationX+s.x*t.zoomX,0),o=Math.max(t.cacheTranslationY+s.y*t.zoomY,0),b=f.util.isTransparent(t._cacheContext,Math.round(m),Math.round(o),this.targetFindTolerance);return b}var p=this.contextCache,y=t.selectionBackgroundColor,I=this.viewportTransform;t.selectionBackgroundColor="",this.clearContext(p),p.save(),p.transform(I[0],I[1],I[2],I[3],I[4],I[5]),t.render(p),p.restore(),t.selectionBackgroundColor=y;var b=f.util.isTransparent(p,a,n,this.targetFindTolerance);return b},_isSelectionKeyPressed:function(t){var a=!1;return Object.prototype.toString.call(this.selectionKey)==="[object Array]"?a=!!this.selectionKey.find(function(n){return t[n]===!0}):a=t[this.selectionKey],a},_shouldClearSelection:function(t,a){var n=this.getActiveObjects(),s=this._activeObject;return!a||a&&s&&n.length>1&&n.indexOf(a)===-1&&s!==a&&!this._isSelectionKeyPressed(t)||a&&!a.evented||a&&!a.selectable&&s&&s!==a},_shouldCenterTransform:function(t,a,n){if(!!t){var s;return a==="scale"||a==="scaleX"||a==="scaleY"||a==="resizing"?s=this.centeredScaling||t.centeredScaling:a==="rotate"&&(s=this.centeredRotation||t.centeredRotation),s?!n:n}},_getOriginFromCorner:function(t,a){var n={x:t.originX,y:t.originY};return a==="ml"||a==="tl"||a==="bl"?n.x="right":(a==="mr"||a==="tr"||a==="br")&&(n.x="left"),a==="tl"||a==="mt"||a==="tr"?n.y="bottom":(a==="bl"||a==="mb"||a==="br")&&(n.y="top"),n},_getActionFromCorner:function(t,a,n,s){if(!a||!t)return"drag";var m=s.controls[a];return m.getActionName(n,m,s)},_setupCurrentTransform:function(t,a,n){if(!!a){var s=this.getPointer(t),m=a.__corner,o=a.controls[m],p=n&&m?o.getActionHandler(t,a,o):f.controlsUtils.dragHandler,y=this._getActionFromCorner(n,m,t,a),I=this._getOriginFromCorner(a,m),b=t[this.centeredKey],T={target:a,action:y,actionHandler:p,corner:m,scaleX:a.scaleX,scaleY:a.scaleY,skewX:a.skewX,skewY:a.skewY,offsetX:s.x-a.left,offsetY:s.y-a.top,originX:I.x,originY:I.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:r(a.angle),width:a.width*a.scaleX,shiftKey:t.shiftKey,altKey:b,original:f.util.saveObjectTransform(a)};this._shouldCenterTransform(a,y,b)&&(T.originX="center",T.originY="center"),T.original.originX=I.x,T.original.originY=I.y,this._currentTransform=T,this._beforeTransform(t)}},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_drawSelection:function(t){var a=this._groupSelector,n=new f.Point(a.ex,a.ey),s=f.util.transformPoint(n,this.viewportTransform),m=new f.Point(a.ex+a.left,a.ey+a.top),o=f.util.transformPoint(m,this.viewportTransform),p=Math.min(s.x,o.x),y=Math.min(s.y,o.y),I=Math.max(s.x,o.x),b=Math.max(s.y,o.y),T=this.selectionLineWidth/2;this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(p,y,I-p,b-y)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,p+=T,y+=T,I-=T,b-=T,f.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(p,y,I-p,b-y))},findTarget:function(t,a){if(!this.skipTargetFind){var n=!0,s=this.getPointer(t,n),m=this._activeObject,o=this.getActiveObjects(),p,y,I=h(t),b=o.length>1&&!a||o.length===1;if(this.targets=[],b&&m._findTargetCorner(s,I)||o.length>1&&!a&&m===this._searchPossibleTargets([m],s))return m;if(o.length===1&&m===this._searchPossibleTargets([m],s))if(this.preserveObjectStacking)p=m,y=this.targets,this.targets=[];else return m;var T=this._searchPossibleTargets(this._objects,s);return t[this.altSelectionKey]&&T&&p&&T!==p&&(T=p,this.targets=y),T}},_checkTarget:function(t,a,n){if(a&&a.visible&&a.evented&&a.containsPoint(t))if((this.perPixelTargetFind||a.perPixelTargetFind)&&!a.isEditing){var s=this.isTargetTransparent(a,n.x,n.y);if(!s)return!0}else return!0},_searchPossibleTargets:function(t,a){for(var n,s=t.length,m;s--;){var o=t[s],p=o.group?this._normalizePointer(o.group,a):a;if(this._checkTarget(p,o,a)){n=t[s],n.subTargetCheck&&n instanceof f.Group&&(m=this._searchPossibleTargets(n._objects,a),m&&this.targets.push(m));break}}return n},restorePointerVpt:function(t){return f.util.transformPoint(t,f.util.invertTransform(this.viewportTransform))},getPointer:function(t,a){if(this._absolutePointer&&!a)return this._absolutePointer;if(this._pointer&&a)return this._pointer;var n=d(t),s=this.upperCanvasEl,m=s.getBoundingClientRect(),o=m.width||0,p=m.height||0,y;(!o||!p)&&("top"in m&&"bottom"in m&&(p=Math.abs(m.top-m.bottom)),"right"in m&&"left"in m&&(o=Math.abs(m.right-m.left))),this.calcOffset(),n.x=n.x-this._offset.left,n.y=n.y-this._offset.top,a||(n=this.restorePointerVpt(n));var I=this.getRetinaScaling();return I!==1&&(n.x/=I,n.y/=I),o===0||p===0?y={width:1,height:1}:y={width:s.width/o,height:s.height/p},{x:n.x*y.width,y:n.y*y.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),a=this.lowerCanvasEl,n=this.upperCanvasEl;n?n.className="":(n=this._createCanvasElement(),this.upperCanvasEl=n),f.util.addClass(n,"upper-canvas "+t),this.wrapperEl.appendChild(n),this._copyCanvasStyle(a,n),this._applyCanvasStyle(n),this.contextTop=n.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=f.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),f.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),f.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var a=this.width||t.width,n=this.height||t.height;f.util.setStyle(t,{position:"absolute",width:a+"px",height:n+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),t.width=a,t.height=n,f.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,a){a.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var t=this._activeObject;return t?t.type==="activeSelection"&&t._objects?t._objects.slice(0):[t]:[]},_onObjectRemoved:function(t){t===this._activeObject&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),t===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",t)},_fireSelectionEvents:function(t,a){var n=!1,s=this.getActiveObjects(),m=[],o=[];t.forEach(function(p){s.indexOf(p)===-1&&(n=!0,p.fire("deselected",{e:a,target:p}),o.push(p))}),s.forEach(function(p){t.indexOf(p)===-1&&(n=!0,p.fire("selected",{e:a,target:p}),m.push(p))}),t.length>0&&s.length>0?n&&this.fire("selection:updated",{e:a,selected:m,deselected:o,updated:m[0]||o[0],target:this._activeObject}):s.length>0?this.fire("selection:created",{e:a,selected:m,target:this._activeObject}):t.length>0&&this.fire("selection:cleared",{e:a,deselected:o})},setActiveObject:function(t,a){var n=this.getActiveObjects();return this._setActiveObject(t,a),this._fireSelectionEvents(n,a),this},_setActiveObject:function(t,a){return this._activeObject===t||!this._discardActiveObject(a,t)||t.onSelect({e:a})?!1:(this._activeObject=t,!0)},_discardActiveObject:function(t,a){var n=this._activeObject;if(n){if(n.onDeselect({e:t,object:a}))return!1;this._activeObject=null}return!0},discardActiveObject:function(t){var a=this.getActiveObjects(),n=this.getActiveObject();return a.length&&this.fire("before:selection:cleared",{target:n,e:t}),this._discardActiveObject(t),this._fireSelectionEvents(a,t),this},dispose:function(){var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(a){f.util.cleanUpJsdomNode(this[a]),this[a]=void 0}.bind(this)),t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,f.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var a=this._activeObject;a&&a._renderControls(t)},_toObject:function(t,a,n){var s=this._realizeGroupTransformOnObject(t),m=this.callSuper("_toObject",t,a,n);return this._unwindGroupTransformOnObject(t,s),m},_realizeGroupTransformOnObject:function(t){if(t.group&&t.group.type==="activeSelection"&&this._activeObject===t.group){var a=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],n={};return a.forEach(function(s){n[s]=t[s]}),f.util.addTransformToObject(t,this._activeObject.calcOwnMatrix()),n}else return null},_unwindGroupTransformOnObject:function(t,a){a&&t.set(a)},_setSVGObject:function(t,a,n){var s=this._realizeGroupTransformOnObject(a);this.callSuper("_setSVGObject",t,a,n),this._unwindGroupTransformOnObject(a,s)},setViewportTransform:function(t){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),f.StaticCanvas.prototype.setViewportTransform.call(this,t)}});for(var u in f.StaticCanvas)u!=="prototype"&&(f.Canvas[u]=f.StaticCanvas[u])}(),function(){var d=f.util.addListener,r=f.util.removeListener,h=3,u=2,t=1,a={passive:!1};function n(s,m){return s.button&&s.button===m-1}f.util.object.extend(f.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(d,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(s,m){var o=this.upperCanvasEl,p=this._getEventPrefix();s(f.window,"resize",this._onResize),s(o,p+"down",this._onMouseDown),s(o,p+"move",this._onMouseMove,a),s(o,p+"out",this._onMouseOut),s(o,p+"enter",this._onMouseEnter),s(o,"wheel",this._onMouseWheel),s(o,"contextmenu",this._onContextMenu),s(o,"dblclick",this._onDoubleClick),s(o,"dragover",this._onDragOver),s(o,"dragenter",this._onDragEnter),s(o,"dragleave",this._onDragLeave),s(o,"drop",this._onDrop),this.enablePointerEvents||s(o,"touchstart",this._onTouchStart,a),typeof eventjs<"u"&&m in eventjs&&(eventjs[m](o,"gesture",this._onGesture),eventjs[m](o,"drag",this._onDrag),eventjs[m](o,"orientation",this._onOrientationChange),eventjs[m](o,"shake",this._onShake),eventjs[m](o,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(r,"remove");var s=this._getEventPrefix();r(f.document,s+"up",this._onMouseUp),r(f.document,"touchend",this._onTouchEnd,a),r(f.document,s+"move",this._onMouseMove,a),r(f.document,"touchmove",this._onMouseMove,a)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(s,m){this.__onTransformGesture&&this.__onTransformGesture(s,m)},_onDrag:function(s,m){this.__onDrag&&this.__onDrag(s,m)},_onMouseWheel:function(s){this.__onMouseWheel(s)},_onMouseOut:function(s){var m=this._hoveredTarget;this.fire("mouse:out",{target:m,e:s}),this._hoveredTarget=null,m&&m.fire("mouseout",{e:s});var o=this;this._hoveredTargets.forEach(function(p){o.fire("mouse:out",{target:m,e:s}),p&&m.fire("mouseout",{e:s})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(p){p.isEditing&&p.hiddenTextarea.focus()})},_onMouseEnter:function(s){!this._currentTransform&&!this.findTarget(s)&&(this.fire("mouse:over",{target:null,e:s}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(s,m){this.__onOrientationChange&&this.__onOrientationChange(s,m)},_onShake:function(s,m){this.__onShake&&this.__onShake(s,m)},_onLongPress:function(s,m){this.__onLongPress&&this.__onLongPress(s,m)},_onDragOver:function(s){s.preventDefault();var m=this._simpleEventHandler("dragover",s);this._fireEnterLeaveEvents(m,s)},_onContextMenu:function(s){return this.stopContextMenu&&(s.stopPropagation(),s.preventDefault()),!1},_onDoubleClick:function(s){this._cacheTransformEventData(s),this._handleEvent(s,"dblclick"),this._resetTransformEventData(s)},getPointerId:function(s){var m=s.changedTouches;return m?m[0]&&m[0].identifier:this.enablePointerEvents?s.pointerId:-1},_isMainEvent:function(s){return s.isPrimary===!0?!0:s.isPrimary===!1?!1:s.type==="touchend"&&s.touches.length===0?!0:s.changedTouches?s.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(s){s.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(s)),this.__onMouseDown(s),this._resetTransformEventData();var m=this.upperCanvasEl,o=this._getEventPrefix();d(f.document,"touchend",this._onTouchEnd,a),d(f.document,"touchmove",this._onMouseMove,a),r(m,o+"down",this._onMouseDown)},_onMouseDown:function(s){this.__onMouseDown(s),this._resetTransformEventData();var m=this.upperCanvasEl,o=this._getEventPrefix();r(m,o+"move",this._onMouseMove,a),d(f.document,o+"up",this._onMouseUp),d(f.document,o+"move",this._onMouseMove,a)},_onTouchEnd:function(s){if(!(s.touches.length>0)){this.__onMouseUp(s),this._resetTransformEventData(),this.mainTouchId=null;var m=this._getEventPrefix();r(f.document,"touchend",this._onTouchEnd,a),r(f.document,"touchmove",this._onMouseMove,a);var o=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){d(o.upperCanvasEl,m+"down",o._onMouseDown),o._willAddMouseDown=0},400)}},_onMouseUp:function(s){this.__onMouseUp(s),this._resetTransformEventData();var m=this.upperCanvasEl,o=this._getEventPrefix();this._isMainEvent(s)&&(r(f.document,o+"up",this._onMouseUp),r(f.document,o+"move",this._onMouseMove,a),d(m,o+"move",this._onMouseMove,a))},_onMouseMove:function(s){!this.allowTouchScrolling&&s.preventDefault&&s.preventDefault(),this.__onMouseMove(s)},_onResize:function(){this.calcOffset()},_shouldRender:function(s){var m=this._activeObject;return!!m!=!!s||m&&s&&m!==s?!0:(m&&m.isEditing,!1)},__onMouseUp:function(s){var m,o=this._currentTransform,p=this._groupSelector,y=!1,I=!p||p.left===0&&p.top===0;if(this._cacheTransformEventData(s),m=this._target,this._handleEvent(s,"up:before"),n(s,h)){this.fireRightClick&&this._handleEvent(s,"up",h,I);return}if(n(s,u)){this.fireMiddleClick&&this._handleEvent(s,"up",u,I),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(s);return}if(!!this._isMainEvent(s)){if(o&&(this._finalizeCurrentTransform(s),y=o.actionPerformed),!I){var b=m===this._activeObject;this._maybeGroupObjects(s),y||(y=this._shouldRender(m)||!b&&m===this._activeObject)}if(m){if(m.selectable&&m!==this._activeObject&&m.activeOn==="up")this.setActiveObject(m,s),y=!0;else{var T=m._findTargetCorner(this.getPointer(s,!0),f.util.isTouchEvent(s)),P=m.controls[T],z=P&&P.getMouseUpHandler(s,m,P);if(z){var j=this.getPointer(s);z(s,o,j.x,j.y)}}m.isMoving=!1}this._setCursorFromEvent(s,m),this._handleEvent(s,"up",t,I),this._groupSelector=null,this._currentTransform=null,m&&(m.__corner=0),y?this.requestRenderAll():I||this.renderTop()}},_simpleEventHandler:function(s,m){var o=this.findTarget(m),p=this.targets,y={e:m,target:o,subTargets:p};if(this.fire(s,y),o&&o.fire(s,y),!p)return o;for(var I=0;I<p.length;I++)p[I].fire(s,y);return o},_handleEvent:function(s,m,o,p){var y=this._target,I=this.targets||[],b={e:s,target:y,subTargets:I,button:o||t,isClick:p||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};m==="up"&&(b.currentTarget=this.findTarget(s),b.currentSubTargets=this.targets),this.fire("mouse:"+m,b),y&&y.fire("mouse"+m,b);for(var T=0;T<I.length;T++)I[T].fire("mouse"+m,b)},_finalizeCurrentTransform:function(s){var m=this._currentTransform,o=m.target,p,y={e:s,target:o,transform:m,action:m.action};o._scaling&&(o._scaling=!1),o.setCoords(),(m.actionPerformed||this.stateful&&o.hasStateChanged())&&(m.actionPerformed&&(p=this._addEventOptions(y,m),this._fire(p,y)),this._fire("modified",y))},_addEventOptions:function(s,m){var o,p;switch(m.action){case"scaleX":o="scaled",p="x";break;case"scaleY":o="scaled",p="y";break;case"skewX":o="skewed",p="x";break;case"skewY":o="skewed",p="y";break;case"scale":o="scaled",p="equally";break;case"rotate":o="rotated";break;case"drag":o="moved";break}return s.by=p,o},_onMouseDownInDrawingMode:function(s){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(s).requestRenderAll();var m=this.getPointer(s);this.freeDrawingBrush.onMouseDown(m,{e:s,pointer:m}),this._handleEvent(s,"down")},_onMouseMoveInDrawingMode:function(s){if(this._isCurrentlyDrawing){var m=this.getPointer(s);this.freeDrawingBrush.onMouseMove(m,{e:s,pointer:m})}this.setCursor(this.freeDrawingCursor),this._handleEvent(s,"move")},_onMouseUpInDrawingMode:function(s){var m=this.getPointer(s);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:s,pointer:m}),this._handleEvent(s,"up")},__onMouseDown:function(s){this._cacheTransformEventData(s),this._handleEvent(s,"down:before");var m=this._target;if(n(s,h)){this.fireRightClick&&this._handleEvent(s,"down",h);return}if(n(s,u)){this.fireMiddleClick&&this._handleEvent(s,"down",u);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(s);return}if(!!this._isMainEvent(s)&&!this._currentTransform){var o=this._pointer;this._previousPointer=o;var p=this._shouldRender(m),y=this._shouldGroup(s,m);if(this._shouldClearSelection(s,m)?this.discardActiveObject(s):y&&(this._handleGrouping(s,m),m=this._activeObject),this.selection&&(!m||!m.selectable&&!m.isEditing&&m!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),m){var I=m===this._activeObject;m.selectable&&m.activeOn==="down"&&this.setActiveObject(m,s);var b=m._findTargetCorner(this.getPointer(s,!0),f.util.isTouchEvent(s));if(m.__corner=b,m===this._activeObject&&(b||!y)){this._setupCurrentTransform(s,m,I);var T=m.controls[b],o=this.getPointer(s),P=T&&T.getMouseDownHandler(s,m,T);P&&P(s,this._currentTransform,o.x,o.y)}}this._handleEvent(s,"down"),(p||y)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(s){this._resetTransformEventData(),this._pointer=this.getPointer(s,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(s)||null},_beforeTransform:function(s){var m=this._currentTransform;this.stateful&&m.target.saveState(),this.fire("before:transform",{e:s,transform:m})},__onMouseMove:function(s){this._handleEvent(s,"move:before"),this._cacheTransformEventData(s);var m,o;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(s);return}if(!!this._isMainEvent(s)){var p=this._groupSelector;p?(o=this._absolutePointer,p.left=o.x-p.ex,p.top=o.y-p.ey,this.renderTop()):this._currentTransform?this._transformObject(s):(m=this.findTarget(s)||null,this._setCursorFromEvent(s,m),this._fireOverOutEvents(m,s)),this._handleEvent(s,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(s,m){var o=this._hoveredTarget,p=this._hoveredTargets,y=this.targets,I=Math.max(p.length,y.length);this.fireSyntheticInOutEvents(s,m,{oldTarget:o,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var b=0;b<I;b++)this.fireSyntheticInOutEvents(y[b],m,{oldTarget:p[b],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=s,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(s,m){var o=this._draggedoverTarget,p=this._hoveredTargets,y=this.targets,I=Math.max(p.length,y.length);this.fireSyntheticInOutEvents(s,m,{oldTarget:o,evtOut:"dragleave",evtIn:"dragenter"});for(var b=0;b<I;b++)this.fireSyntheticInOutEvents(y[b],m,{oldTarget:p[b],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=s},fireSyntheticInOutEvents:function(s,m,o){var p,y,I=o.oldTarget,b,T,P=I!==s,z=o.canvasEvtIn,j=o.canvasEvtOut;P&&(p={e:m,target:s,previousTarget:I},y={e:m,target:I,nextTarget:s}),T=s&&P,b=I&&P,b&&(j&&this.fire(j,y),I.fire(o.evtOut,y)),T&&(z&&this.fire(z,p),s.fire(o.evtIn,p))},__onMouseWheel:function(s){this._cacheTransformEventData(s),this._handleEvent(s,"wheel"),this._resetTransformEventData()},_transformObject:function(s){var m=this.getPointer(s),o=this._currentTransform;o.reset=!1,o.shiftKey=s.shiftKey,o.altKey=s[this.centeredKey],this._performTransformAction(s,o,m),o.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(s,m,o){var p=o.x,y=o.y,I=m.action,b=!1,T=m.actionHandler;T&&(b=T(s,m,p,y)),I==="drag"&&b&&(m.target.isMoving=!0,this.setCursor(m.target.moveCursor||this.moveCursor)),m.actionPerformed=m.actionPerformed||b},_fire:f.controlsUtils.fireEvent,_setCursorFromEvent:function(s,m){if(!m)return this.setCursor(this.defaultCursor),!1;var o=m.hoverCursor||this.hoverCursor,p=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,y=(!p||!p.contains(m))&&m._findTargetCorner(this.getPointer(s,!0));y?this.setCursor(this.getCornerCursor(y,m,s)):(m.subTargetCheck&&this.targets.concat().reverse().map(function(I){o=I.hoverCursor||o}),this.setCursor(o))},getCornerCursor:function(s,m,o){var p=m.controls[s];return p.cursorStyleHandler(o,p,m)}})}(),function(){var d=Math.min,r=Math.max;f.util.object.extend(f.Canvas.prototype,{_shouldGroup:function(h,u){var t=this._activeObject;return t&&this._isSelectionKeyPressed(h)&&u&&u.selectable&&this.selection&&(t!==u||t.type==="activeSelection")&&!u.onSelect({e:h})},_handleGrouping:function(h,u){var t=this._activeObject;t.__corner||u===t&&(u=this.findTarget(h,!0),!u||!u.selectable)||(t&&t.type==="activeSelection"?this._updateActiveSelection(u,h):this._createActiveSelection(u,h))},_updateActiveSelection:function(h,u){var t=this._activeObject,a=t._objects.slice(0);t.contains(h)?(t.removeWithUpdate(h),this._hoveredTarget=h,this._hoveredTargets=this.targets.concat(),t.size()===1&&this._setActiveObject(t.item(0),u)):(t.addWithUpdate(h),this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(a,u)},_createActiveSelection:function(h,u){var t=this.getActiveObjects(),a=this._createGroup(h);this._hoveredTarget=a,this._setActiveObject(a,u),this._fireSelectionEvents(t,u)},_createGroup:function(h){var u=this._objects,t=u.indexOf(this._activeObject)<u.indexOf(h),a=t?[this._activeObject,h]:[h,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new f.ActiveSelection(a,{canvas:this})},_groupSelectedObjects:function(h){var u=this._collectObjects(h),t;u.length===1?this.setActiveObject(u[0],h):u.length>1&&(t=new f.ActiveSelection(u.reverse(),{canvas:this}),this.setActiveObject(t,h))},_collectObjects:function(h){for(var u=[],t,a=this._groupSelector.ex,n=this._groupSelector.ey,s=a+this._groupSelector.left,m=n+this._groupSelector.top,o=new f.Point(d(a,s),d(n,m)),p=new f.Point(r(a,s),r(n,m)),y=!this.selectionFullyContained,I=a===s&&n===m,b=this._objects.length;b--&&(t=this._objects[b],!(!(!t||!t.selectable||!t.visible)&&(y&&t.intersectsWithRect(o,p,!0)||t.isContainedWithinRect(o,p,!0)||y&&t.containsPoint(o,null,!0)||y&&t.containsPoint(p,null,!0))&&(u.push(t),I))););return u.length>1&&(u=u.filter(function(T){return!T.onSelect({e:h})})),u},_maybeGroupObjects:function(h){this.selection&&this._groupSelector&&this._groupSelectedObjects(h),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){f.util.object.extend(f.StaticCanvas.prototype,{toDataURL:function(d){d||(d={});var r=d.format||"png",h=d.quality||1,u=(d.multiplier||1)*(d.enableRetinaScaling?this.getRetinaScaling():1),t=this.toCanvasElement(u,d);return f.util.toDataURL(t,r,h)},toCanvasElement:function(d,r){d=d||1,r=r||{};var h=(r.width||this.width)*d,u=(r.height||this.height)*d,t=this.getZoom(),a=this.width,n=this.height,s=t*d,m=this.viewportTransform,o=(m[4]-(r.left||0))*d,p=(m[5]-(r.top||0))*d,y=this.interactive,I=[s,0,0,s,o,p],b=this.enableRetinaScaling,T=f.util.createCanvasElement(),P=this.contextTop;return T.width=h,T.height=u,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=I,this.width=h,this.height=u,this.calcViewportBoundaries(),this.renderCanvas(T.getContext("2d"),this._objects),this.viewportTransform=m,this.width=a,this.height=n,this.calcViewportBoundaries(),this.interactive=y,this.enableRetinaScaling=b,this.contextTop=P,T}})}(),f.util.object.extend(f.StaticCanvas.prototype,{loadFromJSON:function(d,r,h){if(!!d){var u=typeof d=="string"?JSON.parse(d):f.util.object.clone(d),t=this,a=u.clipPath,n=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete u.clipPath,this._enlivenObjects(u.objects,function(s){t.clear(),t._setBgOverlay(u,function(){a?t._enlivenObjects([a],function(m){t.clipPath=m[0],t.__setupCanvas.call(t,u,s,n,r)}):t.__setupCanvas.call(t,u,s,n,r)})},h),this}},__setupCanvas:function(d,r,h,u){var t=this;r.forEach(function(a,n){t.insertAt(a,n)}),this.renderOnAddRemove=h,delete d.objects,delete d.backgroundImage,delete d.overlayImage,delete d.background,delete d.overlay,this._setOptions(d),this.renderAll(),u&&u()},_setBgOverlay:function(d,r){var h={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!d.backgroundImage&&!d.overlayImage&&!d.background&&!d.overlay){r&&r();return}var u=function(){h.backgroundImage&&h.overlayImage&&h.backgroundColor&&h.overlayColor&&r&&r()};this.__setBgOverlay("backgroundImage",d.backgroundImage,h,u),this.__setBgOverlay("overlayImage",d.overlayImage,h,u),this.__setBgOverlay("backgroundColor",d.background,h,u),this.__setBgOverlay("overlayColor",d.overlay,h,u)},__setBgOverlay:function(d,r,h,u){var t=this;if(!r){h[d]=!0,u&&u();return}d==="backgroundImage"||d==="overlayImage"?f.util.enlivenObjects([r],function(a){t[d]=a[0],h[d]=!0,u&&u()}):this["set"+f.util.string.capitalize(d,!0)](r,function(){h[d]=!0,u&&u()})},_enlivenObjects:function(d,r,h){if(!d||d.length===0){r&&r([]);return}f.util.enlivenObjects(d,function(u){r&&r(u)},null,h)},_toDataURL:function(d,r){this.clone(function(h){r(h.toDataURL(d))})},_toDataURLWithMultiplier:function(d,r,h){this.clone(function(u){h(u.toDataURLWithMultiplier(d,r))})},clone:function(d,r){var h=JSON.stringify(this.toJSON(r));this.cloneWithoutData(function(u){u.loadFromJSON(h,function(){d&&d(u)})})},cloneWithoutData:function(d){var r=f.util.createCanvasElement();r.width=this.width,r.height=this.height;var h=new f.Canvas(r);this.backgroundImage?(h.setBackgroundImage(this.backgroundImage.src,function(){h.renderAll(),d&&d(h)}),h.backgroundImageOpacity=this.backgroundImageOpacity,h.backgroundImageStretch=this.backgroundImageStretch):d&&d(h)}}),function(d){var r=d.fabric||(d.fabric={}),h=r.util.object.extend,u=r.util.object.clone,t=r.util.toFixed,a=r.util.string.capitalize,n=r.util.degreesToRadians,s=!r.isLikelyNode,m=2;r.Object||(r.Object=r.util.createClass(r.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:s,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(o){o&&this.setOptions(o)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=r.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(o){var p=r.perfLimitSizeTotal,y=o.width,I=o.height,b=r.maxCacheSideLimit,T=r.minCacheSideLimit;if(y<=b&&I<=b&&y*I<=p)return y<T&&(o.width=T),I<T&&(o.height=T),o;var P=y/I,z=r.util.limitDimsByArea(P,p),j=r.util.capValue,H=j(T,z.x,b),nt=j(T,z.y,b);return y>H&&(o.zoomX/=y/H,o.width=H,o.capped=!0),I>nt&&(o.zoomY/=I/nt,o.height=nt,o.capped=!0),o},_getCacheCanvasDimensions:function(){var o=this.getTotalObjectScaling(),p=this._getTransformedDimensions(0,0),y=p.x*o.scaleX/this.scaleX,I=p.y*o.scaleY/this.scaleY;return{width:y+m,height:I+m,zoomX:o.scaleX,zoomY:o.scaleY,x:y,y:I}},_updateCacheCanvas:function(){var o=this.canvas;if(this.noScaleCache&&o&&o._currentTransform){var p=o._currentTransform.target,y=o._currentTransform.action;if(this===p&&y.slice&&y.slice(0,5)==="scale")return!1}var I=this._cacheCanvas,b=this._limitCacheSize(this._getCacheCanvasDimensions()),T=r.minCacheSideLimit,P=b.width,z=b.height,j,H,nt=b.zoomX,q=b.zoomY,Ct=P!==this.cacheWidth||z!==this.cacheHeight,V=this.zoomX!==nt||this.zoomY!==q,pt=Ct||V,F=0,Rt=0,yt=!1;if(Ct){var Ft=this._cacheCanvas.width,K=this._cacheCanvas.height,at=P>Ft||z>K,J=(P<Ft*.9||z<K*.9)&&Ft>T&&K>T;yt=at||J,at&&!b.capped&&(P>T||z>T)&&(F=P*.1,Rt=z*.1)}return this instanceof r.Text&&this.path&&(pt=!0,yt=!0,F+=this.getHeightOfLine(0)*this.zoomX,Rt+=this.getHeightOfLine(0)*this.zoomY),pt?(yt?(I.width=Math.ceil(P+F),I.height=Math.ceil(z+Rt)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,I.width,I.height)),j=b.x/2,H=b.y/2,this.cacheTranslationX=Math.round(I.width/2-j)+j,this.cacheTranslationY=Math.round(I.height/2-H)+H,this.cacheWidth=P,this.cacheHeight=z,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(nt,q),this.zoomX=nt,this.zoomY=q,!0):!1},setOptions:function(o){this._setOptions(o),this._initGradient(o.fill,"fill"),this._initGradient(o.stroke,"stroke"),this._initPattern(o.fill,"fill"),this._initPattern(o.stroke,"stroke")},transform:function(o){var p=this.group&&!this.group._transformDone||this.group&&this.canvas&&o===this.canvas.contextTop,y=this.calcTransformMatrix(!p);o.transform(y[0],y[1],y[2],y[3],y[4],y[5])},toObject:function(o){var p=r.Object.NUM_FRACTION_DIGITS,y={type:this.type,version:r.version,originX:this.originX,originY:this.originY,left:t(this.left,p),top:t(this.top,p),width:t(this.width,p),height:t(this.height,p),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:t(this.strokeWidth,p),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:t(this.strokeMiterLimit,p),scaleX:t(this.scaleX,p),scaleY:t(this.scaleY,p),angle:t(this.angle,p),flipX:this.flipX,flipY:this.flipY,opacity:t(this.opacity,p),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:t(this.skewX,p),skewY:t(this.skewY,p)};return this.clipPath&&!this.clipPath.excludeFromExport&&(y.clipPath=this.clipPath.toObject(o),y.clipPath.inverted=this.clipPath.inverted,y.clipPath.absolutePositioned=this.clipPath.absolutePositioned),r.util.populateWithProperties(this,y,o),this.includeDefaultValues||(y=this._removeDefaultValues(y)),y},toDatalessObject:function(o){return this.toObject(o)},_removeDefaultValues:function(o){var p=r.util.getKlass(o.type).prototype,y=p.stateProperties;return y.forEach(function(I){if(!(I==="left"||I==="top")){o[I]===p[I]&&delete o[I];var b=Object.prototype.toString.call(o[I])==="[object Array]"&&Object.prototype.toString.call(p[I])==="[object Array]";b&&o[I].length===0&&p[I].length===0&&delete o[I]}}),o},toString:function(){return"#<fabric."+a(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var o=r.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(o.scaleX),scaleY:Math.abs(o.scaleY)}},getTotalObjectScaling:function(){var o=this.getObjectScaling(),p=o.scaleX,y=o.scaleY;if(this.canvas){var I=this.canvas.getZoom(),b=this.canvas.getRetinaScaling();p*=I*b,y*=I*b}return{scaleX:p,scaleY:y}},getObjectOpacity:function(){var o=this.opacity;return this.group&&(o*=this.group.getObjectOpacity()),o},_set:function(o,p){var y=o==="scaleX"||o==="scaleY",I=this[o]!==p,b=!1;return y&&(p=this._constrainScale(p)),o==="scaleX"&&p<0?(this.flipX=!this.flipX,p*=-1):o==="scaleY"&&p<0?(this.flipY=!this.flipY,p*=-1):o==="shadow"&&p&&!(p instanceof r.Shadow)?p=new r.Shadow(p):o==="dirty"&&this.group&&this.group.set("dirty",p),this[o]=p,I&&(b=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(o)>-1?(this.dirty=!0,b&&this.group.set("dirty",!0)):b&&this.stateProperties.indexOf(o)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:r.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(o){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(o.save(),this._setupCompositeOperation(o),this.drawSelectionBackground(o),this.transform(o),this._setOpacity(o),this._setShadow(o,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(o)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(o),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),o.restore())},renderCache:function(o){o=o||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,o.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(o){var p=this.clipPath;if(o.save(),p.inverted?o.globalCompositeOperation="destination-out":o.globalCompositeOperation="destination-in",p.absolutePositioned){var y=r.util.invertTransform(this.calcTransformMatrix());o.transform(y[0],y[1],y[2],y[3],y[4],y[5])}p.transform(o),o.scale(1/p.zoomX,1/p.zoomY),o.drawImage(p._cacheCanvas,-p.cacheTranslationX,-p.cacheTranslationY),o.restore()},drawObject:function(o,p){var y=this.fill,I=this.stroke;p?(this.fill="black",this.stroke="",this._setClippingProperties(o)):this._renderBackground(o),this._render(o),this._drawClipPath(o),this.fill=y,this.stroke=I},_drawClipPath:function(o){var p=this.clipPath;!p||(p.canvas=this.canvas,p.shouldCache(),p._transformDone=!0,p.renderCache({forClipping:!0}),this.drawClipPathOnCache(o))},drawCacheOnCanvas:function(o){o.scale(1/this.zoomX,1/this.zoomY),o.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(o){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!o&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!o){var p=this.cacheWidth/this.zoomX,y=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-p/2,-y/2,p,y)}return!0}return!1},_renderBackground:function(o){if(!!this.backgroundColor){var p=this._getNonTransformedDimensions();o.fillStyle=this.backgroundColor,o.fillRect(-p.x/2,-p.y/2,p.x,p.y),this._removeShadow(o)}},_setOpacity:function(o){this.group&&!this.group._transformDone?o.globalAlpha=this.getObjectOpacity():o.globalAlpha*=this.opacity},_setStrokeStyles:function(o,p){var y=p.stroke;y&&(o.lineWidth=p.strokeWidth,o.lineCap=p.strokeLineCap,o.lineDashOffset=p.strokeDashOffset,o.lineJoin=p.strokeLineJoin,o.miterLimit=p.strokeMiterLimit,y.toLive?y.gradientUnits==="percentage"||y.gradientTransform||y.patternTransform?this._applyPatternForTransformedGradient(o,y):(o.strokeStyle=y.toLive(o,this),this._applyPatternGradientTransform(o,y)):o.strokeStyle=p.stroke)},_setFillStyles:function(o,p){var y=p.fill;y&&(y.toLive?(o.fillStyle=y.toLive(o,this),this._applyPatternGradientTransform(o,p.fill)):o.fillStyle=y)},_setClippingProperties:function(o){o.globalAlpha=1,o.strokeStyle="transparent",o.fillStyle="#000000"},_setLineDash:function(o,p){!p||p.length===0||(1&p.length&&p.push.apply(p,p),o.setLineDash(p))},_renderControls:function(o,p){var y=this.getViewportTransform(),I=this.calcTransformMatrix(),b,T,P;p=p||{},T=typeof p.hasBorders<"u"?p.hasBorders:this.hasBorders,P=typeof p.hasControls<"u"?p.hasControls:this.hasControls,I=r.util.multiplyTransformMatrices(y,I),b=r.util.qrDecompose(I),o.save(),o.translate(b.translateX,b.translateY),o.lineWidth=1*this.borderScaleFactor,this.group||(o.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),o.rotate(n(b.angle)),p.forActiveSelection||this.group?T&&this.drawBordersInGroup(o,b,p):T&&this.drawBorders(o,p),P&&this.drawControls(o,p),o.restore()},_setShadow:function(o){if(!!this.shadow){var p=this.shadow,y=this.canvas,I,b=y&&y.viewportTransform[0]||1,T=y&&y.viewportTransform[3]||1;p.nonScaling?I={scaleX:1,scaleY:1}:I=this.getObjectScaling(),y&&y._isRetinaScaling()&&(b*=r.devicePixelRatio,T*=r.devicePixelRatio),o.shadowColor=p.color,o.shadowBlur=p.blur*r.browserShadowBlurConstant*(b+T)*(I.scaleX+I.scaleY)/4,o.shadowOffsetX=p.offsetX*b*I.scaleX,o.shadowOffsetY=p.offsetY*T*I.scaleY}},_removeShadow:function(o){!this.shadow||(o.shadowColor="",o.shadowBlur=o.shadowOffsetX=o.shadowOffsetY=0)},_applyPatternGradientTransform:function(o,p){if(!p||!p.toLive)return{offsetX:0,offsetY:0};var y=p.gradientTransform||p.patternTransform,I=-this.width/2+p.offsetX||0,b=-this.height/2+p.offsetY||0;return p.gradientUnits==="percentage"?o.transform(this.width,0,0,this.height,I,b):o.transform(1,0,0,1,I,b),y&&o.transform(y[0],y[1],y[2],y[3],y[4],y[5]),{offsetX:I,offsetY:b}},_renderPaintInOrder:function(o){this.paintFirst==="stroke"?(this._renderStroke(o),this._renderFill(o)):(this._renderFill(o),this._renderStroke(o))},_render:function(){},_renderFill:function(o){!this.fill||(o.save(),this._setFillStyles(o,this),this.fillRule==="evenodd"?o.fill("evenodd"):o.fill(),o.restore())},_renderStroke:function(o){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(o),o.save(),this.strokeUniform&&this.group){var p=this.getObjectScaling();o.scale(1/p.scaleX,1/p.scaleY)}else this.strokeUniform&&o.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(o,this.strokeDashArray),this._setStrokeStyles(o,this),o.stroke(),o.restore()}},_applyPatternForTransformedGradient:function(o,p){var y=this._limitCacheSize(this._getCacheCanvasDimensions()),I=r.util.createCanvasElement(),b,T=this.canvas.getRetinaScaling(),P=y.x/this.scaleX/T,z=y.y/this.scaleY/T;I.width=P,I.height=z,b=I.getContext("2d"),b.beginPath(),b.moveTo(0,0),b.lineTo(P,0),b.lineTo(P,z),b.lineTo(0,z),b.closePath(),b.translate(P/2,z/2),b.scale(y.zoomX/this.scaleX/T,y.zoomY/this.scaleY/T),this._applyPatternGradientTransform(b,p),b.fillStyle=p.toLive(o),b.fill(),o.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),o.scale(T*this.scaleX/y.zoomX,T*this.scaleY/y.zoomY),o.strokeStyle=b.createPattern(I,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var o=r.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",o.scaleX),this.set("scaleY",o.scaleY),this.angle=o.angle,this.skewX=o.skewX,this.skewY=0}},_removeTransformMatrix:function(o){var p=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),p=r.util.transformPoint(p,this.transformMatrix)),this.transformMatrix=null,o&&(this.scaleX*=o.scaleX,this.scaleY*=o.scaleY,this.cropX=o.cropX,this.cropY=o.cropY,p.x+=o.offsetLeft,p.y+=o.offsetTop,this.width=o.width,this.height=o.height),this.setPositionByOrigin(p,"center","center")},clone:function(o,p){var y=this.toObject(p);this.constructor.fromObject?this.constructor.fromObject(y,o):r.Object._fromObject("Object",y,o)},cloneAsImage:function(o,p){var y=this.toCanvasElement(p);return o&&o(new r.Image(y)),this},toCanvasElement:function(o){o||(o={});var p=r.util,y=p.saveObjectTransform(this),I=this.group,b=this.shadow,T=Math.abs,P=(o.multiplier||1)*(o.enableRetinaScaling?r.devicePixelRatio:1);delete this.group,o.withoutTransform&&p.resetObjectTransform(this),o.withoutShadow&&(this.shadow=null);var z=r.util.createCanvasElement(),j=this.getBoundingRect(!0,!0),H=this.shadow,nt,q={x:0,y:0},Ct,V,pt;H&&(Ct=H.blur,H.nonScaling?nt={scaleX:1,scaleY:1}:nt=this.getObjectScaling(),q.x=2*Math.round(T(H.offsetX)+Ct)*T(nt.scaleX),q.y=2*Math.round(T(H.offsetY)+Ct)*T(nt.scaleY)),V=j.width+q.x,pt=j.height+q.y,z.width=Math.ceil(V),z.height=Math.ceil(pt);var F=new r.StaticCanvas(z,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});o.format==="jpeg"&&(F.backgroundColor="#fff"),this.setPositionByOrigin(new r.Point(F.width/2,F.height/2),"center","center");var Rt=this.canvas;F.add(this);var yt=F.toCanvasElement(P||1,o);return this.shadow=b,this.set("canvas",Rt),I&&(this.group=I),this.set(y).setCoords(),F._objects=[],F.dispose(),F=null,yt},toDataURL:function(o){return o||(o={}),r.util.toDataURL(this.toCanvasElement(o),o.format||"png",o.quality||1)},isType:function(o){return this.type===o},complexity:function(){return 1},toJSON:function(o){return this.toObject(o)},rotate:function(o){var p=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return p&&this._setOriginToCenter(),this.set("angle",o),p&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(o,p){p=p||this.canvas.getPointer(o);var y=new r.Point(p.x,p.y),I=this._getLeftTopCoords();return this.angle&&(y=r.util.rotatePoint(y,I,n(-this.angle))),{x:y.x-I.x,y:y.y-I.y}},_setupCompositeOperation:function(o){this.globalCompositeOperation&&(o.globalCompositeOperation=this.globalCompositeOperation)}}),r.util.createAccessors&&r.util.createAccessors(r.Object),h(r.Object.prototype,r.Observable),r.Object.NUM_FRACTION_DIGITS=2,r.Object._fromObject=function(o,p,y,I){var b=r[o];p=u(p,!0),r.util.enlivenPatterns([p.fill,p.stroke],function(T){typeof T[0]<"u"&&(p.fill=T[0]),typeof T[1]<"u"&&(p.stroke=T[1]),r.util.enlivenObjects([p.clipPath],function(P){p.clipPath=P[0];var z=I?new b(p[I],p):new b(p);y&&y(z)})})},r.Object.__uid=0)}(D),function(){var d=f.util.degreesToRadians,r={left:-.5,center:0,right:.5},h={top:-.5,center:0,bottom:.5};f.util.object.extend(f.Object.prototype,{translateToGivenOrigin:function(u,t,a,n,s){var m=u.x,o=u.y,p,y,I;return typeof t=="string"?t=r[t]:t-=.5,typeof n=="string"?n=r[n]:n-=.5,p=n-t,typeof a=="string"?a=h[a]:a-=.5,typeof s=="string"?s=h[s]:s-=.5,y=s-a,(p||y)&&(I=this._getTransformedDimensions(),m=u.x+p*I.x,o=u.y+y*I.y),new f.Point(m,o)},translateToCenterPoint:function(u,t,a){var n=this.translateToGivenOrigin(u,t,a,"center","center");return this.angle?f.util.rotatePoint(n,u,d(this.angle)):n},translateToOriginPoint:function(u,t,a){var n=this.translateToGivenOrigin(u,"center","center",t,a);return this.angle?f.util.rotatePoint(n,u,d(this.angle)):n},getCenterPoint:function(){var u=new f.Point(this.left,this.top);return this.translateToCenterPoint(u,this.originX,this.originY)},getPointByOrigin:function(u,t){var a=this.getCenterPoint();return this.translateToOriginPoint(a,u,t)},toLocalPoint:function(u,t,a){var n=this.getCenterPoint(),s,m;return typeof t<"u"&&typeof a<"u"?s=this.translateToGivenOrigin(n,"center","center",t,a):s=new f.Point(this.left,this.top),m=new f.Point(u.x,u.y),this.angle&&(m=f.util.rotatePoint(m,n,-d(this.angle))),m.subtractEquals(s)},setPositionByOrigin:function(u,t,a){var n=this.translateToCenterPoint(u,t,a),s=this.translateToOriginPoint(n,this.originX,this.originY);this.set("left",s.x),this.set("top",s.y)},adjustPosition:function(u){var t=d(this.angle),a=this.getScaledWidth(),n=f.util.cos(t)*a,s=f.util.sin(t)*a,m,o;typeof this.originX=="string"?m=r[this.originX]:m=this.originX-.5,typeof u=="string"?o=r[u]:o=u-.5,this.left+=n*(o-m),this.top+=s*(o-m),this.setCoords(),this.originX=u},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var u=this.getCenterPoint();this.originX="center",this.originY="center",this.left=u.x,this.top=u.y},_resetOrigin:function(){var u=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=u.x,this.top=u.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function d(a){return[new f.Point(a.tl.x,a.tl.y),new f.Point(a.tr.x,a.tr.y),new f.Point(a.br.x,a.br.y),new f.Point(a.bl.x,a.bl.y)]}var r=f.util,h=r.degreesToRadians,u=r.multiplyTransformMatrices,t=r.transformPoint;r.object.extend(f.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(a,n){return n?a?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),a?this.aCoords:this.lineCoords)},getCoords:function(a,n){return d(this._getCoords(a,n))},intersectsWithRect:function(a,n,s,m){var o=this.getCoords(s,m),p=f.Intersection.intersectPolygonRectangle(o,a,n);return p.status==="Intersection"},intersectsWithObject:function(a,n,s){var m=f.Intersection.intersectPolygonPolygon(this.getCoords(n,s),a.getCoords(n,s));return m.status==="Intersection"||a.isContainedWithinObject(this,n,s)||this.isContainedWithinObject(a,n,s)},isContainedWithinObject:function(a,n,s){for(var m=this.getCoords(n,s),o=n?a.aCoords:a.lineCoords,p=0,y=a._getImageLines(o);p<4;p++)if(!a.containsPoint(m[p],y))return!1;return!0},isContainedWithinRect:function(a,n,s,m){var o=this.getBoundingRect(s,m);return o.left>=a.x&&o.left+o.width<=n.x&&o.top>=a.y&&o.top+o.height<=n.y},containsPoint:function(a,p,s,m){var o=this._getCoords(s,m),p=p||this._getImageLines(o),y=this._findCrossPoints(a,p);return y!==0&&y%2===1},isOnScreen:function(a){if(!this.canvas)return!1;var n=this.canvas.vptCoords.tl,s=this.canvas.vptCoords.br,m=this.getCoords(!0,a);return m.some(function(o){return o.x<=s.x&&o.x>=n.x&&o.y<=s.y&&o.y>=n.y})||this.intersectsWithRect(n,s,!0,a)?!0:this._containsCenterOfCanvas(n,s,a)},_containsCenterOfCanvas:function(a,n,s){var m={x:(a.x+n.x)/2,y:(a.y+n.y)/2};return!!this.containsPoint(m,null,!0,s)},isPartiallyOnScreen:function(a){if(!this.canvas)return!1;var n=this.canvas.vptCoords.tl,s=this.canvas.vptCoords.br;if(this.intersectsWithRect(n,s,!0,a))return!0;var m=this.getCoords(!0,a).every(function(o){return(o.x>=s.x||o.x<=n.x)&&(o.y>=s.y||o.y<=n.y)});return m&&this._containsCenterOfCanvas(n,s,a)},_getImageLines:function(a){var n={topline:{o:a.tl,d:a.tr},rightline:{o:a.tr,d:a.br},bottomline:{o:a.br,d:a.bl},leftline:{o:a.bl,d:a.tl}};return n},_findCrossPoints:function(a,n){var s,m,o,p,y,I=0,b;for(var T in n)if(b=n[T],!(b.o.y<a.y&&b.d.y<a.y)&&!(b.o.y>=a.y&&b.d.y>=a.y)&&(b.o.x===b.d.x&&b.o.x>=a.x?y=b.o.x:(s=0,m=(b.d.y-b.o.y)/(b.d.x-b.o.x),o=a.y-s*a.x,p=b.o.y-m*b.o.x,y=-(o-p)/(s-m)),y>=a.x&&(I+=1),I===2))break;return I},getBoundingRect:function(a,n){var s=this.getCoords(a,n);return r.makeBoundingBoxFromPoints(s)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(a){return Math.abs(a)<this.minScaleLimit?a<0?-this.minScaleLimit:this.minScaleLimit:a===0?1e-4:a},scale:function(a){return this._set("scaleX",a),this._set("scaleY",a),this.setCoords()},scaleToWidth:function(a,n){var s=this.getBoundingRect(n).width/this.getScaledWidth();return this.scale(a/this.width/s)},scaleToHeight:function(a,n){var s=this.getBoundingRect(n).height/this.getScaledHeight();return this.scale(a/this.height/s)},calcCoords:function(a){return a?this.calcACoords():this.calcOCoords()},calcLineCoords:function(){var a=this.getViewportTransform(),n=this.padding,s=h(this.angle),m=r.cos(s),o=r.sin(s),p=m*n,y=o*n,I=p+y,b=p-y,T=this.calcACoords(),P={tl:t(T.tl,a),tr:t(T.tr,a),bl:t(T.bl,a),br:t(T.br,a)};return n&&(P.tl.x-=b,P.tl.y-=I,P.tr.x+=I,P.tr.y-=b,P.bl.x-=I,P.bl.y+=b,P.br.x+=b,P.br.y+=I),P},calcOCoords:function(){var a=this._calcRotateMatrix(),n=this._calcTranslateMatrix(),s=this.getViewportTransform(),m=u(s,n),o=u(m,a),o=u(o,[1/s[0],0,0,1/s[3],0,0]),p=this._calculateCurrentDimensions(),y={};return this.forEachControl(function(I,b,T){y[b]=I.positionHandler(p,o,T)}),y},calcACoords:function(){var a=this._calcRotateMatrix(),n=this._calcTranslateMatrix(),s=u(n,a),m=this._getTransformedDimensions(),o=m.x/2,p=m.y/2;return{tl:t({x:-o,y:-p},s),tr:t({x:o,y:-p},s),bl:t({x:-o,y:p},s),br:t({x:o,y:p},s)}},setCoords:function(a){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),a?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return r.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var a=this.getCenterPoint();return[1,0,0,1,a.x,a.y]},transformMatrixKey:function(a){var n="_",s="";return!a&&this.group&&(s=this.group.transformMatrixKey(a)+n),s+this.top+n+this.left+n+this.scaleX+n+this.scaleY+n+this.skewX+n+this.skewY+n+this.angle+n+this.originX+n+this.originY+n+this.width+n+this.height+n+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(a){var n=this.calcOwnMatrix();if(a||!this.group)return n;var s=this.transformMatrixKey(a),m=this.matrixCache||(this.matrixCache={});return m.key===s?m.value:(this.group&&(n=u(this.group.calcTransformMatrix(!1),n)),m.key=s,m.value=n,n)},calcOwnMatrix:function(){var a=this.transformMatrixKey(!0),n=this.ownMatrixCache||(this.ownMatrixCache={});if(n.key===a)return n.value;var s=this._calcTranslateMatrix(),m={angle:this.angle,translateX:s[4],translateY:s[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return n.key=a,n.value=r.composeMatrix(m),n.value},_calcDimensionsTransformMatrix:function(a,n,s){return r.calcDimensionsMatrix({skewX:a,skewY:n,scaleX:this.scaleX*(s&&this.flipX?-1:1),scaleY:this.scaleY*(s&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var a=this.strokeWidth,n=this.width+a,s=this.height+a;return{x:n,y:s}},_getTransformedDimensions:function(a,n){typeof a>"u"&&(a=this.skewX),typeof n>"u"&&(n=this.skewY);var s,m,o,p=a===0&&n===0;if(this.strokeUniform?(m=this.width,o=this.height):(s=this._getNonTransformedDimensions(),m=s.x,o=s.y),p)return this._finalizeDimensions(m*this.scaleX,o*this.scaleY);var y=r.sizeAfterTransform(m,o,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:a,skewY:n});return this._finalizeDimensions(y.x,y.y)},_finalizeDimensions:function(a,n){return this.strokeUniform?{x:a+this.strokeWidth,y:n+this.strokeWidth}:{x:a,y:n}},_calculateCurrentDimensions:function(){var a=this.getViewportTransform(),n=this._getTransformedDimensions(),s=t(n,a,!0);return s.scalarAdd(2*this.padding)}})}(),f.util.object.extend(f.Object.prototype,{sendToBack:function(){return this.group?f.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?f.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(d){return this.group?f.StaticCanvas.prototype.sendBackwards.call(this.group,this,d):this.canvas&&this.canvas.sendBackwards(this,d),this},bringForward:function(d){return this.group?f.StaticCanvas.prototype.bringForward.call(this.group,this,d):this.canvas&&this.canvas.bringForward(this,d),this},moveTo:function(d){return this.group&&this.group.type!=="activeSelection"?f.StaticCanvas.prototype.moveTo.call(this.group,this,d):this.canvas&&this.canvas.moveTo(this,d),this}}),function(){function d(h,u){if(u){if(u.toLive)return h+": url(#SVGID_"+u.id+"); ";var t=new f.Color(u),a=h+": "+t.toRgb()+"; ",n=t.getAlpha();return n!==1&&(a+=h+"-opacity: "+n.toString()+"; "),a}else return h+": none; "}var r=f.util.toFixed;f.util.object.extend(f.Object.prototype,{getSvgStyles:function(h){var u=this.fillRule?this.fillRule:"nonzero",t=this.strokeWidth?this.strokeWidth:"0",a=this.strokeDashArray?this.strokeDashArray.join(" "):"none",n=this.strokeDashOffset?this.strokeDashOffset:"0",s=this.strokeLineCap?this.strokeLineCap:"butt",m=this.strokeLineJoin?this.strokeLineJoin:"miter",o=this.strokeMiterLimit?this.strokeMiterLimit:"4",p=typeof this.opacity<"u"?this.opacity:"1",y=this.visible?"":" visibility: hidden;",I=h?"":this.getSvgFilter(),b=d("fill",this.fill),T=d("stroke",this.stroke);return[T,"stroke-width: ",t,"; ","stroke-dasharray: ",a,"; ","stroke-linecap: ",s,"; ","stroke-dashoffset: ",n,"; ","stroke-linejoin: ",m,"; ","stroke-miterlimit: ",o,"; ",b,"fill-rule: ",u,"; ","opacity: ",p,";",I,y].join("")},getSvgSpanStyles:function(h,u){var t="; ",n=h.fontFamily?"font-family: "+(h.fontFamily.indexOf("'")===-1&&h.fontFamily.indexOf('"')===-1?"'"+h.fontFamily+"'":h.fontFamily)+t:"",a=h.strokeWidth?"stroke-width: "+h.strokeWidth+t:"",n=n,s=h.fontSize?"font-size: "+h.fontSize+"px"+t:"",m=h.fontStyle?"font-style: "+h.fontStyle+t:"",o=h.fontWeight?"font-weight: "+h.fontWeight+t:"",p=h.fill?d("fill",h.fill):"",y=h.stroke?d("stroke",h.stroke):"",I=this.getSvgTextDecoration(h),b=h.deltaY?"baseline-shift: "+-h.deltaY+"; ":"";return I&&(I="text-decoration: "+I+t),[y,a,n,s,m,o,I,p,b,u?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(h){return["overline","underline","line-through"].filter(function(u){return h[u.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(h,u){var t=h?this.calcTransformMatrix():this.calcOwnMatrix(),a='transform="'+f.util.matrixToSVG(t);return a+(u||"")+'" '},_setSVGBg:function(h){if(this.backgroundColor){var u=f.Object.NUM_FRACTION_DIGITS;h.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',r(-this.width/2,u),'" y="',r(-this.height/2,u),'" width="',r(this.width,u),'" height="',r(this.height,u),`"></rect>
`)}},toSVG:function(h){return this._createBaseSVGMarkup(this._toSVG(h),{reviver:h})},toClipPathSVG:function(h){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(h),{reviver:h})},_createBaseClipPathSVGMarkup:function(h,u){u=u||{};var t=u.reviver,a=u.additionalTransform||"",n=[this.getSvgTransform(!0,a),this.getSvgCommons()].join(""),s=h.indexOf("COMMON_PARTS");return h[s]=n,t?t(h.join("")):h.join("")},_createBaseSVGMarkup:function(h,u){u=u||{};var t=u.noStyle,a=u.reviver,n=t?"":'style="'+this.getSvgStyles()+'" ',s=u.withShadow?'style="'+this.getSvgFilter()+'" ':"",m=this.clipPath,o=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",p=m&&m.absolutePositioned,y=this.stroke,I=this.fill,b=this.shadow,T,P=[],z,j=h.indexOf("COMMON_PARTS"),H=u.additionalTransform;return m&&(m.clipPathId="CLIPPATH_"+f.Object.__uid++,z='<clipPath id="'+m.clipPathId+`" >
`+m.toClipPathSVG(a)+`</clipPath>
`),p&&P.push("<g ",s,this.getSvgCommons(),` >
`),P.push("<g ",this.getSvgTransform(!1),p?"":s+this.getSvgCommons(),` >
`),T=[n,o,t?"":this.addPaintOrder()," ",H?'transform="'+H+'" ':""].join(""),h[j]=T,I&&I.toLive&&P.push(I.toSVG(this)),y&&y.toLive&&P.push(y.toSVG(this)),b&&P.push(b.toSVG(this)),m&&P.push(z),P.push(h.join("")),P.push(`</g>
`),p&&P.push(`</g>
`),a?a(P.join("")):P.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var d=f.util.object.extend,r="stateProperties";function h(t,a,n){var s={},m=!0;n.forEach(function(o){s[o]=t[o]}),d(t[a],s,m)}function u(t,a,n){if(t===a)return!0;if(Array.isArray(t)){if(!Array.isArray(a)||t.length!==a.length)return!1;for(var s=0,m=t.length;s<m;s++)if(!u(t[s],a[s]))return!1;return!0}else if(t&&typeof t=="object"){var o=Object.keys(t),p;if(!a||typeof a!="object"||!n&&o.length!==Object.keys(a).length)return!1;for(var s=0,m=o.length;s<m;s++)if(p=o[s],!(p==="canvas"||p==="group")&&!u(t[p],a[p]))return!1;return!0}}f.util.object.extend(f.Object.prototype,{hasStateChanged:function(t){t=t||r;var a="_"+t;return Object.keys(this[a]).length<this[t].length?!0:!u(this[a],this,!0)},saveState:function(t){var a=t&&t.propertySet||r,n="_"+a;return this[n]?(h(this,n,this[a]),t&&t.stateProperties&&h(this,n,t.stateProperties),this):this.setupState(t)},setupState:function(t){t=t||{};var a=t.propertySet||r;return t.propertySet=a,this["_"+a]={},this.saveState(t),this}})}(),function(){var d=f.util.degreesToRadians;f.util.object.extend(f.Object.prototype,{_findTargetCorner:function(r,h){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var u=r.x,t=r.y,a,n,s=Object.keys(this.oCoords),m=s.length-1,o;for(this.__corner=0;m>=0;m--)if(o=s[m],!!this.isControlVisible(o)&&(n=this._getImageLines(h?this.oCoords[o].touchCorner:this.oCoords[o].corner),a=this._findCrossPoints({x:u,y:t},n),a!==0&&a%2===1))return this.__corner=o,o;return!1},forEachControl:function(r){for(var h in this.controls)r(this.controls[h],h,this)},_setCornerCoords:function(){var r=this.oCoords;for(var h in r){var u=this.controls[h];r[h].corner=u.calcCornerCoords(this.angle,this.cornerSize,r[h].x,r[h].y,!1),r[h].touchCorner=u.calcCornerCoords(this.angle,this.touchCornerSize,r[h].x,r[h].y,!0)}},drawSelectionBackground:function(r){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;r.save();var h=this.getCenterPoint(),u=this._calculateCurrentDimensions(),t=this.canvas.viewportTransform;return r.translate(h.x,h.y),r.scale(1/t[0],1/t[3]),r.rotate(d(this.angle)),r.fillStyle=this.selectionBackgroundColor,r.fillRect(-u.x/2,-u.y/2,u.x,u.y),r.restore(),this},drawBorders:function(r,h){h=h||{};var u=this._calculateCurrentDimensions(),t=this.borderScaleFactor,a=u.x+t,n=u.y+t,s=typeof h.hasControls<"u"?h.hasControls:this.hasControls,m=!1;return r.save(),r.strokeStyle=h.borderColor||this.borderColor,this._setLineDash(r,h.borderDashArray||this.borderDashArray),r.strokeRect(-a/2,-n/2,a,n),s&&(r.beginPath(),this.forEachControl(function(o,p,y){o.withConnection&&o.getVisibility(y,p)&&(m=!0,r.moveTo(o.x*a,o.y*n),r.lineTo(o.x*a+o.offsetX,o.y*n+o.offsetY))}),m&&r.stroke()),r.restore(),this},drawBordersInGroup:function(r,h,u){u=u||{};var t=f.util.sizeAfterTransform(this.width,this.height,h),a=this.strokeWidth,n=this.strokeUniform,s=this.borderScaleFactor,m=t.x+a*(n?this.canvas.getZoom():h.scaleX)+s,o=t.y+a*(n?this.canvas.getZoom():h.scaleY)+s;return r.save(),this._setLineDash(r,u.borderDashArray||this.borderDashArray),r.strokeStyle=u.borderColor||this.borderColor,r.strokeRect(-m/2,-o/2,m,o),r.restore(),this},drawControls:function(r,h){h=h||{},r.save();var u=this.canvas.getRetinaScaling(),t,a;return r.setTransform(u,0,0,u,0,0),r.strokeStyle=r.fillStyle=h.cornerColor||this.cornerColor,this.transparentCorners||(r.strokeStyle=h.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(r,h.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(t=this.group.calcTransformMatrix()),this.forEachControl(function(n,s,m){a=m.oCoords[s],n.getVisibility(m,s)&&(t&&(a=f.util.transformPoint(a,t)),n.render(r,a.x,a.y,h,m))}),r.restore(),this},isControlVisible:function(r){return this.controls[r]&&this.controls[r].getVisibility(this,r)},setControlVisible:function(r,h){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[r]=h,this},setControlsVisibility:function(r){r||(r={});for(var h in r)this.setControlVisible(h,r[h]);return this},onDeselect:function(){},onSelect:function(){}})}(),f.util.object.extend(f.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(d,r){r=r||{};var h=function(){},u=r.onComplete||h,t=r.onChange||h,a=this;return f.util.animate({startValue:d.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(n){d.set("left",n),a.requestRenderAll(),t()},onComplete:function(){d.setCoords(),u()}}),this},fxCenterObjectV:function(d,r){r=r||{};var h=function(){},u=r.onComplete||h,t=r.onChange||h,a=this;return f.util.animate({startValue:d.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(n){d.set("top",n),a.requestRenderAll(),t()},onComplete:function(){d.setCoords(),u()}}),this},fxRemove:function(d,r){r=r||{};var h=function(){},u=r.onComplete||h,t=r.onChange||h,a=this;return f.util.animate({startValue:d.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(n){d.set("opacity",n),a.requestRenderAll(),t()},onComplete:function(){a.remove(d),u()}}),this}}),f.util.object.extend(f.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var d=[],r,h;for(r in arguments[0])d.push(r);for(var u=0,t=d.length;u<t;u++)r=d[u],h=u!==t-1,this._animate(r,arguments[0][r],arguments[1],h)}else this._animate.apply(this,arguments);return this},_animate:function(d,r,h,u){var t=this,a;r=r.toString(),h?h=f.util.object.clone(h):h={},~d.indexOf(".")&&(a=d.split("."));var n=t.colorProperties.indexOf(d)>-1||a&&t.colorProperties.indexOf(a[1])>-1,s=a?this.get(a[0])[a[1]]:this.get(d);"from"in h||(h.from=s),n||(~r.indexOf("=")?r=s+parseFloat(r.replace("=","")):r=parseFloat(r));var m={startValue:h.from,endValue:r,byValue:h.by,easing:h.easing,duration:h.duration,abort:h.abort&&function(o,p,y){return h.abort.call(t,o,p,y)},onChange:function(o,p,y){a?t[a[0]][a[1]]=o:t.set(d,o),!u&&h.onChange&&h.onChange(o,p,y)},onComplete:function(o,p,y){u||(t.setCoords(),h.onComplete&&h.onComplete(o,p,y))}};return n?f.util.animateColor(m.startValue,m.endValue,m.duration,m):f.util.animate(m)}}),function(d){var r=d.fabric||(d.fabric={}),h=r.util.object.extend,u=r.util.object.clone,t={x1:1,x2:1,y1:1,y2:1};if(r.Line){r.warn("fabric.Line is already defined");return}r.Line=r.util.createClass(r.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:r.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(n,s){n||(n=[0,0,0,0]),this.callSuper("initialize",s),this.set("x1",n[0]),this.set("y1",n[1]),this.set("x2",n[2]),this.set("y2",n[3]),this._setWidthHeight(s)},_setWidthHeight:function(n){n||(n={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in n?n.left:this._getLeftToOriginX(),this.top="top"in n?n.top:this._getTopToOriginY()},_set:function(n,s){return this.callSuper("_set",n,s),typeof t[n]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:a({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:a({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(n){n.beginPath();var s=this.calcLinePoints();n.moveTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineWidth=this.strokeWidth;var m=n.strokeStyle;n.strokeStyle=this.stroke||n.fillStyle,this.stroke&&this._renderStroke(n),n.strokeStyle=m},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(n){return h(this.callSuper("toObject",n),this.calcLinePoints())},_getNonTransformedDimensions:function(){var n=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(n.y-=this.strokeWidth),this.height===0&&(n.x-=this.strokeWidth)),n},calcLinePoints:function(){var n=this.x1<=this.x2?-1:1,s=this.y1<=this.y2?-1:1,m=n*this.width*.5,o=s*this.height*.5,p=n*this.width*-.5,y=s*this.height*-.5;return{x1:m,x2:p,y1:o,y2:y}},_toSVG:function(){var n=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',n.x1,'" y1="',n.y1,'" x2="',n.x2,'" y2="',n.y2,`" />
`]}}),r.Line.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),r.Line.fromElement=function(n,s,m){m=m||{};var o=r.parseAttributes(n,r.Line.ATTRIBUTE_NAMES),p=[o.x1||0,o.y1||0,o.x2||0,o.y2||0];s(new r.Line(p,h(o,m)))},r.Line.fromObject=function(n,s){function m(p){delete p.points,s&&s(p)}var o=u(n,!0);o.points=[n.x1,n.y1,n.x2,n.y2],r.Object._fromObject("Line",o,m,"points")};function a(n,s){var m=n.origin,o=n.axis1,p=n.axis2,y=n.dimension,I=s.nearest,b=s.center,T=s.farthest;return function(){switch(this.get(m)){case I:return Math.min(this.get(o),this.get(p));case b:return Math.min(this.get(o),this.get(p))+.5*this.get(y);case T:return Math.max(this.get(o),this.get(p))}}}}(D),function(d){var r=d.fabric||(d.fabric={}),h=Math.PI;if(r.Circle){r.warn("fabric.Circle is already defined.");return}r.Circle=r.util.createClass(r.Object,{type:"circle",radius:0,startAngle:0,endAngle:h*2,cacheProperties:r.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(t,a){return this.callSuper("_set",t,a),t==="radius"&&this.setRadius(a),this},toObject:function(t){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(t))},_toSVG:function(){var t,a=0,n=0,s=(this.endAngle-this.startAngle)%(2*h);if(s===0)t=["<circle ","COMMON_PARTS",'cx="'+a+'" cy="'+n+'" ','r="',this.radius,`" />
`];else{var m=r.util.cos(this.startAngle)*this.radius,o=r.util.sin(this.startAngle)*this.radius,p=r.util.cos(this.endAngle)*this.radius,y=r.util.sin(this.endAngle)*this.radius,I=s>h?"1":"0";t=['<path d="M '+m+" "+o," A "+this.radius+" "+this.radius," 0 ",+I+" 1"," "+p+" "+y,'" ',"COMMON_PARTS",` />
`]}return t},_render:function(t){t.beginPath(),t.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){return this.radius=t,this.set("width",t*2).set("height",t*2)}}),r.Circle.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),r.Circle.fromElement=function(t,a){var n=r.parseAttributes(t,r.Circle.ATTRIBUTE_NAMES);if(!u(n))throw new Error("value of `r` attribute is required and can not be negative");n.left=(n.left||0)-n.radius,n.top=(n.top||0)-n.radius,a(new r.Circle(n))};function u(t){return"radius"in t&&t.radius>=0}r.Circle.fromObject=function(t,a){r.Object._fromObject("Circle",t,a)}}(D),function(d){var r=d.fabric||(d.fabric={});if(r.Triangle){r.warn("fabric.Triangle is already defined");return}r.Triangle=r.util.createClass(r.Object,{type:"triangle",width:100,height:100,_render:function(h){var u=this.width/2,t=this.height/2;h.beginPath(),h.moveTo(-u,t),h.lineTo(0,-t),h.lineTo(u,t),h.closePath(),this._renderPaintInOrder(h)},_toSVG:function(){var h=this.width/2,u=this.height/2,t=[-h+" "+u,"0 "+-u,h+" "+u].join(",");return["<polygon ","COMMON_PARTS",'points="',t,'" />']}}),r.Triangle.fromObject=function(h,u){return r.Object._fromObject("Triangle",h,u)}}(D),function(d){var r=d.fabric||(d.fabric={}),h=Math.PI*2;if(r.Ellipse){r.warn("fabric.Ellipse is already defined.");return}r.Ellipse=r.util.createClass(r.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(u){this.callSuper("initialize",u),this.set("rx",u&&u.rx||0),this.set("ry",u&&u.ry||0)},_set:function(u,t){switch(this.callSuper("_set",u,t),u){case"rx":this.rx=t,this.set("width",t*2);break;case"ry":this.ry=t,this.set("height",t*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(u){return this.callSuper("toObject",["rx","ry"].concat(u))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(u){u.beginPath(),u.save(),u.transform(1,0,0,this.ry/this.rx,0,0),u.arc(0,0,this.rx,0,h,!1),u.restore(),this._renderPaintInOrder(u)}}),r.Ellipse.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),r.Ellipse.fromElement=function(u,t){var a=r.parseAttributes(u,r.Ellipse.ATTRIBUTE_NAMES);a.left=(a.left||0)-a.rx,a.top=(a.top||0)-a.ry,t(new r.Ellipse(a))},r.Ellipse.fromObject=function(u,t){r.Object._fromObject("Ellipse",u,t)}}(D),function(d){var r=d.fabric||(d.fabric={}),h=r.util.object.extend;if(r.Rect){r.warn("fabric.Rect is already defined");return}r.Rect=r.util.createClass(r.Object,{stateProperties:r.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(u){this.callSuper("initialize",u),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(u){var t=this.rx?Math.min(this.rx,this.width/2):0,a=this.ry?Math.min(this.ry,this.height/2):0,n=this.width,s=this.height,m=-this.width/2,o=-this.height/2,p=t!==0||a!==0,y=1-.5522847498;u.beginPath(),u.moveTo(m+t,o),u.lineTo(m+n-t,o),p&&u.bezierCurveTo(m+n-y*t,o,m+n,o+y*a,m+n,o+a),u.lineTo(m+n,o+s-a),p&&u.bezierCurveTo(m+n,o+s-y*a,m+n-y*t,o+s,m+n-t,o+s),u.lineTo(m+t,o+s),p&&u.bezierCurveTo(m+y*t,o+s,m,o+s-y*a,m,o+s-a),u.lineTo(m,o+a),p&&u.bezierCurveTo(m,o+y*a,m+y*t,o,m+t,o),u.closePath(),this._renderPaintInOrder(u)},toObject:function(u){return this.callSuper("toObject",["rx","ry"].concat(u))},_toSVG:function(){var u=-this.width/2,t=-this.height/2;return["<rect ","COMMON_PARTS",'x="',u,'" y="',t,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),r.Rect.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),r.Rect.fromElement=function(u,t,a){if(!u)return t(null);a=a||{};var n=r.parseAttributes(u,r.Rect.ATTRIBUTE_NAMES);n.left=n.left||0,n.top=n.top||0,n.height=n.height||0,n.width=n.width||0;var s=new r.Rect(h(a?r.util.object.clone(a):{},n));s.visible=s.visible&&s.width>0&&s.height>0,t(s)},r.Rect.fromObject=function(u,t){return r.Object._fromObject("Rect",u,t)}}(D),function(d){var r=d.fabric||(d.fabric={}),h=r.util.object.extend,u=r.util.array.min,t=r.util.array.max,a=r.util.toFixed;if(r.Polyline){r.warn("fabric.Polyline is already defined");return}r.Polyline=r.util.createClass(r.Object,{type:"polyline",points:null,cacheProperties:r.Object.prototype.cacheProperties.concat("points"),initialize:function(n,s){s=s||{},this.points=n||[],this.callSuper("initialize",s),this._setPositionDimensions(s)},_setPositionDimensions:function(n){var s=this._calcDimensions(n),m;this.width=s.width,this.height=s.height,n.fromSVG||(m=this.translateToGivenOrigin({x:s.left-this.strokeWidth/2,y:s.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),typeof n.left>"u"&&(this.left=n.fromSVG?s.left:m.x),typeof n.top>"u"&&(this.top=n.fromSVG?s.top:m.y),this.pathOffset={x:s.left+this.width/2,y:s.top+this.height/2}},_calcDimensions:function(){var n=this.points,s=u(n,"x")||0,m=u(n,"y")||0,o=t(n,"x")||0,p=t(n,"y")||0,y=o-s,I=p-m;return{left:s,top:m,width:y,height:I}},toObject:function(n){return h(this.callSuper("toObject",n),{points:this.points.concat()})},_toSVG:function(){for(var n=[],s=this.pathOffset.x,m=this.pathOffset.y,o=r.Object.NUM_FRACTION_DIGITS,p=0,y=this.points.length;p<y;p++)n.push(a(this.points[p].x-s,o),",",a(this.points[p].y-m,o)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',n.join(""),`" />
`]},commonRender:function(n){var s,m=this.points.length,o=this.pathOffset.x,p=this.pathOffset.y;if(!m||isNaN(this.points[m-1].y))return!1;n.beginPath(),n.moveTo(this.points[0].x-o,this.points[0].y-p);for(var y=0;y<m;y++)s=this.points[y],n.lineTo(s.x-o,s.y-p);return!0},_render:function(n){!this.commonRender(n)||this._renderPaintInOrder(n)},complexity:function(){return this.get("points").length}}),r.Polyline.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(),r.Polyline.fromElementGenerator=function(n){return function(s,m,o){if(!s)return m(null);o||(o={});var p=r.parsePointsAttribute(s.getAttribute("points")),y=r.parseAttributes(s,r[n].ATTRIBUTE_NAMES);y.fromSVG=!0,m(new r[n](p,h(y,o)))}},r.Polyline.fromElement=r.Polyline.fromElementGenerator("Polyline"),r.Polyline.fromObject=function(n,s){return r.Object._fromObject("Polyline",n,s,"points")}}(D),function(d){var r=d.fabric||(d.fabric={});if(r.Polygon){r.warn("fabric.Polygon is already defined");return}r.Polygon=r.util.createClass(r.Polyline,{type:"polygon",_render:function(h){!this.commonRender(h)||(h.closePath(),this._renderPaintInOrder(h))}}),r.Polygon.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(),r.Polygon.fromElement=r.Polyline.fromElementGenerator("Polygon"),r.Polygon.fromObject=function(h,u){r.Object._fromObject("Polygon",h,u,"points")}}(D),function(d){var r=d.fabric||(d.fabric={}),h=r.util.array.min,u=r.util.array.max,t=r.util.object.extend,a=Object.prototype.toString,n=r.util.toFixed;if(r.Path){r.warn("fabric.Path is already defined");return}r.Path=r.util.createClass(r.Object,{type:"path",path:null,cacheProperties:r.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:r.Object.prototype.stateProperties.concat("path"),initialize:function(s,m){m=m||{},this.callSuper("initialize",m),s||(s=[]);var o=a.call(s)==="[object Array]";this.path=r.util.makePathSimpler(o?s:r.util.parsePath(s)),this.path&&r.Polyline.prototype._setPositionDimensions.call(this,m)},_renderPathCommands:function(s){var m,o=0,p=0,y=0,I=0,b=0,T=0,P=-this.pathOffset.x,z=-this.pathOffset.y;s.beginPath();for(var j=0,H=this.path.length;j<H;++j)switch(m=this.path[j],m[0]){case"L":y=m[1],I=m[2],s.lineTo(y+P,I+z);break;case"M":y=m[1],I=m[2],o=y,p=I,s.moveTo(y+P,I+z);break;case"C":y=m[5],I=m[6],b=m[3],T=m[4],s.bezierCurveTo(m[1]+P,m[2]+z,b+P,T+z,y+P,I+z);break;case"Q":s.quadraticCurveTo(m[1]+P,m[2]+z,m[3]+P,m[4]+z),y=m[3],I=m[4],b=m[1],T=m[2];break;case"z":case"Z":y=o,I=p,s.closePath();break}},_render:function(s){this._renderPathCommands(s),this._renderPaintInOrder(s)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(s){return t(this.callSuper("toObject",s),{path:this.path.map(function(m){return m.slice()})})},toDatalessObject:function(s){var m=this.toObject(["sourcePath"].concat(s));return m.sourcePath&&delete m.path,m},_toSVG:function(){var s=r.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',s,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var s=r.Object.NUM_FRACTION_DIGITS;return" translate("+n(-this.pathOffset.x,s)+", "+n(-this.pathOffset.y,s)+")"},toClipPathSVG:function(s){var m=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:s,additionalTransform:m})},toSVG:function(s){var m=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:s,additionalTransform:m})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var s=[],m=[],o,p=0,y=0,I=0,b=0,T,P=0,z=this.path.length;P<z;++P){switch(o=this.path[P],o[0]){case"L":I=o[1],b=o[2],T=[];break;case"M":I=o[1],b=o[2],p=I,y=b,T=[];break;case"C":T=r.util.getBoundsOfCurve(I,b,o[1],o[2],o[3],o[4],o[5],o[6]),I=o[5],b=o[6];break;case"Q":T=r.util.getBoundsOfCurve(I,b,o[1],o[2],o[1],o[2],o[3],o[4]),I=o[3],b=o[4];break;case"z":case"Z":I=p,b=y;break}T.forEach(function(pt){s.push(pt.x),m.push(pt.y)}),s.push(I),m.push(b)}var j=h(s)||0,H=h(m)||0,nt=u(s)||0,q=u(m)||0,Ct=nt-j,V=q-H;return{left:j,top:H,width:Ct,height:V}}}),r.Path.fromObject=function(s,m){if(typeof s.sourcePath=="string"){var o=s.sourcePath;r.loadSVGFromURL(o,function(p){var y=p[0];y.setOptions(s),m&&m(y)})}else r.Object._fromObject("Path",s,m,"path")},r.Path.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(["d"]),r.Path.fromElement=function(s,m,o){var p=r.parseAttributes(s,r.Path.ATTRIBUTE_NAMES);p.fromSVG=!0,m(new r.Path(p.d,t(p,o)))}}(D),function(d){var r=d.fabric||(d.fabric={}),h=r.util.array.min,u=r.util.array.max;r.Group||(r.Group=r.util.createClass(r.Object,r.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(t,a,n){a=a||{},this._objects=[],n&&this.callSuper("initialize",a),this._objects=t||[];for(var s=this._objects.length;s--;)this._objects[s].group=this;if(n)this._updateObjectsACoords();else{var m=a&&a.centerPoint;a.originX!==void 0&&(this.originX=a.originX),a.originY!==void 0&&(this.originY=a.originY),m||this._calcBounds(),this._updateObjectsCoords(m),delete a.centerPoint,this.callSuper("initialize",a)}this.setCoords()},_updateObjectsACoords:function(){for(var t=!0,a=this._objects.length;a--;)this._objects[a].setCoords(t)},_updateObjectsCoords:function(a){for(var a=a||this.getCenterPoint(),n=this._objects.length;n--;)this._updateObjectCoords(this._objects[n],a)},_updateObjectCoords:function(t,a){var n=t.left,s=t.top,m=!0;t.set({left:n-a.x,top:s-a.y}),t.group=this,t.setCoords(m)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){var a=!!this.group;return this._restoreObjectsState(),r.util.resetObjectTransform(this),t&&(a&&r.util.removeTransformFromObject(t,this.group.calcTransformMatrix()),this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,a?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(t){return this._restoreObjectsState(),r.util.resetObjectTransform(this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group},_set:function(t,a){var n=this._objects.length;if(this.useSetOnGroup)for(;n--;)this._objects[n].setOnGroup(t,a);if(t==="canvas")for(;n--;)this._objects[n]._set(t,a);r.Object.prototype._set.call(this,t,a)},toObject:function(t){var a=this.includeDefaultValues,n=this._objects.filter(function(m){return!m.excludeFromExport}).map(function(m){var o=m.includeDefaultValues;m.includeDefaultValues=a;var p=m.toObject(t);return m.includeDefaultValues=o,p}),s=r.Object.prototype.toObject.call(this,t);return s.objects=n,s},toDatalessObject:function(t){var a,n=this.sourcePath;if(n)a=n;else{var s=this.includeDefaultValues;a=this._objects.map(function(o){var p=o.includeDefaultValues;o.includeDefaultValues=s;var y=o.toDatalessObject(t);return o.includeDefaultValues=p,y})}var m=r.Object.prototype.toDatalessObject.call(this,t);return m.objects=a,m},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},shouldCache:function(){var t=r.Object.prototype.shouldCache.call(this);if(t){for(var a=0,n=this._objects.length;a<n;a++)if(this._objects[a].willDrawShadow())return this.ownCaching=!1,!1}return t},willDrawShadow:function(){if(r.Object.prototype.willDrawShadow.call(this))return!0;for(var t=0,a=this._objects.length;t<a;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(t){for(var a=0,n=this._objects.length;a<n;a++)this._objects[a].render(t);this._drawClipPath(t)},isCacheDirty:function(t){if(this.callSuper("isCacheDirty",t))return!0;if(!this.statefullCache)return!1;for(var a=0,n=this._objects.length;a<n;a++)if(this._objects[a].isCacheDirty(!0)){if(this._cacheCanvas){var s=this.cacheWidth/this.zoomX,m=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-s/2,-m/2,s,m)}return!0}return!1},_restoreObjectsState:function(){var t=this.calcOwnMatrix();return this._objects.forEach(function(a){r.util.addTransformToObject(a,t),delete a.group,a.setCoords()}),this},realizeTransform:function(t,a){return r.util.addTransformToObject(t,a),t},destroy:function(){return this._objects.forEach(function(t){t.set("dirty",!0)}),this._restoreObjectsState()},toActiveSelection:function(){if(!!this.canvas){var t=this._objects,a=this.canvas;this._objects=[];var n=this.toObject();delete n.objects;var s=new r.ActiveSelection([]);return s.set(n),s.type="activeSelection",a.remove(this),t.forEach(function(m){m.group=s,m.dirty=!0,a.add(m)}),s.canvas=a,s._objects=t,a._activeObject=s,s.setCoords(),s}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var t=!0;return this.forEachObject(function(a){a.setCoords(t)}),this},_calcBounds:function(t){for(var a=[],n=[],s,m,o,p=["tr","br","bl","tl"],y=0,I=this._objects.length,b,T=p.length;y<I;++y){for(s=this._objects[y],o=s.calcACoords(),b=0;b<T;b++)m=p[b],a.push(o[m].x),n.push(o[m].y);s.aCoords=o}this._getBounds(a,n,t)},_getBounds:function(t,a,n){var s=new r.Point(h(t),h(a)),m=new r.Point(u(t),u(a)),o=s.y||0,p=s.x||0,y=m.x-s.x||0,I=m.y-s.y||0;this.width=y,this.height=I,n||this.setPositionByOrigin({x:p,y:o},"left","top")},_toSVG:function(t){for(var a=["<g ","COMMON_PARTS",` >
`],n=0,s=this._objects.length;n<s;n++)a.push("		",this._objects[n].toSVG(t));return a.push(`</g>
`),a},getSvgStyles:function(){var t=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",a=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),a].join("")},toClipPathSVG:function(t){for(var a=[],n=0,s=this._objects.length;n<s;n++)a.push("	",this._objects[n].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(a,{reviver:t})}}),r.Group.fromObject=function(t,a){var n=t.objects,s=r.util.object.clone(t,!0);if(delete s.objects,typeof n=="string"){r.loadSVGFromURL(n,function(m){var o=r.util.groupSVGElements(m,t,n);o.set(s),a&&a(o)});return}r.util.enlivenObjects(n,function(m){r.util.enlivenObjects([t.clipPath],function(o){var p=r.util.object.clone(t,!0);p.clipPath=o[0],delete p.objects,a&&a(new r.Group(m,p,!0))})})})}(D),function(d){var r=d.fabric||(d.fabric={});r.ActiveSelection||(r.ActiveSelection=r.util.createClass(r.Group,{type:"activeSelection",initialize:function(h,u){u=u||{},this._objects=h||[];for(var t=this._objects.length;t--;)this._objects[t].group=this;u.originX&&(this.originX=u.originX),u.originY&&(this.originY=u.originY),this._calcBounds(),this._updateObjectsCoords(),r.Object.prototype.initialize.call(this,u),this.setCoords()},toGroup:function(){var h=this._objects.concat();this._objects=[];var u=r.Object.prototype.toObject.call(this),t=new r.Group([]);if(delete u.type,t.set(u),h.forEach(function(n){n.canvas.remove(n),n.group=t}),t._objects=h,!this.canvas)return t;var a=this.canvas;return a.add(t),a._activeObject=t,t.setCoords(),t},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(h,u,t){h.save(),h.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",h,u),t=t||{},typeof t.hasControls>"u"&&(t.hasControls=!1),t.forActiveSelection=!0;for(var a=0,n=this._objects.length;a<n;a++)this._objects[a]._renderControls(h,t);h.restore()}}),r.ActiveSelection.fromObject=function(h,u){r.util.enlivenObjects(h.objects,function(t){delete h.objects,u&&u(new r.ActiveSelection(t,h,!0))})})}(D),function(d){var r=f.util.object.extend;if(d.fabric||(d.fabric={}),d.fabric.Image){f.warn("fabric.Image is already defined.");return}f.Image=f.util.createClass(f.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:f.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:f.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(h,u){u||(u={}),this.filters=[],this.cacheKey="texture"+f.Object.__uid++,this.callSuper("initialize",u),this._initElement(h,u)},getElement:function(){return this._element||{}},setElement:function(h,u){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=h,this._originalElement=h,this._initConfig(u),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(h){var u=f.filterBackend;u&&u.evictCachesForKey&&u.evictCachesForKey(h)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(h){f.util.cleanUpJsdomNode(this[h]),this[h]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var h=this.getElement();return{width:h.naturalWidth||h.width,height:h.naturalHeight||h.height}},_stroke:function(h){if(!(!this.stroke||this.strokeWidth===0)){var u=this.width/2,t=this.height/2;h.beginPath(),h.moveTo(-u,-t),h.lineTo(u,-t),h.lineTo(u,t),h.lineTo(-u,t),h.lineTo(-u,-t),h.closePath()}},toObject:function(h){var u=[];this.filters.forEach(function(a){a&&u.push(a.toObject())});var t=r(this.callSuper("toObject",["cropX","cropY"].concat(h)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:u});return this.resizeFilter&&(t.resizeFilter=this.resizeFilter.toObject()),t},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var h=[],u=[],t,a=this._element,n=-this.width/2,s=-this.height/2,m="",o="";if(!a)return[];if(this.hasCrop()){var p=f.Object.__uid++;h.push('<clipPath id="imageCrop_'+p+`">
`,'	<rect x="'+n+'" y="'+s+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),m=' clip-path="url(#imageCrop_'+p+')" '}if(this.imageSmoothing||(o='" image-rendering="optimizeSpeed'),u.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',n-this.cropX,'" y="',s-this.cropY,'" width="',a.width||a.naturalWidth,'" height="',a.height||a.height,o,'"',m,`></image>
`),this.stroke||this.strokeDashArray){var y=this.fill;this.fill=null,t=["	<rect ",'x="',n,'" y="',s,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=y}return this.paintFirst!=="fill"?h=h.concat(t,u):h=h.concat(u,t),h},getSrc:function(h){var u=h?this._element:this._originalElement;return u?u.toDataURL?u.toDataURL():this.srcFromAttribute?u.getAttribute("src"):u.src:this.src||""},setSrc:function(h,u,t){return f.util.loadImage(h,function(a,n){this.setElement(a,t),this._setWidthHeight(),u&&u(this,n)},this,t&&t.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var h=this.resizeFilter,u=this.minimumScaleTrigger,t=this.getTotalObjectScaling(),a=t.scaleX,n=t.scaleY,s=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!h||a>u&&n>u){this._element=s,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=a,this._lastScaleY=n;return}f.filterBackend||(f.filterBackend=f.initFilterBackend());var m=f.util.createCanvasElement(),o=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,p=s.width,y=s.height;m.width=p,m.height=y,this._element=m,this._lastScaleX=h.scaleX=a,this._lastScaleY=h.scaleY=n,f.filterBackend.applyFilters([h],s,p,y,this._element,o),this._filterScalingX=m.width/this._originalElement.width,this._filterScalingY=m.height/this._originalElement.height},applyFilters:function(h){if(h=h||this.filters||[],h=h.filter(function(s){return s&&!s.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),h.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var u=this._originalElement,t=u.naturalWidth||u.width,a=u.naturalHeight||u.height;if(this._element===this._originalElement){var n=f.util.createCanvasElement();n.width=t,n.height=a,this._element=n,this._filteredEl=n}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,t,a),this._lastScaleX=1,this._lastScaleY=1;return f.filterBackend||(f.filterBackend=f.initFilterBackend()),f.filterBackend.applyFilters(h,this._originalElement,t,a,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(h){f.util.setImageSmoothing(h,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(h),this._renderPaintInOrder(h)},drawCacheOnCanvas:function(h){f.util.setImageSmoothing(h,this.imageSmoothing),f.Object.prototype.drawCacheOnCanvas.call(this,h)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(h){var u=this._element;if(!!u){var t=this._filterScalingX,a=this._filterScalingY,n=this.width,s=this.height,m=Math.min,o=Math.max,p=o(this.cropX,0),y=o(this.cropY,0),I=u.naturalWidth||u.width,b=u.naturalHeight||u.height,T=p*t,P=y*a,z=m(n*t,I-T),j=m(s*a,b-P),H=-n/2,nt=-s/2,q=m(n,I/t-p),Ct=m(s,b/a-y);u&&h.drawImage(u,T,P,z,j,H,nt,q,Ct)}},_needsResize:function(){var h=this.getTotalObjectScaling();return h.scaleX!==this._lastScaleX||h.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(h,u){this.setElement(f.util.getById(h),u),f.util.addClass(this.getElement(),f.Image.CSS_CANVAS)},_initConfig:function(h){h||(h={}),this.setOptions(h),this._setWidthHeight(h)},_initFilters:function(h,u){h&&h.length?f.util.enlivenObjects(h,function(t){u&&u(t)},"fabric.Image.filters"):u&&u()},_setWidthHeight:function(h){h||(h={});var u=this.getElement();this.width=h.width||u.naturalWidth||u.width||0,this.height=h.height||u.naturalHeight||u.height||0},parsePreserveAspectRatioAttribute:function(){var h=f.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),u=this._element.width,t=this._element.height,a=1,n=1,s=0,m=0,o=0,p=0,y,I=this.width,b=this.height,T={width:I,height:b};return h&&(h.alignX!=="none"||h.alignY!=="none")?(h.meetOrSlice==="meet"&&(a=n=f.util.findScaleToFit(this._element,T),y=(I-u*a)/2,h.alignX==="Min"&&(s=-y),h.alignX==="Max"&&(s=y),y=(b-t*n)/2,h.alignY==="Min"&&(m=-y),h.alignY==="Max"&&(m=y)),h.meetOrSlice==="slice"&&(a=n=f.util.findScaleToCover(this._element,T),y=u-I/a,h.alignX==="Mid"&&(o=y/2),h.alignX==="Max"&&(o=y),y=t-b/n,h.alignY==="Mid"&&(p=y/2),h.alignY==="Max"&&(p=y),u=I/a,t=b/n)):(a=I/u,n=b/t),{width:u,height:t,scaleX:a,scaleY:n,offsetLeft:s,offsetTop:m,cropX:o,cropY:p}}}),f.Image.CSS_CANVAS="canvas-img",f.Image.prototype.getSvgSrc=f.Image.prototype.getSrc,f.Image.fromObject=function(h,u){var t=f.util.object.clone(h);f.util.loadImage(t.src,function(a,n){if(n){u&&u(null,!0);return}f.Image.prototype._initFilters.call(t,t.filters,function(s){t.filters=s||[],f.Image.prototype._initFilters.call(t,[t.resizeFilter],function(m){t.resizeFilter=m[0],f.util.enlivenObjects([t.clipPath],function(o){t.clipPath=o[0];var p=new f.Image(a,t);u(p,!1)})})})},null,t.crossOrigin)},f.Image.fromURL=function(h,u,t){f.util.loadImage(h,function(a,n){u&&u(new f.Image(a,t),n)},null,t&&t.crossOrigin)},f.Image.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),f.Image.fromElement=function(h,u,t){var a=f.parseAttributes(h,f.Image.ATTRIBUTE_NAMES);f.Image.fromURL(a["xlink:href"],u,r(t?f.util.object.clone(t):{},a))}}(D),f.util.object.extend(f.Object.prototype,{_getAngleValueForStraighten:function(){var d=this.angle%360;return d>0?Math.round((d-1)/90)*90:Math.round(d/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(d){d=d||{};var r=function(){},h=d.onComplete||r,u=d.onChange||r,t=this;return f.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(a){t.rotate(a),u()},onComplete:function(){t.setCoords(),h()}}),this}}),f.util.object.extend(f.StaticCanvas.prototype,{straightenObject:function(d){return d.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(d){return d.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){function d(h,u){var t="precision "+u+` float;
void main(){}`,a=h.createShader(h.FRAGMENT_SHADER);return h.shaderSource(a,t),h.compileShader(a),!!h.getShaderParameter(a,h.COMPILE_STATUS)}f.isWebglSupported=function(h){if(f.isLikelyNode)return!1;h=h||f.WebglFilterBackend.prototype.tileSize;var u=document.createElement("canvas"),t=u.getContext("webgl")||u.getContext("experimental-webgl"),a=!1;if(t){f.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),a=f.maxTextureSize>=h;for(var n=["highp","mediump","lowp"],s=0;s<3;s++)if(d(t,n[s])){f.webGlPrecision=n[s];break}}return this.isSupported=a,a},f.WebglFilterBackend=r;function r(h){h&&h.tileSize&&(this.tileSize=h.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}r.prototype={tileSize:2048,resources:{},setupGLContext:function(h,u){this.dispose(),this.createWebGLCanvas(h,u),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(h,u)},chooseFastestCopyGLTo2DMethod:function(h,u){var t=typeof window.performance<"u",a;try{new ImageData(1,1),a=!0}catch{a=!1}var n=typeof ArrayBuffer<"u",s=typeof Uint8ClampedArray<"u";if(!!(t&&a&&n&&s)){var m=f.util.createCanvasElement(),o=new ArrayBuffer(h*u*4);if(f.forceGLPutImageData){this.imageBuffer=o,this.copyGLTo2D=k;return}var p={imageBuffer:o,destinationWidth:h,destinationHeight:u,targetCanvas:m},y,I,b;m.width=h,m.height=u,y=window.performance.now(),w.call(p,this.gl,p),I=window.performance.now()-y,y=window.performance.now(),k.call(p,this.gl,p),b=window.performance.now()-y,I>b?(this.imageBuffer=o,this.copyGLTo2D=k):this.copyGLTo2D=w}},createWebGLCanvas:function(h,u){var t=f.util.createCanvasElement();t.width=h,t.height=u;var a={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},n=t.getContext("webgl",a);n||(n=t.getContext("experimental-webgl",a)),n&&(n.clearColor(0,0,0,0),this.canvas=t,this.gl=n)},applyFilters:function(h,u,t,a,n,s){var m=this.gl,o;s&&(o=this.getCachedTexture(s,u));var p={originalWidth:u.width||u.originalWidth,originalHeight:u.height||u.originalHeight,sourceWidth:t,sourceHeight:a,destinationWidth:t,destinationHeight:a,context:m,sourceTexture:this.createTexture(m,t,a,!o&&u),targetTexture:this.createTexture(m,t,a),originalTexture:o||this.createTexture(m,t,a,!o&&u),passes:h.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:n},y=m.createFramebuffer();return m.bindFramebuffer(m.FRAMEBUFFER,y),h.forEach(function(I){I&&I.applyTo(p)}),L(p),this.copyGLTo2D(m,p),m.bindTexture(m.TEXTURE_2D,null),m.deleteTexture(p.sourceTexture),m.deleteTexture(p.targetTexture),m.deleteFramebuffer(y),n.getContext("2d").setTransform(1,0,0,1,0,0),p},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(h,u,t,a){var n=h.createTexture();return h.bindTexture(h.TEXTURE_2D,n),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),a?h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,a):h.texImage2D(h.TEXTURE_2D,0,h.RGBA,u,t,0,h.RGBA,h.UNSIGNED_BYTE,null),n},getCachedTexture:function(h,u){if(this.textureCache[h])return this.textureCache[h];var t=this.createTexture(this.gl,u.width,u.height,u);return this.textureCache[h]=t,t},evictCachesForKey:function(h){this.textureCache[h]&&(this.gl.deleteTexture(this.textureCache[h]),delete this.textureCache[h])},copyGLTo2D:w,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var h=this.gl,u={renderer:"",vendor:""};if(!h)return u;var t=h.getExtension("WEBGL_debug_renderer_info");if(t){var a=h.getParameter(t.UNMASKED_RENDERER_WEBGL),n=h.getParameter(t.UNMASKED_VENDOR_WEBGL);a&&(u.renderer=a.toLowerCase()),n&&(u.vendor=n.toLowerCase())}return this.gpuInfo=u,u}}}();function L(d){var r=d.targetCanvas,h=r.width,u=r.height,t=d.destinationWidth,a=d.destinationHeight;(h!==t||u!==a)&&(r.width=t,r.height=a)}function w(d,r){var h=d.canvas,u=r.targetCanvas,t=u.getContext("2d");t.translate(0,u.height),t.scale(1,-1);var a=h.height-u.height;t.drawImage(h,0,a,u.width,u.height,0,0,u.width,u.height)}function k(d,r){var h=r.targetCanvas,u=h.getContext("2d"),t=r.destinationWidth,a=r.destinationHeight,n=t*a*4,s=new Uint8Array(this.imageBuffer,0,n),m=new Uint8ClampedArray(this.imageBuffer,0,n);d.readPixels(0,0,t,a,d.RGBA,d.UNSIGNED_BYTE,s);var o=new ImageData(m,t,a);u.putImageData(o,0,0)}(function(){var d=function(){};f.Canvas2dFilterBackend=r;function r(){}r.prototype={evictCachesForKey:d,dispose:d,clearWebGLCaches:d,resources:{},applyFilters:function(h,u,t,a,n){var s=n.getContext("2d");s.drawImage(u,0,0,t,a);var m=s.getImageData(0,0,t,a),o=s.getImageData(0,0,t,a),p={sourceWidth:t,sourceHeight:a,imageData:m,originalEl:u,originalImageData:o,canvasEl:n,ctx:s,filterBackend:this};return h.forEach(function(y){y.applyTo(p)}),(p.imageData.width!==t||p.imageData.height!==a)&&(n.width=p.imageData.width,n.height=p.imageData.height),s.putImageData(p.imageData,0,0),p}}})(),f.Image=f.Image||{},f.Image.filters=f.Image.filters||{},f.Image.filters.BaseFilter=f.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(d){d&&this.setOptions(d)},setOptions:function(d){for(var r in d)this[r]=d[r]},createProgram:function(d,r,h){r=r||this.fragmentSource,h=h||this.vertexSource,f.webGlPrecision!=="highp"&&(r=r.replace(/precision highp float/g,"precision "+f.webGlPrecision+" float"));var u=d.createShader(d.VERTEX_SHADER);if(d.shaderSource(u,h),d.compileShader(u),!d.getShaderParameter(u,d.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+d.getShaderInfoLog(u));var t=d.createShader(d.FRAGMENT_SHADER);if(d.shaderSource(t,r),d.compileShader(t),!d.getShaderParameter(t,d.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+d.getShaderInfoLog(t));var a=d.createProgram();if(d.attachShader(a,u),d.attachShader(a,t),d.linkProgram(a),!d.getProgramParameter(a,d.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+d.getProgramInfoLog(a));var n=this.getAttributeLocations(d,a),s=this.getUniformLocations(d,a)||{};return s.uStepW=d.getUniformLocation(a,"uStepW"),s.uStepH=d.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:n,uniformLocations:s}},getAttributeLocations:function(d,r){return{aPosition:d.getAttribLocation(r,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(d,r,h){var u=r.aPosition,t=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,t),d.enableVertexAttribArray(u),d.vertexAttribPointer(u,2,d.FLOAT,!1,0,0),d.bufferData(d.ARRAY_BUFFER,h,d.STATIC_DRAW)},_setupFrameBuffer:function(d){var r=d.context,h,u;d.passes>1?(h=d.destinationWidth,u=d.destinationHeight,(d.sourceWidth!==h||d.sourceHeight!==u)&&(r.deleteTexture(d.targetTexture),d.targetTexture=d.filterBackend.createTexture(r,h,u)),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,d.targetTexture,0)):(r.bindFramebuffer(r.FRAMEBUFFER,null),r.finish())},_swapTextures:function(d){d.passes--,d.pass++;var r=d.targetTexture;d.targetTexture=d.sourceTexture,d.sourceTexture=r},isNeutralState:function(){var d=this.mainParameter,r=f.Image.filters[this.type].prototype;if(d)if(Array.isArray(r[d])){for(var h=r[d].length;h--;)if(this[d][h]!==r[d][h])return!1;return!0}else return r[d]===this[d];else return!1},applyTo:function(d){d.webgl?(this._setupFrameBuffer(d),this.applyToWebGL(d),this._swapTextures(d)):this.applyTo2d(d)},retrieveShader:function(d){return d.programCache.hasOwnProperty(this.type)||(d.programCache[this.type]=this.createProgram(d.context)),d.programCache[this.type]},applyToWebGL:function(d){var r=d.context,h=this.retrieveShader(d);d.pass===0&&d.originalTexture?r.bindTexture(r.TEXTURE_2D,d.originalTexture):r.bindTexture(r.TEXTURE_2D,d.sourceTexture),r.useProgram(h.program),this.sendAttributeData(r,h.attributeLocations,d.aPosition),r.uniform1f(h.uniformLocations.uStepW,1/d.sourceWidth),r.uniform1f(h.uniformLocations.uStepH,1/d.sourceHeight),this.sendUniformData(r,h.uniformLocations),r.viewport(0,0,d.destinationWidth,d.destinationHeight),r.drawArrays(r.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(d,r,h){d.activeTexture(h),d.bindTexture(d.TEXTURE_2D,r),d.activeTexture(d.TEXTURE0)},unbindAdditionalTexture:function(d,r){d.activeTexture(r),d.bindTexture(d.TEXTURE_2D,null),d.activeTexture(d.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(d){this[this.mainParameter]=d},sendUniformData:function(){},createHelpLayer:function(d){if(!d.helpLayer){var r=document.createElement("canvas");r.width=d.sourceWidth,r.height=d.sourceHeight,d.helpLayer=r}},toObject:function(){var d={type:this.type},r=this.mainParameter;return r&&(d[r]=this[r]),d},toJSON:function(){return this.toObject()}}),f.Image.filters.BaseFilter.fromObject=function(d,r){var h=new f.Image.filters[d.type](d);return r&&r(h),h},function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,u=r.util.createClass;h.ColorMatrix=u(h.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(t){this.callSuper("initialize",t),this.matrix=this.matrix.slice(0)},applyTo2d:function(t){var a=t.imageData,n=a.data,s=n.length,m=this.matrix,o,p,y,I,b,T=this.colorsOnly;for(b=0;b<s;b+=4)o=n[b],p=n[b+1],y=n[b+2],T?(n[b]=o*m[0]+p*m[1]+y*m[2]+m[4]*255,n[b+1]=o*m[5]+p*m[6]+y*m[7]+m[9]*255,n[b+2]=o*m[10]+p*m[11]+y*m[12]+m[14]*255):(I=n[b+3],n[b]=o*m[0]+p*m[1]+y*m[2]+I*m[3]+m[4]*255,n[b+1]=o*m[5]+p*m[6]+y*m[7]+I*m[8]+m[9]*255,n[b+2]=o*m[10]+p*m[11]+y*m[12]+I*m[13]+m[14]*255,n[b+3]=o*m[15]+p*m[16]+y*m[17]+I*m[18]+m[19]*255)},getUniformLocations:function(t,a){return{uColorMatrix:t.getUniformLocation(a,"uColorMatrix"),uConstants:t.getUniformLocation(a,"uConstants")}},sendUniformData:function(t,a){var n=this.matrix,s=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],m=[n[4],n[9],n[14],n[19]];t.uniformMatrix4fv(a.uColorMatrix,!1,s),t.uniform4fv(a.uConstants,m)}}),r.Image.filters.ColorMatrix.fromObject=r.Image.filters.BaseFilter.fromObject}(D),function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,u=r.util.createClass;h.Brightness=u(h.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(t){if(this.brightness!==0){var a=t.imageData,n=a.data,s,m=n.length,o=Math.round(this.brightness*255);for(s=0;s<m;s+=4)n[s]=n[s]+o,n[s+1]=n[s+1]+o,n[s+2]=n[s+2]+o}},getUniformLocations:function(t,a){return{uBrightness:t.getUniformLocation(a,"uBrightness")}},sendUniformData:function(t,a){t.uniform1f(a.uBrightness,this.brightness)}}),r.Image.filters.Brightness.fromObject=r.Image.filters.BaseFilter.fromObject}(D),function(d){var r=d.fabric||(d.fabric={}),h=r.util.object.extend,u=r.Image.filters,t=r.util.createClass;u.Convolute=t(u.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(a){var n=Math.sqrt(this.matrix.length),s=this.type+"_"+n+"_"+(this.opaque?1:0),m=this.fragmentSource[s];return a.programCache.hasOwnProperty(s)||(a.programCache[s]=this.createProgram(a.context,m)),a.programCache[s]},applyTo2d:function(a){var n=a.imageData,s=n.data,m=this.matrix,o=Math.round(Math.sqrt(m.length)),p=Math.floor(o/2),y=n.width,I=n.height,b=a.ctx.createImageData(y,I),T=b.data,P=this.opaque?1:0,z,j,H,nt,q,Ct,V,pt,F,Rt,yt,Ft,K;for(yt=0;yt<I;yt++)for(Rt=0;Rt<y;Rt++){for(q=(yt*y+Rt)*4,z=0,j=0,H=0,nt=0,K=0;K<o;K++)for(Ft=0;Ft<o;Ft++)V=yt+K-p,Ct=Rt+Ft-p,!(V<0||V>=I||Ct<0||Ct>=y)&&(pt=(V*y+Ct)*4,F=m[K*o+Ft],z+=s[pt]*F,j+=s[pt+1]*F,H+=s[pt+2]*F,P||(nt+=s[pt+3]*F));T[q]=z,T[q+1]=j,T[q+2]=H,P?T[q+3]=s[q+3]:T[q+3]=nt}a.imageData=b},getUniformLocations:function(a,n){return{uMatrix:a.getUniformLocation(n,"uMatrix"),uOpaque:a.getUniformLocation(n,"uOpaque"),uHalfSize:a.getUniformLocation(n,"uHalfSize"),uSize:a.getUniformLocation(n,"uSize")}},sendUniformData:function(a,n){a.uniform1fv(n.uMatrix,this.matrix)},toObject:function(){return h(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),r.Image.filters.Convolute.fromObject=r.Image.filters.BaseFilter.fromObject}(D),function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,u=r.util.createClass;h.Grayscale=u(h.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(t){var a=t.imageData,n=a.data,s,m=n.length,o,p=this.mode;for(s=0;s<m;s+=4)p==="average"?o=(n[s]+n[s+1]+n[s+2])/3:p==="lightness"?o=(Math.min(n[s],n[s+1],n[s+2])+Math.max(n[s],n[s+1],n[s+2]))/2:p==="luminosity"&&(o=.21*n[s]+.72*n[s+1]+.07*n[s+2]),n[s]=o,n[s+1]=o,n[s+2]=o},retrieveShader:function(t){var a=this.type+"_"+this.mode;if(!t.programCache.hasOwnProperty(a)){var n=this.fragmentSource[this.mode];t.programCache[a]=this.createProgram(t.context,n)}return t.programCache[a]},getUniformLocations:function(t,a){return{uMode:t.getUniformLocation(a,"uMode")}},sendUniformData:function(t,a){var n=1;t.uniform1i(a.uMode,n)},isNeutralState:function(){return!1}}),r.Image.filters.Grayscale.fromObject=r.Image.filters.BaseFilter.fromObject}(D),function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,u=r.util.createClass;h.Invert=u(h.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(t){var a=t.imageData,n=a.data,s,m=n.length;for(s=0;s<m;s+=4)n[s]=255-n[s],n[s+1]=255-n[s+1],n[s+2]=255-n[s+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(t,a){return{uInvert:t.getUniformLocation(a,"uInvert")}},sendUniformData:function(t,a){t.uniform1i(a.uInvert,this.invert)}}),r.Image.filters.Invert.fromObject=r.Image.filters.BaseFilter.fromObject}(D),function(d){var r=d.fabric||(d.fabric={}),h=r.util.object.extend,u=r.Image.filters,t=r.util.createClass;u.Noise=t(u.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(a){if(this.noise!==0){var n=a.imageData,s=n.data,m,o=s.length,p=this.noise,y;for(m=0,o=s.length;m<o;m+=4)y=(.5-Math.random())*p,s[m]+=y,s[m+1]+=y,s[m+2]+=y}},getUniformLocations:function(a,n){return{uNoise:a.getUniformLocation(n,"uNoise"),uSeed:a.getUniformLocation(n,"uSeed")}},sendUniformData:function(a,n){a.uniform1f(n.uNoise,this.noise/255),a.uniform1f(n.uSeed,Math.random())},toObject:function(){return h(this.callSuper("toObject"),{noise:this.noise})}}),r.Image.filters.Noise.fromObject=r.Image.filters.BaseFilter.fromObject}(D),function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,u=r.util.createClass;h.Pixelate=u(h.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(t){var a=t.imageData,n=a.data,s=a.height,m=a.width,o,p,y,I,b,T,P,z,j,H,nt;for(p=0;p<s;p+=this.blocksize)for(y=0;y<m;y+=this.blocksize)for(o=p*4*m+y*4,I=n[o],b=n[o+1],T=n[o+2],P=n[o+3],H=Math.min(p+this.blocksize,s),nt=Math.min(y+this.blocksize,m),z=p;z<H;z++)for(j=y;j<nt;j++)o=z*4*m+j*4,n[o]=I,n[o+1]=b,n[o+2]=T,n[o+3]=P},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(t,a){return{uBlocksize:t.getUniformLocation(a,"uBlocksize"),uStepW:t.getUniformLocation(a,"uStepW"),uStepH:t.getUniformLocation(a,"uStepH")}},sendUniformData:function(t,a){t.uniform1f(a.uBlocksize,this.blocksize)}}),r.Image.filters.Pixelate.fromObject=r.Image.filters.BaseFilter.fromObject}(D),function(d){var r=d.fabric||(d.fabric={}),h=r.util.object.extend,u=r.Image.filters,t=r.util.createClass;u.RemoveColor=t(u.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(a){var n=a.imageData,s=n.data,m,o=this.distance*255,p,y,I,b=new r.Color(this.color).getSource(),T=[b[0]-o,b[1]-o,b[2]-o],P=[b[0]+o,b[1]+o,b[2]+o];for(m=0;m<s.length;m+=4)p=s[m],y=s[m+1],I=s[m+2],p>T[0]&&y>T[1]&&I>T[2]&&p<P[0]&&y<P[1]&&I<P[2]&&(s[m+3]=0)},getUniformLocations:function(a,n){return{uLow:a.getUniformLocation(n,"uLow"),uHigh:a.getUniformLocation(n,"uHigh")}},sendUniformData:function(a,n){var s=new r.Color(this.color).getSource(),m=parseFloat(this.distance),o=[0+s[0]/255-m,0+s[1]/255-m,0+s[2]/255-m,1],p=[s[0]/255+m,s[1]/255+m,s[2]/255+m,1];a.uniform4fv(n.uLow,o),a.uniform4fv(n.uHigh,p)},toObject:function(){return h(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),r.Image.filters.RemoveColor.fromObject=r.Image.filters.BaseFilter.fromObject}(D),function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,u=r.util.createClass,t={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var a in t)h[a]=u(h.ColorMatrix,{type:a,matrix:t[a],mainParameter:!1,colorsOnly:!0}),r.Image.filters[a].fromObject=r.Image.filters.BaseFilter.fromObject}(D),function(d){var r=d.fabric,h=r.Image.filters,u=r.util.createClass;h.BlendColor=u(h.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(t){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[t]+`}
}`},retrieveShader:function(t){var a=this.type+"_"+this.mode,n;return t.programCache.hasOwnProperty(a)||(n=this.buildSource(this.mode),t.programCache[a]=this.createProgram(t.context,n)),t.programCache[a]},applyTo2d:function(t){var a=t.imageData,n=a.data,s=n.length,m,o,p,y,I,b,T,P=1-this.alpha;T=new r.Color(this.color).getSource(),m=T[0]*this.alpha,o=T[1]*this.alpha,p=T[2]*this.alpha;for(var z=0;z<s;z+=4)switch(y=n[z],I=n[z+1],b=n[z+2],this.mode){case"multiply":n[z]=y*m/255,n[z+1]=I*o/255,n[z+2]=b*p/255;break;case"screen":n[z]=255-(255-y)*(255-m)/255,n[z+1]=255-(255-I)*(255-o)/255,n[z+2]=255-(255-b)*(255-p)/255;break;case"add":n[z]=y+m,n[z+1]=I+o,n[z+2]=b+p;break;case"diff":case"difference":n[z]=Math.abs(y-m),n[z+1]=Math.abs(I-o),n[z+2]=Math.abs(b-p);break;case"subtract":n[z]=y-m,n[z+1]=I-o,n[z+2]=b-p;break;case"darken":n[z]=Math.min(y,m),n[z+1]=Math.min(I,o),n[z+2]=Math.min(b,p);break;case"lighten":n[z]=Math.max(y,m),n[z+1]=Math.max(I,o),n[z+2]=Math.max(b,p);break;case"overlay":n[z]=m<128?2*y*m/255:255-2*(255-y)*(255-m)/255,n[z+1]=o<128?2*I*o/255:255-2*(255-I)*(255-o)/255,n[z+2]=p<128?2*b*p/255:255-2*(255-b)*(255-p)/255;break;case"exclusion":n[z]=m+y-2*m*y/255,n[z+1]=o+I-2*o*I/255,n[z+2]=p+b-2*p*b/255;break;case"tint":n[z]=m+y*P,n[z+1]=o+I*P,n[z+2]=p+b*P}},getUniformLocations:function(t,a){return{uColor:t.getUniformLocation(a,"uColor")}},sendUniformData:function(t,a){var n=new r.Color(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,t.uniform4fv(a.uColor,n)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),r.Image.filters.BlendColor.fromObject=r.Image.filters.BaseFilter.fromObject}(D),function(d){var r=d.fabric,h=r.Image.filters,u=r.util.createClass;h.BlendImage=u(h.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(t){var a=this.type+"_"+this.mode,n=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(a)||(t.programCache[a]=this.createProgram(t.context,n)),t.programCache[a]},applyToWebGL:function(t){var a=t.context,n=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(a,n,a.TEXTURE1),this.callSuper("applyToWebGL",t),this.unbindAdditionalTexture(a,a.TEXTURE1)},createTexture:function(t,a){return t.getCachedTexture(a.cacheKey,a._element)},calculateMatrix:function(){var t=this.image,a=t._element.width,n=t._element.height;return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/a,-t.top/n,1]},applyTo2d:function(t){var a=t.imageData,n=t.filterBackend.resources,s=a.data,m=s.length,o=a.width,p=a.height,y,I,b,T,P,z,j,H,nt,q,Ct=this.image,V;n.blendImage||(n.blendImage=r.util.createCanvasElement()),nt=n.blendImage,q=nt.getContext("2d"),nt.width!==o||nt.height!==p?(nt.width=o,nt.height=p):q.clearRect(0,0,o,p),q.setTransform(Ct.scaleX,0,0,Ct.scaleY,Ct.left,Ct.top),q.drawImage(Ct._element,0,0,o,p),V=q.getImageData(0,0,o,p).data;for(var pt=0;pt<m;pt+=4)switch(P=s[pt],z=s[pt+1],j=s[pt+2],H=s[pt+3],y=V[pt],I=V[pt+1],b=V[pt+2],T=V[pt+3],this.mode){case"multiply":s[pt]=P*y/255,s[pt+1]=z*I/255,s[pt+2]=j*b/255,s[pt+3]=H*T/255;break;case"mask":s[pt+3]=T;break}},getUniformLocations:function(t,a){return{uTransformMatrix:t.getUniformLocation(a,"uTransformMatrix"),uImage:t.getUniformLocation(a,"uImage")}},sendUniformData:function(t,a){var n=this.calculateMatrix();t.uniform1i(a.uImage,1),t.uniformMatrix3fv(a.uTransformMatrix,!1,n)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),r.Image.filters.BlendImage.fromObject=function(t,a){r.Image.fromObject(t.image,function(n){var s=r.util.object.clone(t);s.image=n,a(new r.Image.filters.BlendImage(s))})}}(D),function(d){var r=d.fabric||(d.fabric={}),h=Math.pow,u=Math.floor,t=Math.sqrt,a=Math.abs,n=Math.round,s=Math.sin,m=Math.ceil,o=r.Image.filters,p=r.util.createClass;o.Resize=p(o.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(y,I){return{uDelta:y.getUniformLocation(I,"uDelta"),uTaps:y.getUniformLocation(I,"uTaps")}},sendUniformData:function(y,I){y.uniform2fv(I.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),y.uniform1fv(I.uTaps,this.taps)},retrieveShader:function(y){var I=this.getFilterWindow(),b=this.type+"_"+I;if(!y.programCache.hasOwnProperty(b)){var T=this.generateShader(I);y.programCache[b]=this.createProgram(y.context,T)}return y.programCache[b]},getFilterWindow:function(){var y=this.tempScale;return Math.ceil(this.lanczosLobes/y)},getTaps:function(){for(var y=this.lanczosCreate(this.lanczosLobes),I=this.tempScale,b=this.getFilterWindow(),T=new Array(b),P=1;P<=b;P++)T[P-1]=y(P*I);return T},generateShader:function(T){for(var I=new Array(T),b=this.fragmentSourceTOP,T,P=1;P<=T;P++)I[P-1]=P+".0 * uDelta";return b+="uniform float uTaps["+T+`];
`,b+=`void main() {
`,b+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,b+=`  float sum = 1.0;
`,I.forEach(function(z,j){b+="  color += texture2D(uTexture, vTexCoord + "+z+") * uTaps["+j+`];
`,b+="  color += texture2D(uTexture, vTexCoord - "+z+") * uTaps["+j+`];
`,b+="  sum += 2.0 * uTaps["+j+`];
`}),b+=`  gl_FragColor = color / sum;
`,b+="}",b},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(y){y.webgl?(y.passes++,this.width=y.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=y.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),y.destinationWidth=this.dW,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceWidth=y.destinationWidth,this.height=y.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),y.destinationHeight=this.dH,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceHeight=y.destinationHeight):this.applyTo2d(y)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(y){return function(I){if(I>=y||I<=-y)return 0;if(I<11920929e-14&&I>-11920929e-14)return 1;I*=Math.PI;var b=I/y;return s(I)/I*s(b)/b}},applyTo2d:function(y){var I=y.imageData,b=this.scaleX,T=this.scaleY;this.rcpScaleX=1/b,this.rcpScaleY=1/T;var P=I.width,z=I.height,j=n(P*b),H=n(z*T),nt;this.resizeType==="sliceHack"?nt=this.sliceByTwo(y,P,z,j,H):this.resizeType==="hermite"?nt=this.hermiteFastResize(y,P,z,j,H):this.resizeType==="bilinear"?nt=this.bilinearFiltering(y,P,z,j,H):this.resizeType==="lanczos"&&(nt=this.lanczosResize(y,P,z,j,H)),y.imageData=nt},sliceByTwo:function(y,I,b,T,P){var z=y.imageData,j=.5,H=!1,nt=!1,q=I*j,Ct=b*j,V=r.filterBackend.resources,pt,F,Rt=0,yt=0,Ft=I,K=0;for(V.sliceByTwo||(V.sliceByTwo=document.createElement("canvas")),pt=V.sliceByTwo,(pt.width<I*1.5||pt.height<b)&&(pt.width=I*1.5,pt.height=b),F=pt.getContext("2d"),F.clearRect(0,0,I*1.5,b),F.putImageData(z,0,0),T=u(T),P=u(P);!H||!nt;)I=q,b=Ct,T<u(q*j)?q=u(q*j):(q=T,H=!0),P<u(Ct*j)?Ct=u(Ct*j):(Ct=P,nt=!0),F.drawImage(pt,Rt,yt,I,b,Ft,K,q,Ct),Rt=Ft,yt=K,K+=Ct;return F.getImageData(Rt,yt,T,P)},lanczosResize:function(y,I,b,T,P){function z(J){var Y,lt,B,U,G,Z,gt,ht,St,bt,xt;for(K.x=(J+.5)*Ct,at.x=u(K.x),Y=0;Y<P;Y++){for(K.y=(Y+.5)*V,at.y=u(K.y),G=0,Z=0,gt=0,ht=0,St=0,lt=at.x-Rt;lt<=at.x+Rt;lt++)if(!(lt<0||lt>=I)){bt=u(1e3*a(lt-K.x)),Ft[bt]||(Ft[bt]={});for(var rt=at.y-yt;rt<=at.y+yt;rt++)rt<0||rt>=b||(xt=u(1e3*a(rt-K.y)),Ft[bt][xt]||(Ft[bt][xt]=q(t(h(bt*pt,2)+h(xt*F,2))/1e3)),B=Ft[bt][xt],B>0&&(U=(rt*I+lt)*4,G+=B,Z+=B*j[U],gt+=B*j[U+1],ht+=B*j[U+2],St+=B*j[U+3]))}U=(Y*T+J)*4,nt[U]=Z/G,nt[U+1]=gt/G,nt[U+2]=ht/G,nt[U+3]=St/G}return++J<T?z(J):H}var j=y.imageData.data,H=y.ctx.createImageData(T,P),nt=H.data,q=this.lanczosCreate(this.lanczosLobes),Ct=this.rcpScaleX,V=this.rcpScaleY,pt=2/this.rcpScaleX,F=2/this.rcpScaleY,Rt=m(Ct*this.lanczosLobes/2),yt=m(V*this.lanczosLobes/2),Ft={},K={},at={};return z(0)},bilinearFiltering:function(y,I,b,T,P){var z,j,H,nt,q,Ct,V,pt,F,Rt,yt,Ft,K=0,at,J=this.rcpScaleX,Y=this.rcpScaleY,lt=4*(I-1),B=y.imageData,U=B.data,G=y.ctx.createImageData(T,P),Z=G.data;for(V=0;V<P;V++)for(pt=0;pt<T;pt++)for(q=u(J*pt),Ct=u(Y*V),F=J*pt-q,Rt=Y*V-Ct,at=4*(Ct*I+q),yt=0;yt<4;yt++)z=U[at+yt],j=U[at+4+yt],H=U[at+lt+yt],nt=U[at+lt+4+yt],Ft=z*(1-F)*(1-Rt)+j*F*(1-Rt)+H*Rt*(1-F)+nt*F*Rt,Z[K++]=Ft;return G},hermiteFastResize:function(y,I,b,T,P){for(var z=this.rcpScaleX,j=this.rcpScaleY,H=m(z/2),nt=m(j/2),q=y.imageData,Ct=q.data,V=y.ctx.createImageData(T,P),pt=V.data,F=0;F<P;F++)for(var Rt=0;Rt<T;Rt++){for(var yt=(Rt+F*T)*4,Ft=0,K=0,at=0,J=0,Y=0,lt=0,B=0,U=(F+.5)*j,G=u(F*j);G<(F+1)*j;G++)for(var Z=a(U-(G+.5))/nt,gt=(Rt+.5)*z,ht=Z*Z,St=u(Rt*z);St<(Rt+1)*z;St++){var bt=a(gt-(St+.5))/H,xt=t(ht+bt*bt);xt>1&&xt<-1||(Ft=2*xt*xt*xt-3*xt*xt+1,Ft>0&&(bt=4*(St+G*I),B+=Ft*Ct[bt+3],at+=Ft,Ct[bt+3]<255&&(Ft=Ft*Ct[bt+3]/250),J+=Ft*Ct[bt],Y+=Ft*Ct[bt+1],lt+=Ft*Ct[bt+2],K+=Ft))}pt[yt]=J/K,pt[yt+1]=Y/K,pt[yt+2]=lt/K,pt[yt+3]=B/at}return V},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),r.Image.filters.Resize.fromObject=r.Image.filters.BaseFilter.fromObject}(D),function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,u=r.util.createClass;h.Contrast=u(h.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(t){if(this.contrast!==0){var a=t.imageData,n,m,s=a.data,m=s.length,o=Math.floor(this.contrast*255),p=259*(o+255)/(255*(259-o));for(n=0;n<m;n+=4)s[n]=p*(s[n]-128)+128,s[n+1]=p*(s[n+1]-128)+128,s[n+2]=p*(s[n+2]-128)+128}},getUniformLocations:function(t,a){return{uContrast:t.getUniformLocation(a,"uContrast")}},sendUniformData:function(t,a){t.uniform1f(a.uContrast,this.contrast)}}),r.Image.filters.Contrast.fromObject=r.Image.filters.BaseFilter.fromObject}(D),function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,u=r.util.createClass;h.Saturation=u(h.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(t){if(this.saturation!==0){var a=t.imageData,n=a.data,s=n.length,m=-this.saturation,o,p;for(o=0;o<s;o+=4)p=Math.max(n[o],n[o+1],n[o+2]),n[o]+=p!==n[o]?(p-n[o])*m:0,n[o+1]+=p!==n[o+1]?(p-n[o+1])*m:0,n[o+2]+=p!==n[o+2]?(p-n[o+2])*m:0}},getUniformLocations:function(t,a){return{uSaturation:t.getUniformLocation(a,"uSaturation")}},sendUniformData:function(t,a){t.uniform1f(a.uSaturation,-this.saturation)}}),r.Image.filters.Saturation.fromObject=r.Image.filters.BaseFilter.fromObject}(D),function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,u=r.util.createClass;h.Vibrance=u(h.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(t){if(this.vibrance!==0){var a=t.imageData,n=a.data,s=n.length,m=-this.vibrance,o,p,y,I;for(o=0;o<s;o+=4)p=Math.max(n[o],n[o+1],n[o+2]),y=(n[o]+n[o+1]+n[o+2])/3,I=Math.abs(p-y)*2/255*m,n[o]+=p!==n[o]?(p-n[o])*I:0,n[o+1]+=p!==n[o+1]?(p-n[o+1])*I:0,n[o+2]+=p!==n[o+2]?(p-n[o+2])*I:0}},getUniformLocations:function(t,a){return{uVibrance:t.getUniformLocation(a,"uVibrance")}},sendUniformData:function(t,a){t.uniform1f(a.uVibrance,-this.vibrance)}}),r.Image.filters.Vibrance.fromObject=r.Image.filters.BaseFilter.fromObject}(D),function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,u=r.util.createClass;h.Blur=u(h.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(t){t.webgl?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},applyTo2d:function(t){t.imageData=this.simpleBlur(t)},simpleBlur:function(t){var a=t.filterBackend.resources,n,s,m=t.imageData.width,o=t.imageData.height;a.blurLayer1||(a.blurLayer1=r.util.createCanvasElement(),a.blurLayer2=r.util.createCanvasElement()),n=a.blurLayer1,s=a.blurLayer2,(n.width!==m||n.height!==o)&&(s.width=n.width=m,s.height=n.height=o);var p=n.getContext("2d"),y=s.getContext("2d"),I=15,b,T,P,z,j=this.blur*.06*.5;for(p.putImageData(t.imageData,0,0),y.clearRect(0,0,m,o),z=-I;z<=I;z++)b=(Math.random()-.5)/4,T=z/I,P=j*T*m+b,y.globalAlpha=1-Math.abs(T),y.drawImage(n,P,b),p.drawImage(s,0,0),y.globalAlpha=1,y.clearRect(0,0,s.width,s.height);for(z=-I;z<=I;z++)b=(Math.random()-.5)/4,T=z/I,P=j*T*o+b,y.globalAlpha=1-Math.abs(T),y.drawImage(n,b,P),p.drawImage(s,0,0),y.globalAlpha=1,y.clearRect(0,0,s.width,s.height);t.ctx.drawImage(n,0,0);var H=t.ctx.getImageData(0,0,n.width,n.height);return p.globalAlpha=1,p.clearRect(0,0,n.width,n.height),H},getUniformLocations:function(t,a){return{delta:t.getUniformLocation(a,"uDelta")}},sendUniformData:function(t,a){var n=this.chooseRightDelta();t.uniform2fv(a.delta,n)},chooseRightDelta:function(){var t=1,a=[0,0],n;return this.horizontal?this.aspectRatio>1&&(t=1/this.aspectRatio):this.aspectRatio<1&&(t=this.aspectRatio),n=t*this.blur*.12,this.horizontal?a[0]=n:a[1]=n,a}}),h.Blur.fromObject=r.Image.filters.BaseFilter.fromObject}(D),function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,u=r.util.createClass;h.Gamma=u(h.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(t){this.gamma=[1,1,1],h.BaseFilter.prototype.initialize.call(this,t)},applyTo2d:function(t){var a=t.imageData,n=a.data,s=this.gamma,m=n.length,o=1/s[0],p=1/s[1],y=1/s[2],I;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),I=0,m=256;I<m;I++)this.rVals[I]=Math.pow(I/255,o)*255,this.gVals[I]=Math.pow(I/255,p)*255,this.bVals[I]=Math.pow(I/255,y)*255;for(I=0,m=n.length;I<m;I+=4)n[I]=this.rVals[n[I]],n[I+1]=this.gVals[n[I+1]],n[I+2]=this.bVals[n[I+2]]},getUniformLocations:function(t,a){return{uGamma:t.getUniformLocation(a,"uGamma")}},sendUniformData:function(t,a){t.uniform3fv(a.uGamma,this.gamma)}}),r.Image.filters.Gamma.fromObject=r.Image.filters.BaseFilter.fromObject}(D),function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,u=r.util.createClass;h.Composed=u(h.BaseFilter,{type:"Composed",subFilters:[],initialize:function(t){this.callSuper("initialize",t),this.subFilters=this.subFilters.slice(0)},applyTo:function(t){t.passes+=this.subFilters.length-1,this.subFilters.forEach(function(a){a.applyTo(t)})},toObject:function(){return r.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(t){return t.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(t){return!t.isNeutralState()})}}),r.Image.filters.Composed.fromObject=function(t,a){var n=t.subFilters||[],s=n.map(function(o){return new r.Image.filters[o.type](o)}),m=new r.Image.filters.Composed({subFilters:s});return a&&a(m),m}}(D),function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,u=r.util.createClass;h.HueRotation=u(h.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var t=this.rotation*Math.PI,a=r.util.cos(t),n=r.util.sin(t),s=1/3,m=Math.sqrt(s)*n,o=1-a;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=a+o/3,this.matrix[1]=s*o-m,this.matrix[2]=s*o+m,this.matrix[5]=s*o+m,this.matrix[6]=a+s*o,this.matrix[7]=s*o-m,this.matrix[10]=s*o-m,this.matrix[11]=s*o+m,this.matrix[12]=a+s*o},isNeutralState:function(t){return this.calculateMatrix(),h.BaseFilter.prototype.isNeutralState.call(this,t)},applyTo:function(t){this.calculateMatrix(),h.BaseFilter.prototype.applyTo.call(this,t)}}),r.Image.filters.HueRotation.fromObject=r.Image.filters.BaseFilter.fromObject}(D),function(d){var r=d.fabric||(d.fabric={}),h=r.util.object.clone;if(r.Text){r.warn("fabric.Text is already defined");return}var u="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide".split(" ");r.Text=r.util.createClass(r.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:r.Object.prototype.stateProperties.concat(u),cacheProperties:r.Object.prototype.cacheProperties.concat(u),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(t,a){this.styles=a?a.styles||{}:{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",a),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var t=this.path;t&&(t.segmentsInfo=r.util.getPathSegmentsInfo(t.path))},getMeasuringContext:function(){return r._measuringContext||(r._measuringContext=this.canvas&&this.canvas.contextCache||r.util.createCanvasElement().getContext("2d")),r._measuringContext},_splitText:function(){var t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var t,a,n,s,m,o,p,y=0,I=this._textLines.length;y<I;y++)if(!(this.textAlign!=="justify"&&(y===I-1||this.isEndOfWrapping(y)))&&(s=0,m=this._textLines[y],a=this.getLineWidth(y),a<this.width&&(p=this.textLines[y].match(this._reSpacesAndTabs)))){n=p.length,t=(this.width-a)/n;for(var b=0,T=m.length;b<=T;b++)o=this.__charBounds[y][b],this._reSpaceAndTab.test(m[b])?(o.width+=t,o.kernedWidth+=t,o.left+=s,s+=t):o.left+=s}},isEndOfWrapping:function(t){return t===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),a=this.fontSize;return t.width+=a*t.zoomX,t.height+=a*t.zoomY,t},_render:function(t){var a=this.path;a&&!a.isNotVisible()&&a._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")},_renderText:function(t){this.paintFirst==="stroke"?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))},_setTextStyles:function(t,a,n){t.textBaseline="alphabetic",t.font=this._getFontDeclaration(a,n)},calcTextWidth:function(){for(var t=this.getLineWidth(0),a=1,n=this._textLines.length;a<n;a++){var s=this.getLineWidth(a);s>t&&(t=s)}return t},_renderTextLine:function(t,a,n,s,m,o){this._renderChars(t,a,n,s,m,o)},_renderTextLinesBackground:function(t){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var a,n,s=t.fillStyle,m,o,p=this._getLeftOffset(),y=this._getTopOffset(),I=0,b=0,T,P,z=this.path,j,H=0,nt=this._textLines.length;H<nt;H++){if(a=this.getHeightOfLine(H),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",H)){y+=a;continue}m=this._textLines[H],n=this._getLineLeftOffset(H),b=0,I=0,o=this.getValueOfPropertyAt(H,0,"textBackgroundColor");for(var q=0,Ct=m.length;q<Ct;q++)T=this.__charBounds[H][q],P=this.getValueOfPropertyAt(H,q,"textBackgroundColor"),z?(t.save(),t.translate(T.renderLeft,T.renderTop),t.rotate(T.angle),t.fillStyle=P,P&&t.fillRect(-T.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),T.width,a/this.lineHeight),t.restore()):P!==o?(j=p+n+I,this.direction==="rtl"&&(j=this.width-j-b),t.fillStyle=o,o&&t.fillRect(j,y,b,a/this.lineHeight),I=T.left,b=T.width,o=P):b+=T.kernedWidth;P&&!z&&(j=p+n+I,this.direction==="rtl"&&(j=this.width-j-b),t.fillStyle=P,t.fillRect(j,y,b,a/this.lineHeight)),y+=a}t.fillStyle=s,this._removeShadow(t)}},getFontCache:function(t){var a=t.fontFamily.toLowerCase();r.charWidthsCache[a]||(r.charWidthsCache[a]={});var n=r.charWidthsCache[a],s=t.fontStyle.toLowerCase()+"_"+(t.fontWeight+"").toLowerCase();return n[s]||(n[s]={}),n[s]},_measureChar:function(t,a,n,s){var m=this.getFontCache(a),o=this._getFontDeclaration(a),p=this._getFontDeclaration(s),y=n+t,I=o===p,b,T,P,z=a.fontSize/this.CACHE_FONT_SIZE,j;if(n&&m[n]!==void 0&&(P=m[n]),m[t]!==void 0&&(j=b=m[t]),I&&m[y]!==void 0&&(T=m[y],j=T-P),b===void 0||P===void 0||T===void 0){var H=this.getMeasuringContext();this._setTextStyles(H,a,!0)}return b===void 0&&(j=b=H.measureText(t).width,m[t]=b),P===void 0&&I&&n&&(P=H.measureText(n).width,m[n]=P),I&&T===void 0&&(T=H.measureText(y).width,m[y]=T,j=T-P),{width:b*z,kernedWidth:j*z}},getHeightOfChar:function(t,a){return this.getValueOfPropertyAt(t,a,"fontSize")},measureLine:function(t){var a=this._measureLine(t);return this.charSpacing!==0&&(a.width-=this._getWidthOfCharSpacing()),a.width<0&&(a.width=0),a},_measureLine:function(t){var a=0,n,s,m=this._textLines[t],o,p,y=0,I=new Array(m.length),b=0,T,P,z=this.path,j=this.pathSide==="right";for(this.__charBounds[t]=I,n=0;n<m.length;n++)s=m[n],p=this._getGraphemeBox(s,t,n,o),I[n]=p,a+=p.kernedWidth,o=s;if(I[n]={left:p?p.left+p.width:0,width:0,kernedWidth:0,height:this.fontSize},z){switch(P=z.segmentsInfo[z.segmentsInfo.length-1].length,T=r.util.getPointOnPath(z.path,0,z.segmentsInfo),T.x+=z.pathOffset.x,T.y+=z.pathOffset.y,this.textAlign){case"left":b=j?P-a:0;break;case"center":b=(P-a)/2;break;case"right":b=j?0:P-a;break}for(b+=this.pathStartOffset*(j?-1:1),n=j?m.length-1:0;j?n>=0:n<m.length;j?n--:n++)p=I[n],b>P?b%=P:b<0&&(b+=P),this._setGraphemeOnPath(b,p,T),b+=p.kernedWidth}return{width:a,numOfSpaces:y}},_setGraphemeOnPath:function(t,a,n){var s=t+a.kernedWidth/2,m=this.path,o=r.util.getPointOnPath(m.path,s,m.segmentsInfo);a.renderLeft=o.x-n.x,a.renderTop=o.y-n.y,a.angle=o.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(t,a,n,s,m){var o=this.getCompleteStyleDeclaration(a,n),p=s?this.getCompleteStyleDeclaration(a,n-1):{},y=this._measureChar(t,o,s,p),I=y.kernedWidth,b=y.width,T;this.charSpacing!==0&&(T=this._getWidthOfCharSpacing(),b+=T,I+=T);var P={width:b,left:0,height:o.fontSize,kernedWidth:I,deltaY:o.deltaY};if(n>0&&!m){var z=this.__charBounds[a][n-1];P.left=z.left+z.width+y.kernedWidth-y.width}return P},getHeightOfLine:function(t){if(this.__lineHeights[t])return this.__lineHeights[t];for(var a=this._textLines[t],n=this.getHeightOfChar(t,0),s=1,m=a.length;s<m;s++)n=Math.max(this.getHeightOfChar(t,s),n);return this.__lineHeights[t]=n*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var t,a=0,n=0,s=this._textLines.length;n<s;n++)t=this.getHeightOfLine(n),a+=n===s-1?t/this.lineHeight:t;return a},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(t,a){t.save();for(var n=0,s=this._getLeftOffset(),m=this._getTopOffset(),o=0,p=this._textLines.length;o<p;o++){var y=this.getHeightOfLine(o),I=y/this.lineHeight,b=this._getLineLeftOffset(o);this._renderTextLine(a,t,this._textLines[o],s+b,m+n+I,o),n+=y}t.restore()},_renderTextFill:function(t){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_renderChars:function(t,a,n,s,m,o){var p=this.getHeightOfLine(o),y=this.textAlign.indexOf("justify")!==-1,I,b,T="",P,z=0,j,H=this.path,nt=!y&&this.charSpacing===0&&this.isEmptyStyles(o)&&!H,q=this.direction==="ltr",Ct=this.direction==="ltr"?1:-1,V;if(a.save(),m-=p*this._fontSizeFraction/this.lineHeight,nt){a.canvas.setAttribute("dir",q?"ltr":"rtl"),a.direction=q?"ltr":"rtl",a.textAlign=q?"left":"right",this._renderChar(t,a,o,0,n.join(""),s,m,p),a.restore();return}for(var pt=0,F=n.length-1;pt<=F;pt++)j=pt===F||this.charSpacing||H,T+=n[pt],P=this.__charBounds[o][pt],z===0?(s+=Ct*(P.kernedWidth-P.width),z+=P.width):z+=P.kernedWidth,y&&!j&&this._reSpaceAndTab.test(n[pt])&&(j=!0),j||(I=I||this.getCompleteStyleDeclaration(o,pt),b=this.getCompleteStyleDeclaration(o,pt+1),j=this._hasStyleChanged(I,b)),j&&(H?(a.save(),a.translate(P.renderLeft,P.renderTop),a.rotate(P.angle),this._renderChar(t,a,o,pt,T,-z/2,0,p),a.restore()):(V=s,a.canvas.setAttribute("dir",q?"ltr":"rtl"),a.direction=q?"ltr":"rtl",a.textAlign=q?"left":"right",this._renderChar(t,a,o,pt,T,V,m,p)),T="",I=b,s+=Ct*z,z=0);a.restore()},_applyPatternGradientTransformText:function(t){var a=r.util.createCanvasElement(),n,s=this.width+this.strokeWidth,m=this.height+this.strokeWidth;return a.width=s,a.height=m,n=a.getContext("2d"),n.beginPath(),n.moveTo(0,0),n.lineTo(s,0),n.lineTo(s,m),n.lineTo(0,m),n.closePath(),n.translate(s/2,m/2),n.fillStyle=t.toLive(n),this._applyPatternGradientTransform(n,t),n.fill(),n.createPattern(a,"no-repeat")},handleFiller:function(t,a,n){var s,m;return n.toLive?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(s=-this.width/2,m=-this.height/2,t.translate(s,m),t[a]=this._applyPatternGradientTransformText(n),{offsetX:s,offsetY:m}):(t[a]=n.toLive(t,this),this._applyPatternGradientTransform(t,n)):(t[a]=n,{offsetX:0,offsetY:0})},_setStrokeStyles:function(t,a){return t.lineWidth=a.strokeWidth,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",a.stroke)},_setFillStyles:function(t,a){return this.handleFiller(t,"fillStyle",a.fill)},_renderChar:function(t,a,n,s,m,o,p){var y=this._getStyleDeclaration(n,s),I=this.getCompleteStyleDeclaration(n,s),b=t==="fillText"&&I.fill,T=t==="strokeText"&&I.stroke&&I.strokeWidth,P,z;!T&&!b||(a.save(),b&&(P=this._setFillStyles(a,I)),T&&(z=this._setStrokeStyles(a,I)),a.font=this._getFontDeclaration(I),y&&y.textBackgroundColor&&this._removeShadow(a),y&&y.deltaY&&(p+=y.deltaY),b&&a.fillText(m,o-P.offsetX,p-P.offsetY),T&&a.strokeText(m,o-z.offsetX,p-z.offsetY),a.restore())},setSuperscript:function(t,a){return this._setScript(t,a,this.superscript)},setSubscript:function(t,a){return this._setScript(t,a,this.subscript)},_setScript:function(t,a,n){var s=this.get2DCursorLocation(t,!0),m=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),o=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY"),p={fontSize:m*n.size,deltaY:o+m*n.baseline};return this.setSelectionStyles(p,t,a),this},_hasStyleChanged:function(t,a){return t.fill!==a.fill||t.stroke!==a.stroke||t.strokeWidth!==a.strokeWidth||t.fontSize!==a.fontSize||t.fontFamily!==a.fontFamily||t.fontWeight!==a.fontWeight||t.fontStyle!==a.fontStyle||t.deltaY!==a.deltaY},_hasStyleChangedForSvg:function(t,a){return this._hasStyleChanged(t,a)||t.overline!==a.overline||t.underline!==a.underline||t.linethrough!==a.linethrough},_getLineLeftOffset:function(t){var a=this.getLineWidth(t),n=this.width-a,s=this.textAlign,m=this.direction,p,o=0,p=this.isEndOfWrapping(t);return s==="justify"||s==="justify-center"&&!p||s==="justify-right"&&!p||s==="justify-left"&&!p?0:(s==="center"&&(o=n/2),s==="right"&&(o=n),s==="justify-center"&&(o=n/2),s==="justify-right"&&(o=n),m==="rtl"&&(o-=n),o)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged("_dimensionAffectingProps")),t&&(this.dirty=!0,this._forceClearCache=!1),t},getLineWidth:function(t){if(this.__lineWidths[t])return this.__lineWidths[t];var a,n=this._textLines[t],s;return n===""?a=0:(s=this.measureLine(t),a=s.width),this.__lineWidths[t]=a,a},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(t,a,n){var s=this._getStyleDeclaration(t,a);return s&&typeof s[n]<"u"?s[n]:this[n]},_renderTextDecoration:function(t,a){if(!(!this[a]&&!this.styleHas(a))){for(var n,s,m,o,p,y,I,b,T=this._getLeftOffset(),P=this._getTopOffset(),z,j,H,nt,q,Ct,V,pt,F=this.path,Rt=this._getWidthOfCharSpacing(),yt=this.offsets[a],Ft=0,K=this._textLines.length;Ft<K;Ft++){if(n=this.getHeightOfLine(Ft),!this[a]&&!this.styleHas(a,Ft)){P+=n;continue}I=this._textLines[Ft],Ct=n/this.lineHeight,o=this._getLineLeftOffset(Ft),j=0,H=0,b=this.getValueOfPropertyAt(Ft,0,a),pt=this.getValueOfPropertyAt(Ft,0,"fill"),z=P+Ct*(1-this._fontSizeFraction),s=this.getHeightOfChar(Ft,0),p=this.getValueOfPropertyAt(Ft,0,"deltaY");for(var at=0,J=I.length;at<J;at++)if(nt=this.__charBounds[Ft][at],q=this.getValueOfPropertyAt(Ft,at,a),V=this.getValueOfPropertyAt(Ft,at,"fill"),m=this.getHeightOfChar(Ft,at),y=this.getValueOfPropertyAt(Ft,at,"deltaY"),F&&q&&V)t.save(),t.fillStyle=pt,t.translate(nt.renderLeft,nt.renderTop),t.rotate(nt.angle),t.fillRect(-nt.kernedWidth/2,yt*m+y,nt.kernedWidth,this.fontSize/15),t.restore();else if((q!==b||V!==pt||m!==s||y!==p)&&H>0){var Y=T+o+j;this.direction==="rtl"&&(Y=this.width-Y-H),b&&pt&&(t.fillStyle=pt,t.fillRect(Y,z+yt*s+p,H,this.fontSize/15)),j=nt.left,H=nt.width,b=q,pt=V,s=m,p=y}else H+=nt.kernedWidth;var Y=T+o+j;this.direction==="rtl"&&(Y=this.width-Y-H),t.fillStyle=V,q&&V&&t.fillRect(Y,z+yt*s+p,H-Rt,this.fontSize/15),P+=n}this._removeShadow(t)}},_getFontDeclaration:function(t,a){var n=t||this,s=this.fontFamily,m=r.Text.genericFonts.indexOf(s.toLowerCase())>-1,o=s===void 0||s.indexOf("'")>-1||s.indexOf(",")>-1||s.indexOf('"')>-1||m?n.fontFamily:'"'+n.fontFamily+'"';return[r.isLikelyNode?n.fontWeight:n.fontStyle,r.isLikelyNode?n.fontStyle:n.fontWeight,a?this.CACHE_FONT_SIZE+"px":n.fontSize+"px",o].join(" ")},render:function(t){!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",t))},_splitTextIntoLines:function(t){for(var a=t.split(this._reNewline),n=new Array(a.length),s=[`
`],m=[],o=0;o<a.length;o++)n[o]=r.util.string.graphemeSplit(a[o]),m=m.concat(n[o],s);return m.pop(),{_unwrappedLines:n,lines:a,graphemeText:m,graphemeLines:n}},toObject:function(t){var a=u.concat(t),n=this.callSuper("toObject",a);return n.styles=h(this.styles,!0),n.path&&(n.path=this.path.toObject()),n},set:function(t,a){this.callSuper("set",t,a);var n=!1,s=!1;if(typeof t=="object")for(var m in t)m==="path"&&this.setPathInfo(),n=n||this._dimensionAffectingProps.indexOf(m)!==-1,s=s||m==="path";else n=this._dimensionAffectingProps.indexOf(t)!==-1,s=t==="path";return s&&this.setPathInfo(),n&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),r.Text.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),r.Text.DEFAULT_SVG_FONT_SIZE=16,r.Text.fromElement=function(t,a,n){if(!t)return a(null);var s=r.parseAttributes(t,r.Text.ATTRIBUTE_NAMES),m=s.textAnchor||"left";if(n=r.util.object.extend(n?h(n):{},s),n.top=n.top||0,n.left=n.left||0,s.textDecoration){var o=s.textDecoration;o.indexOf("underline")!==-1&&(n.underline=!0),o.indexOf("overline")!==-1&&(n.overline=!0),o.indexOf("line-through")!==-1&&(n.linethrough=!0),delete n.textDecoration}"dx"in s&&(n.left+=s.dx),"dy"in s&&(n.top+=s.dy),"fontSize"in n||(n.fontSize=r.Text.DEFAULT_SVG_FONT_SIZE);var p="";"textContent"in t?p=t.textContent:"firstChild"in t&&t.firstChild!==null&&"data"in t.firstChild&&t.firstChild.data!==null&&(p=t.firstChild.data),p=p.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var y=n.strokeWidth;n.strokeWidth=0;var I=new r.Text(p,n),b=I.getScaledHeight()/I.height,T=(I.height+I.strokeWidth)*I.lineHeight-I.height,P=T*b,z=I.getScaledHeight()+P,j=0;m==="center"&&(j=I.getScaledWidth()/2),m==="right"&&(j=I.getScaledWidth()),I.set({left:I.left-j,top:I.top-(z-I.fontSize*(.07+I._fontSizeFraction))/I.lineHeight,strokeWidth:typeof y<"u"?y:1}),a(I)},r.Text.fromObject=function(t,a){var n=h(t),s=t.path;return delete n.path,r.Object._fromObject("Text",n,function(m){s?r.Object._fromObject("Path",s,function(o){m.set("path",o),a(m)},"path"):a(m)},"text")},r.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],r.util.createAccessors&&r.util.createAccessors(r.Text)}(D),function(){f.util.object.extend(f.Text.prototype,{isEmptyStyles:function(d){if(!this.styles||typeof d<"u"&&!this.styles[d])return!0;var r=typeof d>"u"?this.styles:{line:this.styles[d]};for(var h in r)for(var u in r[h])for(var t in r[h][u])return!1;return!0},styleHas:function(d,r){if(!this.styles||!d||d===""||typeof r<"u"&&!this.styles[r])return!1;var h=typeof r>"u"?this.styles:{0:this.styles[r]};for(var u in h)for(var t in h[u])if(typeof h[u][t][d]<"u")return!0;return!1},cleanStyle:function(d){if(!this.styles||!d||d==="")return!1;var r=this.styles,h=0,u,t,a=!0,n=0,s;for(var m in r){u=0;for(var o in r[m]){var s=r[m][o],p=s.hasOwnProperty(d);h++,p?(t?s[d]!==t&&(a=!1):t=s[d],s[d]===this[d]&&delete s[d]):a=!1,Object.keys(s).length!==0?u++:delete r[m][o]}u===0&&delete r[m]}for(var y=0;y<this._textLines.length;y++)n+=this._textLines[y].length;a&&h===n&&(this[d]=t,this.removeStyle(d))},removeStyle:function(d){if(!(!this.styles||!d||d==="")){var r=this.styles,h,u,t;for(u in r){h=r[u];for(t in h)delete h[t][d],Object.keys(h[t]).length===0&&delete h[t];Object.keys(h).length===0&&delete r[u]}}},_extendStyles:function(d,r){var h=this.get2DCursorLocation(d);this._getLineStyle(h.lineIndex)||this._setLineStyle(h.lineIndex),this._getStyleDeclaration(h.lineIndex,h.charIndex)||this._setStyleDeclaration(h.lineIndex,h.charIndex,{}),f.util.object.extend(this._getStyleDeclaration(h.lineIndex,h.charIndex),r)},get2DCursorLocation:function(d,r){typeof d>"u"&&(d=this.selectionStart);for(var h=r?this._unwrappedTextLines:this._textLines,u=h.length,t=0;t<u;t++){if(d<=h[t].length)return{lineIndex:t,charIndex:d};d-=h[t].length+this.missingNewlineOffset(t)}return{lineIndex:t-1,charIndex:h[t-1].length<d?h[t-1].length:d}},getSelectionStyles:function(d,r,h){typeof d>"u"&&(d=this.selectionStart||0),typeof r>"u"&&(r=this.selectionEnd||d);for(var u=[],t=d;t<r;t++)u.push(this.getStyleAtPosition(t,h));return u},getStyleAtPosition:function(d,r){var h=this.get2DCursorLocation(d),u=r?this.getCompleteStyleDeclaration(h.lineIndex,h.charIndex):this._getStyleDeclaration(h.lineIndex,h.charIndex);return u||{}},setSelectionStyles:function(d,r,h){typeof r>"u"&&(r=this.selectionStart||0),typeof h>"u"&&(h=this.selectionEnd||r);for(var u=r;u<h;u++)this._extendStyles(u,d);return this._forceClearCache=!0,this},_getStyleDeclaration:function(d,r){var h=this.styles&&this.styles[d];return h?h[r]:null},getCompleteStyleDeclaration:function(d,r){for(var h=this._getStyleDeclaration(d,r)||{},u={},t,a=0;a<this._styleProperties.length;a++)t=this._styleProperties[a],u[t]=typeof h[t]>"u"?this[t]:h[t];return u},_setStyleDeclaration:function(d,r,h){this.styles[d][r]=h},_deleteStyleDeclaration:function(d,r){delete this.styles[d][r]},_getLineStyle:function(d){return!!this.styles[d]},_setLineStyle:function(d){this.styles[d]={}},_deleteLineStyle:function(d){delete this.styles[d]}})}(),function(){function d(r){r.textDecoration&&(r.textDecoration.indexOf("underline")>-1&&(r.underline=!0),r.textDecoration.indexOf("line-through")>-1&&(r.linethrough=!0),r.textDecoration.indexOf("overline")>-1&&(r.overline=!0),delete r.textDecoration)}f.IText=f.util.createClass(f.Text,f.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(r,h){this.callSuper("initialize",r,h),this.initBehavior()},setSelectionStart:function(r){r=Math.max(r,0),this._updateAndFire("selectionStart",r)},setSelectionEnd:function(r){r=Math.min(r,this.text.length),this._updateAndFire("selectionEnd",r)},_updateAndFire:function(r,h){this[r]!==h&&(this._fireSelectionChanged(),this[r]=h),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(r){this.clearContextTop(),this.callSuper("render",r),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(r){this.callSuper("_render",r)},clearContextTop:function(r){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var h=this.canvas.contextTop,u=this.canvas.viewportTransform;h.save(),h.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this.transform(h),this._clearTextArea(h),r||h.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var r=this._getCursorBoundaries(),h=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(r,h):this.renderSelection(r,h),h.restore()}},_clearTextArea:function(r){var h=this.width+4,u=this.height+4;r.clearRect(-h/2,-u/2,h,u)},_getCursorBoundaries:function(r){typeof r>"u"&&(r=this.selectionStart);var h=this._getLeftOffset(),u=this._getTopOffset(),t=this._getCursorBoundariesOffsets(r);return{left:h,top:u,leftOffset:t.left,topOffset:t.top}},_getCursorBoundariesOffsets:function(r){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var h,u,t,a=0,n=0,s,m=this.get2DCursorLocation(r);t=m.charIndex,u=m.lineIndex;for(var o=0;o<u;o++)a+=this.getHeightOfLine(o);h=this._getLineLeftOffset(u);var p=this.__charBounds[u][t];return p&&(n=p.left),this.charSpacing!==0&&t===this._textLines[u].length&&(n-=this._getWidthOfCharSpacing()),s={top:a,left:h+(n>0?n:0)},this.direction==="rtl"&&(s.left*=-1),this.cursorOffsetCache=s,this.cursorOffsetCache},renderCursor:function(r,h){var u=this.get2DCursorLocation(),t=u.lineIndex,a=u.charIndex>0?u.charIndex-1:0,n=this.getValueOfPropertyAt(t,a,"fontSize"),s=this.scaleX*this.canvas.getZoom(),m=this.cursorWidth/s,o=r.topOffset,p=this.getValueOfPropertyAt(t,a,"deltaY");o+=(1-this._fontSizeFraction)*this.getHeightOfLine(t)/this.lineHeight-n*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(r,h),h.fillStyle=this.cursorColor||this.getValueOfPropertyAt(t,a,"fill"),h.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,h.fillRect(r.left+r.leftOffset-m/2,o+r.top+p,m,n)},renderSelection:function(r,h){for(var u=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,t=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,a=this.textAlign.indexOf("justify")!==-1,n=this.get2DCursorLocation(u),s=this.get2DCursorLocation(t),m=n.lineIndex,o=s.lineIndex,p=n.charIndex<0?0:n.charIndex,y=s.charIndex<0?0:s.charIndex,I=m;I<=o;I++){var b=this._getLineLeftOffset(I)||0,T=this.getHeightOfLine(I),P=0,z=0,j=0;if(I===m&&(z=this.__charBounds[m][p].left),I>=m&&I<o)j=a&&!this.isEndOfWrapping(I)?this.width:this.getLineWidth(I)||5;else if(I===o)if(y===0)j=this.__charBounds[o][y].left;else{var H=this._getWidthOfCharSpacing();j=this.__charBounds[o][y-1].left+this.__charBounds[o][y-1].width-H}P=T,(this.lineHeight<1||I===o&&this.lineHeight>1)&&(T/=this.lineHeight);var nt=r.left+b+z,q=j-z,Ct=T,V=0;this.inCompositionMode?(h.fillStyle=this.compositionColor||"black",Ct=1,V=T):h.fillStyle=this.selectionColor,this.direction==="rtl"&&(nt=this.width-nt-q),h.fillRect(nt,r.top+r.topOffset+V,q,Ct),r.topOffset+=P}},getCurrentCharFontSize:function(){var r=this._getCurrentCharIndex();return this.getValueOfPropertyAt(r.l,r.c,"fontSize")},getCurrentCharColor:function(){var r=this._getCurrentCharIndex();return this.getValueOfPropertyAt(r.l,r.c,"fill")},_getCurrentCharIndex:function(){var r=this.get2DCursorLocation(this.selectionStart,!0),h=r.charIndex>0?r.charIndex-1:0;return{l:r.lineIndex,c:h}}}),f.IText.fromObject=function(r,h){if(d(r),r.styles)for(var u in r.styles)for(var t in r.styles[u])d(r.styles[u][t]);f.Object._fromObject("IText",r,h,"text")}}(),function(){var d=f.util.object.clone;f.util.object.extend(f.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var r=this;this.on("added",function(){var h=r.canvas;h&&(h._hasITextHandlers||(h._hasITextHandlers=!0,r._initCanvasHandlers(h)),h._iTextInstances=h._iTextInstances||[],h._iTextInstances.push(r))})},initRemovedHandler:function(){var r=this;this.on("removed",function(){var h=r.canvas;h&&(h._iTextInstances=h._iTextInstances||[],f.util.removeFromArray(h._iTextInstances,r),h._iTextInstances.length===0&&(h._hasITextHandlers=!1,r._removeCanvasHandlers(h)))})},_initCanvasHandlers:function(r){r._mouseUpITextHandler=function(){r._iTextInstances&&r._iTextInstances.forEach(function(h){h.__isMousedown=!1})},r.on("mouse:up",r._mouseUpITextHandler)},_removeCanvasHandlers:function(r){r.off("mouse:up",r._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(r,h,u,t){var a;return a={isAborted:!1,abort:function(){this.isAborted=!0}},r.animate("_currentCursorOpacity",h,{duration:u,onComplete:function(){a.isAborted||r[t]()},onChange:function(){r.canvas&&r.selectionStart===r.selectionEnd&&r.renderCursorOrSelection()},abort:function(){return a.isAborted}}),a},_onTickComplete:function(){var r=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){r._currentTickCompleteState=r._animateCursor(r,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(r){var h=this,u=r?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){h._tick()},u)},abortCursorAnimation:function(){var r=this._currentTickState||this._currentTickCompleteState,h=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,r&&h&&h.clearContext(h.contextTop||h.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(r){var h=0,u=r-1;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)h++,u--;for(;/\S/.test(this._text[u])&&u>-1;)h++,u--;return r-h},findWordBoundaryRight:function(r){var h=0,u=r;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)h++,u++;for(;/\S/.test(this._text[u])&&u<this._text.length;)h++,u++;return r+h},findLineBoundaryLeft:function(r){for(var h=0,u=r-1;!/\n/.test(this._text[u])&&u>-1;)h++,u--;return r-h},findLineBoundaryRight:function(r){for(var h=0,u=r;!/\n/.test(this._text[u])&&u<this._text.length;)h++,u++;return r+h},searchWordBoundary:function(r,h){for(var u=this._text,t=this._reSpace.test(u[r])?r-1:r,a=u[t],n=f.reNonWord;!n.test(a)&&t>0&&t<u.length;)t+=h,a=u[t];return n.test(a)&&(t+=h===1?0:1),t},selectWord:function(r){r=r||this.selectionStart;var h=this.searchWordBoundary(r,-1),u=this.searchWordBoundary(r,1);this.selectionStart=h,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(r){r=r||this.selectionStart;var h=this.findLineBoundaryLeft(r),u=this.findLineBoundaryRight(r);return this.selectionStart=h,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(r){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(r),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(r){r._iTextInstances&&r._iTextInstances.forEach(function(h){h.selected=!1,h.isEditing&&h.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(r){if(!(!this.__isMousedown||!this.isEditing)){var h=this.getSelectionStartFromPointer(r.e),u=this.selectionStart,t=this.selectionEnd;(h!==this.__selectionStartOnMouseDown||u===t)&&(u===h||t===h)||(h>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=h):(this.selectionStart=h,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==u||this.selectionEnd!==t)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(r,h,u){var t=u.slice(0,r),a=f.util.string.graphemeSplit(t).length;if(r===h)return{selectionStart:a,selectionEnd:a};var n=u.slice(r,h),s=f.util.string.graphemeSplit(n).length;return{selectionStart:a,selectionEnd:a+s}},fromGraphemeToStringSelection:function(r,h,u){var t=u.slice(0,r),a=t.join("").length;if(r===h)return{selectionStart:a,selectionEnd:a};var n=u.slice(r,h),s=n.join("").length;return{selectionStart:a,selectionEnd:a+s}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var r=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=r.selectionStart,this.hiddenTextarea.selectionEnd=r.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(!!this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var r=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=r.selectionEnd,this.inCompositionMode||(this.selectionStart=r.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var r=this._calcTextareaPosition();this.hiddenTextarea.style.left=r.left,this.hiddenTextarea.style.top=r.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var r=this.inCompositionMode?this.compositionStart:this.selectionStart,h=this._getCursorBoundaries(r),u=this.get2DCursorLocation(r),t=u.lineIndex,a=u.charIndex,n=this.getValueOfPropertyAt(t,a,"fontSize")*this.lineHeight,s=h.leftOffset,m=this.calcTransformMatrix(),o={x:h.left+s,y:h.top+h.topOffset+n},p=this.canvas.getRetinaScaling(),y=this.canvas.upperCanvasEl,I=y.width/p,b=y.height/p,T=I-n,P=b-n,z=y.clientWidth/I,j=y.clientHeight/b;return o=f.util.transformPoint(o,m),o=f.util.transformPoint(o,this.canvas.viewportTransform),o.x*=z,o.y*=j,o.x<0&&(o.x=0),o.x>T&&(o.x=T),o.y<0&&(o.y=0),o.y>P&&(o.y=P),o.x+=this.canvas._offset.left,o.y+=this.canvas._offset.top,{left:o.x+"px",top:o.y+"px",fontSize:n+"px",charHeight:n}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){!this._savedProps||(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var r=this._textBeforeEdit!==this.text,h=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,h&&(h.blur&&h.blur(),h.parentNode&&h.parentNode.removeChild(h)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),r&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),r&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var r in this.styles)this._textLines[r]||delete this.styles[r]},removeStyleFromTo:function(r,h){var u=this.get2DCursorLocation(r,!0),t=this.get2DCursorLocation(h,!0),a=u.lineIndex,n=u.charIndex,s=t.lineIndex,m=t.charIndex,o,p;if(a!==s){if(this.styles[a])for(o=n;o<this._unwrappedTextLines[a].length;o++)delete this.styles[a][o];if(this.styles[s])for(o=m;o<this._unwrappedTextLines[s].length;o++)p=this.styles[s][o],p&&(this.styles[a]||(this.styles[a]={}),this.styles[a][n+o-m]=p);for(o=a+1;o<=s;o++)delete this.styles[o];this.shiftLineStyles(s,a-s)}else if(this.styles[a]){p=this.styles[a];var y=m-n,I,b;for(o=n;o<m;o++)delete p[o];for(b in this.styles[a])I=parseInt(b,10),I>=m&&(p[I-y]=p[b],delete p[b])}},shiftLineStyles:function(r,h){var u=d(this.styles);for(var t in this.styles){var a=parseInt(t,10);a>r&&(this.styles[a+h]=u[a],u[a-h]||delete this.styles[a])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(r,h,u,t){var a,n={},s=!1,m=this._unwrappedTextLines[r].length===h;u||(u=1),this.shiftLineStyles(r,u),this.styles[r]&&(a=this.styles[r][h===0?h:h-1]);for(var o in this.styles[r]){var p=parseInt(o,10);p>=h&&(s=!0,n[p-h]=this.styles[r][o],m&&h===0||delete this.styles[r][o])}var y=!1;for(s&&!m&&(this.styles[r+u]=n,y=!0),y&&u--;u>0;)t&&t[u-1]?this.styles[r+u]={0:d(t[u-1])}:a?this.styles[r+u]={0:d(a)}:delete this.styles[r+u],u--;this._forceClearCache=!0},insertCharStyleObject:function(r,h,u,t){this.styles||(this.styles={});var a=this.styles[r],n=a?d(a):{};u||(u=1);for(var s in n){var m=parseInt(s,10);m>=h&&(a[m+u]=n[m],n[m-u]||delete a[m])}if(this._forceClearCache=!0,t){for(;u--;)!Object.keys(t[u]).length||(this.styles[r]||(this.styles[r]={}),this.styles[r][h+u]=d(t[u]));return}if(!!a)for(var o=a[h?h-1:1];o&&u--;)this.styles[r][h+u]=d(o)},insertNewStyleBlock:function(r,h,u){for(var t=this.get2DCursorLocation(h,!0),a=[0],n=0,s=0;s<r.length;s++)r[s]===`
`?(n++,a[n]=0):a[n]++;a[0]>0&&(this.insertCharStyleObject(t.lineIndex,t.charIndex,a[0],u),u=u&&u.slice(a[0]+1)),n&&this.insertNewlineStyleObject(t.lineIndex,t.charIndex+a[0],n);for(var s=1;s<n;s++)a[s]>0?this.insertCharStyleObject(t.lineIndex+s,0,a[s],u):u&&(this.styles[t.lineIndex+s][0]=u[0]),u=u&&u.slice(a[s]+1);a[s]>0&&this.insertCharStyleObject(t.lineIndex+s,0,a[s],u)},setSelectionStartEndWithShift:function(r,h,u){u<=r?(h===r?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=r),this.selectionStart=u):u>r&&u<h?this._selectionDirection==="right"?this.selectionEnd=u:this.selectionStart=u:(h===r?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=h),this.selectionEnd=u)},setSelectionInBoundaries:function(){var r=this.text.length;this.selectionStart>r?this.selectionStart=r:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>r?this.selectionEnd=r:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),f.util.object.extend(f.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(d){if(!!this.canvas){this.__newClickTime=+new Date;var r=d.pointer;this.isTripleClick(r)&&(this.fire("tripleclick",d),this._stopEvent(d.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=r,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(d){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===d.x&&this.__lastPointer.y===d.y},_stopEvent:function(d){d.preventDefault&&d.preventDefault(),d.stopPropagation&&d.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(d){!this.isEditing||this.selectWord(this.getSelectionStartFromPointer(d.e))},tripleClickHandler:function(d){!this.isEditing||this.selectLine(this.getSelectionStartFromPointer(d.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(d){!this.canvas||!this.editable||d.e.button&&d.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(d.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(d){!this.canvas||!this.editable||d.e.button&&d.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(d){if(this.__isMousedown=!1,!(!this.editable||this.group||d.transform&&d.transform.actionPerformed||d.e.button&&d.e.button!==1)){if(this.canvas){var r=this.canvas._activeObject;if(r&&r!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(d.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(d){var r=this.getSelectionStartFromPointer(d),h=this.selectionStart,u=this.selectionEnd;d.shiftKey?this.setSelectionStartEndWithShift(h,u,r):(this.selectionStart=r,this.selectionEnd=r),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(d){for(var r=this.getLocalPointer(d),h=0,u=0,t=0,a=0,n=0,s,m,o=0,p=this._textLines.length;o<p&&t<=r.y;o++)t+=this.getHeightOfLine(o)*this.scaleY,n=o,o>0&&(a+=this._textLines[o-1].length+this.missingNewlineOffset(o-1));s=this._getLineLeftOffset(n),u=s*this.scaleX,m=this._textLines[n],this.direction==="rtl"&&(r.x=this.width*this.scaleX-r.x+u);for(var y=0,I=m.length;y<I&&(h=u,u+=this.__charBounds[n][y].kernedWidth*this.scaleX,u<=r.x);y++)a++;return this._getNewSelectionStartFromOffset(r,h,u,a,I)},_getNewSelectionStartFromOffset:function(d,r,h,u,t){var a=d.x-r,n=h-d.x,s=n>a||n<0?0:1,m=u+s;return this.flipX&&(m=t-m),m>this._text.length&&(m=this._text.length),m}}),f.util.object.extend(f.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=f.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var d=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+d.top+"; left: "+d.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uFF70top: "+d.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):f.document.body.appendChild(this.hiddenTextarea),f.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),f.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),f.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),f.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),f.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),f.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),f.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),f.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),f.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(f.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(d){if(!!this.isEditing){var r=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(d.keyCode in r)this[r[d.keyCode]](d);else if(d.keyCode in this.ctrlKeysMapDown&&(d.ctrlKey||d.metaKey))this[this.ctrlKeysMapDown[d.keyCode]](d);else return;d.stopImmediatePropagation(),d.preventDefault(),d.keyCode>=33&&d.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(d){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(d.keyCode in this.ctrlKeysMapUp&&(d.ctrlKey||d.metaKey))this[this.ctrlKeysMapUp[d.keyCode]](d);else return;d.stopImmediatePropagation(),d.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(d){var r=this.fromPaste;if(this.fromPaste=!1,d&&d.stopPropagation(),!!this.isEditing){var h=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,u=this._text.length,t=h.length,a,n,s=t-u,m=this.selectionStart,o=this.selectionEnd,p=m!==o,y,I,b;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var T=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),P=m>T.selectionStart;p?(a=this._text.slice(m,o),s+=o-m):t<u&&(P?a=this._text.slice(o+s,o):a=this._text.slice(m,m-s)),n=h.slice(T.selectionEnd-s,T.selectionEnd),a&&a.length&&(n.length&&(y=this.getSelectionStyles(m,m+1,!1),y=n.map(function(){return y[0]})),p?(I=m,b=o):P?(I=o-a.length,b=o):(I=o,b=o+a.length),this.removeStyleFromTo(I,b)),n.length&&(r&&n.join("")===f.copiedText&&!f.disableStyleCopyPaste&&(y=f.copiedTextStyle),this.insertNewStyleBlock(n,m,y)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(d){this.compositionStart=d.target.selectionStart,this.compositionEnd=d.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(f.copiedText=this.getSelectedText(),f.disableStyleCopyPaste?f.copiedTextStyle=null:f.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(d){return d&&d.clipboardData||f.window.clipboardData},_getWidthBeforeCursor:function(d,r){var h=this._getLineLeftOffset(d),u;return r>0&&(u=this.__charBounds[d][r-1],h+=u.left+u.width),h},getDownCursorOffset:function(d,r){var h=this._getSelectionForOffset(d,r),u=this.get2DCursorLocation(h),t=u.lineIndex;if(t===this._textLines.length-1||d.metaKey||d.keyCode===34)return this._text.length-h;var a=u.charIndex,n=this._getWidthBeforeCursor(t,a),s=this._getIndexOnLine(t+1,n),m=this._textLines[t].slice(a);return m.length+s+1+this.missingNewlineOffset(t)},_getSelectionForOffset:function(d,r){return d.shiftKey&&this.selectionStart!==this.selectionEnd&&r?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(d,r){var h=this._getSelectionForOffset(d,r),u=this.get2DCursorLocation(h),t=u.lineIndex;if(t===0||d.metaKey||d.keyCode===33)return-h;var a=u.charIndex,n=this._getWidthBeforeCursor(t,a),s=this._getIndexOnLine(t-1,n),m=this._textLines[t].slice(0,a),o=this.missingNewlineOffset(t-1);return-this._textLines[t-1].length+s-m.length+(1-o)},_getIndexOnLine:function(d,r){for(var h=this._textLines[d],u=this._getLineLeftOffset(d),t=u,a=0,n,s,m=0,o=h.length;m<o;m++)if(n=this.__charBounds[d][m].width,t+=n,t>r){s=!0;var p=t-n,y=t,I=Math.abs(p-r),b=Math.abs(y-r);a=b<I?m:m-1;break}return s||(a=h.length-1),a},moveCursorDown:function(d){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",d)},moveCursorUp:function(d){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",d)},_moveCursorUpOrDown:function(d,r){var h="get"+d+"CursorOffset",u=this[h](r,this._selectionDirection==="right");r.shiftKey?this.moveCursorWithShift(u):this.moveCursorWithoutShift(u),u!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(d){var r=this._selectionDirection==="left"?this.selectionStart+d:this.selectionEnd+d;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,r),d!==0},moveCursorWithoutShift:function(d){return d<0?(this.selectionStart+=d,this.selectionEnd=this.selectionStart):(this.selectionEnd+=d,this.selectionStart=this.selectionEnd),d!==0},moveCursorLeft:function(d){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",d)},_move:function(d,r,h){var u;if(d.altKey)u=this["findWordBoundary"+h](this[r]);else if(d.metaKey||d.keyCode===35||d.keyCode===36)u=this["findLineBoundary"+h](this[r]);else return this[r]+=h==="Left"?-1:1,!0;if(typeof u!==void 0&&this[r]!==u)return this[r]=u,!0},_moveLeft:function(d,r){return this._move(d,r,"Left")},_moveRight:function(d,r){return this._move(d,r,"Right")},moveCursorLeftWithoutShift:function(d){var r=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(r=this._moveLeft(d,"selectionStart")),this.selectionEnd=this.selectionStart,r},moveCursorLeftWithShift:function(d){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(d,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(d,"selectionStart")},moveCursorRight:function(d){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",d)},_moveCursorLeftOrRight:function(d,r){var h="moveCursor"+d+"With";this._currentCursorOpacity=1,r.shiftKey?h+="Shift":h+="outShift",this[h](r)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(d){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(d,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(d,"selectionEnd")},moveCursorRightWithoutShift:function(d){var r=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(r=this._moveRight(d,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,r},removeChars:function(d,r){typeof r>"u"&&(r=d+1),this.removeStyleFromTo(d,r),this._text.splice(d,r-d),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(d,r,h,u){typeof u>"u"&&(u=h),u>h&&this.removeStyleFromTo(h,u);var t=f.util.string.graphemeSplit(d);this.insertNewStyleBlock(t,h,r),this._text=[].concat(this._text.slice(0,h),t,this._text.slice(u)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var d=f.util.toFixed,r=/  +/g;f.util.object.extend(f.Text.prototype,{_toSVG:function(){var h=this._getSVGLeftTopOffsets(),u=this._getSVGTextAndBg(h.textTop,h.textLeft);return this._wrapSVGTextAndBg(u)},toSVG:function(h){return this._createBaseSVGMarkup(this._toSVG(),{reviver:h,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(h){var u=!0,t=this.getSvgTextDecoration(this);return[h.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",t?'text-decoration="'+t+'" ':"",'style="',this.getSvgStyles(u),'"',this.addPaintOrder()," >",h.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(h,u){var t=[],a=[],n=h,s;this._setSVGBg(a);for(var m=0,o=this._textLines.length;m<o;m++)s=this._getLineLeftOffset(m),(this.textBackgroundColor||this.styleHas("textBackgroundColor",m))&&this._setSVGTextLineBg(a,m,u+s,n),this._setSVGTextLineText(t,m,u+s,n),n+=this.getHeightOfLine(m);return{textSpans:t,textBgRects:a}},_createTextCharSpan:function(h,u,t,a){var n=h!==h.trim()||h.match(r),s=this.getSvgSpanStyles(u,n),m=s?'style="'+s+'"':"",o=u.deltaY,p="",y=f.Object.NUM_FRACTION_DIGITS;return o&&(p=' dy="'+d(o,y)+'" '),['<tspan x="',d(t,y),'" y="',d(a,y),'" ',p,m,">",f.util.string.escapeXml(h),"</tspan>"].join("")},_setSVGTextLineText:function(h,u,t,a){var n=this.getHeightOfLine(u),s=this.textAlign.indexOf("justify")!==-1,m,o,p="",y,I,b=0,T=this._textLines[u],P;a+=n*(1-this._fontSizeFraction)/this.lineHeight;for(var z=0,j=T.length-1;z<=j;z++)P=z===j||this.charSpacing,p+=T[z],y=this.__charBounds[u][z],b===0?(t+=y.kernedWidth-y.width,b+=y.width):b+=y.kernedWidth,s&&!P&&this._reSpaceAndTab.test(T[z])&&(P=!0),P||(m=m||this.getCompleteStyleDeclaration(u,z),o=this.getCompleteStyleDeclaration(u,z+1),P=this._hasStyleChangedForSvg(m,o)),P&&(I=this._getStyleDeclaration(u,z)||{},h.push(this._createTextCharSpan(p,I,t,a)),p="",m=o,t+=b,b=0)},_pushTextBgRect:function(h,u,t,a,n,s){var m=f.Object.NUM_FRACTION_DIGITS;h.push("		<rect ",this._getFillAttributes(u),' x="',d(t,m),'" y="',d(a,m),'" width="',d(n,m),'" height="',d(s,m),`"></rect>
`)},_setSVGTextLineBg:function(h,u,t,a){for(var n=this._textLines[u],s=this.getHeightOfLine(u)/this.lineHeight,m=0,o=0,p,y,I=this.getValueOfPropertyAt(u,0,"textBackgroundColor"),b=0,T=n.length;b<T;b++)p=this.__charBounds[u][b],y=this.getValueOfPropertyAt(u,b,"textBackgroundColor"),y!==I?(I&&this._pushTextBgRect(h,I,t+o,a,m,s),o=p.left,m=p.width,I=y):m+=p.kernedWidth;y&&this._pushTextBgRect(h,y,t+o,a,m,s)},_getFillAttributes:function(h){var u=h&&typeof h=="string"?new f.Color(h):"";return!u||!u.getSource()||u.getAlpha()===1?'fill="'+h+'"':'opacity="'+u.getAlpha()+'" fill="'+u.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(h){for(var u=0,t=0,a=0;a<h;a++)u+=this.getHeightOfLine(a);return t=this.getHeightOfLine(a),{lineTop:u,offset:(this._fontSizeMult-this._fontSizeFraction)*t/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(h){var u=f.Object.prototype.getSvgStyles.call(this,h);return u+" white-space: pre;"}})}(),function(d){var r=d.fabric||(d.fabric={});r.Textbox=r.util.createClass(r.IText,r.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:r.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(h){for(var u=0,t=0,a=0,n={},s=0;s<h.graphemeLines.length;s++)h.graphemeText[a]===`
`&&s>0?(t=0,a++,u++):!this.splitByGrapheme&&this._reSpaceAndTab.test(h.graphemeText[a])&&s>0&&(t++,a++),n[s]={line:u,offset:t},a+=h.graphemeLines[s].length,t+=h.graphemeLines[s].length;return n},styleHas:function(h,u){if(this._styleMap&&!this.isWrapping){var t=this._styleMap[u];t&&(u=t.line)}return r.Text.prototype.styleHas.call(this,h,u)},isEmptyStyles:function(h){if(!this.styles)return!0;var u=0,t=h+1,a,n,s=!1,m=this._styleMap[h],o=this._styleMap[h+1];m&&(h=m.line,u=m.offset),o&&(t=o.line,s=t===h,a=o.offset),n=typeof h>"u"?this.styles:{line:this.styles[h]};for(var p in n)for(var y in n[p])if(y>=u&&(!s||y<a))for(var I in n[p][y])return!1;return!0},_getStyleDeclaration:function(h,u){if(this._styleMap&&!this.isWrapping){var t=this._styleMap[h];if(!t)return null;h=t.line,u=t.offset+u}return this.callSuper("_getStyleDeclaration",h,u)},_setStyleDeclaration:function(h,u,t){var a=this._styleMap[h];h=a.line,u=a.offset+u,this.styles[h][u]=t},_deleteStyleDeclaration:function(h,u){var t=this._styleMap[h];h=t.line,u=t.offset+u,delete this.styles[h][u]},_getLineStyle:function(h){var u=this._styleMap[h];return!!this.styles[u.line]},_setLineStyle:function(h){var u=this._styleMap[h];this.styles[u.line]={}},_wrapText:function(h,u){var t=[],a;for(this.isWrapping=!0,a=0;a<h.length;a++)t=t.concat(this._wrapLine(h[a],a,u));return this.isWrapping=!1,t},_measureWord:function(h,u,t){var a=0,n,s=!0;t=t||0;for(var m=0,o=h.length;m<o;m++){var p=this._getGraphemeBox(h[m],u,m+t,n,s);a+=p.kernedWidth,n=h[m]}return a},_wrapLine:function(h,u,t,nt){var n=0,s=this.splitByGrapheme,m=[],o=[],p=s?r.util.string.graphemeSplit(h):h.split(this._wordJoiners),y="",I=0,b=s?"":" ",T=0,P=0,z=0,j=!0,H=this._getWidthOfCharSpacing(),nt=nt||0;p.length===0&&p.push([]),t-=nt;for(var q=0;q<p.length;q++)y=s?p[q]:r.util.string.graphemeSplit(p[q]),T=this._measureWord(y,u,I),I+=y.length,n+=P+T-H,n>t&&!j?(m.push(o),o=[],n=T,j=!0):n+=H,!j&&!s&&o.push(b),o=o.concat(y),P=s?0:this._measureWord([b],u,I),I++,j=!1,T>z&&(z=T);return q&&m.push(o),z+nt>this.dynamicMinWidth&&(this.dynamicMinWidth=z-H+nt),m},isEndOfWrapping:function(h){return!this._styleMap[h+1]||this._styleMap[h+1].line!==this._styleMap[h].line},missingNewlineOffset:function(h){return this.splitByGrapheme?this.isEndOfWrapping(h)?1:0:1},_splitTextIntoLines:function(h){for(var u=r.Text.prototype._splitTextIntoLines.call(this,h),t=this._wrapText(u.lines,this.width),a=new Array(t.length),n=0;n<t.length;n++)a[n]=t[n].join("");return u.lines=a,u.graphemeLines=t,u},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var h={};for(var u in this._styleMap)this._textLines[u]&&(h[this._styleMap[u].line]=1);for(var u in this.styles)h[u]||delete this.styles[u]},toObject:function(h){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(h))}}),r.Textbox.fromObject=function(h,u){return r.Object._fromObject("Textbox",h,u,"text")}}(D),function(){var d=f.controlsUtils,r=d.scaleSkewCursorStyleHandler,h=d.scaleCursorStyleHandler,u=d.scalingEqually,t=d.scalingYOrSkewingX,a=d.scalingXOrSkewingY,n=d.scaleOrSkewActionName,s=f.Object.prototype.controls;if(s.ml=new f.Control({x:-.5,y:0,cursorStyleHandler:r,actionHandler:a,getActionName:n}),s.mr=new f.Control({x:.5,y:0,cursorStyleHandler:r,actionHandler:a,getActionName:n}),s.mb=new f.Control({x:0,y:.5,cursorStyleHandler:r,actionHandler:t,getActionName:n}),s.mt=new f.Control({x:0,y:-.5,cursorStyleHandler:r,actionHandler:t,getActionName:n}),s.tl=new f.Control({x:-.5,y:-.5,cursorStyleHandler:h,actionHandler:u}),s.tr=new f.Control({x:.5,y:-.5,cursorStyleHandler:h,actionHandler:u}),s.bl=new f.Control({x:-.5,y:.5,cursorStyleHandler:h,actionHandler:u}),s.br=new f.Control({x:.5,y:.5,cursorStyleHandler:h,actionHandler:u}),s.mtr=new f.Control({x:0,y:-.5,actionHandler:d.rotationWithSnapping,cursorStyleHandler:d.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),f.Textbox){var m=f.Textbox.prototype.controls={};m.mtr=s.mtr,m.tr=s.tr,m.br=s.br,m.tl=s.tl,m.bl=s.bl,m.mt=s.mt,m.mb=s.mb,m.mr=new f.Control({x:.5,y:0,actionHandler:d.changeWidth,cursorStyleHandler:r,actionName:"resizing"}),m.ml=new f.Control({x:-.5,y:0,actionHandler:d.changeWidth,cursorStyleHandler:r,actionName:"resizing"})}}()},3053:function(S,D,v){var f=v(602);function A(O,L,w){var k,d;if(w=w||0,!f(L))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(L,O,w);for(d=L.length,k=w;w>=0&&k<d;k+=1)if(L[k]===O)return k;return-1}S.exports=A},8592:function(S,D,v){var f=v(602),A=v(6092),O=v(5573);function L(w,k,d){f(w)?A(w,k,d):O(w,k,d)}S.exports=L},6092:function(S){function D(v,f,A){var O=0,L=v.length;for(A=A||null;O<L&&f.call(A,v[O],O,v)!==!1;O+=1);}S.exports=D},5573:function(S){function D(v,f,A){var O;A=A||null;for(O in v)if(v.hasOwnProperty(O)&&f.call(A,v[O],O,v)===!1)break}S.exports=D},9052:function(S,D,v){var f=v(961),A=v(9886),O=v(2560),L=v(5393),w=v(602),k=v(5183),d=v(8592),r=/\s+/g;function h(){this.events=null,this.contexts=null}h.mixin=function(u){f(u.prototype,h.prototype)},h.prototype._getHandlerItem=function(u,t){var a={handler:u};return t&&(a.context=t),a},h.prototype._safeEvent=function(u){var t=this.events,a;return t||(t=this.events={}),u&&(a=t[u],a||(a=[],t[u]=a),t=a),t},h.prototype._safeContext=function(){var u=this.contexts;return u||(u=this.contexts=[]),u},h.prototype._indexOfContext=function(u){for(var t=this._safeContext(),a=0;t[a];){if(u===t[a][0])return a;a+=1}return-1},h.prototype._memorizeContext=function(u){var t,a;!A(u)||(t=this._safeContext(),a=this._indexOfContext(u),a>-1?t[a][1]+=1:t.push([u,1]))},h.prototype._forgetContext=function(u){var t,a;!A(u)||(t=this._safeContext(),a=this._indexOfContext(u),a>-1&&(t[a][1]-=1,t[a][1]<=0&&t.splice(a,1)))},h.prototype._bindEvent=function(u,t,a){var n=this._safeEvent(u);this._memorizeContext(a),n.push(this._getHandlerItem(t,a))},h.prototype.on=function(u,t,a){var n=this;O(u)?(u=u.split(r),d(u,function(s){n._bindEvent(s,t,a)})):L(u)&&(a=t,d(u,function(s,m){n.on(m,s,a)}))},h.prototype.once=function(u,t,a){var n=this;if(L(u)){a=t,d(u,function(m,o){n.once(o,m,a)});return}function s(){t.apply(a,arguments),n.off(u,s,a)}this.on(u,s,a)},h.prototype._spliceMatches=function(u,t){var a=0,n;if(!!w(u))for(n=u.length;a<n;a+=1)t(u[a])===!0&&(u.splice(a,1),n-=1,a-=1)},h.prototype._matchHandler=function(u){var t=this;return function(a){var n=u===a.handler;return n&&t._forgetContext(a.context),n}},h.prototype._matchContext=function(u){var t=this;return function(a){var n=u===a.context;return n&&t._forgetContext(a.context),n}},h.prototype._matchHandlerAndContext=function(u,t){var a=this;return function(n){var s=u===n.handler,m=t===n.context,o=s&&m;return o&&a._forgetContext(n.context),o}},h.prototype._offByEventName=function(u,t){var a=this,n=k(t),s=a._matchHandler(t);u=u.split(r),d(u,function(m){var o=a._safeEvent(m);n?a._spliceMatches(o,s):(d(o,function(p){a._forgetContext(p.context)}),a.events[m]=[])})},h.prototype._offByHandler=function(u){var t=this,a=this._matchHandler(u);d(this._safeEvent(),function(n){t._spliceMatches(n,a)})},h.prototype._offByObject=function(u,t){var a=this,n;this._indexOfContext(u)<0?d(u,function(s,m){a.off(m,s)}):O(t)?(n=this._matchContext(u),a._spliceMatches(this._safeEvent(t),n)):k(t)?(n=this._matchHandlerAndContext(t,u),d(this._safeEvent(),function(s){a._spliceMatches(s,n)})):(n=this._matchContext(u),d(this._safeEvent(),function(s){a._spliceMatches(s,n)}))},h.prototype.off=function(u,t){O(u)?this._offByEventName(u,t):arguments.length?k(u)?this._offByHandler(u):L(u)&&this._offByObject(u,t):(this.events={},this.contexts=[])},h.prototype.fire=function(u){this.invoke.apply(this,arguments)},h.prototype.invoke=function(u){var t,a,n,s;if(!this.hasListener(u))return!0;for(t=this._safeEvent(u),a=Array.prototype.slice.call(arguments,1),n=0;t[n];){if(s=t[n],s.handler.apply(s.context,a)===!1)return!1;n+=1}return!0},h.prototype.hasListener=function(u){return this.getListenerLength(u)>0},h.prototype.getListenerLength=function(u){var t=this._safeEvent(u);return t.length},S.exports=h},961:function(S){function D(v,f){var A=Object.prototype.hasOwnProperty,O,L,w,k;for(w=1,k=arguments.length;w<k;w+=1){O=arguments[w];for(L in O)A.call(O,L)&&(v[L]=O[L])}return v}S.exports=D},1610:function(S,D,v){var f=v(5695),A=v(3778);function O(L,w){for(var k=arguments,d=k[0],r=1,h=k.length;r<h;r+=1){if(f(d)||A(d))return;d=d[k[r]]}return d}S.exports=O},4564:function(S,D,v){var f=v(5573);function A(O,L){var w=document.createElement("img"),k="";return f(L,function(d,r){k+="&"+r+"="+d}),k=k.substring(1),w.src=O+"?"+k,w.style.display="none",document.body.appendChild(w),document.body.removeChild(w),w}S.exports=A},4729:function(S,D,v){var f=v(5695),A=v(4564),O=7*24*60*60*1e3;function L(k){var d=new Date().getTime();return d-k>O}function w(k,d){var r="https://www.google-analytics.com/collect",h=location.hostname,u="event",t="use",a="TOAST UI "+k+" for "+h+": Statistics",n=window.localStorage.getItem(a);!f(window.tui)&&window.tui.usageStatistics===!1||n&&!L(n)||(window.localStorage.setItem(a,new Date().getTime()),setTimeout(function(){(document.readyState==="interactive"||document.readyState==="complete")&&A(r,{v:1,t:u,tid:d,cid:h,dp:h,dh:k,el:k,ec:t})},1e3))}S.exports=w},602:function(S){function D(v){return v instanceof Array}S.exports=D},9886:function(S,D,v){var f=v(5695),A=v(3778);function O(L){return!f(L)&&!A(L)}S.exports=O},5183:function(S){function D(v){return v instanceof Function}S.exports=D},3778:function(S){function D(v){return v===null}S.exports=D},5393:function(S){function D(v){return v===Object(v)}S.exports=D},2560:function(S){function D(v){return typeof v=="string"||v instanceof String}S.exports=D},5695:function(S){function D(v){return v===void 0}S.exports=D},4426:function(S,D,v){S.exports=v(4486)},9406:function(S,D,v){S.exports=v(4877)},789:function(S,D,v){S.exports=v(7178)},381:function(S,D,v){S.exports=v(5603)},7636:function(S,D,v){S.exports=v(1206)},1899:function(S,D,v){S.exports=v(6174)},899:function(S,D,v){S.exports=v(57)},8005:function(S,D,v){S.exports=v(4741)},6562:function(S,D,v){S.exports=v(8368)},9131:function(S,D,v){S.exports=v(3739)},4383:function(S,D,v){S.exports=v(172)},6065:function(S,D,v){S.exports=v(4963)},1734:function(S,D,v){S.exports=v(7820)},2461:function(S,D,v){S.exports=v(5636)},5214:function(S,D,v){S.exports=v(5059)},6397:function(S,D,v){S.exports=v(3969)},8189:function(S,D,v){S.exports=v(6618)},9146:function(S,D,v){S.exports=v(5279)},4496:function(S,D,v){S.exports=v(9562)},3972:function(S,D,v){S.exports=v(652)},7172:function(S,D,v){S.exports=v(2813)},1845:function(S,D,v){S.exports=v(8664)},662:function(S,D,v){S.exports=v(1457)},711:function(S,D,v){S.exports=v(2937)},6623:function(S,D,v){S.exports=v(9297)},7077:function(S,D,v){S.exports=v(8026)},9856:function(S,D,v){S.exports=v(2044)},4230:function(S,D,v){S.exports=v(2214)},184:function(S,D,v){S.exports=v(9256)},3742:function(S,D,v){S.exports=v(5659)},1801:function(S){var D={rect:1,circle:2,triangle:1},v={rect:{w:"width",h:"height"},circle:{w:"rx",h:"ry"},triangle:{w:"width",h:"height"}};function f(r){var h=r.originX,u=r.originY,t=h.substring(0,1)+u.substring(0,1);r.startPoint=r.origins[t]}function A(r,h,u){var t=r.x,a=r.y,n=h.x,s=h.y,m=u*Math.PI/180,o=(n-t)*Math.cos(m)-(s-a)*Math.sin(m)+t,p=(n-t)*Math.sin(m)+(s-a)*Math.cos(m)+a;return{originX:t>o?"right":"left",originY:a>p?"bottom":"top"}}function O(r){return r.originX==="center"&&r.originY==="center"}function L(r,h){var u=h.getPointByOrigin("center","center"),t=-h.angle,a=A(u,r,t),n=a.originX,s=a.originY,m=h.getPointByOrigin(n,s),o=h.left-(u.x-m.x),p=h.top-(u.y-m.y);h.set({originX:n,originY:s,left:o,top:p}),h.setCoords()}function w(r,h){var u=h.startPoint,t=-h.angle,a=A(u,r,t),n=a.originX,s=a.originY;h.setPositionByOrigin(u,n,s),h.setCoords()}function k(r){var h=r.type,u=r.scaleX,t=r.scaleY,a=v[h],n=r[a.w]*u,s=r[a.h]*t;if(r.isRegular){var m=Math.max(u,t);n=r[a.w]*m,s=r[a.h]*m}var o={hasControls:!1,hasBorders:!1,scaleX:1,scaleY:1};o[a.w]=n,o[a.h]=s,r.set(o)}function d(r,h){var u=h.type,t=h.strokeWidth,a=h.startPoint,n=D[u],s=v[u],m=h.type==="triangle",o={},p=Math.abs(a.x-r.x)/n,y=Math.abs(a.y-r.y)/n;p>t&&(p-=t/n),y>t&&(y-=t/n),h.isRegular&&(p=y=Math.max(p,y),m&&(y=Math.sqrt(3)/2*p)),o[s.w]=p,o[s.h]=y,h.set(o)}S.exports={setOrigins:function(h){var u=h.getPointByOrigin("left","top"),t=h.getPointByOrigin("right","top"),a=h.getPointByOrigin("right","bottom"),n=h.getPointByOrigin("left","bottom");h.origins={lt:u,rt:t,rb:a,lb:n}},resize:function(h,u,t){O(h)&&(L(u,h),f(h)),t?k(h):d(u,h),w(u,h)},adjustOriginToCenter:function(h){var u=h.getPointByOrigin("center","center"),t=h.originX,a=h.originY,n=h.getPointByOrigin(t,a),s=h.left+(u.x-n.x),m=h.top+(u.y-n.y);h.set({hasControls:!0,hasBorders:!0,originX:"center",originY:"center",left:s,top:m}),h.setCoords()}}},2221:function(S,D,v){v(5454),v(9173);var f=v(7545);S.exports=f.Array.from},5078:function(S,D,v){v(8118);var f=v(7545);S.exports=f.Array.isArray},6135:function(S,D,v){v(9106);var f=v(5607);S.exports=f("Array").concat},9510:function(S,D,v){v(1710);var f=v(5607);S.exports=f("Array").fill},3971:function(S,D,v){v(3436);var f=v(5607);S.exports=f("Array").filter},98:function(S,D,v){v(9823);var f=v(5607);S.exports=f("Array").forEach},2089:function(S,D,v){v(2276);var f=v(5607);S.exports=f("Array").indexOf},6209:function(S,D,v){v(3838);var f=v(5607);S.exports=f("Array").map},2671:function(S,D,v){v(5818);var f=v(5607);S.exports=f("Array").slice},1375:function(S,D,v){v(2178);var f=v(5607);S.exports=f("Array").splice},3528:function(S,D,v){v(665);var f=v(5607);S.exports=f("Function").bind},5739:function(S,D,v){v(8939),v(5454);var f=v(8703);S.exports=f},278:function(S,D,v){var f=v(3528),A=Function.prototype;S.exports=function(O){var L=O.bind;return O===A||O instanceof Function&&L===A.bind?f:L}},1484:function(S,D,v){var f=v(6135),A=Array.prototype;S.exports=function(O){var L=O.concat;return O===A||O instanceof Array&&L===A.concat?f:L}},7731:function(S,D,v){var f=v(9510),A=Array.prototype;S.exports=function(O){var L=O.fill;return O===A||O instanceof Array&&L===A.fill?f:L}},3669:function(S,D,v){var f=v(3971),A=Array.prototype;S.exports=function(O){var L=O.filter;return O===A||O instanceof Array&&L===A.filter?f:L}},2604:function(S,D,v){var f=v(2089),A=Array.prototype;S.exports=function(O){var L=O.indexOf;return O===A||O instanceof Array&&L===A.indexOf?f:L}},263:function(S,D,v){var f=v(6209),A=Array.prototype;S.exports=function(O){var L=O.map;return O===A||O instanceof Array&&L===A.map?f:L}},7663:function(S,D,v){var f=v(2671),A=Array.prototype;S.exports=function(O){var L=O.slice;return O===A||O instanceof Array&&L===A.slice?f:L}},5063:function(S,D,v){var f=v(1375),A=Array.prototype;S.exports=function(O){var L=O.splice;return O===A||O instanceof Array&&L===A.splice?f:L}},6813:function(S,D,v){var f=v(3842),A=String.prototype;S.exports=function(O){var L=O.trim;return typeof O=="string"||O===A||O instanceof String&&L===A.trim?f:L}},6285:function(S,D,v){v(2666);var f=v(7545);S.exports=f.Number.parseInt},3213:function(S,D,v){v(3113);var f=v(7545),A=f.Object;S.exports=function(L,w){return A.create(L,w)}},3512:function(S,D,v){v(297);var f=v(7545),A=f.Object,O=S.exports=function(w,k,d){return A.defineProperty(w,k,d)};A.defineProperty.sham&&(O.sham=!0)},8168:function(S,D,v){v(9234);var f=v(7545);S.exports=f.Object.getPrototypeOf},8651:function(S,D,v){v(2647);var f=v(7545);S.exports=f.Object.keys},3083:function(S,D,v){v(3222);var f=v(7545);S.exports=f.Object.setPrototypeOf},2987:function(S,D,v){v(4859);var f=v(7545);S.exports=f.parseFloat},2239:function(S,D,v){v(5706);var f=v(7545);S.exports=f.parseInt},3154:function(S,D,v){v(4242),v(8939),v(6663),v(9021),v(7884),v(8885),v(1868),v(5454);var f=v(7545);S.exports=f.Promise},6577:function(S,D,v){v(5397);var f=v(7545);S.exports=f.Reflect.construct},3842:function(S,D,v){v(957);var f=v(5607);S.exports=f("String").trim},5008:function(S,D,v){v(9106),v(6663),v(6187),v(9781),v(492),v(6681),v(9594),v(3665),v(9017),v(1250),v(9786),v(503),v(6565),v(9322),v(3610),v(6886),v(3514),v(8671),v(8556),v(1367);var f=v(7545);S.exports=f.Symbol},994:function(S,D,v){v(8939),v(6663),v(5454),v(3665);var f=v(9207);S.exports=f.f("iterator")},2813:function(S,D,v){var f=v(3822);S.exports=f},8664:function(S,D,v){var f=v(1434);S.exports=f},1457:function(S,D,v){var f=v(7710);S.exports=f},2937:function(S,D,v){var f=v(4741);S.exports=f},9297:function(S,D,v){var f=v(4963);S.exports=f},8026:function(S,D,v){var f=v(7820);S.exports=f},2044:function(S,D,v){var f=v(8980);S.exports=f},2214:function(S,D,v){var f=v(6672);S.exports=f},9256:function(S,D,v){var f=v(2285);v(177),v(9031),v(6658),v(1875),v(8658),v(4592),v(6680),S.exports=f},5659:function(S,D,v){var f=v(8535);S.exports=f},6235:function(S,D,v){var f=v(6447),A=v(9288);S.exports=function(O){if(f(O))return O;throw TypeError(A(O)+" is not a function")}},1404:function(S,D,v){var f=v(2091),A=v(9288);S.exports=function(O){if(f(O))return O;throw TypeError(A(O)+" is not a constructor")}},7757:function(S,D,v){var f=v(6447);S.exports=function(A){if(typeof A=="object"||f(A))return A;throw TypeError("Can't set "+String(A)+" as a prototype")}},7423:function(S){S.exports=function(){}},6961:function(S){S.exports=function(D,v,f){if(D instanceof v)return D;throw TypeError("Incorrect "+(f?f+" ":"")+"invocation")}},1138:function(S,D,v){var f=v(5744);S.exports=function(A){if(f(A))return A;throw TypeError(String(A)+" is not an object")}},2724:function(S,D,v){var f=v(1795),A=v(7739),O=v(4104);S.exports=function(w){for(var k=f(this),d=O(k),r=arguments.length,h=A(r>1?arguments[1]:void 0,d),u=r>2?arguments[2]:void 0,t=u===void 0?d:A(u,d);t>h;)k[h++]=w;return k}},7397:function(S,D,v){var f=v(454).forEach,A=v(424),O=A("forEach");S.exports=O?[].forEach:function(w){return f(this,w,arguments.length>1?arguments[1]:void 0)}},841:function(S,D,v){var f=v(8043),A=v(1795),O=v(1635),L=v(6109),w=v(2091),k=v(4104),d=v(9361),r=v(1669),h=v(8703);S.exports=function(t){var a=A(t),n=w(this),s=arguments.length,m=s>1?arguments[1]:void 0,o=m!==void 0;o&&(m=f(m,s>2?arguments[2]:void 0,2));var p=h(a),y=0,I,b,T,P,z,j;if(p&&!(this==Array&&L(p)))for(P=r(a,p),z=P.next,b=n?new this:[];!(T=z.call(P)).done;y++)j=o?O(P,m,[T.value,y],!0):T.value,d(b,y,j);else for(I=k(a),b=n?new this(I):Array(I);I>y;y++)j=o?m(a[y],y):a[y],d(b,y,j);return b.length=y,b}},8180:function(S,D,v){var f=v(101),A=v(7739),O=v(4104),L=function(w){return function(k,d,r){var h=f(k),u=O(h),t=A(r,u),a;if(w&&d!=d){for(;u>t;)if(a=h[t++],a!=a)return!0}else for(;u>t;t++)if((w||t in h)&&h[t]===d)return w||t||0;return!w&&-1}};S.exports={includes:L(!0),indexOf:L(!1)}},454:function(S,D,v){var f=v(8043),A=v(2202),O=v(1795),L=v(4104),w=v(1321),k=[].push,d=function(r){var h=r==1,u=r==2,t=r==3,a=r==4,n=r==6,s=r==7,m=r==5||n;return function(o,p,y,I){for(var b=O(o),T=A(b),P=f(p,y,3),z=L(T),j=0,H=I||w,nt=h?H(o,z):u||s?H(o,0):void 0,q,Ct;z>j;j++)if((m||j in T)&&(q=T[j],Ct=P(q,j,b),r))if(h)nt[j]=Ct;else if(Ct)switch(r){case 3:return!0;case 5:return q;case 6:return j;case 2:k.call(nt,q)}else switch(r){case 4:return!1;case 7:k.call(nt,q)}return n?-1:t||a?a:nt}};S.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6),filterReject:d(7)}},242:function(S,D,v){var f=v(6192),A=v(8182),O=v(4218),L=A("species");S.exports=function(w){return O>=51||!f(function(){var k=[],d=k.constructor={};return d[L]=function(){return{foo:1}},k[w](Boolean).foo!==1})}},424:function(S,D,v){var f=v(6192);S.exports=function(A,O){var L=[][A];return!!L&&f(function(){L.call(null,O||function(){throw 1},1)})}},3712:function(S,D,v){var f=v(4770),A=v(2091),O=v(5744),L=v(8182),w=L("species");S.exports=function(k){var d;return f(k)&&(d=k.constructor,A(d)&&(d===Array||f(d.prototype))?d=void 0:O(d)&&(d=d[w],d===null&&(d=void 0))),d===void 0?Array:d}},1321:function(S,D,v){var f=v(3712);S.exports=function(A,O){return new(f(A))(O===0?0:O)}},1635:function(S,D,v){var f=v(1138),A=v(6639);S.exports=function(O,L,w,k){try{return k?L(f(w)[0],w[1]):L(w)}catch(d){A(O,"throw",d)}}},9770:function(S,D,v){var f=v(8182),A=f("iterator"),O=!1;try{var L=0,w={next:function(){return{done:!!L++}},return:function(){O=!0}};w[A]=function(){return this},Array.from(w,function(){throw 2})}catch{}S.exports=function(k,d){if(!d&&!O)return!1;var r=!1;try{var h={};h[A]=function(){return{next:function(){return{done:r=!0}}}},k(h)}catch{}return r}},9272:function(S){var D={}.toString;S.exports=function(v){return D.call(v).slice(8,-1)}},4696:function(S,D,v){var f=v(3471),A=v(6447),O=v(9272),L=v(8182),w=L("toStringTag"),k=O(function(){return arguments}())=="Arguments",d=function(r,h){try{return r[h]}catch{}};S.exports=f?O:function(r){var h,u,t;return r===void 0?"Undefined":r===null?"Null":typeof(u=d(h=Object(r),w))=="string"?u:k?O(h):(t=O(h))=="Object"&&A(h.callee)?"Arguments":t}},4635:function(S,D,v){var f=v(6192);S.exports=!f(function(){function A(){}return A.prototype.constructor=null,Object.getPrototypeOf(new A)!==A.prototype})},5148:function(S,D,v){var f=v(4413).IteratorPrototype,A=v(2853),O=v(774),L=v(1284),w=v(7771),k=function(){return this};S.exports=function(d,r,h){var u=r+" Iterator";return d.prototype=A(f,{next:O(1,h)}),L(d,u,!1,!0),w[u]=k,d}},8711:function(S,D,v){var f=v(69),A=v(2760),O=v(774);S.exports=f?function(L,w,k){return A.f(L,w,O(1,k))}:function(L,w,k){return L[w]=k,L}},774:function(S){S.exports=function(D,v){return{enumerable:!(D&1),configurable:!(D&2),writable:!(D&4),value:v}}},9361:function(S,D,v){var f=v(77),A=v(2760),O=v(774);S.exports=function(L,w,k){var d=f(w);d in L?A.f(L,d,O(0,k)):L[d]=k}},7218:function(S,D,v){var f=v(3085),A=v(5546),O=v(2282),L=v(6447),w=v(5148),k=v(9341),d=v(4469),r=v(1284),h=v(8711),u=v(9482),t=v(8182),a=v(7771),n=v(4413),s=O.PROPER,m=O.CONFIGURABLE,o=n.IteratorPrototype,p=n.BUGGY_SAFARI_ITERATORS,y=t("iterator"),I="keys",b="values",T="entries",P=function(){return this};S.exports=function(z,j,H,nt,q,Ct,V){w(H,j,nt);var pt=function(B){if(B===q&&K)return K;if(!p&&B in yt)return yt[B];switch(B){case I:return function(){return new H(this,B)};case b:return function(){return new H(this,B)};case T:return function(){return new H(this,B)}}return function(){return new H(this)}},F=j+" Iterator",Rt=!1,yt=z.prototype,Ft=yt[y]||yt["@@iterator"]||q&&yt[q],K=!p&&Ft||pt(q),at=j=="Array"&&yt.entries||Ft,J,Y,lt;if(at&&(J=k(at.call(new z)),J!==Object.prototype&&J.next&&(!A&&k(J)!==o&&(d?d(J,o):L(J[y])||u(J,y,P)),r(J,F,!0,!0),A&&(a[F]=P))),s&&q==b&&Ft&&Ft.name!==b&&(!A&&m?h(yt,"name",b):(Rt=!0,K=function(){return Ft.call(this)})),q)if(Y={values:pt(b),keys:Ct?K:pt(I),entries:pt(T)},V)for(lt in Y)(p||Rt||!(lt in yt))&&u(yt,lt,Y[lt]);else f({target:j,proto:!0,forced:p||Rt},Y);return(!A||V)&&yt[y]!==K&&u(yt,y,K,{name:q}),a[j]=K,Y}},1488:function(S,D,v){var f=v(7545),A=v(4500),O=v(9207),L=v(2760).f;S.exports=function(w){var k=f.Symbol||(f.Symbol={});A(k,w)||L(k,w,{value:O.f(w)})}},69:function(S,D,v){var f=v(6192);S.exports=!f(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},7449:function(S,D,v){var f=v(8576),A=v(5744),O=f.document,L=A(O)&&A(O.createElement);S.exports=function(w){return L?O.createElement(w):{}}},7365:function(S){S.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},2957:function(S){S.exports=typeof window=="object"},9347:function(S,D,v){var f=v(8989),A=v(8576);S.exports=/ipad|iphone|ipod/i.test(f)&&A.Pebble!==void 0},9536:function(S,D,v){var f=v(8989);S.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(f)},224:function(S,D,v){var f=v(9272),A=v(8576);S.exports=f(A.process)=="process"},5914:function(S,D,v){var f=v(8989);S.exports=/web0s(?!.*chrome)/i.test(f)},8989:function(S,D,v){var f=v(150);S.exports=f("navigator","userAgent")||""},4218:function(S,D,v){var f=v(8576),A=v(8989),O=f.process,L=f.Deno,w=O&&O.versions||L&&L.version,k=w&&w.v8,d,r;k?(d=k.split("."),r=d[0]<4?1:d[0]+d[1]):A&&(d=A.match(/Edge\/(\d+)/),(!d||d[1]>=74)&&(d=A.match(/Chrome\/(\d+)/),d&&(r=d[1]))),S.exports=r&&+r},5607:function(S,D,v){var f=v(7545);S.exports=function(A){return f[A+"Prototype"]}},2952:function(S){S.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3085:function(S,D,v){var f=v(8576),A=v(6447),O=v(5141).f,L=v(9245),w=v(7545),k=v(8043),d=v(8711),r=v(4500),h=function(u){var t=function(a,n,s){if(this instanceof u){switch(arguments.length){case 0:return new u;case 1:return new u(a);case 2:return new u(a,n)}return new u(a,n,s)}return u.apply(this,arguments)};return t.prototype=u.prototype,t};S.exports=function(u,t){var a=u.target,n=u.global,s=u.stat,m=u.proto,o=n?f:s?f[a]:(f[a]||{}).prototype,p=n?w:w[a]||d(w,a,{})[a],y=p.prototype,I,b,T,P,z,j,H,nt,q;for(P in t)I=L(n?P:a+(s?".":"#")+P,u.forced),b=!I&&o&&r(o,P),j=p[P],b&&(u.noTargetGet?(q=O(o,P),H=q&&q.value):H=o[P]),z=b&&H?H:t[P],!(b&&typeof j==typeof z)&&(u.bind&&b?nt=k(z,f):u.wrap&&b?nt=h(z):m&&A(z)?nt=k(Function.call,z):nt=z,(u.sham||z&&z.sham||j&&j.sham)&&d(nt,"sham",!0),d(p,P,nt),m&&(T=a+"Prototype",r(w,T)||d(w,T,{}),d(w[T],P,z),u.real&&y&&!y[P]&&d(y,P,z)))}},6192:function(S){S.exports=function(D){try{return!!D()}catch{return!0}}},8043:function(S,D,v){var f=v(6235);S.exports=function(A,O,L){if(f(A),O===void 0)return A;switch(L){case 0:return function(){return A.call(O)};case 1:return function(w){return A.call(O,w)};case 2:return function(w,k){return A.call(O,w,k)};case 3:return function(w,k,d){return A.call(O,w,k,d)}}return function(){return A.apply(O,arguments)}}},6782:function(S,D,v){var f=v(6235),A=v(5744),O=[].slice,L={},w=function(k,d,r){if(!(d in L)){for(var h=[],u=0;u<d;u++)h[u]="a["+u+"]";L[d]=Function("C,a","return new C("+h.join(",")+")")}return L[d](k,r)};S.exports=Function.bind||function(d){var r=f(this),h=O.call(arguments,1),u=function(){var a=h.concat(O.call(arguments));return this instanceof u?w(r,a.length,a):r.apply(d,a)};return A(r.prototype)&&(u.prototype=r.prototype),u}},2282:function(S,D,v){var f=v(69),A=v(4500),O=Function.prototype,L=f&&Object.getOwnPropertyDescriptor,w=A(O,"name"),k=w&&function(){}.name==="something",d=w&&(!f||f&&L(O,"name").configurable);S.exports={EXISTS:w,PROPER:k,CONFIGURABLE:d}},150:function(S,D,v){var f=v(7545),A=v(8576),O=v(6447),L=function(w){return O(w)?w:void 0};S.exports=function(w,k){return arguments.length<2?L(f[w])||L(A[w]):f[w]&&f[w][k]||A[w]&&A[w][k]}},8703:function(S,D,v){var f=v(4696),A=v(5037),O=v(7771),L=v(8182),w=L("iterator");S.exports=function(k){if(k!=null)return A(k,w)||A(k,"@@iterator")||O[f(k)]}},1669:function(S,D,v){var f=v(6235),A=v(1138),O=v(8703);S.exports=function(L,w){var k=arguments.length<2?O(L):w;if(f(k))return A(k.call(L));throw TypeError(String(L)+" is not iterable")}},5037:function(S,D,v){var f=v(6235);S.exports=function(A,O){var L=A[O];return L==null?void 0:f(L)}},8576:function(S,D,v){var f=function(A){return A&&A.Math==Math&&A};S.exports=f(typeof globalThis=="object"&&globalThis)||f(typeof window=="object"&&window)||f(typeof self=="object"&&self)||f(typeof v.g=="object"&&v.g)||function(){return this}()||Function("return this")()},4500:function(S,D,v){var f=v(1795),A={}.hasOwnProperty;S.exports=Object.hasOwn||function(L,w){return A.call(f(L),w)}},4535:function(S){S.exports={}},3681:function(S,D,v){var f=v(8576);S.exports=function(A,O){var L=f.console;L&&L.error&&(arguments.length===1?L.error(A):L.error(A,O))}},7403:function(S,D,v){var f=v(150);S.exports=f("document","documentElement")},188:function(S,D,v){var f=v(69),A=v(6192),O=v(7449);S.exports=!f&&!A(function(){return Object.defineProperty(O("div"),"a",{get:function(){return 7}}).a!=7})},2202:function(S,D,v){var f=v(6192),A=v(9272),O="".split;S.exports=f(function(){return!Object("z").propertyIsEnumerable(0)})?function(L){return A(L)=="String"?O.call(L,""):Object(L)}:Object},9516:function(S,D,v){var f=v(6447),A=v(6434),O=Function.toString;f(A.inspectSource)||(A.inspectSource=function(L){return O.call(L)}),S.exports=A.inspectSource},273:function(S,D,v){var f=v(5744),A=v(8711);S.exports=function(O,L){f(L)&&"cause"in L&&A(O,"cause",O.cause)}},3326:function(S,D,v){var f=v(8921),A=v(8576),O=v(5744),L=v(8711),w=v(4500),k=v(6434),d=v(9766),r=v(4535),h="Object already initialized",u=A.WeakMap,t,a,n,s=function(T){return n(T)?a(T):t(T,{})},m=function(T){return function(P){var z;if(!O(P)||(z=a(P)).type!==T)throw TypeError("Incompatible receiver, "+T+" required");return z}};if(f||k.state){var o=k.state||(k.state=new u),p=o.get,y=o.has,I=o.set;t=function(T,P){if(y.call(o,T))throw new TypeError(h);return P.facade=T,I.call(o,T,P),P},a=function(T){return p.call(o,T)||{}},n=function(T){return y.call(o,T)}}else{var b=d("state");r[b]=!0,t=function(T,P){if(w(T,b))throw new TypeError(h);return P.facade=T,L(T,b,P),P},a=function(T){return w(T,b)?T[b]:{}},n=function(T){return w(T,b)}}S.exports={set:t,get:a,has:n,enforce:s,getterFor:m}},6109:function(S,D,v){var f=v(8182),A=v(7771),O=f("iterator"),L=Array.prototype;S.exports=function(w){return w!==void 0&&(A.Array===w||L[O]===w)}},4770:function(S,D,v){var f=v(9272);S.exports=Array.isArray||function(O){return f(O)=="Array"}},6447:function(S){S.exports=function(D){return typeof D=="function"}},2091:function(S,D,v){var f=v(6192),A=v(6447),O=v(4696),L=v(150),w=v(9516),k=[],d=L("Reflect","construct"),r=/^\s*(?:class|function)\b/,h=r.exec,u=!r.exec(function(){}),t=function(n){if(!A(n))return!1;try{return d(Object,k,n),!0}catch{return!1}},a=function(n){if(!A(n))return!1;switch(O(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return u||!!h.call(r,w(n))};S.exports=!d||f(function(){var n;return t(t.call)||!t(Object)||!t(function(){n=!0})||n})?a:t},9245:function(S,D,v){var f=v(6192),A=v(6447),O=/#|\.prototype\./,L=function(h,u){var t=k[w(h)];return t==r?!0:t==d?!1:A(u)?f(u):!!u},w=L.normalize=function(h){return String(h).replace(O,".").toLowerCase()},k=L.data={},d=L.NATIVE="N",r=L.POLYFILL="P";S.exports=L},5744:function(S,D,v){var f=v(6447);S.exports=function(A){return typeof A=="object"?A!==null:f(A)}},5546:function(S){S.exports=!0},3236:function(S,D,v){var f=v(6447),A=v(150),O=v(615);S.exports=O?function(L){return typeof L=="symbol"}:function(L){var w=A("Symbol");return f(w)&&Object(L)instanceof w}},3442:function(S,D,v){var f=v(1138),A=v(6109),O=v(4104),L=v(8043),w=v(1669),k=v(8703),d=v(6639),r=function(h,u){this.stopped=h,this.result=u};S.exports=function(h,u,t){var a=t&&t.that,n=!!(t&&t.AS_ENTRIES),s=!!(t&&t.IS_ITERATOR),m=!!(t&&t.INTERRUPTED),o=L(u,a,1+n+m),p,y,I,b,T,P,z,j=function(nt){return p&&d(p,"normal",nt),new r(!0,nt)},H=function(nt){return n?(f(nt),m?o(nt[0],nt[1],j):o(nt[0],nt[1])):m?o(nt,j):o(nt)};if(s)p=h;else{if(y=k(h),!y)throw TypeError(String(h)+" is not iterable");if(A(y)){for(I=0,b=O(h);b>I;I++)if(T=H(h[I]),T&&T instanceof r)return T;return new r(!1)}p=w(h,y)}for(P=p.next;!(z=P.call(p)).done;){try{T=H(z.value)}catch(nt){d(p,"throw",nt)}if(typeof T=="object"&&T&&T instanceof r)return T}return new r(!1)}},6639:function(S,D,v){var f=v(1138),A=v(5037);S.exports=function(O,L,w){var k,d;f(O);try{if(k=A(O,"return"),!k){if(L==="throw")throw w;return w}k=k.call(O)}catch(r){d=!0,k=r}if(L==="throw")throw w;if(d)throw k;return f(k),w}},4413:function(S,D,v){var f=v(6192),A=v(6447),O=v(2853),L=v(9341),w=v(9482),k=v(8182),d=v(5546),r=k("iterator"),h=!1,u,t,a;[].keys&&(a=[].keys(),"next"in a?(t=L(L(a)),t!==Object.prototype&&(u=t)):h=!0);var n=u==null||f(function(){var s={};return u[r].call(s)!==s});n?u={}:d&&(u=O(u)),A(u[r])||w(u,r,function(){return this}),S.exports={IteratorPrototype:u,BUGGY_SAFARI_ITERATORS:h}},7771:function(S){S.exports={}},4104:function(S,D,v){var f=v(8445);S.exports=function(A){return f(A.length)}},2950:function(S,D,v){var f=v(8576),A=v(5141).f,O=v(7160).set,L=v(9536),w=v(9347),k=v(5914),d=v(224),r=f.MutationObserver||f.WebKitMutationObserver,h=f.document,u=f.process,t=f.Promise,a=A(f,"queueMicrotask"),n=a&&a.value,s,m,o,p,y,I,b,T;n||(s=function(){var P,z;for(d&&(P=u.domain)&&P.exit();m;){z=m.fn,m=m.next;try{z()}catch(j){throw m?p():o=void 0,j}}o=void 0,P&&P.enter()},!L&&!d&&!k&&r&&h?(y=!0,I=h.createTextNode(""),new r(s).observe(I,{characterData:!0}),p=function(){I.data=y=!y}):!w&&t&&t.resolve?(b=t.resolve(void 0),b.constructor=t,T=b.then,p=function(){T.call(b,s)}):d?p=function(){u.nextTick(s)}:p=function(){O.call(f,s)}),S.exports=n||function(P){var z={fn:P,next:void 0};o&&(o.next=z),m||(m=z,p()),o=z}},4471:function(S,D,v){var f=v(8576);S.exports=f.Promise},3045:function(S,D,v){var f=v(4218),A=v(6192);S.exports=!!Object.getOwnPropertySymbols&&!A(function(){var O=Symbol();return!String(O)||!(Object(O)instanceof Symbol)||!Symbol.sham&&f&&f<41})},4551:function(S,D,v){var f=v(6192),A=v(8182),O=v(5546),L=A("iterator");S.exports=!f(function(){var w=new URL("b?a=1&b=2&c=3","http://a"),k=w.searchParams,d="";return w.pathname="c%20d",k.forEach(function(r,h){k.delete("b"),d+=h+r}),O&&!w.toJSON||!k.sort||w.href!=="http://a/c%20d?a=1&c=3"||k.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!k[L]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||d!=="a1c3"||new URL("http://x",void 0).host!=="x"})},8921:function(S,D,v){var f=v(8576),A=v(6447),O=v(9516),L=f.WeakMap;S.exports=A(L)&&/native code/.test(O(L))},9438:function(S,D,v){var f=v(6235),A=function(O){var L,w;this.promise=new O(function(k,d){if(L!==void 0||w!==void 0)throw TypeError("Bad Promise constructor");L=k,w=d}),this.resolve=f(L),this.reject=f(w)};S.exports.f=function(O){return new A(O)}},15:function(S,D,v){var f=v(8576),A=v(6192),O=v(4845),L=v(4277).trim,w=v(1450),k=f.parseFloat,d=f.Symbol,r=d&&d.iterator,h=1/k(w+"-0")!==-1/0||r&&!A(function(){k(Object(r))});S.exports=h?function(t){var a=L(O(t)),n=k(a);return n===0&&a.charAt(0)=="-"?-0:n}:k},2558:function(S,D,v){var f=v(8576),A=v(6192),O=v(4845),L=v(4277).trim,w=v(1450),k=f.parseInt,d=f.Symbol,r=d&&d.iterator,h=/^[+-]?0[Xx]/,u=k(w+"08")!==8||k(w+"0x16")!==22||r&&!A(function(){k(Object(r))});S.exports=u?function(a,n){var s=L(O(a));return k(s,n>>>0||(h.test(s)?16:10))}:k},2503:function(S,D,v){var f=v(69),A=v(6192),O=v(7653),L=v(4750),w=v(6007),k=v(1795),d=v(2202),r=Object.assign,h=Object.defineProperty;S.exports=!r||A(function(){if(f&&r({b:1},r(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var u={},t={},a=Symbol(),n="abcdefghijklmnopqrst";return u[a]=7,n.split("").forEach(function(s){t[s]=s}),r({},u)[a]!=7||O(r({},t)).join("")!=n})?function(t,a){for(var n=k(t),s=arguments.length,m=1,o=L.f,p=w.f;s>m;)for(var y=d(arguments[m++]),I=o?O(y).concat(o(y)):O(y),b=I.length,T=0,P;b>T;)P=I[T++],(!f||p.call(y,P))&&(n[P]=y[P]);return n}:r},2853:function(S,D,v){var f=v(1138),A=v(1187),O=v(2952),L=v(4535),w=v(7403),k=v(7449),d=v(9766),r=">",h="<",u="prototype",t="script",a=d("IE_PROTO"),n=function(){},s=function(I){return h+t+r+I+h+"/"+t+r},m=function(I){I.write(s("")),I.close();var b=I.parentWindow.Object;return I=null,b},o=function(){var I=k("iframe"),b="java"+t+":",T;return I.style.display="none",w.appendChild(I),I.src=String(b),T=I.contentWindow.document,T.open(),T.write(s("document.F=Object")),T.close(),T.F},p,y=function(){try{p=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&p?m(p):o():m(p);for(var I=O.length;I--;)delete y[u][O[I]];return y()};L[a]=!0,S.exports=Object.create||function(b,T){var P;return b!==null?(n[u]=f(b),P=new n,n[u]=null,P[a]=b):P=y(),T===void 0?P:A(P,T)}},1187:function(S,D,v){var f=v(69),A=v(2760),O=v(1138),L=v(7653);S.exports=f?Object.defineProperties:function(k,d){O(k);for(var r=L(d),h=r.length,u=0,t;h>u;)A.f(k,t=r[u++],d[t]);return k}},2760:function(S,D,v){var f=v(69),A=v(188),O=v(1138),L=v(77),w=Object.defineProperty;D.f=f?w:function(d,r,h){if(O(d),r=L(r),O(h),A)try{return w(d,r,h)}catch{}if("get"in h||"set"in h)throw TypeError("Accessors not supported");return"value"in h&&(d[r]=h.value),d}},5141:function(S,D,v){var f=v(69),A=v(6007),O=v(774),L=v(101),w=v(77),k=v(4500),d=v(188),r=Object.getOwnPropertyDescriptor;D.f=f?r:function(u,t){if(u=L(u),t=w(t),d)try{return r(u,t)}catch{}if(k(u,t))return O(!A.f.call(u,t),u[t])}},4052:function(S,D,v){var f=v(101),A=v(2092).f,O={}.toString,L=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],w=function(k){try{return A(k)}catch{return L.slice()}};S.exports.f=function(d){return L&&O.call(d)=="[object Window]"?w(d):A(f(d))}},2092:function(S,D,v){var f=v(7934),A=v(2952),O=A.concat("length","prototype");D.f=Object.getOwnPropertyNames||function(w){return f(w,O)}},4750:function(S,D){D.f=Object.getOwnPropertySymbols},9341:function(S,D,v){var f=v(4500),A=v(6447),O=v(1795),L=v(9766),w=v(4635),k=L("IE_PROTO"),d=Object.prototype;S.exports=w?Object.getPrototypeOf:function(r){var h=O(r);if(f(h,k))return h[k];var u=h.constructor;return A(u)&&h instanceof u?u.prototype:h instanceof Object?d:null}},7934:function(S,D,v){var f=v(4500),A=v(101),O=v(8180).indexOf,L=v(4535);S.exports=function(w,k){var d=A(w),r=0,h=[],u;for(u in d)!f(L,u)&&f(d,u)&&h.push(u);for(;k.length>r;)f(d,u=k[r++])&&(~O(h,u)||h.push(u));return h}},7653:function(S,D,v){var f=v(7934),A=v(2952);S.exports=Object.keys||function(L){return f(L,A)}},6007:function(S,D){var v={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,A=f&&!v.call({1:2},1);D.f=A?function(L){var w=f(this,L);return!!w&&w.enumerable}:v},4469:function(S,D,v){var f=v(1138),A=v(7757);S.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var O=!1,L={},w;try{w=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,w.call(L,[]),O=L instanceof Array}catch{}return function(d,r){return f(d),A(r),O?w.call(d,r):d.__proto__=r,d}}():void 0)},158:function(S,D,v){var f=v(3471),A=v(4696);S.exports=f?{}.toString:function(){return"[object "+A(this)+"]"}},380:function(S,D,v){var f=v(6447),A=v(5744);S.exports=function(O,L){var w,k;if(L==="string"&&f(w=O.toString)&&!A(k=w.call(O))||f(w=O.valueOf)&&!A(k=w.call(O))||L!=="string"&&f(w=O.toString)&&!A(k=w.call(O)))return k;throw TypeError("Can't convert object to primitive value")}},7545:function(S){S.exports={}},892:function(S){S.exports=function(D){try{return{error:!1,value:D()}}catch(v){return{error:!0,value:v}}}},9126:function(S,D,v){var f=v(1138),A=v(5744),O=v(9438);S.exports=function(L,w){if(f(L),A(w)&&w.constructor===L)return w;var k=O.f(L),d=k.resolve;return d(w),k.promise}},533:function(S,D,v){var f=v(9482);S.exports=function(A,O,L){for(var w in O)L&&L.unsafe&&A[w]?A[w]=O[w]:f(A,w,O[w],L);return A}},9482:function(S,D,v){var f=v(8711);S.exports=function(A,O,L,w){w&&w.enumerable?A[O]=L:f(A,O,L)}},3209:function(S){S.exports=function(D){if(D==null)throw TypeError("Can't call method on "+D);return D}},7613:function(S,D,v){var f=v(8576);S.exports=function(A,O){try{Object.defineProperty(f,A,{value:O,configurable:!0,writable:!0})}catch{f[A]=O}return O}},3656:function(S,D,v){var f=v(150),A=v(2760),O=v(8182),L=v(69),w=O("species");S.exports=function(k){var d=f(k),r=A.f;L&&d&&!d[w]&&r(d,w,{configurable:!0,get:function(){return this}})}},1284:function(S,D,v){var f=v(3471),A=v(2760).f,O=v(8711),L=v(4500),w=v(158),k=v(8182),d=k("toStringTag");S.exports=function(r,h,u,t){if(r){var a=u?r:r.prototype;L(a,d)||A(a,d,{configurable:!0,value:h}),t&&!f&&O(a,"toString",w)}}},9766:function(S,D,v){var f=v(8717),A=v(2759),O=f("keys");S.exports=function(L){return O[L]||(O[L]=A(L))}},6434:function(S,D,v){var f=v(8576),A=v(7613),O="__core-js_shared__",L=f[O]||A(O,{});S.exports=L},8717:function(S,D,v){var f=v(5546),A=v(6434);(S.exports=function(O,L){return A[O]||(A[O]=L!==void 0?L:{})})("versions",[]).push({version:"3.18.2",mode:f?"pure":"global",copyright:"\xA9 2021 Denis Pushkarev (zloirock.ru)"})},4743:function(S,D,v){var f=v(1138),A=v(1404),O=v(8182),L=O("species");S.exports=function(w,k){var d=f(w).constructor,r;return d===void 0||(r=f(d)[L])==null?k:A(r)}},863:function(S,D,v){var f=v(1941),A=v(4845),O=v(3209),L=function(w){return function(k,d){var r=A(O(k)),h=f(d),u=r.length,t,a;return h<0||h>=u?w?"":void 0:(t=r.charCodeAt(h),t<55296||t>56319||h+1===u||(a=r.charCodeAt(h+1))<56320||a>57343?w?r.charAt(h):t:w?r.slice(h,h+2):(t-55296<<10)+(a-56320)+65536)}};S.exports={codeAt:L(!1),charAt:L(!0)}},7977:function(S){var D=2147483647,v=36,f=1,A=26,O=38,L=700,w=72,k=128,d="-",r=/[^\0-\u007E]/,h=/[.\u3002\uFF0E\uFF61]/g,u="Overflow: input needs wider integers to process",t=v-f,a=Math.floor,n=String.fromCharCode,s=function(y){for(var I=[],b=0,T=y.length;b<T;){var P=y.charCodeAt(b++);if(P>=55296&&P<=56319&&b<T){var z=y.charCodeAt(b++);(z&64512)==56320?I.push(((P&1023)<<10)+(z&1023)+65536):(I.push(P),b--)}else I.push(P)}return I},m=function(y){return y+22+75*(y<26)},o=function(y,I,b){var T=0;for(y=b?a(y/L):y>>1,y+=a(y/I);y>t*A>>1;T+=v)y=a(y/t);return a(T+(t+1)*y/(y+O))},p=function(y){var I=[];y=s(y);var b=y.length,T=k,P=0,z=w,j,H;for(j=0;j<y.length;j++)H=y[j],H<128&&I.push(n(H));var nt=I.length,q=nt;for(nt&&I.push(d);q<b;){var Ct=D;for(j=0;j<y.length;j++)H=y[j],H>=T&&H<Ct&&(Ct=H);var V=q+1;if(Ct-T>a((D-P)/V))throw RangeError(u);for(P+=(Ct-T)*V,T=Ct,j=0;j<y.length;j++){if(H=y[j],H<T&&++P>D)throw RangeError(u);if(H==T){for(var pt=P,F=v;;F+=v){var Rt=F<=z?f:F>=z+A?A:F-z;if(pt<Rt)break;var yt=pt-Rt,Ft=v-Rt;I.push(n(m(Rt+yt%Ft))),pt=a(yt/Ft)}I.push(n(m(pt))),z=o(P,V,q==nt),P=0,++q}}++P,++T}return I.join("")};S.exports=function(y){var I=[],b=y.toLowerCase().replace(h,".").split("."),T,P;for(T=0;T<b.length;T++)P=b[T],I.push(r.test(P)?"xn--"+p(P):P);return I.join(".")}},6815:function(S,D,v){var f=v(2282).PROPER,A=v(6192),O=v(1450),L="\u200B\x85\u180E";S.exports=function(w){return A(function(){return!!O[w]()||L[w]()!==L||f&&O[w].name!==w})}},4277:function(S,D,v){var f=v(3209),A=v(4845),O=v(1450),L="["+O+"]",w=RegExp("^"+L+L+"*"),k=RegExp(L+L+"*$"),d=function(r){return function(h){var u=A(f(h));return r&1&&(u=u.replace(w,"")),r&2&&(u=u.replace(k,"")),u}};S.exports={start:d(1),end:d(2),trim:d(3)}},7160:function(S,D,v){var f=v(8576),A=v(6447),O=v(6192),L=v(8043),w=v(7403),k=v(7449),d=v(9536),r=v(224),h=f.setImmediate,u=f.clearImmediate,t=f.process,a=f.MessageChannel,n=f.Dispatch,s=0,m={},o="onreadystatechange",p,y,I,b;try{p=f.location}catch{}var T=function(H){if(m.hasOwnProperty(H)){var nt=m[H];delete m[H],nt()}},P=function(H){return function(){T(H)}},z=function(H){T(H.data)},j=function(H){f.postMessage(String(H),p.protocol+"//"+p.host)};(!h||!u)&&(h=function(nt){for(var q=[],Ct=arguments.length,V=1;Ct>V;)q.push(arguments[V++]);return m[++s]=function(){(A(nt)?nt:Function(nt)).apply(void 0,q)},y(s),s},u=function(nt){delete m[nt]},r?y=function(H){t.nextTick(P(H))}:n&&n.now?y=function(H){n.now(P(H))}:a&&!d?(I=new a,b=I.port2,I.port1.onmessage=z,y=L(b.postMessage,b,1)):f.addEventListener&&A(f.postMessage)&&!f.importScripts&&p&&p.protocol!=="file:"&&!O(j)?(y=j,f.addEventListener("message",z,!1)):o in k("script")?y=function(H){w.appendChild(k("script"))[o]=function(){w.removeChild(this),T(H)}}:y=function(H){setTimeout(P(H),0)}),S.exports={set:h,clear:u}},7739:function(S,D,v){var f=v(1941),A=Math.max,O=Math.min;S.exports=function(L,w){var k=f(L);return k<0?A(k+w,0):O(k,w)}},101:function(S,D,v){var f=v(2202),A=v(3209);S.exports=function(O){return f(A(O))}},1941:function(S){var D=Math.ceil,v=Math.floor;S.exports=function(f){var A=+f;return A!==A||A===0?0:(A>0?v:D)(A)}},8445:function(S,D,v){var f=v(1941),A=Math.min;S.exports=function(O){return O>0?A(f(O),9007199254740991):0}},1795:function(S,D,v){var f=v(3209);S.exports=function(A){return Object(f(A))}},7888:function(S,D,v){var f=v(5744),A=v(3236),O=v(5037),L=v(380),w=v(8182),k=w("toPrimitive");S.exports=function(d,r){if(!f(d)||A(d))return d;var h=O(d,k),u;if(h){if(r===void 0&&(r="default"),u=h.call(d,r),!f(u)||A(u))return u;throw TypeError("Can't convert object to primitive value")}return r===void 0&&(r="number"),L(d,r)}},77:function(S,D,v){var f=v(7888),A=v(3236);S.exports=function(O){var L=f(O,"string");return A(L)?L:String(L)}},3471:function(S,D,v){var f=v(8182),A=f("toStringTag"),O={};O[A]="z",S.exports=String(O)==="[object z]"},4845:function(S,D,v){var f=v(4696);S.exports=function(A){if(f(A)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return String(A)}},9288:function(S){S.exports=function(D){try{return String(D)}catch{return"Object"}}},2759:function(S){var D=0,v=Math.random();S.exports=function(f){return"Symbol("+String(f===void 0?"":f)+")_"+(++D+v).toString(36)}},615:function(S,D,v){var f=v(3045);S.exports=f&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},9207:function(S,D,v){var f=v(8182);D.f=f},8182:function(S,D,v){var f=v(8576),A=v(8717),O=v(4500),L=v(2759),w=v(3045),k=v(615),d=A("wks"),r=f.Symbol,h=k?r:r&&r.withoutSetter||L;S.exports=function(u){return(!O(d,u)||!(w||typeof d[u]=="string"))&&(w&&O(r,u)?d[u]=r[u]:d[u]=h("Symbol."+u)),d[u]}},1450:function(S){S.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},4242:function(S,D,v){var f=v(3085),A=v(9341),O=v(4469),L=v(2853),w=v(8711),k=v(774),d=v(273),r=v(3442),h=v(4845),u=function(a,n){var s=this,m=arguments.length>2?arguments[2]:void 0;if(!(s instanceof u))return new u(a,n,m);O&&(s=O(new Error(void 0),A(s))),n!==void 0&&w(s,"message",h(n)),d(s,m);var o=[];return r(a,o.push,{that:o}),w(s,"errors",o),s};u.prototype=L(Error.prototype,{constructor:k(5,u),message:k(5,""),name:k(5,"AggregateError")}),f({global:!0},{AggregateError:u})},9106:function(S,D,v){var f=v(3085),A=v(6192),O=v(4770),L=v(5744),w=v(1795),k=v(4104),d=v(9361),r=v(1321),h=v(242),u=v(8182),t=v(4218),a=u("isConcatSpreadable"),n=9007199254740991,s="Maximum allowed index exceeded",m=t>=51||!A(function(){var I=[];return I[a]=!1,I.concat()[0]!==I}),o=h("concat"),p=function(I){if(!L(I))return!1;var b=I[a];return b!==void 0?!!b:O(I)},y=!m||!o;f({target:"Array",proto:!0,forced:y},{concat:function(b){var T=w(this),P=r(T,0),z=0,j,H,nt,q,Ct;for(j=-1,nt=arguments.length;j<nt;j++)if(Ct=j===-1?T:arguments[j],p(Ct)){if(q=k(Ct),z+q>n)throw TypeError(s);for(H=0;H<q;H++,z++)H in Ct&&d(P,z,Ct[H])}else{if(z>=n)throw TypeError(s);d(P,z++,Ct)}return P.length=z,P}})},1710:function(S,D,v){var f=v(3085),A=v(2724),O=v(7423);f({target:"Array",proto:!0},{fill:A}),O("fill")},3436:function(S,D,v){var f=v(3085),A=v(454).filter,O=v(242),L=O("filter");f({target:"Array",proto:!0,forced:!L},{filter:function(k){return A(this,k,arguments.length>1?arguments[1]:void 0)}})},9823:function(S,D,v){var f=v(3085),A=v(7397);f({target:"Array",proto:!0,forced:[].forEach!=A},{forEach:A})},9173:function(S,D,v){var f=v(3085),A=v(841),O=v(9770),L=!O(function(w){Array.from(w)});f({target:"Array",stat:!0,forced:L},{from:A})},2276:function(S,D,v){var f=v(3085),A=v(8180).indexOf,O=v(424),L=[].indexOf,w=!!L&&1/[1].indexOf(1,-0)<0,k=O("indexOf");f({target:"Array",proto:!0,forced:w||!k},{indexOf:function(r){return w?L.apply(this,arguments)||0:A(this,r,arguments.length>1?arguments[1]:void 0)}})},8118:function(S,D,v){var f=v(3085),A=v(4770);f({target:"Array",stat:!0},{isArray:A})},8939:function(S,D,v){var f=v(101),A=v(7423),O=v(7771),L=v(3326),w=v(7218),k="Array Iterator",d=L.set,r=L.getterFor(k);S.exports=w(Array,"Array",function(h,u){d(this,{type:k,target:f(h),index:0,kind:u})},function(){var h=r(this),u=h.target,t=h.kind,a=h.index++;return!u||a>=u.length?(h.target=void 0,{value:void 0,done:!0}):t=="keys"?{value:a,done:!1}:t=="values"?{value:u[a],done:!1}:{value:[a,u[a]],done:!1}},"values"),O.Arguments=O.Array,A("keys"),A("values"),A("entries")},3838:function(S,D,v){var f=v(3085),A=v(454).map,O=v(242),L=O("map");f({target:"Array",proto:!0,forced:!L},{map:function(k){return A(this,k,arguments.length>1?arguments[1]:void 0)}})},5818:function(S,D,v){var f=v(3085),A=v(4770),O=v(2091),L=v(5744),w=v(7739),k=v(4104),d=v(101),r=v(9361),h=v(8182),u=v(242),t=u("slice"),a=h("species"),n=[].slice,s=Math.max;f({target:"Array",proto:!0,forced:!t},{slice:function(o,p){var y=d(this),I=k(y),b=w(o,I),T=w(p===void 0?I:p,I),P,z,j;if(A(y)&&(P=y.constructor,O(P)&&(P===Array||A(P.prototype))?P=void 0:L(P)&&(P=P[a],P===null&&(P=void 0)),P===Array||P===void 0))return n.call(y,b,T);for(z=new(P===void 0?Array:P)(s(T-b,0)),j=0;b<T;b++,j++)b in y&&r(z,j,y[b]);return z.length=j,z}})},2178:function(S,D,v){var f=v(3085),A=v(7739),O=v(1941),L=v(4104),w=v(1795),k=v(1321),d=v(9361),r=v(242),h=r("splice"),u=Math.max,t=Math.min,a=9007199254740991,n="Maximum allowed length exceeded";f({target:"Array",proto:!0,forced:!h},{splice:function(m,o){var p=w(this),y=L(p),I=A(m,y),b=arguments.length,T,P,z,j,H,nt;if(b===0?T=P=0:b===1?(T=0,P=y-I):(T=b-2,P=t(u(O(o),0),y-I)),y+T-P>a)throw TypeError(n);for(z=k(p,P),j=0;j<P;j++)H=I+j,H in p&&d(z,j,p[H]);if(z.length=P,T<P){for(j=I;j<y-P;j++)H=j+P,nt=j+T,H in p?p[nt]=p[H]:delete p[nt];for(j=y;j>y-P+T;j--)delete p[j-1]}else if(T>P)for(j=y-P;j>I;j--)H=j+P-1,nt=j+T-1,H in p?p[nt]=p[H]:delete p[nt];for(j=0;j<T;j++)p[j+I]=arguments[j+2];return p.length=y-P+T,z}})},665:function(S,D,v){var f=v(3085),A=v(6782);f({target:"Function",proto:!0},{bind:A})},8671:function(S,D,v){var f=v(8576),A=v(1284);A(f.JSON,"JSON",!0)},8556:function(){},2666:function(S,D,v){var f=v(3085),A=v(2558);f({target:"Number",stat:!0,forced:Number.parseInt!=A},{parseInt:A})},3113:function(S,D,v){var f=v(3085),A=v(69),O=v(2853);f({target:"Object",stat:!0,sham:!A},{create:O})},297:function(S,D,v){var f=v(3085),A=v(69),O=v(2760);f({target:"Object",stat:!0,forced:!A,sham:!A},{defineProperty:O.f})},9234:function(S,D,v){var f=v(3085),A=v(6192),O=v(1795),L=v(9341),w=v(4635),k=A(function(){L(1)});f({target:"Object",stat:!0,forced:k,sham:!w},{getPrototypeOf:function(r){return L(O(r))}})},2647:function(S,D,v){var f=v(3085),A=v(1795),O=v(7653),L=v(6192),w=L(function(){O(1)});f({target:"Object",stat:!0,forced:w},{keys:function(d){return O(A(d))}})},3222:function(S,D,v){var f=v(3085),A=v(4469);f({target:"Object",stat:!0},{setPrototypeOf:A})},6663:function(){},4859:function(S,D,v){var f=v(3085),A=v(15);f({global:!0,forced:parseFloat!=A},{parseFloat:A})},5706:function(S,D,v){var f=v(3085),A=v(2558);f({global:!0,forced:parseInt!=A},{parseInt:A})},7884:function(S,D,v){var f=v(3085),A=v(6235),O=v(9438),L=v(892),w=v(3442);f({target:"Promise",stat:!0},{allSettled:function(d){var r=this,h=O.f(r),u=h.resolve,t=h.reject,a=L(function(){var n=A(r.resolve),s=[],m=0,o=1;w(d,function(p){var y=m++,I=!1;s.push(void 0),o++,n.call(r,p).then(function(b){I||(I=!0,s[y]={status:"fulfilled",value:b},--o||u(s))},function(b){I||(I=!0,s[y]={status:"rejected",reason:b},--o||u(s))})}),--o||u(s)});return a.error&&t(a.value),h.promise}})},8885:function(S,D,v){var f=v(3085),A=v(6235),O=v(150),L=v(9438),w=v(892),k=v(3442),d="No one promise resolved";f({target:"Promise",stat:!0},{any:function(h){var u=this,t=L.f(u),a=t.resolve,n=t.reject,s=w(function(){var m=A(u.resolve),o=[],p=0,y=1,I=!1;k(h,function(b){var T=p++,P=!1;o.push(void 0),y++,m.call(u,b).then(function(z){P||I||(I=!0,a(z))},function(z){P||I||(P=!0,o[T]=z,--y||n(new(O("AggregateError"))(o,d)))})}),--y||n(new(O("AggregateError"))(o,d))});return s.error&&n(s.value),t.promise}})},1868:function(S,D,v){var f=v(3085),A=v(5546),O=v(4471),L=v(6192),w=v(150),k=v(6447),d=v(4743),r=v(9126),h=v(9482),u=!!O&&L(function(){O.prototype.finally.call({then:function(){}},function(){})});if(f({target:"Promise",proto:!0,real:!0,forced:u},{finally:function(a){var n=d(this,w("Promise")),s=k(a);return this.then(s?function(m){return r(n,a()).then(function(){return m})}:a,s?function(m){return r(n,a()).then(function(){throw m})}:a)}}),!A&&k(O)){var t=w("Promise").prototype.finally;O.prototype.finally!==t&&h(O.prototype,"finally",t,{unsafe:!0})}},9021:function(S,D,v){var f=v(3085),A=v(5546),O=v(8576),L=v(150),w=v(4471),k=v(9482),d=v(533),r=v(4469),h=v(1284),u=v(3656),t=v(6235),a=v(6447),n=v(5744),s=v(6961),m=v(9516),o=v(3442),p=v(9770),y=v(4743),I=v(7160).set,b=v(2950),T=v(9126),P=v(3681),z=v(9438),j=v(892),H=v(3326),nt=v(9245),q=v(8182),Ct=v(2957),V=v(224),pt=v(4218),F=q("species"),Rt="Promise",yt=H.get,Ft=H.set,K=H.getterFor(Rt),at=w&&w.prototype,J=w,Y=at,lt=O.TypeError,B=O.document,U=O.process,G=z.f,Z=G,gt=!!(B&&B.createEvent&&O.dispatchEvent),ht=a(O.PromiseRejectionEvent),St="unhandledrejection",bt="rejectionhandled",xt=0,rt=1,Q=2,tt=1,ot=2,ct=!1,vt,Ot,Ut,Bt,mt=nt(Rt,function(){var Tt=m(J),At=Tt!==String(J);if(!At&&pt===66||A&&!Y.finally)return!0;if(pt>=51&&/native code/.test(Tt))return!1;var jt=new J(function(Pt){Pt(1)}),Ht=function(Pt){Pt(function(){},function(){})},Xt=jt.constructor={};return Xt[F]=Ht,ct=jt.then(function(){})instanceof Ht,ct?!At&&Ct&&!ht:!0}),Yt=mt||!p(function(Tt){J.all(Tt).catch(function(){})}),Zt=function(Tt){var At;return n(Tt)&&a(At=Tt.then)?At:!1},te=function(Tt,At){if(!Tt.notified){Tt.notified=!0;var jt=Tt.reactions;b(function(){for(var Ht=Tt.value,Xt=Tt.state==rt,Pt=0;jt.length>Pt;){var Ce=jt[Pt++],Ie=Xt?Ce.ok:Ce.fail,Gt=Ce.resolve,Mt=Ce.reject,ge=Ce.domain,ie,oe,Ae;try{Ie?(Xt||(Tt.rejection===ot&&ee(Tt),Tt.rejection=tt),Ie===!0?ie=Ht:(ge&&ge.enter(),ie=Ie(Ht),ge&&(ge.exit(),Ae=!0)),ie===Ce.promise?Mt(lt("Promise-chain cycle")):(oe=Zt(ie))?oe.call(ie,Gt,Mt):Gt(ie)):Mt(Ht)}catch(Te){ge&&!Ae&&ge.exit(),Mt(Te)}}Tt.reactions=[],Tt.notified=!1,At&&!Tt.rejection&&ae(Tt)})}},ve=function(Tt,At,jt){var Ht,Xt;gt?(Ht=B.createEvent("Event"),Ht.promise=At,Ht.reason=jt,Ht.initEvent(Tt,!1,!0),O.dispatchEvent(Ht)):Ht={promise:At,reason:jt},!ht&&(Xt=O["on"+Tt])?Xt(Ht):Tt===St&&P("Unhandled promise rejection",jt)},ae=function(Tt){I.call(O,function(){var At=Tt.facade,jt=Tt.value,Ht=le(Tt),Xt;if(Ht&&(Xt=j(function(){V?U.emit("unhandledRejection",jt,At):ve(St,At,jt)}),Tt.rejection=V||le(Tt)?ot:tt,Xt.error))throw Xt.value})},le=function(Tt){return Tt.rejection!==tt&&!Tt.parent},ee=function(Tt){I.call(O,function(){var At=Tt.facade;V?U.emit("rejectionHandled",At):ve(bt,At,Tt.value)})},ce=function(Tt,At,jt){return function(Ht){Tt(At,Ht,jt)}},ye=function(Tt,At,jt){Tt.done||(Tt.done=!0,jt&&(Tt=jt),Tt.value=At,Tt.state=Q,te(Tt,!0))},be=function(Tt,At,jt){if(!Tt.done){Tt.done=!0,jt&&(Tt=jt);try{if(Tt.facade===At)throw lt("Promise can't be resolved itself");var Ht=Zt(At);Ht?b(function(){var Xt={done:!1};try{Ht.call(At,ce(be,Xt,Tt),ce(ye,Xt,Tt))}catch(Pt){ye(Xt,Pt,Tt)}}):(Tt.value=At,Tt.state=rt,te(Tt,!1))}catch(Xt){ye({done:!1},Xt,Tt)}}};if(mt&&(J=function(At){s(this,J,Rt),t(At),vt.call(this);var jt=yt(this);try{At(ce(be,jt),ce(ye,jt))}catch(Ht){ye(jt,Ht)}},Y=J.prototype,vt=function(At){Ft(this,{type:Rt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:xt,value:void 0})},vt.prototype=d(Y,{then:function(At,jt){var Ht=K(this),Xt=G(y(this,J));return Xt.ok=a(At)?At:!0,Xt.fail=a(jt)&&jt,Xt.domain=V?U.domain:void 0,Ht.parent=!0,Ht.reactions.push(Xt),Ht.state!=xt&&te(Ht,!1),Xt.promise},catch:function(Tt){return this.then(void 0,Tt)}}),Ot=function(){var Tt=new vt,At=yt(Tt);this.promise=Tt,this.resolve=ce(be,At),this.reject=ce(ye,At)},z.f=G=function(Tt){return Tt===J||Tt===Ut?new Ot(Tt):Z(Tt)},!A&&a(w)&&at!==Object.prototype)){Bt=at.then,ct||(k(at,"then",function(At,jt){var Ht=this;return new J(function(Xt,Pt){Bt.call(Ht,Xt,Pt)}).then(At,jt)},{unsafe:!0}),k(at,"catch",Y.catch,{unsafe:!0}));try{delete at.constructor}catch{}r&&r(at,Y)}f({global:!0,wrap:!0,forced:mt},{Promise:J}),h(J,Rt,!1,!0),u(Rt),Ut=L(Rt),f({target:Rt,stat:!0,forced:mt},{reject:function(At){var jt=G(this);return jt.reject.call(void 0,At),jt.promise}}),f({target:Rt,stat:!0,forced:A||mt},{resolve:function(At){return T(A&&this===Ut?J:this,At)}}),f({target:Rt,stat:!0,forced:Yt},{all:function(At){var jt=this,Ht=G(jt),Xt=Ht.resolve,Pt=Ht.reject,Ce=j(function(){var Ie=t(jt.resolve),Gt=[],Mt=0,ge=1;o(At,function(ie){var oe=Mt++,Ae=!1;Gt.push(void 0),ge++,Ie.call(jt,ie).then(function(Te){Ae||(Ae=!0,Gt[oe]=Te,--ge||Xt(Gt))},Pt)}),--ge||Xt(Gt)});return Ce.error&&Pt(Ce.value),Ht.promise},race:function(At){var jt=this,Ht=G(jt),Xt=Ht.reject,Pt=j(function(){var Ce=t(jt.resolve);o(At,function(Ie){Ce.call(jt,Ie).then(Ht.resolve,Xt)})});return Pt.error&&Xt(Pt.value),Ht.promise}})},5397:function(S,D,v){var f=v(3085),A=v(150),O=v(1404),L=v(1138),w=v(5744),k=v(2853),d=v(6782),r=v(6192),h=A("Reflect","construct"),u=r(function(){function n(){}return!(h(function(){},[],n)instanceof n)}),t=!r(function(){h(function(){})}),a=u||t;f({target:"Reflect",stat:!0,forced:a,sham:a},{construct:function(s,m){O(s),L(m);var o=arguments.length<3?s:O(arguments[2]);if(t&&!u)return h(s,m,o);if(s==o){switch(m.length){case 0:return new s;case 1:return new s(m[0]);case 2:return new s(m[0],m[1]);case 3:return new s(m[0],m[1],m[2]);case 4:return new s(m[0],m[1],m[2],m[3])}var p=[null];return p.push.apply(p,m),new(d.apply(s,p))}var y=o.prototype,I=k(w(y)?y:Object.prototype),b=Function.apply.call(s,I,m);return w(b)?b:I}})},1367:function(){},5454:function(S,D,v){var f=v(863).charAt,A=v(4845),O=v(3326),L=v(7218),w="String Iterator",k=O.set,d=O.getterFor(w);L(String,"String",function(r){k(this,{type:w,string:A(r),index:0})},function(){var h=d(this),u=h.string,t=h.index,a;return t>=u.length?{value:void 0,done:!0}:(a=f(u,t),h.index+=a.length,{value:a,done:!1})})},957:function(S,D,v){var f=v(3085),A=v(4277).trim,O=v(6815);f({target:"String",proto:!0,forced:O("trim")},{trim:function(){return A(this)}})},9781:function(S,D,v){var f=v(1488);f("asyncIterator")},492:function(){},6681:function(S,D,v){var f=v(1488);f("hasInstance")},9594:function(S,D,v){var f=v(1488);f("isConcatSpreadable")},3665:function(S,D,v){var f=v(1488);f("iterator")},6187:function(S,D,v){var f=v(3085),A=v(8576),O=v(150),L=v(5546),w=v(69),k=v(3045),d=v(6192),r=v(4500),h=v(4770),u=v(6447),t=v(5744),a=v(3236),n=v(1138),s=v(1795),m=v(101),o=v(77),p=v(4845),y=v(774),I=v(2853),b=v(7653),T=v(2092),P=v(4052),z=v(4750),j=v(5141),H=v(2760),nt=v(6007),q=v(9482),Ct=v(8717),V=v(9766),pt=v(4535),F=v(2759),Rt=v(8182),yt=v(9207),Ft=v(1488),K=v(1284),at=v(3326),J=v(454).forEach,Y=V("hidden"),lt="Symbol",B="prototype",U=Rt("toPrimitive"),G=at.set,Z=at.getterFor(lt),gt=Object[B],ht=A.Symbol,St=O("JSON","stringify"),bt=j.f,xt=H.f,rt=P.f,Q=nt.f,tt=Ct("symbols"),ot=Ct("op-symbols"),ct=Ct("string-to-symbol-registry"),vt=Ct("symbol-to-string-registry"),Ot=Ct("wks"),Ut=A.QObject,Bt=!Ut||!Ut[B]||!Ut[B].findChild,mt=w&&d(function(){return I(xt({},"a",{get:function(){return xt(this,"a",{value:7}).a}})).a!=7})?function(Tt,At,jt){var Ht=bt(gt,At);Ht&&delete gt[At],xt(Tt,At,jt),Ht&&Tt!==gt&&xt(gt,At,Ht)}:xt,Yt=function(Tt,At){var jt=tt[Tt]=I(ht[B]);return G(jt,{type:lt,tag:Tt,description:At}),w||(jt.description=At),jt},Zt=function(At,jt,Ht){At===gt&&Zt(ot,jt,Ht),n(At);var Xt=o(jt);return n(Ht),r(tt,Xt)?(Ht.enumerable?(r(At,Y)&&At[Y][Xt]&&(At[Y][Xt]=!1),Ht=I(Ht,{enumerable:y(0,!1)})):(r(At,Y)||xt(At,Y,y(1,{})),At[Y][Xt]=!0),mt(At,Xt,Ht)):xt(At,Xt,Ht)},te=function(At,jt){n(At);var Ht=m(jt),Xt=b(Ht).concat(ce(Ht));return J(Xt,function(Pt){(!w||ae.call(Ht,Pt))&&Zt(At,Pt,Ht[Pt])}),At},ve=function(At,jt){return jt===void 0?I(At):te(I(At),jt)},ae=function(At){var jt=o(At),Ht=Q.call(this,jt);return this===gt&&r(tt,jt)&&!r(ot,jt)?!1:Ht||!r(this,jt)||!r(tt,jt)||r(this,Y)&&this[Y][jt]?Ht:!0},le=function(At,jt){var Ht=m(At),Xt=o(jt);if(!(Ht===gt&&r(tt,Xt)&&!r(ot,Xt))){var Pt=bt(Ht,Xt);return Pt&&r(tt,Xt)&&!(r(Ht,Y)&&Ht[Y][Xt])&&(Pt.enumerable=!0),Pt}},ee=function(At){var jt=rt(m(At)),Ht=[];return J(jt,function(Xt){!r(tt,Xt)&&!r(pt,Xt)&&Ht.push(Xt)}),Ht},ce=function(At){var jt=At===gt,Ht=rt(jt?ot:m(At)),Xt=[];return J(Ht,function(Pt){r(tt,Pt)&&(!jt||r(gt,Pt))&&Xt.push(tt[Pt])}),Xt};if(k||(ht=function(){if(this instanceof ht)throw TypeError("Symbol is not a constructor");var At=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),jt=F(At),Ht=function(Xt){this===gt&&Ht.call(ot,Xt),r(this,Y)&&r(this[Y],jt)&&(this[Y][jt]=!1),mt(this,jt,y(1,Xt))};return w&&Bt&&mt(gt,jt,{configurable:!0,set:Ht}),Yt(jt,At)},q(ht[B],"toString",function(){return Z(this).tag}),q(ht,"withoutSetter",function(Tt){return Yt(F(Tt),Tt)}),nt.f=ae,H.f=Zt,j.f=le,T.f=P.f=ee,z.f=ce,yt.f=function(Tt){return Yt(Rt(Tt),Tt)},w&&(xt(ht[B],"description",{configurable:!0,get:function(){return Z(this).description}}),L||q(gt,"propertyIsEnumerable",ae,{unsafe:!0}))),f({global:!0,wrap:!0,forced:!k,sham:!k},{Symbol:ht}),J(b(Ot),function(Tt){Ft(Tt)}),f({target:lt,stat:!0,forced:!k},{for:function(Tt){var At=p(Tt);if(r(ct,At))return ct[At];var jt=ht(At);return ct[At]=jt,vt[jt]=At,jt},keyFor:function(At){if(!a(At))throw TypeError(At+" is not a symbol");if(r(vt,At))return vt[At]},useSetter:function(){Bt=!0},useSimple:function(){Bt=!1}}),f({target:"Object",stat:!0,forced:!k,sham:!w},{create:ve,defineProperty:Zt,defineProperties:te,getOwnPropertyDescriptor:le}),f({target:"Object",stat:!0,forced:!k},{getOwnPropertyNames:ee,getOwnPropertySymbols:ce}),f({target:"Object",stat:!0,forced:d(function(){z.f(1)})},{getOwnPropertySymbols:function(At){return z.f(s(At))}}),St){var ye=!k||d(function(){var Tt=ht();return St([Tt])!="[null]"||St({a:Tt})!="{}"||St(Object(Tt))!="{}"});f({target:"JSON",stat:!0,forced:ye},{stringify:function(At,jt,Ht){for(var Xt=[At],Pt=1,Ce;arguments.length>Pt;)Xt.push(arguments[Pt++]);if(Ce=jt,!(!t(jt)&&At===void 0||a(At)))return h(jt)||(jt=function(Ie,Gt){if(u(Ce)&&(Gt=Ce.call(this,Ie,Gt)),!a(Gt))return Gt}),Xt[1]=jt,St.apply(null,Xt)}})}if(!ht[B][U]){var be=ht[B].valueOf;q(ht[B],U,function(){return be.apply(this,arguments)})}K(ht,lt),pt[Y]=!0},1250:function(S,D,v){var f=v(1488);f("matchAll")},9017:function(S,D,v){var f=v(1488);f("match")},9786:function(S,D,v){var f=v(1488);f("replace")},503:function(S,D,v){var f=v(1488);f("search")},6565:function(S,D,v){var f=v(1488);f("species")},9322:function(S,D,v){var f=v(1488);f("split")},3610:function(S,D,v){var f=v(1488);f("toPrimitive")},6886:function(S,D,v){var f=v(1488);f("toStringTag")},3514:function(S,D,v){var f=v(1488);f("unscopables")},177:function(S,D,v){var f=v(1488);f("asyncDispose")},9031:function(S,D,v){var f=v(1488);f("dispose")},6658:function(S,D,v){var f=v(1488);f("matcher")},1875:function(S,D,v){var f=v(1488);f("metadata")},8658:function(S,D,v){var f=v(1488);f("observable")},4592:function(S,D,v){var f=v(1488);f("patternMatch")},6680:function(S,D,v){var f=v(1488);f("replaceAll")},162:function(S,D,v){v(8939);var f=v(7365),A=v(8576),O=v(4696),L=v(8711),w=v(7771),k=v(8182),d=k("toStringTag");for(var r in f){var h=A[r],u=h&&h.prototype;u&&O(u)!==d&&L(u,d,r),w[r]=w.Array}},2906:function(S,D,v){var f=v(3085),A=v(8576),O=v(6447),L=v(8989),w=[].slice,k=/MSIE .\./.test(L),d=function(r){return function(h,u){var t=arguments.length>2,a=t?w.call(arguments,2):void 0;return r(t?function(){(O(h)?h:Function(h)).apply(this,a)}:h,u)}};f({global:!0,bind:!0,forced:k},{setTimeout:d(A.setTimeout),setInterval:d(A.setInterval)})},9336:function(S,D,v){v(8939);var f=v(3085),A=v(150),O=v(4551),L=v(9482),w=v(533),k=v(1284),d=v(5148),r=v(3326),h=v(6961),u=v(6447),t=v(4500),a=v(8043),n=v(4696),s=v(1138),m=v(5744),o=v(4845),p=v(2853),y=v(774),I=v(1669),b=v(8703),T=v(8182),P=A("fetch"),z=A("Request"),j=z&&z.prototype,H=A("Headers"),nt=T("iterator"),q="URLSearchParams",Ct=q+"Iterator",V=r.set,pt=r.getterFor(q),F=r.getterFor(Ct),Rt=/\+/g,yt=Array(4),Ft=function(rt){return yt[rt-1]||(yt[rt-1]=RegExp("((?:%[\\da-f]{2}){"+rt+"})","gi"))},K=function(rt){try{return decodeURIComponent(rt)}catch{return rt}},at=function(rt){var Q=rt.replace(Rt," "),tt=4;try{return decodeURIComponent(Q)}catch{for(;tt;)Q=Q.replace(Ft(tt--),K);return Q}},J=/[!'()~]|%20/g,Y={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},lt=function(rt){return Y[rt]},B=function(rt){return encodeURIComponent(rt).replace(J,lt)},U=function(rt,Q){if(Q)for(var tt=Q.split("&"),ot=0,ct,vt;ot<tt.length;)ct=tt[ot++],ct.length&&(vt=ct.split("="),rt.push({key:at(vt.shift()),value:at(vt.join("="))}))},G=function(rt){this.entries.length=0,U(this.entries,rt)},Z=function(rt,Q){if(rt<Q)throw TypeError("Not enough arguments")},gt=d(function(Q,tt){V(this,{type:Ct,iterator:I(pt(Q).entries),kind:tt})},"Iterator",function(){var Q=F(this),tt=Q.kind,ot=Q.iterator.next(),ct=ot.value;return ot.done||(ot.value=tt==="keys"?ct.key:tt==="values"?ct.value:[ct.key,ct.value]),ot}),ht=function(){h(this,ht,q);var Q=arguments.length>0?arguments[0]:void 0,tt=this,ot=[],ct,vt,Ot,Ut,Bt,mt,Yt,Zt,te;if(V(tt,{type:q,entries:ot,updateURL:function(){},updateSearchParams:G}),Q!==void 0)if(m(Q))if(ct=b(Q),ct)for(vt=I(Q,ct),Ot=vt.next;!(Ut=Ot.call(vt)).done;){if(Bt=I(s(Ut.value)),mt=Bt.next,(Yt=mt.call(Bt)).done||(Zt=mt.call(Bt)).done||!mt.call(Bt).done)throw TypeError("Expected sequence with length 2");ot.push({key:o(Yt.value),value:o(Zt.value)})}else for(te in Q)t(Q,te)&&ot.push({key:te,value:o(Q[te])});else U(ot,typeof Q=="string"?Q.charAt(0)==="?"?Q.slice(1):Q:o(Q))},St=ht.prototype;if(w(St,{append:function(Q,tt){Z(arguments.length,2);var ot=pt(this);ot.entries.push({key:o(Q),value:o(tt)}),ot.updateURL()},delete:function(rt){Z(arguments.length,1);for(var Q=pt(this),tt=Q.entries,ot=o(rt),ct=0;ct<tt.length;)tt[ct].key===ot?tt.splice(ct,1):ct++;Q.updateURL()},get:function(Q){Z(arguments.length,1);for(var tt=pt(this).entries,ot=o(Q),ct=0;ct<tt.length;ct++)if(tt[ct].key===ot)return tt[ct].value;return null},getAll:function(Q){Z(arguments.length,1);for(var tt=pt(this).entries,ot=o(Q),ct=[],vt=0;vt<tt.length;vt++)tt[vt].key===ot&&ct.push(tt[vt].value);return ct},has:function(Q){Z(arguments.length,1);for(var tt=pt(this).entries,ot=o(Q),ct=0;ct<tt.length;)if(tt[ct++].key===ot)return!0;return!1},set:function(Q,tt){Z(arguments.length,1);for(var ot=pt(this),ct=ot.entries,vt=!1,Ot=o(Q),Ut=o(tt),Bt=0,mt;Bt<ct.length;Bt++)mt=ct[Bt],mt.key===Ot&&(vt?ct.splice(Bt--,1):(vt=!0,mt.value=Ut));vt||ct.push({key:Ot,value:Ut}),ot.updateURL()},sort:function(){var Q=pt(this),tt=Q.entries,ot=tt.slice(),ct,vt,Ot;for(tt.length=0,Ot=0;Ot<ot.length;Ot++){for(ct=ot[Ot],vt=0;vt<Ot;vt++)if(tt[vt].key>ct.key){tt.splice(vt,0,ct);break}vt===Ot&&tt.push(ct)}Q.updateURL()},forEach:function(Q){for(var tt=pt(this).entries,ot=a(Q,arguments.length>1?arguments[1]:void 0,3),ct=0,vt;ct<tt.length;)vt=tt[ct++],ot(vt.value,vt.key,this)},keys:function(){return new gt(this,"keys")},values:function(){return new gt(this,"values")},entries:function(){return new gt(this,"entries")}},{enumerable:!0}),L(St,nt,St.entries,{name:"entries"}),L(St,"toString",function(){for(var Q=pt(this).entries,tt=[],ot=0,ct;ot<Q.length;)ct=Q[ot++],tt.push(B(ct.key)+"="+B(ct.value));return tt.join("&")},{enumerable:!0}),k(ht,q),f({global:!0,forced:!O},{URLSearchParams:ht}),!O&&u(H)){var bt=function(rt){if(m(rt)){var Q=rt.body,tt;if(n(Q)===q)return tt=rt.headers?new H(rt.headers):new H,tt.has("content-type")||tt.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),p(rt,{body:y(0,String(Q)),headers:y(0,tt)})}return rt};if(u(P)&&f({global:!0,enumerable:!0,forced:!0},{fetch:function(Q){return P(Q,arguments.length>1?bt(arguments[1]):{})}}),u(z)){var xt=function(Q){return h(this,xt,"Request"),new z(Q,arguments.length>1?bt(arguments[1]):{})};j.constructor=xt,xt.prototype=j,f({global:!0,forced:!0},{Request:xt})}}S.exports={URLSearchParams:ht,getState:pt}},4948:function(S,D,v){v(5454);var f=v(3085),A=v(69),O=v(4551),L=v(8576),w=v(1187),k=v(9482),d=v(6961),r=v(4500),h=v(2503),u=v(841),t=v(863).codeAt,a=v(7977),n=v(4845),s=v(1284),m=v(9336),o=v(3326),p=L.URL,y=m.URLSearchParams,I=m.getState,b=o.set,T=o.getterFor("URL"),P=Math.floor,z=Math.pow,j="Invalid authority",H="Invalid scheme",nt="Invalid host",q="Invalid port",Ct=/[A-Za-z]/,V=/[\d+-.A-Za-z]/,pt=/\d/,F=/^0x/i,Rt=/^[0-7]+$/,yt=/^\d+$/,Ft=/^[\dA-Fa-f]+$/,K=/[\0\t\n\r #%/:<>?@[\\\]^|]/,at=/[\0\t\n\r #/:<>?@[\\\]^|]/,J=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,Y=/[\t\n\r]/g,lt,B=function(W,Dt){var _t,kt,Nt;if(Dt.charAt(0)=="["){if(Dt.charAt(Dt.length-1)!="]"||(_t=G(Dt.slice(1,-1)),!_t))return nt;W.host=_t}else if(tt(W)){if(Dt=a(Dt),K.test(Dt)||(_t=U(Dt),_t===null))return nt;W.host=_t}else{if(at.test(Dt))return nt;for(_t="",kt=u(Dt),Nt=0;Nt<kt.length;Nt++)_t+=rt(kt[Nt],ht);W.host=_t}},U=function(W){var Dt=W.split("."),_t,kt,Nt,$t,Vt,he,ne;if(Dt.length&&Dt[Dt.length-1]==""&&Dt.pop(),_t=Dt.length,_t>4)return W;for(kt=[],Nt=0;Nt<_t;Nt++){if($t=Dt[Nt],$t=="")return W;if(Vt=10,$t.length>1&&$t.charAt(0)=="0"&&(Vt=F.test($t)?16:8,$t=$t.slice(Vt==8?1:2)),$t==="")he=0;else{if(!(Vt==10?yt:Vt==8?Rt:Ft).test($t))return W;he=parseInt($t,Vt)}kt.push(he)}for(Nt=0;Nt<_t;Nt++)if(he=kt[Nt],Nt==_t-1){if(he>=z(256,5-_t))return null}else if(he>255)return null;for(ne=kt.pop(),Nt=0;Nt<kt.length;Nt++)ne+=kt[Nt]*z(256,3-Nt);return ne},G=function(W){var Dt=[0,0,0,0,0,0,0,0],_t=0,kt=null,Nt=0,$t,Vt,he,ne,Se,_e,Lt,Me=function(){return W.charAt(Nt)};if(Me()==":"){if(W.charAt(1)!=":")return;Nt+=2,_t++,kt=_t}for(;Me();){if(_t==8)return;if(Me()==":"){if(kt!==null)return;Nt++,_t++,kt=_t;continue}for($t=Vt=0;Vt<4&&Ft.test(Me());)$t=$t*16+parseInt(Me(),16),Nt++,Vt++;if(Me()=="."){if(Vt==0||(Nt-=Vt,_t>6))return;for(he=0;Me();){if(ne=null,he>0)if(Me()=="."&&he<4)Nt++;else return;if(!pt.test(Me()))return;for(;pt.test(Me());){if(Se=parseInt(Me(),10),ne===null)ne=Se;else{if(ne==0)return;ne=ne*10+Se}if(ne>255)return;Nt++}Dt[_t]=Dt[_t]*256+ne,he++,(he==2||he==4)&&_t++}if(he!=4)return;break}else if(Me()==":"){if(Nt++,!Me())return}else if(Me())return;Dt[_t++]=$t}if(kt!==null)for(_e=_t-kt,_t=7;_t!=0&&_e>0;)Lt=Dt[_t],Dt[_t--]=Dt[kt+_e-1],Dt[kt+--_e]=Lt;else if(_t!=8)return;return Dt},Z=function(W){for(var Dt=null,_t=1,kt=null,Nt=0,$t=0;$t<8;$t++)W[$t]!==0?(Nt>_t&&(Dt=kt,_t=Nt),kt=null,Nt=0):(kt===null&&(kt=$t),++Nt);return Nt>_t&&(Dt=kt,_t=Nt),Dt},gt=function(W){var Dt,_t,kt,Nt;if(typeof W=="number"){for(Dt=[],_t=0;_t<4;_t++)Dt.unshift(W%256),W=P(W/256);return Dt.join(".")}else if(typeof W=="object"){for(Dt="",kt=Z(W),_t=0;_t<8;_t++)Nt&&W[_t]===0||(Nt&&(Nt=!1),kt===_t?(Dt+=_t?":":"::",Nt=!0):(Dt+=W[_t].toString(16),_t<7&&(Dt+=":")));return"["+Dt+"]"}return W},ht={},St=h({},ht,{" ":1,'"':1,"<":1,">":1,"`":1}),bt=h({},St,{"#":1,"?":1,"{":1,"}":1}),xt=h({},bt,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),rt=function(W,Dt){var _t=t(W,0);return _t>32&&_t<127&&!r(Dt,W)?W:encodeURIComponent(W)},Q={ftp:21,file:null,http:80,https:443,ws:80,wss:443},tt=function(W){return r(Q,W.scheme)},ot=function(W){return W.username!=""||W.password!=""},ct=function(W){return!W.host||W.cannotBeABaseURL||W.scheme=="file"},vt=function(W,Dt){var _t;return W.length==2&&Ct.test(W.charAt(0))&&((_t=W.charAt(1))==":"||!Dt&&_t=="|")},Ot=function(W){var Dt;return W.length>1&&vt(W.slice(0,2))&&(W.length==2||(Dt=W.charAt(2))==="/"||Dt==="\\"||Dt==="?"||Dt==="#")},Ut=function(W){var Dt=W.path,_t=Dt.length;_t&&(W.scheme!="file"||_t!=1||!vt(Dt[0],!0))&&Dt.pop()},Bt=function(W){return W==="."||W.toLowerCase()==="%2e"},mt=function(W){return W=W.toLowerCase(),W===".."||W==="%2e."||W===".%2e"||W==="%2e%2e"},Yt={},Zt={},te={},ve={},ae={},le={},ee={},ce={},ye={},be={},Tt={},At={},jt={},Ht={},Xt={},Pt={},Ce={},Ie={},Gt={},Mt={},ge={},ie=function(W,Dt,_t,kt){var Nt=_t||Yt,$t=0,Vt="",he=!1,ne=!1,Se=!1,_e,Lt,Me,je;for(_t||(W.scheme="",W.username="",W.password="",W.host=null,W.port=null,W.path=[],W.query=null,W.fragment=null,W.cannotBeABaseURL=!1,Dt=Dt.replace(J,"")),Dt=Dt.replace(Y,""),_e=u(Dt);$t<=_e.length;){switch(Lt=_e[$t],Nt){case Yt:if(Lt&&Ct.test(Lt))Vt+=Lt.toLowerCase(),Nt=Zt;else{if(_t)return H;Nt=te;continue}break;case Zt:if(Lt&&(V.test(Lt)||Lt=="+"||Lt=="-"||Lt=="."))Vt+=Lt.toLowerCase();else if(Lt==":"){if(_t&&(tt(W)!=r(Q,Vt)||Vt=="file"&&(ot(W)||W.port!==null)||W.scheme=="file"&&!W.host))return;if(W.scheme=Vt,_t){tt(W)&&Q[W.scheme]==W.port&&(W.port=null);return}Vt="",W.scheme=="file"?Nt=Ht:tt(W)&&kt&&kt.scheme==W.scheme?Nt=ve:tt(W)?Nt=ce:_e[$t+1]=="/"?(Nt=ae,$t++):(W.cannotBeABaseURL=!0,W.path.push(""),Nt=Gt)}else{if(_t)return H;Vt="",Nt=te,$t=0;continue}break;case te:if(!kt||kt.cannotBeABaseURL&&Lt!="#")return H;if(kt.cannotBeABaseURL&&Lt=="#"){W.scheme=kt.scheme,W.path=kt.path.slice(),W.query=kt.query,W.fragment="",W.cannotBeABaseURL=!0,Nt=ge;break}Nt=kt.scheme=="file"?Ht:le;continue;case ve:if(Lt=="/"&&_e[$t+1]=="/")Nt=ye,$t++;else{Nt=le;continue}break;case ae:if(Lt=="/"){Nt=be;break}else{Nt=Ie;continue}case le:if(W.scheme=kt.scheme,Lt==lt)W.username=kt.username,W.password=kt.password,W.host=kt.host,W.port=kt.port,W.path=kt.path.slice(),W.query=kt.query;else if(Lt=="/"||Lt=="\\"&&tt(W))Nt=ee;else if(Lt=="?")W.username=kt.username,W.password=kt.password,W.host=kt.host,W.port=kt.port,W.path=kt.path.slice(),W.query="",Nt=Mt;else if(Lt=="#")W.username=kt.username,W.password=kt.password,W.host=kt.host,W.port=kt.port,W.path=kt.path.slice(),W.query=kt.query,W.fragment="",Nt=ge;else{W.username=kt.username,W.password=kt.password,W.host=kt.host,W.port=kt.port,W.path=kt.path.slice(),W.path.pop(),Nt=Ie;continue}break;case ee:if(tt(W)&&(Lt=="/"||Lt=="\\"))Nt=ye;else if(Lt=="/")Nt=be;else{W.username=kt.username,W.password=kt.password,W.host=kt.host,W.port=kt.port,Nt=Ie;continue}break;case ce:if(Nt=ye,Lt!="/"||Vt.charAt($t+1)!="/")continue;$t++;break;case ye:if(Lt!="/"&&Lt!="\\"){Nt=be;continue}break;case be:if(Lt=="@"){he&&(Vt="%40"+Vt),he=!0,Me=u(Vt);for(var ei=0;ei<Me.length;ei++){var gi=Me[ei];if(gi==":"&&!Se){Se=!0;continue}var vi=rt(gi,xt);Se?W.password+=vi:W.username+=vi}Vt=""}else if(Lt==lt||Lt=="/"||Lt=="?"||Lt=="#"||Lt=="\\"&&tt(W)){if(he&&Vt=="")return j;$t-=u(Vt).length+1,Vt="",Nt=Tt}else Vt+=Lt;break;case Tt:case At:if(_t&&W.scheme=="file"){Nt=Pt;continue}else if(Lt==":"&&!ne){if(Vt=="")return nt;if(je=B(W,Vt),je)return je;if(Vt="",Nt=jt,_t==At)return}else if(Lt==lt||Lt=="/"||Lt=="?"||Lt=="#"||Lt=="\\"&&tt(W)){if(tt(W)&&Vt=="")return nt;if(_t&&Vt==""&&(ot(W)||W.port!==null))return;if(je=B(W,Vt),je)return je;if(Vt="",Nt=Ce,_t)return;continue}else Lt=="["?ne=!0:Lt=="]"&&(ne=!1),Vt+=Lt;break;case jt:if(pt.test(Lt))Vt+=Lt;else if(Lt==lt||Lt=="/"||Lt=="?"||Lt=="#"||Lt=="\\"&&tt(W)||_t){if(Vt!=""){var De=parseInt(Vt,10);if(De>65535)return q;W.port=tt(W)&&De===Q[W.scheme]?null:De,Vt=""}if(_t)return;Nt=Ce;continue}else return q;break;case Ht:if(W.scheme="file",Lt=="/"||Lt=="\\")Nt=Xt;else if(kt&&kt.scheme=="file")if(Lt==lt)W.host=kt.host,W.path=kt.path.slice(),W.query=kt.query;else if(Lt=="?")W.host=kt.host,W.path=kt.path.slice(),W.query="",Nt=Mt;else if(Lt=="#")W.host=kt.host,W.path=kt.path.slice(),W.query=kt.query,W.fragment="",Nt=ge;else{Ot(_e.slice($t).join(""))||(W.host=kt.host,W.path=kt.path.slice(),Ut(W)),Nt=Ie;continue}else{Nt=Ie;continue}break;case Xt:if(Lt=="/"||Lt=="\\"){Nt=Pt;break}kt&&kt.scheme=="file"&&!Ot(_e.slice($t).join(""))&&(vt(kt.path[0],!0)?W.path.push(kt.path[0]):W.host=kt.host),Nt=Ie;continue;case Pt:if(Lt==lt||Lt=="/"||Lt=="\\"||Lt=="?"||Lt=="#"){if(!_t&&vt(Vt))Nt=Ie;else if(Vt==""){if(W.host="",_t)return;Nt=Ce}else{if(je=B(W,Vt),je)return je;if(W.host=="localhost"&&(W.host=""),_t)return;Vt="",Nt=Ce}continue}else Vt+=Lt;break;case Ce:if(tt(W)){if(Nt=Ie,Lt!="/"&&Lt!="\\")continue}else if(!_t&&Lt=="?")W.query="",Nt=Mt;else if(!_t&&Lt=="#")W.fragment="",Nt=ge;else if(Lt!=lt&&(Nt=Ie,Lt!="/"))continue;break;case Ie:if(Lt==lt||Lt=="/"||Lt=="\\"&&tt(W)||!_t&&(Lt=="?"||Lt=="#")){if(mt(Vt)?(Ut(W),Lt!="/"&&!(Lt=="\\"&&tt(W))&&W.path.push("")):Bt(Vt)?Lt!="/"&&!(Lt=="\\"&&tt(W))&&W.path.push(""):(W.scheme=="file"&&!W.path.length&&vt(Vt)&&(W.host&&(W.host=""),Vt=Vt.charAt(0)+":"),W.path.push(Vt)),Vt="",W.scheme=="file"&&(Lt==lt||Lt=="?"||Lt=="#"))for(;W.path.length>1&&W.path[0]==="";)W.path.shift();Lt=="?"?(W.query="",Nt=Mt):Lt=="#"&&(W.fragment="",Nt=ge)}else Vt+=rt(Lt,bt);break;case Gt:Lt=="?"?(W.query="",Nt=Mt):Lt=="#"?(W.fragment="",Nt=ge):Lt!=lt&&(W.path[0]+=rt(Lt,ht));break;case Mt:!_t&&Lt=="#"?(W.fragment="",Nt=ge):Lt!=lt&&(Lt=="'"&&tt(W)?W.query+="%27":Lt=="#"?W.query+="%23":W.query+=rt(Lt,ht));break;case ge:Lt!=lt&&(W.fragment+=rt(Lt,St));break}$t++}},oe=function(Dt){var _t=d(this,oe,"URL"),kt=arguments.length>1?arguments[1]:void 0,Nt=n(Dt),$t=b(_t,{type:"URL"}),Vt,he;if(kt!==void 0){if(kt instanceof oe)Vt=T(kt);else if(he=ie(Vt={},n(kt)),he)throw TypeError(he)}if(he=ie($t,Nt,null,Vt),he)throw TypeError(he);var ne=$t.searchParams=new y,Se=I(ne);Se.updateSearchParams($t.query),Se.updateURL=function(){$t.query=String(ne)||null},A||(_t.href=Te.call(_t),_t.origin=me.call(_t),_t.protocol=Ne.call(_t),_t.username=ue.call(_t),_t.password=ci.call(_t),_t.host=ui.call(_t),_t.hostname=hi.call(_t),_t.port=qe.call(_t),_t.pathname=fi.call(_t),_t.search=Be.call(_t),_t.searchParams=Qe.call(_t),_t.hash=Ye.call(_t))},Ae=oe.prototype,Te=function(){var W=T(this),Dt=W.scheme,_t=W.username,kt=W.password,Nt=W.host,$t=W.port,Vt=W.path,he=W.query,ne=W.fragment,Se=Dt+":";return Nt!==null?(Se+="//",ot(W)&&(Se+=_t+(kt?":"+kt:"")+"@"),Se+=gt(Nt),$t!==null&&(Se+=":"+$t)):Dt=="file"&&(Se+="//"),Se+=W.cannotBeABaseURL?Vt[0]:Vt.length?"/"+Vt.join("/"):"",he!==null&&(Se+="?"+he),ne!==null&&(Se+="#"+ne),Se},me=function(){var W=T(this),Dt=W.scheme,_t=W.port;if(Dt=="blob")try{return new oe(Dt.path[0]).origin}catch{return"null"}return Dt=="file"||!tt(W)?"null":Dt+"://"+gt(W.host)+(_t!==null?":"+_t:"")},Ne=function(){return T(this).scheme+":"},ue=function(){return T(this).username},ci=function(){return T(this).password},ui=function(){var W=T(this),Dt=W.host,_t=W.port;return Dt===null?"":_t===null?gt(Dt):gt(Dt)+":"+_t},hi=function(){var W=T(this).host;return W===null?"":gt(W)},qe=function(){var W=T(this).port;return W===null?"":String(W)},fi=function(){var W=T(this),Dt=W.path;return W.cannotBeABaseURL?Dt[0]:Dt.length?"/"+Dt.join("/"):""},Be=function(){var W=T(this).query;return W?"?"+W:""},Qe=function(){return T(this).searchParams},Ye=function(){var W=T(this).fragment;return W?"#"+W:""},we=function(W,Dt){return{get:W,set:Dt,configurable:!0,enumerable:!0}};if(A&&w(Ae,{href:we(Te,function(W){var Dt=T(this),_t=n(W),kt=ie(Dt,_t);if(kt)throw TypeError(kt);I(Dt.searchParams).updateSearchParams(Dt.query)}),origin:we(me),protocol:we(Ne,function(W){var Dt=T(this);ie(Dt,n(W)+":",Yt)}),username:we(ue,function(W){var Dt=T(this),_t=u(n(W));if(!ct(Dt)){Dt.username="";for(var kt=0;kt<_t.length;kt++)Dt.username+=rt(_t[kt],xt)}}),password:we(ci,function(W){var Dt=T(this),_t=u(n(W));if(!ct(Dt)){Dt.password="";for(var kt=0;kt<_t.length;kt++)Dt.password+=rt(_t[kt],xt)}}),host:we(ui,function(W){var Dt=T(this);Dt.cannotBeABaseURL||ie(Dt,n(W),Tt)}),hostname:we(hi,function(W){var Dt=T(this);Dt.cannotBeABaseURL||ie(Dt,n(W),At)}),port:we(qe,function(W){var Dt=T(this);ct(Dt)||(W=n(W),W==""?Dt.port=null:ie(Dt,W,jt))}),pathname:we(fi,function(W){var Dt=T(this);Dt.cannotBeABaseURL||(Dt.path=[],ie(Dt,n(W),Ce))}),search:we(Be,function(W){var Dt=T(this);W=n(W),W==""?Dt.query=null:(W.charAt(0)=="?"&&(W=W.slice(1)),Dt.query="",ie(Dt,W,Mt)),I(Dt.searchParams).updateSearchParams(Dt.query)}),searchParams:we(Qe),hash:we(Ye,function(W){var Dt=T(this);if(W=n(W),W==""){Dt.fragment=null;return}W.charAt(0)=="#"&&(W=W.slice(1)),Dt.fragment="",ie(Dt,W,ge)})}),k(Ae,"toJSON",function(){return Te.call(this)},{enumerable:!0}),k(Ae,"toString",function(){return Te.call(this)},{enumerable:!0}),p){var ti=p.createObjectURL,di=p.revokeObjectURL;ti&&k(oe,"createObjectURL",function(Dt){return ti.apply(p,arguments)}),di&&k(oe,"revokeObjectURL",function(Dt){return di.apply(p,arguments)})}s(oe,"URL"),f({global:!0,forced:!O,sham:!A},{URL:oe})},9801:function(){},3822:function(S,D,v){var f=v(2221);S.exports=f},1434:function(S,D,v){var f=v(5078);S.exports=f},6899:function(S,D,v){var f=v(98);S.exports=f},7710:function(S,D,v){var f=v(5739);v(162),S.exports=f},4486:function(S,D,v){var f=v(278);S.exports=f},4877:function(S,D,v){var f=v(1484);S.exports=f},7178:function(S,D,v){var f=v(7731);S.exports=f},5603:function(S,D,v){var f=v(3669);S.exports=f},1206:function(S,D,v){v(162);var f=v(6899),A=v(4696),O=Array.prototype,L={DOMTokenList:!0,NodeList:!0};S.exports=function(w){var k=w.forEach;return w===O||w instanceof Array&&k===O.forEach||L.hasOwnProperty(A(w))?f:k}},6174:function(S,D,v){var f=v(2604);S.exports=f},57:function(S,D,v){var f=v(263);S.exports=f},4741:function(S,D,v){var f=v(7663);S.exports=f},8368:function(S,D,v){var f=v(5063);S.exports=f},3739:function(S,D,v){var f=v(6813);S.exports=f},172:function(S,D,v){var f=v(6285);S.exports=f},4963:function(S,D,v){var f=v(3213);S.exports=f},7820:function(S,D,v){var f=v(3512);S.exports=f},8980:function(S,D,v){var f=v(8168);S.exports=f},5636:function(S,D,v){var f=v(8651);S.exports=f},6672:function(S,D,v){var f=v(3083);S.exports=f},5059:function(S,D,v){var f=v(2987);S.exports=f},3969:function(S,D,v){var f=v(2239);S.exports=f},6618:function(S,D,v){var f=v(3154);v(162),S.exports=f},5279:function(S,D,v){var f=v(6577);S.exports=f},9562:function(S,D,v){v(2906);var f=v(7545);S.exports=f.setTimeout},2285:function(S,D,v){var f=v(5008);v(162),S.exports=f},8535:function(S,D,v){var f=v(994);v(162),S.exports=f},652:function(S,D,v){var f=v(5668);S.exports=f},5668:function(S,D,v){v(4948),v(9801),v(9336);var f=v(7545);S.exports=f.URL},2534:function(S){S.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyBkaXNwbGF5PSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KPGRlZnMgaWQ9InR1aS1pbWFnZS1lZGl0b3Itc3ZnLWRlZmF1bHQtaWNvbnMiPgo8c3ltYm9sIGlkPSJpYy1hcHBseSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNNCAxMi4wMTFsNSA1TDIwLjAxMSA2Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1jYW5jZWwiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTYgNmwxMiAxMk0xOCA2TDYgMTgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWNyb3AiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIC8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik00IDBoMXYyMGExIDEgMCAwIDEtMS0xVjB6TTIwIDE3aC0xVjVoMXYxMnptMCAydjVoLTF2LTVoMXoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTUgMTloMTl2MUg1ek00Ljc2MiA0djFIMFY0aDQuNzYyek03IDRoMTJhMSAxIDAgMCAxIDEgMUg3VjR6Ii8+Cjwvc3ltYm9sPgo8IS0tIFRoaXMgaWNvbiBtYWRlIGJ5IFBpeGVsIHBlcmZlY3QgZnJvbSB3d3cuZmxhdGljb24uY29tIC0tPgo8c3ltYm9sIGlkPSJpYy1yZXNpemUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgc3Ryb2tlPSJub25lIiBmaWxsPSJub25lIi8+CiAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNIDE4Ljk4ODI4MSAzLjAxMTcxOSBDIDE4LjgwMDc4MSAyLjgyNDIxOSAxOC41IDIuODI0MjE5IDE4LjMxMjUgMy4wMTE3MTkgTCAxMS42MjEwOTQgOS43MDcwMzEgQyAxMS40Mjk2ODggOS44OTQ1MzEgMTEuNDI5Njg4IDEwLjE5NTMxMiAxMS42MjEwOTQgMTAuMzc4OTA2IEMgMTEuNzEwOTM4IDEwLjQ3MjY1NiAxMS44MzU5MzggMTAuNTE5NTMxIDExLjk1NzAzMSAxMC41MTk1MzEgQyAxMi4wNzgxMjUgMTAuNTE5NTMxIDEyLjIwMzEyNSAxMC40NzI2NTYgMTIuMjkyOTY5IDEwLjM3ODkwNiBMIDE4Ljk4ODI4MSAzLjY4NzUgQyAxOS4xNzU3ODEgMy41IDE5LjE3NTc4MSAzLjE5OTIxOSAxOC45ODgyODEgMy4wMTE3MTkgWiBNIDE4Ljk4ODI4MSAzLjAxMTcxOSAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTguNjUyMzQ0IDIuODY3MTg4IEMgMTguMzg2NzE5IDIuODY3MTg4IDE4LjE3MTg3NSAzLjA4MjAzMSAxOC4xNzE4NzUgMy4zNDc2NTYgTCAxOC4xNzE4NzUgOS4wODU5MzggQyAxOC4xNzE4NzUgOS4zNDc2NTYgMTguMzg2NzE5IDkuNTYyNSAxOC42NTIzNDQgOS41NjI1IEMgMTguOTE3OTY5IDkuNTYyNSAxOS4xMzI4MTIgOS4zNDc2NTYgMTkuMTMyODEyIDkuMDg1OTM4IEwgMTkuMTMyODEyIDMuMzQ3NjU2IEMgMTkuMTMyODEyIDMuMDgyMDMxIDE4LjkxNzk2OSAyLjg2NzE4OCAxOC42NTIzNDQgMi44NjcxODggWiBNIDE4LjY1MjM0NCAyLjg2NzE4OCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTguNjUyMzQ0IDIuODY3MTg4IEwgMTIuOTE0MDYyIDIuODY3MTg4IEMgMTIuNjUyMzQ0IDIuODY3MTg4IDEyLjQzNzUgMy4wODIwMzEgMTIuNDM3NSAzLjM0NzY1NiBDIDEyLjQzNzUgMy42MTMyODEgMTIuNjUyMzQ0IDMuODI4MTI1IDEyLjkxNDA2MiAzLjgyODEyNSBMIDE4LjY1MjM0NCAzLjgyODEyNSBDIDE4LjkxNzk2OSAzLjgyODEyNSAxOS4xMzI4MTIgMy42MTMyODEgMTkuMTMyODEyIDMuMzQ3NjU2IEMgMTkuMTMyODEyIDMuMDgyMDMxIDE4LjkxNzk2OSAyLjg2NzE4OCAxOC42NTIzNDQgMi44NjcxODggWiBNIDE4LjY1MjM0NCAyLjg2NzE4OCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTAuMzc4OTA2IDExLjYyMTA5NCBDIDEwLjE5NTMxMiAxMS40MzM1OTQgOS44OTA2MjUgMTEuNDMzNTk0IDkuNzAzMTI1IDExLjYyMTA5NCBMIDMuMDA3ODEyIDE4LjMxNjQwNiBDIDIuODIwMzEyIDE4LjUgMi44MjAzMTIgMTguODA0Njg4IDMuMDA3ODEyIDE4Ljk5MjE4OCBDIDMuMTA1NDY5IDE5LjA4NTkzOCAzLjIyNjU2MiAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEMgMy40Njg3NSAxOS4xMzI4MTIgMy41ODk4NDQgMTkuMDg1OTM4IDMuNjgzNTk0IDE4Ljk5MjE4OCBMIDEwLjM3ODkwNiAxMi4yOTY4NzUgQyAxMC41NjY0MDYgMTIuMTA5Mzc1IDEwLjU2NjQwNiAxMS44MDQ2ODggMTAuMzc4OTA2IDExLjYyMTA5NCBaIE0gMTAuMzc4OTA2IDExLjYyMTA5NCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMy4zNDc2NTYgMTIuNDM3NSBDIDMuMDgyMDMxIDEyLjQzNzUgMi44NjcxODggMTIuNjUyMzQ0IDIuODY3MTg4IDEyLjkxNDA2MiBMIDIuODY3MTg4IDE4LjY1MjM0NCBDIDIuODY3MTg4IDE4LjkxNzk2OSAzLjA4MjAzMSAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEMgMy42MTMyODEgMTkuMTMyODEyIDMuODI4MTI1IDE4LjkxNzk2OSAzLjgyODEyNSAxOC42NTIzNDQgTCAzLjgyODEyNSAxMi45MTQwNjIgQyAzLjgyODEyNSAxMi42NTIzNDQgMy42MTMyODEgMTIuNDM3NSAzLjM0NzY1NiAxMi40Mzc1IFogTSAzLjM0NzY1NiAxMi40Mzc1ICIvPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTSA5LjA4NTkzOCAxOC4xNzE4NzUgTCAzLjM0NzY1NiAxOC4xNzE4NzUgQyAzLjA4MjAzMSAxOC4xNzE4NzUgMi44NjcxODggMTguMzg2NzE5IDIuODY3MTg4IDE4LjY1MjM0NCBDIDIuODY3MTg4IDE4LjkxNzk2OSAzLjA4MjAzMSAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEwgOS4wODU5MzggMTkuMTMyODEyIEMgOS4zNDc2NTYgMTkuMTMyODEyIDkuNTYyNSAxOC45MTc5NjkgOS41NjI1IDE4LjY1MjM0NCBDIDkuNTYyNSAxOC4zODY3MTkgOS4zNDc2NTYgMTguMTcxODc1IDkuMDg1OTM4IDE4LjE3MTg3NSBaIE0gOS4wODU5MzggMTguMTcxODc1ICIvPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTSAyMC41NjI1IDAgTCAxLjQzNzUgMCBDIDAuNjQ0NTMxIDAgMCAwLjY0NDUzMSAwIDEuNDM3NSBMIDAgMjAuNTYyNSBDIDAgMjEuMzU1NDY5IDAuNjQ0NTMxIDIyIDEuNDM3NSAyMiBMIDIwLjU2MjUgMjIgQyAyMS4zNTU0NjkgMjIgMjIgMjEuMzU1NDY5IDIyIDIwLjU2MjUgTCAyMiAxLjQzNzUgQyAyMiAwLjY0NDUzMSAyMS4zNTU0NjkgMCAyMC41NjI1IDAgWiBNIDIxLjA0Mjk2OSAyMC41NjI1IEMgMjEuMDQyOTY5IDIwLjgyODEyNSAyMC44MjgxMjUgMjEuMDQyOTY5IDIwLjU2MjUgMjEuMDQyOTY5IEwgMS40Mzc1IDIxLjA0Mjk2OSBDIDEuMTcxODc1IDIxLjA0Mjk2OSAwLjk1NzAzMSAyMC44MjgxMjUgMC45NTcwMzEgMjAuNTYyNSBMIDAuOTU3MDMxIDEuNDM3NSBDIDAuOTU3MDMxIDEuMTcxODc1IDEuMTcxODc1IDAuOTU3MDMxIDEuNDM3NSAwLjk1NzAzMSBMIDIwLjU2MjUgMC45NTcwMzEgQyAyMC44MjgxMjUgMC45NTcwMzEgMjEuMDQyOTY5IDEuMTcxODc1IDIxLjA0Mjk2OSAxLjQzNzUgWiBNIDIxLjA0Mjk2OSAyMC41NjI1ICIvPgo8L3N5bWJvbD4KPCEtLSAgLS0+CjxzeW1ib2wgaWQ9ImljLWRlbGV0ZS1hbGwiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik01IDIzSDNhMSAxIDAgMCAxLTEtMVY2aDF2MTZoMnYxem0xNi0xMGgtMVY2aDF2N3pNOSAxM0g4di0zaDF2M3ptMyAwaC0xdi0zaDF2M3ptMyAwaC0xdi0zaDF2M3pNMTQuNzk0IDMuNzk0TDEzIDJoLTNMOC4yMDYgMy43OTRBLjk2My45NjMgMCAwIDEgOCAyLjVsLjcwMy0xLjA1NUExIDEgMCAwIDEgOS41MzUgMWgzLjkzYTEgMSAwIDAgMSAuODMyLjQ0NUwxNSAyLjVhLjk2NS45NjUgMCAwIDEtLjIwNiAxLjI5NHpNMTQuMTk3IDRIOC44MDNoNS4zOTR6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0wIDNoMjN2MUgwek0xMS4yODYgMjFIOC43MTRMOCAyM0g3bDEtMi44VjIwaC4wNzFMOS41IDE2aDFsMS40MjkgNEgxMnYuMmwxIDIuOGgtMWwtLjcxNC0yem0tLjM1Ny0xTDEwIDE3LjQgOS4wNzEgMjBoMS44NTh6TTIwIDIyaDN2MWgtNHYtN2gxdjZ6bS01IDBoM3YxaC00di03aDF2NnoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWRlbGV0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTMgNnYxNmgxN1Y2aDF2MTZhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWNmgxek0xNC43OTQgMy43OTRMMTMgMmgtM0w4LjIwNiAzLjc5NEEuOTYzLjk2MyAwIDAgMSA4IDIuNWwuNzAzLTEuMDU1QTEgMSAwIDAgMSA5LjUzNSAxaDMuOTNhMSAxIDAgMCAxIC44MzIuNDQ1TDE1IDIuNWEuOTY1Ljk2NSAwIDAgMS0uMjA2IDEuMjk0ek0xNC4xOTcgNEg4LjgwM2g1LjM5NHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTAgM2gyM3YxSDB6TTggMTBoMXY2SDh2LTZ6bTMgMGgxdjZoLTF2LTZ6bTMgMGgxdjZoLTF2LTZ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1kcmF3LWZyZWUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yLjUgMjAuOTI5QzIuNTk0IDEwLjk3NiA0LjMyMyA2IDcuNjg2IDZjNS44NzIgMCAyLjUyNCAxOSA3LjY5NyAxOXMxLjg5LTE0LjkyOSA2LjQxNC0xNC45MjkgMS4zNTcgMTAuODU4IDUuMTMgMTAuODU4YzEuODAyIDAgMi42NTctMi4yNjIgMi41NjYtNi43ODYiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWRyYXctbGluZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIgMTUuNWgyOCIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtZHJhdyIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIuNSAyMS41SDVjLjI0NSAwIC40OC0uMDU4LjY5MS0uMTY4bC4xMjQtLjA2NS4xNC4wMWMuNDI5LjAyOC44NS0uMTI3IDEuMTYtLjQzN0wyMi41NSA1LjQwNWEuNS41IDAgMCAwIDAtLjcwN2wtMy4yNDYtMy4yNDVhLjUuNSAwIDAgMC0uNzA3IDBMMy4xNjIgMTYuODg4YTEuNDk1IDEuNDk1IDAgMCAwLS40MzcgMS4xNTVsLjAxLjE0LS4wNjUuMTIzYy0uMTExLjIxMi0uMTcuNDQ4LS4xNy42OTR2Mi41eiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTYuNDE0IDMuNzA3bDMuODkgMy44OS0uNzA4LjcwNi0zLjg4OS0zLjg4OXoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWZpbHRlciIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTEyIDd2MUgyVjdoMTB6bTYgMGg0djFoLTRWN3pNMTIgMTZ2MWgxMHYtMUgxMnptLTYgMEgydjFoNHYtMXoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTguNSAyMGEzLjUgMy41IDAgMSAxIDAtNyAzLjUgMy41IDAgMCAxIDAgN3ptMC0xYTIuNSAyLjUgMCAxIDAgMC01IDIuNSAyLjUgMCAwIDAgMCA1ek0xNS41IDExYTMuNSAzLjUgMCAxIDEgMC03IDMuNSAzLjUgMCAwIDEgMCA3em0wLTFhMi41IDIuNSAwIDEgMCAwLTUgMi41IDIuNSAwIDAgMCAwIDV6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwLXJlc2V0IiB2aWV3Qm94PSIwIDAgMzEgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMzEgMEgwdjMyaDMxeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMjggMTZhOCA4IDAgMCAxLTggOEgzdi0xaDF2LTdIM2E4IDggMCAwIDEgOC04aDE3djFoLTF2N2gxek0xMSA5YTcgNyAwIDAgMC03IDd2N2gxNmE3IDcgMCAwIDAgNy03VjlIMTF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0yNCA1bDMuNSAzLjVMMjQgMTJNNyAyMGwtMy41IDMuNUw3IDI3Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwLXgiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGQ9Ik0zMiAzMkgwVjBoMzJ6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xNyAzMmgtMVYwaDF6TTI3LjE2NyAxMWwuNSAzaC0xLjAzbC0uNTQ2LTNoMS4wNzZ6bS0uNS0zaC0xLjEyMkwyNSA1aC01VjRoNS4xNTNhMSAxIDAgMCAxIC45ODYuODM2TDI2LjY2NyA4em0xLjUgOWwuNSAzaC0uOTRsLS41NDUtM2guOTg1em0xIDZsLjYzOSAzLjgzNkExIDEgMCAwIDEgMjguODE5IDI4SDI2di0xaDNsLS43MjYtNGguODk0ek0yMyAyOGgtM3YtMWgzdjF6TTEzIDR2MUg3TDMgMjdoMTB2MUgzLjE4YTEgMSAwIDAgMS0uOTg2LTEuMTY0bDMuNjY2LTIyQTEgMSAwIDAgMSA2Ljg0NyA0SDEzeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtZmxpcC15IiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMCAwdjMyaDMyVjB6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0wIDE2djFoMzJ2LTF6TTExIDI3LjE2N2wzIC41di0xLjAzbC0zLS41NDZ2MS4wNzZ6bS0zLS41di0xLjEyMkw1IDI1di01SDR2NS4xNTNhMSAxIDAgMCAwIC44MzYuOTg2TDggMjYuNjY3em05IDEuNWwzIC41di0uOTRsLTMtLjU0NXYuOTg1em02IDFsMy44MzYuNjM5QTEgMSAwIDAgMCAyOCAyOC44MlYyNmgtMXYzbC00LS43Mjd2Ljg5NHpNMjggMjN2LTNoLTF2M2gxek00IDEzaDFWN2wyMi00djEwaDFWMy4xOGExIDEgMCAwIDAtMS4xNjQtLjk4NmwtMjIgMy42NjdBMSAxIDAgMCAwIDQgNi44NDdWMTN6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiAvPgogICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgc3Ryb2tlPSJub25lIiBkPSJNMTEgMGgxdjI0aC0xek0xOSAyMXYtMWgydi0yaDF2MmExIDEgMCAwIDEtMSAxaC0yem0tMiAwaC0zdi0xaDN2MXptNS01aC0xdi0zaDF2M3ptMC01aC0xVjhoMXYzem0wLTVoLTFWNGgtMlYzaDJhMSAxIDAgMCAxIDEgMXYyem0tNS0zdjFoLTNWM2gzek05IDN2MUgydjE2aDd2MUgyYTEgMSAwIDAgMS0xLTFWNGExIDEgMCAwIDEgMS0xaDd6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMCAwSDI0VjI0SDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNzQwIC0xNikgdHJhbnNsYXRlKDU0NyA4KSB0cmFuc2xhdGUoMTkzIDgpIi8+CiAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBzdHJva2U9Im5vbmUiIGQ9Ik0xMi41IDFDMTguMjk5IDEgMjMgNS43MDEgMjMgMTEuNVMxOC4yOTkgMjIgMTIuNSAyMmMtNS4yOSAwLTkuNjY1LTMuOTExLTEwLjM5NC04Ljk5OWgxLjAxMkMzLjgzOCAxNy41MzQgNy43NjQgMjEgMTIuNSAyMWM1LjI0NyAwIDkuNS00LjI1MyA5LjUtOS41UzE3Ljc0NyAyIDEyLjUgMkM4LjQ5IDIgNS4wNiA0LjQ4NSAzLjY2NiA4SDNoNHYxSDJWNGgxdjMuMDIyQzQuNjggMy40NjIgOC4zMDMgMSAxMi41IDF6bS41IDVsLS4wMDEgNS4yOTEgMi41MzcgMi41MzctLjcwOC43MDhMMTIuMjkyIDEySDEyVjZoMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC03NDAgLTE2KSB0cmFuc2xhdGUoNTQ3IDgpIHRyYW5zbGF0ZSgxOTMgOCkiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktY2hlY2siIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBzdHJva2U9IiM1NTU1NTUiIGQ9Ik00LjUgLTFMMS41IDIgNi41IDciIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02MCAtODA0KSB0cmFuc2xhdGUoNjAgODA0KSB0cmFuc2xhdGUoMiAzKSByb3RhdGUoLTkwIDQgMykiIC8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWNyb3AiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04NCAtODA0KSB0cmFuc2xhdGUoODQgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDBoMXYxMGMtLjU1MiAwLTEtLjQ0OC0xLTFWMHpNMTAgOXYzSDlWOWgxek05IDJoMXY2SDlWMnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04NCAtODA0KSB0cmFuc2xhdGUoODQgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDlIMTJWMTBIMnpNOSAyYy41MTMgMCAuOTM2LjM4Ni45OTMuODgzTDEwIDNIM1YyaDZ6TTIgM0gwVjJoMnYxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg0IC04MDQpIHRyYW5zbGF0ZSg4NCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8IS0tIFRoaXMgaWNvbiBtYWRlIGJ5IFBpeGVsIHBlcmZlY3QgZnJvbSB3d3cuZmxhdGljb24uY29tIC0tPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LXJlc2l6ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSA5LjQ5MjE4OCAxLjUwNzgxMiBDIDkuMzk4NDM4IDEuNDE0MDYyIDkuMjUgMS40MTQwNjIgOS4xNTYyNSAxLjUwNzgxMiBMIDUuODEyNSA0Ljg1MTU2MiBDIDUuNzE0ODQ0IDQuOTQ1MzEyIDUuNzE0ODQ0IDUuMDk3NjU2IDUuODEyNSA1LjE4NzUgQyA1Ljg1NTQ2OSA1LjIzNDM3NSA1LjkxNzk2OSA1LjI1NzgxMiA1Ljk3NjU2MiA1LjI1NzgxMiBDIDYuMDM5MDYyIDUuMjU3ODEyIDYuMTAxNTYyIDUuMjM0Mzc1IDYuMTQ4NDM4IDUuMTg3NSBMIDkuNDkyMTg4IDEuODQzNzUgQyA5LjU4NTkzOCAxLjc1IDkuNTg1OTM4IDEuNjAxNTYyIDkuNDkyMTg4IDEuNTA3ODEyIFogTSA5LjQ5MjE4OCAxLjUwNzgxMiAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gOS4zMjgxMjUgMS40MzM1OTQgQyA5LjE5NTMxMiAxLjQzMzU5NCA5LjA4NTkzOCAxLjUzOTA2MiA5LjA4NTkzOCAxLjY3MTg3NSBMIDkuMDg1OTM4IDQuNTQyOTY5IEMgOS4wODU5MzggNC42NzE4NzUgOS4xOTUzMTIgNC43ODEyNSA5LjMyODEyNSA0Ljc4MTI1IEMgOS40NjA5MzggNC43ODEyNSA5LjU2NjQwNiA0LjY3MTg3NSA5LjU2NjQwNiA0LjU0Mjk2OSBMIDkuNTY2NDA2IDEuNjcxODc1IEMgOS41NjY0MDYgMS41MzkwNjIgOS40NjA5MzggMS40MzM1OTQgOS4zMjgxMjUgMS40MzM1OTQgWiBNIDkuMzI4MTI1IDEuNDMzNTk0ICIvPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSA5LjMyODEyNSAxLjQzMzU5NCBMIDYuNDU3MDMxIDEuNDMzNTk0IEMgNi4zMjgxMjUgMS40MzM1OTQgNi4yMTg3NSAxLjUzOTA2MiA2LjIxODc1IDEuNjcxODc1IEMgNi4yMTg3NSAxLjgwNDY4OCA2LjMyODEyNSAxLjkxNDA2MiA2LjQ1NzAzMSAxLjkxNDA2MiBMIDkuMzI4MTI1IDEuOTE0MDYyIEMgOS40NjA5MzggMS45MTQwNjIgOS41NjY0MDYgMS44MDQ2ODggOS41NjY0MDYgMS42NzE4NzUgQyA5LjU2NjQwNiAxLjUzOTA2MiA5LjQ2MDkzOCAxLjQzMzU5NCA5LjMyODEyNSAxLjQzMzU5NCBaIE0gOS4zMjgxMjUgMS40MzM1OTQgIi8+CiAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNIDUuMTg3NSA1LjgxMjUgQyA1LjA5NzY1NiA1LjcxODc1IDQuOTQ1MzEyIDUuNzE4NzUgNC44NTE1NjIgNS44MTI1IEwgMS41MDM5MDYgOS4xNTYyNSBDIDEuNDEwMTU2IDkuMjUgMS40MTAxNTYgOS40MDIzNDQgMS41MDM5MDYgOS40OTYwOTQgQyAxLjU1NDY4OCA5LjU0Mjk2OSAxLjYxMzI4MSA5LjU2NjQwNiAxLjY3MTg3NSA5LjU2NjQwNiBDIDEuNzM0Mzc1IDkuNTY2NDA2IDEuNzk2ODc1IDkuNTQyOTY5IDEuODQzNzUgOS40OTYwOTQgTCA1LjE4NzUgNi4xNDg0MzggQyA1LjI4MTI1IDYuMDU0Njg4IDUuMjgxMjUgNS45MDIzNDQgNS4xODc1IDUuODEyNSBaIE0gNS4xODc1IDUuODEyNSAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gMS42NzE4NzUgNi4yMTg3NSBDIDEuNTM5MDYyIDYuMjE4NzUgMS40MzM1OTQgNi4zMjgxMjUgMS40MzM1OTQgNi40NTcwMzEgTCAxLjQzMzU5NCA5LjMyODEyNSBDIDEuNDMzNTk0IDkuNDYwOTM4IDEuNTM5MDYyIDkuNTY2NDA2IDEuNjcxODc1IDkuNTY2NDA2IEMgMS44MDQ2ODggOS41NjY0MDYgMS45MTQwNjIgOS40NjA5MzggMS45MTQwNjIgOS4zMjgxMjUgTCAxLjkxNDA2MiA2LjQ1NzAzMSBDIDEuOTE0MDYyIDYuMzI4MTI1IDEuODA0Njg4IDYuMjE4NzUgMS42NzE4NzUgNi4yMTg3NSBaIE0gMS42NzE4NzUgNi4yMTg3NSAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gNC41NDI5NjkgOS4wODU5MzggTCAxLjY3MTg3NSA5LjA4NTkzOCBDIDEuNTM5MDYyIDkuMDg1OTM4IDEuNDMzNTk0IDkuMTk1MzEyIDEuNDMzNTk0IDkuMzI4MTI1IEMgMS40MzM1OTQgOS40NjA5MzggMS41MzkwNjIgOS41NjY0MDYgMS42NzE4NzUgOS41NjY0MDYgTCA0LjU0Mjk2OSA5LjU2NjQwNiBDIDQuNjcxODc1IDkuNTY2NDA2IDQuNzgxMjUgOS40NjA5MzggNC43ODEyNSA5LjMyODEyNSBDIDQuNzgxMjUgOS4xOTUzMTIgNC42NzE4NzUgOS4wODU5MzggNC41NDI5NjkgOS4wODU5MzggWiBNIDQuNTQyOTY5IDkuMDg1OTM4ICIvPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSAxMC4yODEyNSAwIEwgMC43MTg3NSAwIEMgMC4zMjAzMTIgMCAwIDAuMzIwMzEyIDAgMC43MTg3NSBMIDAgMTAuMjgxMjUgQyAwIDEwLjY3OTY4OCAwLjMyMDMxMiAxMSAwLjcxODc1IDExIEwgMTAuMjgxMjUgMTEgQyAxMC42Nzk2ODggMTEgMTEgMTAuNjc5Njg4IDExIDEwLjI4MTI1IEwgMTEgMC43MTg3NSBDIDExIDAuMzIwMzEyIDEwLjY3OTY4OCAwIDEwLjI4MTI1IDAgWiBNIDEwLjUyMzQzOCAxMC4yODEyNSBDIDEwLjUyMzQzOCAxMC40MTQwNjIgMTAuNDE0MDYyIDEwLjUyMzQzOCAxMC4yODEyNSAxMC41MjM0MzggTCAwLjcxODc1IDEwLjUyMzQzOCBDIDAuNTg1OTM4IDEwLjUyMzQzOCAwLjQ3NjU2MiAxMC40MTQwNjIgMC40NzY1NjIgMTAuMjgxMjUgTCAwLjQ3NjU2MiAwLjcxODc1IEMgMC40NzY1NjIgMC41ODU5MzggMC41ODU5MzggMC40NzY1NjIgMC43MTg3NSAwLjQ3NjU2MiBMIDEwLjI4MTI1IDAuNDc2NTYyIEMgMTAuNDE0MDYyIDAuNDc2NTYyIDEwLjUyMzQzOCAwLjU4NTkzOCAxMC41MjM0MzggMC43MTg3NSBaIE0gMTAuNTIzNDM4IDEwLjI4MTI1ICIvPgogIDwvZz4KPC9zeW1ib2w+CjwhLS0gIC0tPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWRyYXciIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDFIMTJWMTNIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYgLTgwNCkgdHJhbnNsYXRlKDE1NiA4MDMpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBkPSJNOS42MjIgMS41ODRsMS44MzUgMS42NTgtOC4zMSA4LjQwN0wuNSAxMi41VjExbDkuMTIyLTkuNDE2eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE1NiAtODA0KSB0cmFuc2xhdGUoMTU2IDgwMykiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNNy42MjggMy43NTNMMTAuMzc4IDMuNzUzIDEwLjM3OCA0LjI1MyA3LjYyOCA0LjI1M3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYgLTgwNCkgdHJhbnNsYXRlKDE1NiA4MDMpIHJvdGF0ZSg0NSA5LjAwMyA0LjAwMykiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktZmlsdGVyIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2IC04MDQpIHRyYW5zbGF0ZSgyNzYgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0xMiAzdjFIOVYzaDN6TTcgNEgwVjNoN3YxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI3NiAtODA0KSB0cmFuc2xhdGUoMjc2IDgwNCkiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNMTIgOHYxSDlWOGgzek03IDlIMFY4aDd2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNzYgLTgwNCkgdHJhbnNsYXRlKDI3NiA4MDQpIG1hdHJpeCgtMSAwIDAgMSAxMiAwKSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik04IDFjMS4xMDUgMCAyIC44OTUgMiAycy0uODk1IDItMiAyLTItLjg5NS0yLTIgLjg5NS0yIDItMnptMCAxYy0uNTUyIDAtMSAuNDQ4LTEgMXMuNDQ4IDEgMSAxIDEtLjQ0OCAxLTEtLjQ0OC0xLTEtMXpNNCA3YzEuMTA1IDAgMiAuODk1IDIgMnMtLjg5NSAyLTIgMi0yLS44OTUtMi0yIC44OTUtMiAyLTJ6bTAgMWMtLjU1MiAwLTEgLjQ0OC0xIDFzLjQ0OCAxIDEgMSAxLS40NDggMS0xLS40NDgtMS0xLTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2IC04MDQpIHRyYW5zbGF0ZSgyNzYgODA0KSIvPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS1mbGlwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTA4IC04MDQpIHRyYW5zbGF0ZSgxMDggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik02IDBMNyAwIDcgMTIgNiAxMnpNMTEgMTBWOWgxdjEuNWMwIC4yNzYtLjIyNC41LS41LjVIMTB2LTFoMXpNNSAxdjFIMXY4aDR2MUguNWMtLjI3NiAwLS41LS4yMjQtLjUtLjV2LTljMC0uMjc2LjIyNC0uNS41LS41SDV6bTcgNXYyaC0xVjZoMXptMC0zdjJoLTFWM2gxek05IDF2MUg3VjFoMnptMi41IDBjLjI3NiAwIC41LjIyNC41LjVWMmgtMlYxaDEuNXpNOSAxMUg3di0xaDJ2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMDggLTgwNCkgdHJhbnNsYXRlKDEwOCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWljb24iIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDQgLTgwNCkgdHJhbnNsYXRlKDIwNCA4MDQpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS4xIiBkPSJNNiA5LjU2OEwyLjYwMSAxMSAyLjk3NSA3LjQ2NyAwLjUgNC44MiA0LjEzIDQuMDY4IDYgMSA3Ljg3IDQuMDY4IDExLjUgNC44MiA5LjAyNSA3LjQ2NyA5LjM5OSAxMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDQgLTgwNCkgdHJhbnNsYXRlKDIwNCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LW1hc2siIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNTIgLTgwNCkgdHJhbnNsYXRlKDI1MiA4MDQpIj4KICAgICAgICAgICAgPHBhdGggZD0iTTAgMEgxMlYxMkgweiIvPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI2IiBjeT0iNiIgcj0iMi41IiBzdHJva2U9IiM0NDQiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTExLjUgMGMuMjc2IDAgLjUuMjI0LjUuNXYxMWMwIC4yNzYtLjIyNC41LS41LjVILjVjLS4yNzYgMC0uNS0uMjI0LS41LS41Vi41QzAgLjIyNC4yMjQgMCAuNSAwaDExek0xMSAxSDF2MTBoMTBWMXoiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LXJvdGF0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJyZm40cnlsZmZhIiBkPSJNNyAxMmMtLjMzNSAwLS42NjMtLjAyNS0uOTgzLS4wNzRDMy4xNzEgMTEuNDkyIDEgOS4yMDUgMSA2LjQ0NGMwLTEuMzYzLjUzNC0yLjYxMyAxLjQxNS0zLjU4Ii8+CiAgICAgICAgPG1hc2sgaWQ9IjZmOWduMmR5c2IiIHdpZHRoPSI2IiBoZWlnaHQ9IjkuMTM2IiB4PSIwIiB5PSIwIiBtYXNrVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94Ij4KICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcmZuNHJ5bGZmYSIgc3Ryb2tlPSI0MzQzNDMiLz4KICAgICAgICA8L21hc2s+CiAgICA8L2RlZnM+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMzIgLTgwNCkgdHJhbnNsYXRlKDEzMiA4MDQpIj4KICAgICAgICAgICAgPHBhdGggZD0iTTAgMC41SDEyVjEyLjVIMHoiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTYuNSAxQzkuNTM4IDEgMTIgMy40NjIgMTIgNi41YzAgMi4zNy0xLjUgNC4zOS0zLjYgNS4xNjNsLS40MDctLjkxNkM5Ljc0NCAxMC4xMyAxMSA4LjQ2MiAxMSA2LjUgMTEgNC4wMTUgOC45ODUgMiA2LjUgMmMtLjc3NyAwLTEuNTA5LjE5Ny0yLjE0Ny41NDRMNCAxLjc1bC0uMjA1LS4wNEM0LjU5NCAxLjI1OCA1LjUxNyAxIDYuNSAxeiIvPgogICAgICAgICAgICA8dXNlIHN0cm9rZT0iIzQzNDM0MyIgc3Ryb2tlLWRhc2hhcnJheT0iMiAxLjI1IiBzdHJva2Utd2lkdGg9IjEiIG1hc2s9InVybCgjNmY5Z24yZHlzYikiIHhsaW5rOmhyZWY9IiNyZm40cnlsZmZhIi8+CiAgICAgICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik00LjI3OSAwTDYgMS43NSA0LjI1IDMuNTcxIDMuNTQzIDIuODY0IDQuNTg2IDEuNzUgMy41NzIgMC43MDd6IiB0cmFuc2Zvcm09Im1hdHJpeCgtMSAwIDAgMSA5LjU0MyAwKSIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3Rvcnktc2hhcGUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xODAgLTgwNCkgdHJhbnNsYXRlKDE4MCA4MDQpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTExLjUgNGMuMjc2IDAgLjUuMjI0LjUuNXY3YzAgLjI3Ni0uMjI0LjUtLjUuNWgtN2MtLjI3NiAwLS41LS4yMjQtLjUtLjVWOC44aDFWMTFoNlY1SDguMzQxbC0uNTY4LTFIMTEuNXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xODAgLTgwNCkgdHJhbnNsYXRlKDE4MCA4MDQpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik00LjUgMC41TDguNSA3LjYxMSAwLjUgNy42MTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTgwIC04MDQpIHRyYW5zbGF0ZSgxODAgODA0KSIvPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS10ZXh0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI4IC04MDQpIHRyYW5zbGF0ZSgyMjggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDFoOGMuNTUyIDAgMSAuNDQ4IDEgMUgxYzAtLjU1Mi40NDgtMSAxLTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI4IC04MDQpIHRyYW5zbGF0ZSgyMjggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0xIDFIMlYzSDF6TTEwIDFIMTFWM0gxMHpNNS41IDFMNi41IDEgNi41IDExIDUuNSAxMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMjggLTgwNCkgdHJhbnNsYXRlKDIyOCA4MDQpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTQgMTBIOFYxMUg0eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIyOCAtODA0KSB0cmFuc2xhdGUoMjI4IDgwNCkiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktbG9hZCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzI0IC04MDUpIHRyYW5zbGF0ZSgzMjQgODA1KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik01IDBjLjU1MiAwIDEgLjQ0OCAxIDF2MWg1LjVjLjI3NiAwIC41LjIyNC41LjV2OGMwIC4yNzYtLjIyNC41LS41LjVILjVjLS4yNzYgMC0uNS0uMjI0LS41LS41VjFjMC0uNTUyLjQ0OC0xIDEtMWg0em0wIDFIMXY5aDEwVjNINVYxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyNCAtODA1KSB0cmFuc2xhdGUoMzI0IDgwNSkiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNMSAyTDUgMiA1IDMgMSAzeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyNCAtODA1KSB0cmFuc2xhdGUoMzI0IDgwNSkiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktZGVsZXRlIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGZpbGw9IiM0MzQzNDMiPgogICAgICAgICAgICA8cGF0aCBkPSJNMiA5aDhWMWgxdjguNWMwIC4yNzYtLjIyNC41LS41LjVoLTljLS4yNzYgMC0uNS0uMjI0LS41LS41VjFoMXY4ek0wIDBIMTJWMUgweiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwMCAtODA0KSB0cmFuc2xhdGUoMzAwIDgwNCkgdHJhbnNsYXRlKDAgMikiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTQgM0g1VjdINHpNNyAzSDhWN0g3eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwMCAtODA0KSB0cmFuc2xhdGUoMzAwIDgwNCkgdHJhbnNsYXRlKDAgMikiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTQgMWg0VjBoMXYxLjVjMCAuMjc2LS4yMjQuNS0uNS41aC01Yy0uMjc2IDAtLjUtLjIyNC0uNS0uNVYwaDF2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMDAgLTgwNCkgdHJhbnNsYXRlKDMwMCA4MDQpIG1hdHJpeCgxIDAgMCAtMSAwIDIpIi8+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS1ncm91cCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzQ4IC04MDQpIHRyYW5zbGF0ZSgzNDggODA0KSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTEgOXYyaDF2MUguNWMtLjI3NiAwLS41LS4yMjQtLjUtLjVWOWgxem0xMSAxdjEuNWMwIC4yNzYtLjIyNC41LS41LjVIOXYtMWgydi0xaDF6bS00IDF2MUg2di0xaDJ6bS0zIDB2MUgzdi0xaDJ6bTctNHYyaC0xVjdoMXpNMSA2djJIMFY2aDF6bTExLTJ2MmgtMVY0aDF6TTEgM3YySDBWM2gxem0xMC41LTNjLjI3NiAwIC41LjIyNC41LjVWM2gtMVYxaC0xVjBoMS41ek02IDB2MUg0VjBoMnptMyAwdjFIN1YwaDJ6TTAgLjVDMCAuMjI0LjIyNCAwIC41IDBIM3YxSDF2MUgwVi41ek05LjUgNGMuMjc2IDAgLjUuMjI0LjUuNXY1YzAgLjI3Ni0uMjI0LjUtLjUuNWgtNWMtLjI3NiAwLS41LS4yMjQtLjUtLjVWOC4zNTVjLjMxNy4wOTQuNjUyLjE0NSAxIC4xNDVWOWg0VjVoLS41YzAtLjM0OC0uMDUtLjY4My0uMTQ1LTFIOS41eiIvPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI1IiBjeT0iNSIgcj0iMi41IiBzdHJva2U9IiM0MzQzNDMiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1pY29uLWFycm93LTIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIxLjc5MyAxOC41SDIuNXYtNWgxOC45MzVsLTcuNi04aDUuODcybDEwLjUgMTAuNS0xMC41IDEwLjVoLTUuOTE0bDgtOHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tYXJyb3ctMyIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNMjUuMjg4IDE2LjQyTDE0LjIwOCAyNy41SDYuNzkybDExLjI5MS0xMS4yOTFMNi44MjYgNC41aDcuMzgxbDExLjY2MSAxMS42NjEtLjU4LjI1OHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tYXJyb3ciIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yLjUgMTEuNXY5aDE4djUuMjkzTDMwLjI5MyAxNiAyMC41IDYuMjA3VjExLjVoLTE4eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1idWJibGUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIyLjIwNyAyNC41TDE2LjUgMzAuMjA3VjI0LjVIOEE2LjUgNi41IDAgMCAxIDEuNSAxOFY5QTYuNSA2LjUgMCAwIDEgOCAyLjVoMTZBNi41IDYuNSAwIDAgMSAzMC41IDl2OWE2LjUgNi41IDAgMCAxLTYuNSA2LjVoLTEuNzkzeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1oZWFydCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMTUuOTk2IDMwLjY3NWwxLjk4MS0xLjc5YzcuODk4LTcuMTc3IDEwLjM2NS05LjcxOCAxMi4xMzUtMTMuMDEyLjkyMi0xLjcxNiAxLjM3Ny0zLjM3IDEuMzc3LTUuMDc2IDAtNC42NS0zLjY0Ny04LjI5Ny04LjI5Ny04LjI5Ny0yLjMzIDAtNC44NiAxLjUyNy02LjgxNyAzLjgyNGwtLjM4LjQ0Ny0uMzgxLS40NDdDMTMuNjU4IDQuMDI3IDExLjEyNiAyLjUgOC43OTcgMi41IDQuMTQ3IDIuNS41IDYuMTQ3LjUgMTAuNzk3YzAgMS43MTQuNDYgMy4zNzUgMS4zODkgNS4wOTggMS43NzUgMy4yODggNC4yNiA1Ljg0MyAxMi4xMjMgMTIuOTc0bDEuOTg0IDEuODA2eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1sb2FkIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik0xNy4zMTQgMTguODY3bDEuOTUxLTIuNTMgNCA1LjE4NGgtMTdsNi41LTguODQgNC41NDkgNi4xODZ6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xOC4wMSA0YTExLjc5OCAxMS43OTggMCAwIDAgMCAxSDN2MjRoMjRWMTQuOTg2YTguNzM4IDguNzM4IDAgMCAwIDEgMFYyOWExIDEgMCAwIDEtMSAxSDNhMSAxIDAgMCAxLTEtMVY1YTEgMSAwIDAgMSAxLTFoMTUuMDF6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yNSAzaDF2OWgtMXoiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIyIDZsMy41LTMuNUwyOSA2Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1pY29uLWxvY2F0aW9uIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMTYgMzEuMjhDMjMuNjc1IDIzLjMwMiAyNy41IDE3LjE4MSAyNy41IDEzYzAtNi4zNTEtNS4xNDktMTEuNS0xMS41LTExLjVTNC41IDYuNjQ5IDQuNSAxM2MwIDQuMTgxIDMuODI1IDEwLjMwMiAxMS41IDE4LjI4eiIvPgogICAgPGNpcmNsZSBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGN4PSIxNiIgY3k9IjEzIiByPSI0LjUiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tcG9seWdvbiIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTS41NzYgMTZMOC4yOSAyOS41aDE1LjQyTDMxLjQyNCAxNiAyMy43MSAyLjVIOC4yOUwuNTc2IDE2eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1zdGFyLTIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0xOS40NDYgMzEuNTkybDIuMjY1LTMuMjcyIDMuOTQ2LjI1LjYzNi0zLjk0IDMuNjY1LTEuNTA1LTEuMTItMy44MzIgMi42NTUtMi45NjItMi42NTYtMi45NjIgMS4xMi0zLjgzMi0zLjY2NC0xLjUwNS0uNjM2LTMuOTQxLTMuOTQ2LjI1LTIuMjY1LTMuMjcxTDE2IDMuMDI0IDEyLjU1NCAxLjA3IDEwLjI4OSA0LjM0bC0zLjk0Ni0uMjUtLjYzNiAzLjk0MS0zLjY2NSAxLjUwNSAxLjEyIDMuODMyTC41MDggMTYuMzNsMi42NTYgMi45NjItMS4xMiAzLjgzMiAzLjY2NCAxLjUwNC42MzYgMy45NDIgMy45NDYtLjI1IDIuMjY1IDMuMjdMMTYgMjkuNjM4bDMuNDQ2IDEuOTU1eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1zdGFyIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMjUuMjkyIDI5Ljg3OGwtMS43NzUtMTAuMzQ2IDcuNTE3LTcuMzI3LTEwLjM4OC0xLjUxTDE2IDEuMjgybC00LjY0NiA5LjQxMy0xMC4zODggMS41MSA3LjUxNyA3LjMyNy0xLjc3NSAxMC4zNDZMMTYgMjQuOTkzbDkuMjkyIDQuODg1eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNMTEuOTIzIDE5LjEzNkw1LjQyNCAyMmwuNzE1LTcuMDY1LTQuNzMxLTUuMjk2IDYuOTQtMS41MDNMMTEuOTIzIDJsMy41NzQgNi4xMzYgNi45NCAxLjUwMy00LjczMSA1LjI5NkwxOC40MiAyMnoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLW1hc2stbG9hZCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTguMDEgNGExMS43OTggMTEuNzk4IDAgMCAwIDAgMUgzdjI0aDI0VjE0Ljk4NmE4LjczOCA4LjczOCAwIDAgMCAxIDBWMjlhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWNWExIDEgMCAwIDEgMS0xaDE1LjAxek0xNSAyM2E2IDYgMCAxIDEgMC0xMiA2IDYgMCAwIDEgMCAxMnptMC0xYTUgNSAwIDEgMCAwLTEwIDUgNSAwIDAgMCAwIDEweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMjUgM2gxdjloLTF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yMiA2bDMuNS0zLjVMMjkgNiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtbWFzayIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjQuNSIgc3Ryb2tlPSJpbmhlcml0IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yIDFoMjBhMSAxIDAgMCAxIDEgMXYyMGExIDEgMCAwIDEtMSAxSDJhMSAxIDAgMCAxLTEtMVYyYTEgMSAwIDAgMSAxLTF6bTAgMXYyMGgyMFYySDJ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1yZWRvIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgb3BhY2l0eT0iLjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIxIDZIOWE2IDYgMCAxIDAgMCAxMmgxMnYxSDlBNyA3IDAgMCAxIDkgNWgxMnYxeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBkPSJNMTkgM2wyLjUgMi41TDE5IDgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJlc2V0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgb3BhY2l0eT0iLjUiIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMiAxM3YtMWE3IDcgMCAwIDEgNy03aDEzdjFoLTF2NWgxdjFhNyA3IDAgMCAxLTcgN0gydi0xaDF2LTVIMnptNy03YTYgNiAwIDAgMC02IDZ2NmgxMmE2IDYgMCAwIDAgNi02VjZIOXoiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgZD0iTTE5IDNsMi41IDIuNUwxOSA4TTUgMTZsLTIuNSAyLjVMNSAyMSIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtcm90YXRlLWNsb2Nrd2lzZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTI5IDE3aC0uOTI0YzAgNi42MjctNS4zNzMgMTItMTIgMTItNi42MjggMC0xMi01LjM3My0xMi0xMkM0LjA3NiAxMC4zOTggOS40MDcgNS4wNDEgMTYgNVY0QzguODIgNCAzIDkuODIgMyAxN3M1LjgyIDEzIDEzIDEzIDEzLTUuODIgMTMtMTN6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0xNiAxLjVsNCAzLTQgMyIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0xNiA0aDR2MWgtNHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJvdGF0ZS1jb3VudGVyY2xvY2t3aXNlIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBkPSJNMyAxN2guOTI0YzAgNi42MjcgNS4zNzMgMTIgMTIgMTIgNi42MjggMCAxMi01LjM3MyAxMi0xMiAwLTYuNjAyLTUuMzMxLTExLjk2LTExLjkyNC0xMlY0YzcuMTggMCAxMyA1LjgyIDEzIDEzcy01LjgyIDEzLTEzIDEzUzMgMjQuMTggMyAxN3oiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTIgNGg0djFoLTR6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0xNiAxLjVsLTQgMyA0IDMiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJvdGF0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIHN0cm9rZT0ibm9uZSIgZD0iTTguMzQ5IDIyLjI1NGExMC4wMDIgMTAuMDAyIDAgMCAxLTIuNzc4LTEuNzE5bC42NS0uNzZhOS4wMDIgOS4wMDIgMCAwIDAgMi40OTUgMS41NDhsLS4zNjcuOTMxem0yLjg3My43MDRsLjA3OC0uOTk3YTkgOSAwIDEgMC0uNTU3LTE3Ljg1MmwtLjE0LS45OUExMC4wNzYgMTAuMDc2IDAgMCAxIDEyLjE0NSAzYzUuNTIzIDAgMTAgNC40NzcgMTAgMTBzLTQuNDc3IDEwLTEwIDEwYy0uMzEyIDAtLjYyLS4wMTQtLjkyNC0uMDQyem0tNy41NTYtNC42NTVhOS45NDIgOS45NDIgMCAwIDEtMS4yNTMtMi45OTZsLjk3My0uMjM0YTguOTQ4IDguOTQ4IDAgMCAwIDEuMTI0IDIuNjkzbC0uODQ0LjUzN3ptLTEuNTAyLTUuOTFBOS45NDkgOS45NDkgMCAwIDEgMi44OCA5LjIzbC45MjUuMzgyYTguOTU0IDguOTU0IDAgMCAwLS42NDQgMi44NDRsLS45OTgtLjA2MnptMi4yMS01LjY4NmMuNjg3LS44NDggMS41MS0xLjU4IDIuNDM2LTIuMTY2bC41MjMuODUyYTkuMDQ4IDkuMDQ4IDAgMCAwLTIuMTg4IDEuOTVsLS43NzEtLjYzNnoiLz4KICAgIDxwYXRoIHN0cm9rZT0iaW5oZXJpdCIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgZD0iTTEzIDFsLTIuNSAyLjVMMTMgNiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtc2hhcGUtY2lyY2xlIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTQuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1zaGFwZS1yZWN0YW5nbGUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cmVjdCB3aWR0aD0iMjciIGhlaWdodD0iMjciIHg9IjIuNSIgeT0iMi41IiBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHJ4PSIxIi8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1zaGFwZS10cmlhbmdsZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTE2IDIuNWwxNS41IDI3SC41eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtc2hhcGUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xNC43MDYgOEgyMWExIDEgMCAwIDEgMSAxdjEyYTEgMSAwIDAgMS0xIDFIOWExIDEgMCAwIDEtMS0xdi00aDF2NGgxMlY5aC01LjcwNmwtLjU4OC0xeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik04LjUgMS41bDcuNSAxM0gxeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdGV4dC1hbGlnbi1jZW50ZXIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIgNWgyOHYxSDJ6TTggMTJoMTZ2MUg4ek0yIDE5aDI4djFIMnpNOCAyNmgxNnYxSDh6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWFsaWduLWxlZnQiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIgNWgyOHYxSDJ6TTIgMTJoMTZ2MUgyek0yIDE5aDI4djFIMnpNMiAyNmgxNnYxSDJ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWFsaWduLXJpZ2h0IiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJub25lIiBkPSJNMCAwaDMydjMySDB6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yIDVoMjh2MUgyek0xNCAxMmgxNnYxSDE0ek0yIDE5aDI4djFIMnpNMTQgMjZoMTZ2MUgxNHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXRleHQtYm9sZCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNNyAyaDJ2Mkg3ek03IDI4aDJ2Mkg3eiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik05IDN2MTJoOWE2IDYgMCAxIDAgMC0xMkg5ek05IDE1djE0aDEwYTcgNyAwIDAgMCAwLTE0SDl6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWl0YWxpYyIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTUgMmg1djFoLTV6TTExIDI5aDV2MWgtNXpNMTcgM2gxbC00IDI2aC0xeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdGV4dC11bmRlcmxpbmUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTggMnYxNGE4IDggMCAxIDAgMTYgMFYyaDF2MTRhOSA5IDAgMCAxLTE4IDBWMmgxek0zIDI5aDI2djFIM3oiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTUgMmg1djFINXpNMjIgMmg1djFoLTV6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNNCAzaDE1YTEgMSAwIDAgMSAxIDFIM2ExIDEgMCAwIDEgMS0xek0zIDRoMXYxSDN6TTE5IDRoMXYxaC0xeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTEgM2gxdjE4aC0xeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTAgMjBoM3YxaC0zeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdW5kbyIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0yNCAwSDB2MjRoMjR6IiBvcGFjaXR5PSIuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiAvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMyA2aDEyYTYgNiAwIDEgMSAwIDEySDN2MWgxMmE3IDcgMCAwIDAgMC0xNEgzdjF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik01IDNMMi41IDUuNSA1IDgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXpvb20taW4iIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI5IC0yOTApIHRyYW5zbGF0ZSgyMjkgMjkwKSI+CiAgICAgICAgPGNpcmNsZSBjeD0iMTAuNSIgY3k9IjEwLjUiIHI9IjkiIHN0cm9rZT0iaW5oZXJpdCIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIGQ9Ik0xOC44MjggMTUuODI4SDE5LjgyOFYyMi44MjhIMTguODI4eiIgdHJhbnNmb3JtPSJyb3RhdGUoLTQ1IDE5LjMyOCAxOS4zMjgpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgZD0iTTcgMTBIMTRWMTFIN3oiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBkPSJNMTAgN0gxMVYxNEgxMHoiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXpvb20tb3V0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2MyAtMjkwKSB0cmFuc2xhdGUoMjYzIDI5MCkiPgogICAgICAgIDxjaXJjbGUgY3g9IjEwLjUiIGN5PSIxMC41IiByPSI5IiBzdHJva2U9ImluaGVyaXQiIGZpbGw9Im5vbmUiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBkPSJNMTguODI4IDE1LjgyOEgxOS44MjhWMjIuODI4SDE4LjgyOHoiIHRyYW5zZm9ybT0icm90YXRlKC00NSAxOS4zMjggMTkuMzI4KSIvPgogICAgICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIGQ9Ik03IDEwSDE0VjExSDd6Ii8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oYW5kIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik04LjY3MiAzLjM2YzEuMzI4IDAgMi4xMTQuNzggMi4yOSAxLjg2OWwuMDE0LjEwMS4wMjMuMDA2djEuMDQybC0uNjM4LS4xODVjLS4xODctLjA1NS0uMzIzLS4yMTEtLjM1NC0uMzk5TDEwIDUuNzEzYzAtLjgyNS0uNDItMS4zNTMtMS4zMjgtMS4zNTNDNy42OTUgNC4zNiA3IDUuMDQxIDcgNS43MTN2Ny45NDFjMCAuNDM5LS41MjQuNjY1LS44NDMuMzY0bC0xLjg2OC0xLjc2MWMtLjU5NS0uNTI4LTEuMzE2LS42MTctMS45MTgtLjIxNi0uNTIyLjM0OC0uNTYyIDEuMjAzLS4xOCAxLjhMNy43MzggMjJoMTEuMDEzbC4yODUtLjUxOGMxLjI0Ny0yLjMyNiAxLjg5Ny00LjI1OSAxLjk2LTUuNzg1bC4wMDQtLjIzOVY4LjAzNWMwLS42NTYtLjUtMS4xNy0xLTEuMTctLjUwMyAwLTEgLjQ1Ni0xIDEuMTcgMCAuMzMzLS4zMi41NzMtLjY0LjQ4TDE4IDguNDFWNy4zNjhsLjA4Ni4wMjYuMDQyLS4xMzZjLjI3OS0uODA1Ljk3OC0xLjMzMiAxLjczOC0xLjM4OEwyMCA1Ljg2NWMxLjA1NyAwIDIgLjk2NyAyIDIuMTd2Ny40MjNjMCAxLjkyOS0uODQ1IDQuMzUyLTIuNTIxIDcuMjktLjA5LjE1Ni0uMjU1LjI1Mi0uNDM1LjI1Mkg3LjQ3NGMtLjE2NiAwLS4zMjEtLjA4Mi0uNDE0LS4yMTlsLTUuNzA0LTguMzljLS42NTMtMS4wMTktLjU4NC0yLjQ4Ni40Ni0zLjE4MiAxLS42NjYgMi4yMTYtLjUxNiAzLjE0OC4zMUw2IDEyLjQ5NVY1LjcxM2MwLTEuMTggMS4wNTgtMi4yNjMgMi40OS0yLjM0OHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yOTcgLTI5MCkgdHJhbnNsYXRlKDI5NyAyOTApIi8+CiAgICAgICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTIuNSAxLjVjMS4zMjUgMCAyLjQxIDEuMDMyIDIuNDk1IDIuMzM2TDE1IDR2Ny4yMmgtMVY0YzAtLjgyOC0uNjcyLTEuNS0xLjUtMS41LS43OCAwLTEuNDIuNTk1LTEuNDkzIDEuMzU2TDExIDR2Ny4yMmgtMVY0YzAtMS4zOCAxLjEyLTIuNSAyLjUtMi41eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI5NyAtMjkwKSB0cmFuc2xhdGUoMjk3IDI5MCkiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0xNi41IDMuNWMxLjMyNSAwIDIuNDEgMS4wMzIgMi40OTUgMi4zMzZMMTkgNnY2LjNoLTFWNmMwLS44MjgtLjY3Mi0xLjUtMS41LTEuNS0uNzggMC0xLjQyLjU5NS0xLjQ5MyAxLjM1NkwxNSA2djIuNDRoLTFWNmMwLTEuMzggMS4xMi0yLjUgMi41LTIuNXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yOTcgLTI5MCkgdHJhbnNsYXRlKDI5NyAyOTApIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8L2RlZnM+Cjwvc3ZnPgo="},4858:function(S){S.exports=It},4960:function(){},6759:function(){},6272:function(){}},$={};function X(S){var D=$[S];if(D!==void 0)return D.exports;var v=$[S]={exports:{}};return Wt[S](v,v.exports,X),v.exports}(function(){X.n=function(S){var D=S&&S.__esModule?function(){return S.default}:function(){return S};return X.d(D,{a:D}),D}})(),function(){X.d=function(S,D){for(var v in D)X.o(D,v)&&!X.o(S,v)&&Object.defineProperty(S,v,{enumerable:!0,get:D[v]})}}(),function(){X.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){X.o=function(S,D){return Object.prototype.hasOwnProperty.call(S,D)}}();var dt={};return function(){X.d(dt,{default:function(){return ru}});var S=X(9131),D=X.n(S),v=X(1899),f=X.n(v),A=X(6562),O=X.n(A),L=X(1734),w=X.n(L),k=X(8005),d=X.n(k),r=X(6065),h=X.n(r),u=X(4496),t=X.n(u);Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(M){var g=this;do{if(Element.prototype.matches.call(g,M))return g;g=g.parentElement||g.parentNode}while(g!==null&&g.nodeType===1);return null});/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function(M){if("Element"in M){var g="classList",i="prototype",l=M.Element[i],e=Object,c=D()(String[i])||function(){return this.replace(/^\s+|\s+$/g,"")},C=f()(Array[i])||function(it){for(var ut=0,st=this.length;ut<st;ut++)if(ut in this&&this[ut]===it)return ut;return-1},x=function(ut,st){this.name=ut,this.code=DOMException[ut],this.message=st},E=function(ut,st){if(st==="")throw new x("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(st))throw new x("INVALID_CHARACTER_ERR","The token must not contain space characters.");return C.call(ut,st)},_=function(ut){for(var st=c.call(ut.getAttribute("class")||""),ft=st?st.split(/\s+/):[],wt=0,Jt=ft.length;wt<Jt;wt++)this.push(ft[wt]);this._updateClassName=function(){ut.setAttribute("class",this.toString())}},N=_[i]=[],R=function(){return new _(this)};if(x[i]=Error[i],N.item=function(it){return this[it]||null},N.contains=function(it){return~E(this,it+"")},N.add=function(){var it=arguments,ut=0,st=it.length,ft,wt=!1;do ft=it[ut]+"",~E(this,ft)||(this.push(ft),wt=!0);while(++ut<st);wt&&this._updateClassName()},N.remove=function(){var it=arguments,ut=0,st=it.length,ft,wt=!1,Jt;do for(ft=it[ut]+"",Jt=E(this,ft);~Jt;){var Kt;O()(Kt=this).call(Kt,Jt,1),wt=!0,Jt=E(this,ft)}while(++ut<st);wt&&this._updateClassName()},N.toggle=function(it,ut){var st=this.contains(it),ft=st?ut!==!0&&"remove":ut!==!1&&"add";return ft&&this[ft](it),ut===!0||ut===!1?ut:!st},N.replace=function(it,ut){var st=E(it+"");if(~st){var ft;O()(ft=this).call(ft,st,1,ut),this._updateClassName()}},N.toString=function(){return this.join(" ")},w()){var et={get:R,enumerable:!0,configurable:!0};try{w()(l,g,et)}catch(it){(it.number===void 0||it.number===-2146823252)&&(et.enumerable=!1,w()(l,g,et))}}else e[i].__defineGetter__&&l.__defineGetter__(g,R)}}(self),function(){var M=document.createElement("_");if(M.classList.add("c1","c2"),!M.classList.contains("c2")){var g=function(e){var c=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(C){var x,E=arguments.length;for(x=0;x<E;x++)C=arguments[x],c.call(this,C)}};g("add"),g("remove")}if(M.classList.toggle("c3",!1),M.classList.contains("c3")){var i=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(l,e){return 1 in arguments&&!this.contains(l)==!e?e:i.call(this,l)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(l,e){var c=this.toString().split(" "),C=f()(c).call(c,l+"");~C&&(c=d()(c).call(c,C),this.remove.apply(this,c),this.add(e),this.add.apply(this,d()(c).call(c,1)))}),M=null}());/*!
 * @copyright Copyright (c) 2017 IcoMoon.io
 * @license   Licensed under MIT license
 *            See https://github.com/Keyamoon/svgxuse
 * @version   1.2.6
 */(function(){if(typeof window<"u"&&window.addEventListener){var M=h()(null),g,i,l=function(){clearTimeout(i),i=t()(g,100)},e=function(){},c=function(){var N;window.addEventListener("resize",l,!1),window.addEventListener("orientationchange",l,!1),window.MutationObserver?(N=new MutationObserver(l),N.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}),e=function(){try{N.disconnect(),window.removeEventListener("resize",l,!1),window.removeEventListener("orientationchange",l,!1)}catch{}}):(document.documentElement.addEventListener("DOMSubtreeModified",l,!1),e=function(){document.documentElement.removeEventListener("DOMSubtreeModified",l,!1),window.removeEventListener("resize",l,!1),window.removeEventListener("orientationchange",l,!1)})},C=function(N){function R(st){var ft;return st.protocol!==void 0?ft=st:(ft=document.createElement("a"),ft.href=st),ft.protocol.replace(/:/g,"")+ft.host}var et,it,ut;return window.XMLHttpRequest&&(et=new XMLHttpRequest,it=R(location),ut=R(N),et.withCredentials===void 0&&ut!==""&&ut!==it?et=XDomainRequest||void 0:et=XMLHttpRequest),et},x="http://www.w3.org/1999/xlink";g=function(){var N,R,et,it,ut,st=0,ft,wt,Jt,Kt,qt;function zt(){st-=1,st===0&&(e(),c())}function se(xe){return function(){M[xe.base]!==!0&&(xe.useEl.setAttributeNS(x,"xlink:href","#"+xe.hash),xe.useEl.hasAttribute("href")&&xe.useEl.setAttribute("href","#"+xe.hash))}}function Ee(xe){return function(){var Re=document.body,Ve=document.createElement("x"),ke;xe.onload=null,Ve.innerHTML=xe.responseText,ke=Ve.getElementsByTagName("svg")[0],ke&&(ke.setAttribute("aria-hidden","true"),ke.style.position="absolute",ke.style.width=0,ke.style.height=0,ke.style.overflow="hidden",Re.insertBefore(ke,Re.firstChild)),zt()}}function Oe(xe){return function(){xe.onerror=null,xe.ontimeout=null,zt()}}for(e(),Kt=document.getElementsByTagName("use"),ut=0;ut<Kt.length;ut+=1){try{R=Kt[ut].getBoundingClientRect()}catch{R=!1}it=Kt[ut].getAttribute("href")||Kt[ut].getAttributeNS(x,"href")||Kt[ut].getAttribute("xlink:href"),it&&it.split?Jt=it.split("#"):Jt=["",""],N=Jt[0],et=Jt[1],ft=R&&R.left===0&&R.right===0&&R.top===0&&R.bottom===0,R&&R.width===0&&R.height===0&&!ft?(Kt[ut].hasAttribute("href")&&Kt[ut].setAttributeNS(x,"xlink:href",it),N.length&&(qt=M[N],qt!==!0&&t()(se({useEl:Kt[ut],base:N,hash:et}),0),qt===void 0&&(wt=C(N),wt!==void 0&&(qt=new wt,M[N]=qt,qt.onload=Ee(qt),qt.onerror=Oe(qt),qt.ontimeout=Oe(qt),qt.open("GET",N),qt.send(),st+=1)))):ft?N.length&&M[N]&&t()(se({useEl:Kt[ut],base:N,hash:et}),0):M[N]===void 0?M[N]=!0:M[N].onload&&(M[N].abort(),delete M[N].onload,M[N]=!0)}Kt="",st+=1,zt()};var E;E=function(){window.removeEventListener("load",E,!1),i=t()(g,0)},document.readyState!=="complete"?window.addEventListener("load",E,!1):E()}})();var a=X(1845);function n(M,g){(g==null||g>M.length)&&(g=M.length);for(var i=0,l=new Array(g);i<g;i++)l[i]=M[i];return l}function s(M){if(a(M))return n(M)}var m=X(184),o=X(662),p=X(7172);function y(M){if(typeof m<"u"&&o(M)!=null||M["@@iterator"]!=null)return p(M)}var I=X(711);function b(M,g){var i;if(!!M){if(typeof M=="string")return n(M,g);var l=I(i=Object.prototype.toString.call(M)).call(i,8,-1);if(l==="Object"&&M.constructor&&(l=M.constructor.name),l==="Map"||l==="Set")return p(M);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return n(M,g)}}function T(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P(M){return s(M)||y(M)||b(M)||T()}var z=X(7077);function j(M,g,i){return g in M?z(M,g,{value:i,enumerable:!0,configurable:!0,writable:!0}):M[g]=i,M}function H(M,g){if(!(M instanceof g))throw new TypeError("Cannot call a class as a function")}function nt(M,g){for(var i=0;i<g.length;i++){var l=g[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),z(M,l.key,l)}}function q(M,g,i){return g&&nt(M.prototype,g),i&&nt(M,i),M}var Ct=X(4426),V=X.n(Ct),pt=X(9406),F=X.n(pt),Rt=X(8189),yt=X.n(Rt),Ft=X(3972),K=X.n(Ft),at=X(2777),J=X(961),Y=X.n(J),lt=X(5695),B=X.n(lt),U=X(8592),G=X.n(U),Z=X(9052),gt=X.n(Z),ht=X(2560),St=X.n(ht),bt=X(2461),xt=X.n(bt);function rt(M){if(a(M))return M}function Q(M,g){var i=M==null?null:typeof m<"u"&&o(M)||M["@@iterator"];if(i!=null){var l=[],e=!0,c=!1,C,x;try{for(i=i.call(M);!(e=(C=i.next()).done)&&(l.push(C.value),!(g&&l.length===g));e=!0);}catch(E){c=!0,x=E}finally{try{!e&&i.return!=null&&i.return()}finally{if(c)throw x}}return l}}function tt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ot(M,g){return rt(M)||Q(M,g)||b(M,g)||tt()}var ct=X(6397),vt=X.n(ct),Ot=X(7636),Ut=X.n(Ot),Bt=X(789),mt=X.n(Bt),Yt=X(4729),Zt=X.n(Yt),te=X(1610),ve=X.n(te),ae=X(3053),le=X.n(ae),ee,ce=["zoomIn","zoomOut","hand"],ye=["history","undo","redo","reset"],be=["delete","deleteAll"],Tt=F()(ee=[]).call(ee,ce,ye,be),At={FILTER:"filter",COLOR:"color"},jt=["rect","circle","triangle"],Ht={CROPZONE:"cropzone"},Xt={VINTAGE:"vintage",SEPIA2:"sepia2",REMOVE_COLOR:"removeColor",COLOR_FILTER:"colorFilter",REMOVE_WHITE:"removeWhite",BLEND_COLOR:"blendColor",BLEND:"blend"},Pt=Vt("IMAGE_LOADER","CROPPER","FLIP","ROTATION","FREE_DRAWING","LINE","TEXT","ICON","FILTER","SHAPE","ZOOM","RESIZE"),Ce={lockSkewingX:!0,lockSkewingY:!0,bringForward:!0,isRegular:!1},Ie={hasRotatingPoint:!1,hasBorders:!1,lockScalingFlip:!0,lockRotation:!0,lockSkewingX:!0,lockSkewingY:!0},Gt={CLEAR_OBJECTS:"clearObjects",LOAD_IMAGE:"loadImage",FLIP_IMAGE:"flip",ROTATE_IMAGE:"rotate",ADD_OBJECT:"addObject",REMOVE_OBJECT:"removeObject",APPLY_FILTER:"applyFilter",REMOVE_FILTER:"removeFilter",ADD_ICON:"addIcon",CHANGE_ICON_COLOR:"changeIconColor",ADD_SHAPE:"addShape",CHANGE_SHAPE:"changeShape",ADD_TEXT:"addText",CHANGE_TEXT:"changeText",CHANGE_TEXT_STYLE:"changeTextStyle",ADD_IMAGE_OBJECT:"addImageObject",RESIZE_CANVAS_DIMENSION:"resizeCanvasDimension",SET_OBJECT_PROPERTIES:"setObjectProperties",SET_OBJECT_POSITION:"setObjectPosition",CHANGE_SELECTION:"changeSelection",RESIZE_IMAGE:"resize"},Mt={OBJECT_ACTIVATED:"objectActivated",OBJECT_MOVED:"objectMoved",OBJECT_SCALED:"objectScaled",OBJECT_CREATED:"objectCreated",OBJECT_ROTATED:"objectRotated",OBJECT_ADDED:"objectAdded",OBJECT_MODIFIED:"objectModified",TEXT_EDITING:"textEditing",TEXT_CHANGED:"textChanged",ICON_CREATE_RESIZE:"iconCreateResize",ICON_CREATE_END:"iconCreateEnd",ADD_TEXT:"addText",ADD_OBJECT:"addObject",ADD_OBJECT_AFTER:"addObjectAfter",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",MOUSE_MOVE:"mousemove",REDO_STACK_CHANGED:"redoStackChanged",UNDO_STACK_CHANGED:"undoStackChanged",SELECTION_CLEARED:"selectionCleared",SELECTION_CREATED:"selectionCreated",EXECUTE_COMMAND:"executeCommand",AFTER_UNDO:"afterUndo",AFTER_REDO:"afterRedo",ZOOM_CHANGED:"zoomChanged",HAND_STARTED:"handStarted",HAND_STOPPED:"handStopped",KEY_DOWN:"keydown",KEY_UP:"keyup",INPUT_BOX_EDITING_STARTED:"inputBoxEditingStarted",INPUT_BOX_EDITING_STOPPED:"inputBoxEditingStopped",FOCUS:"focus",BLUR:"blur",IMAGE_RESIZED:"imageResized"},ge={COLOR_PICKER_INPUT_BOX:".tui-colorpicker-palette-hex"},ie={LOAD_IMAGE:"Load",LOAD_MASK_IMAGE:"Mask",ADD_MASK_IMAGE:"Mask",ADD_IMAGE_OBJECT:"Mask",CROP:"Crop",RESIZE:"Resize",APPLY_FILTER:"Filter",REMOVE_FILTER:"Filter",CHANGE_SHAPE:"Shape",CHANGE_ICON_COLOR:"Icon",ADD_TEXT:"Text",CHANGE_TEXT_STYLE:"Text",REMOVE_OBJECT:"Delete",CLEAR_OBJECTS:"Delete"},oe=Vt("NORMAL","CROPPER","FREE_DRAWING","LINE_DRAWING","TEXT","SHAPE","ICON","ZOOM","RESIZE"),Ae={TEXT:"text",CROP:"crop",RESIZE:"resize",SHAPE:"shape",ZOOM:"zoom"},Te={DEFAULT:"normal",ZOOM:"zoom",HAND:"hand"},me={Z:90,Y:89,C:67,V:86,SHIFT:16,BACKSPACE:8,DEL:46,ARROW_DOWN:40,ARROW_UP:38,SPACE:32,DIGIT_0:48,DIGIT_9:57},Ne={SELECTION_STYLE:{borderColor:"red",cornerColor:"green",cornerSize:10,originX:"center",originY:"center",transparentCorners:!1}},ue={addedObject:"The object is already added.",flip:"The flipX and flipY setting values are not changed.",invalidDrawingMode:"This operation is not supported in the drawing mode.",invalidParameters:"Invalid parameters.",isLock:"The executing command state is locked.",loadImage:"The background image is empty.",loadingImageFailed:"Invalid image loaded.",noActiveObject:"There is no active object.",noObject:"The object is not in canvas.",redo:"The promise of redo command is reject.",rotation:"The current angle is same the old angle.",undo:"The promise of undo command is reject.",unsupportedOperation:"Unsupported operation.",unsupportedType:"Unsupported object type."},ci={"icon-arrow":"M40 12V0l24 24-24 24V36H0V12h40z","icon-arrow-2":"M49,32 H3 V22 h46 l-18,-18 h12 l23,23 L43,50 h-12 l18,-18  z ","icon-arrow-3":"M43.349998,27 L17.354,53 H1.949999 l25.996,-26 L1.949999,1 h15.404 L43.349998,27  z ","icon-star":"M35,54.557999 l-19.912001,10.468 l3.804,-22.172001 l-16.108,-15.7 l22.26,-3.236 L35,3.746 l9.956,20.172001 l22.26,3.236 l-16.108,15.7 l3.804,22.172001  z ","icon-star-2":"M17,31.212 l-7.194,4.08 l-4.728,-6.83 l-8.234,0.524 l-1.328,-8.226 l-7.644,-3.14 l2.338,-7.992 l-5.54,-6.18 l5.54,-6.176 l-2.338,-7.994 l7.644,-3.138 l1.328,-8.226 l8.234,0.522 l4.728,-6.83 L17,-24.312 l7.194,-4.08 l4.728,6.83 l8.234,-0.522 l1.328,8.226 l7.644,3.14 l-2.338,7.992 l5.54,6.178 l-5.54,6.178 l2.338,7.992 l-7.644,3.14 l-1.328,8.226 l-8.234,-0.524 l-4.728,6.83  z ","icon-polygon":"M3,31 L19,3 h32 l16,28 l-16,28 H19  z ","icon-location":"M24 62C8 45.503 0 32.837 0 24 0 10.745 10.745 0 24 0s24 10.745 24 24c0 8.837-8 21.503-24 38zm0-28c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10z","icon-heart":"M49.994999,91.349998 l-6.96,-6.333 C18.324001,62.606995 2.01,47.829002 2.01,29.690998 C2.01,14.912998 13.619999,3.299999 28.401001,3.299999 c8.349,0 16.362,5.859 21.594,12 c5.229,-6.141 13.242001,-12 21.591,-12 c14.778,0 26.390999,11.61 26.390999,26.390999 c0,18.138 -16.314001,32.916 -41.025002,55.374001 l-6.96,6.285  z ","icon-bubble":"M44 48L34 58V48H12C5.373 48 0 42.627 0 36V12C0 5.373 5.373 0 12 0h40c6.627 0 12 5.373 12 12v24c0 6.627-5.373 12-12 12h-8z"},ui={realTimeEvent:!0,min:-360,max:360,value:0},hi={min:5,max:30,value:12},qe={realTimeEvent:!0,min:2,max:300,value:3},fi={realTimeEvent:!0,min:10,max:100,value:50},Be={tintOpacityRange:{realTimeEvent:!0,min:0,max:1,value:.7,useDecimal:!0},removewhiteDistanceRange:{realTimeEvent:!0,min:0,max:1,value:.2,useDecimal:!0},brightnessRange:{realTimeEvent:!0,min:-1,max:1,value:0,useDecimal:!0},noiseRange:{realTimeEvent:!0,min:0,max:1e3,value:100},pixelateRange:{realTimeEvent:!0,min:2,max:20,value:4},colorfilterThresholdRange:{realTimeEvent:!0,min:0,max:1,value:.2,useDecimal:!0},blurFilterRange:{value:.1}},Qe={LEFT:0,TOP:0,WIDTH:.5,HEIGHT:.5},Ye={realTimeEvent:!0,min:32,max:4088,value:800},we=2,ti="tui-image-editor-",di=Math.min,W=Math.max,Dt=!1,_t=0;function kt(M){return M.__fe_id||(_t+=1,M.__fe_id=_t),M.__fe_id}function Nt(M){return typeof M=="function"}function $t(M,g,i){if(g>i){var l=[i,g];g=l[0],i=l[1]}return W(g,di(M,i))}function Vt(){for(var M={},g=arguments.length,i=new Array(g),l=0;l<g;l++)i[l]=arguments[l];return G()(i,function(e){M[e]=e}),M}function he(M,g){var i={},l=g.length,e=0,c;for(e=0;e<l;e+=1)c=g[e],i[c]=M[c];return i}function ne(M){return vt()(M,10)}function Se(M){return M.replace(/-([a-z])/g,function(g,i){return i.toUpperCase()})}function _e(){return!!(window.File&&window.FileList&&window.FileReader)}function Lt(M,g){var i,l,e;if(M.length===4){var c;M=F()(c="".concat(M)).call(c,d()(M).call(M,1,4))}var C=vt()(d()(M).call(M,1,3),16),x=vt()(d()(M).call(M,3,5),16),E=vt()(d()(M).call(M,5,7),16),_=g||1;return F()(i=F()(l=F()(e="rgba(".concat(C,", ")).call(e,x,", ")).call(l,E,", ")).call(i,_,")")}function Me(){Dt||(Dt=!0,Zt()("image-editor","UA-129999381-1"))}function je(M,g){var i=document.getElementsByTagName("head"),l=ot(i,1),e=l[0],c=document.createElement("link"),C=encodeURIComponent(M);g&&(c.id=g),c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),c.setAttribute("href","data:text/css;charset=UTF-8,".concat(C)),e.appendChild(c)}function ei(M){return function(g){return M.querySelector(g)}}function gi(M){var g=/data:(image\/.+);base64,/,i="",l,e,c;l=M.replace(g,function(x,E){return i=E,""}),l=atob(l);var C=l.length;for(e=new Uint8Array(C),c=0;c<C;c+=1)e[c]=l.charCodeAt(c);return new Blob([e],{type:i})}function vi(M){return Number(M.toFixed(we))}function De(M){G()(M,function(g,i){M[i]=null})}function mi(){var M,g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(g.charAt(0)==="."){var l;return F()(l=".".concat(ti).concat(i)).call(l,d()(g).call(g,1))}return F()(M="".concat(ti).concat(i)).call(M,g)}function jr(M,g){var i=g.originX,l=g.originY,e=M.getPointByOrigin(i,l),c=e.x,C=e.y;M.set({left:c,top:C,originX:i,originY:l}),M.setCoords()}function Rr(M){var g,i={};return Ut()(g=xt()(M)).call(g,function(l){i[M[l]]=l}),i}function Gi(M,g){M.customProps=M.customProps||{},Y()(M.customProps,g)}function ii(M,g){var i={};return St()(g)&&(g=[g]),G()(g,function(l){i[l]=M.customProps[l]}),i}function zr(M){return M.charAt(0).toUpperCase()+d()(M).call(M,1)}function pi(M,g){return f()(M).call(M,g)>=0}function un(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ve()(M,"type")||At.COLOR}function Xi(M){var g=mt()(M),i=g===void 0?{}:g;return i.source?At.FILTER:At.COLOR}function hn(M){return le()(M.get("type"),jt)>=0}function Zi(M){if(pi(jt,M))return"Shape";switch(M){case"i-text":return"Text";case"path":case"line":return"Draw";case"activeSelection":return"Group";default:return fn(M)}}function Fr(M){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=g.useAlpha,l=i===void 0?!0:i,e=g.mode,c=Xt.VINTAGE,C=Xt.REMOVE_COLOR,x=Xt.BLEND_COLOR,E=Xt.SEPIA2,_=Xt.COLOR_FILTER,N=Xt.REMOVE_WHITE,R=Xt.BLEND,et;switch(M){case c:et=E;break;case C:et=l?_:N;break;case x:et=e==="add"?R:e;break;default:et=M}return fn(et)}function Br(M){var g=Gt.LOAD_IMAGE;return typeof M=="string"?g===M:g===M.name}function Hr(M){var g,i,l=Gt.FLIP_IMAGE,e=Gt.ROTATE_IMAGE,c=Gt.ADD_TEXT,C=Gt.APPLY_FILTER,x=Gt.REMOVE_FILTER,E=Gt.CHANGE_SHAPE,_=Gt.CHANGE_ICON_COLOR,N=Gt.CHANGE_TEXT_STYLE,R=Gt.CLEAR_OBJECTS,et=Gt.ADD_IMAGE_OBJECT,it=Gt.REMOVE_OBJECT,ut=Gt.RESIZE_IMAGE,st=M.name,ft=M.args,wt;switch(st){case l:wt={name:st,detail:ft[1]==="reset"?ft[1]:d()(g=ft[1]).call(g,4)};break;case e:wt={name:st,detail:ft[2]};break;case C:wt={name:ie.APPLY_FILTER,detail:Fr(ft[1],ft[2])};break;case x:wt={name:ie.REMOVE_FILTER,detail:"Remove"};break;case E:wt={name:ie.CHANGE_SHAPE,detail:"Change"};break;case _:wt={name:ie.CHANGE_ICON_COLOR,detail:"Change"};break;case N:wt={name:ie.CHANGE_TEXT_STYLE,detail:"Change"};break;case it:wt={name:ie.REMOVE_OBJECT,detail:ft[2]};break;case R:wt={name:ie.CLEAR_OBJECTS,detail:"All"};break;case et:wt={name:ie.ADD_IMAGE_OBJECT,detail:"Add"};break;case c:wt={name:ie.ADD_TEXT};break;case ut:wt={name:ie.RESIZE,detail:F()(i="".concat(~~ft[1].width,"x")).call(i,~~ft[1].height)};break;default:wt={name:st};break}return ft[1]==="mask"&&(wt={name:ie.LOAD_MASK_IMAGE,detail:"Apply"}),wt}function Ur(M){return M==="top"?"bottom":M==="left"?"right":M==="right"?"left":"top"}function fn(M){return M.replace(/[a-z]/,function(g){return g.toUpperCase()})}function Yr(M){var g=M.left,i=M.top,l=M.width,e=M.height,c=Qe.LEFT,C=Qe.TOP,x=Qe.WIDTH,E=Qe.HEIGHT;return g===c&&i===C&&l===x&&e===E}var Wr=Vt("UN_IMPLEMENTATION","NO_COMPONENT_NAME"),dn={UN_IMPLEMENTATION:"Should implement a method: ",NO_COMPONENT_NAME:"Should set a component name"},Gr={UN_IMPLEMENTATION:function(g){return dn.UN_IMPLEMENTATION+g},NO_COMPONENT_NAME:function(){return dn.NO_COMPONENT_NAME}},yi={types:Y()({},Wr),create:function(g){g=g.toLowerCase();for(var i=Gr[g],l=arguments.length,e=new Array(l>1?l-1:0),c=1;c<l;c++)e[c-1]=arguments[c];return i.apply(void 0,e)}},gn=yi.create,vn=yi.types,Xr=function(){function M(g,i){H(this,M),this.name=g.name,this.args=i,this.execute=g.execute,this.undo=g.undo,this.executeCallback=g.executeCallback||null,this.undoCallback=g.undoCallback||null,this.undoData={}}return q(M,[{key:"execute",value:function(){throw new Error(gn(vn.UN_IMPLEMENTATION,"execute"))}},{key:"undo",value:function(){throw new Error(gn(vn.UN_IMPLEMENTATION,"undo"))}},{key:"isRedo",get:function(){return xt()(this.undoData).length>0}},{key:"setUndoData",value:function(i,l,e){return l&&(i=l),e?l||(l=i):(Y()(this.undoData,i),l=null),l}},{key:"setExecuteCallback",value:function(i){return this.executeCallback=i,this}},{key:"setUndoCallback",value:function(i){return this.undoCallback=i,this}}]),M}(),Zr=Xr,mn={};function Vr(M){var g=mn[M];if(g){for(var i=arguments.length,l=new Array(i>1?i-1:0),e=1;e<i;e++)l[e-1]=arguments[e];return new Zr(g,l)}return null}function Jr(M){mn[M.name]=M}var pe={create:Vr,register:Jr},pn=function(){function M(){H(this,M),this._undoStack=[],this._redoStack=[],this._isLocked=!1,this._isSilent=!1}return q(M,[{key:"_invokeExecution",value:function(i){var l=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.lock();var c=i.args;return c||(c=[]),i.execute.apply(i,P(c)).then(function(C){return l._isSilent||(l.pushUndoStack(i),l.fire(e?Mt.AFTER_REDO:Mt.EXECUTE_COMMAND,i)),l.unlock(),Nt(i.executeCallback)&&i.executeCallback(C),C}).catch(function(C){return l.unlock(),yt().reject(C)})}},{key:"_invokeUndo",value:function(i){var l=this;this.lock();var e=i.args;return e||(e=[]),i.undo.apply(i,P(e)).then(function(c){return l.pushRedoStack(i),l.fire(Mt.AFTER_UNDO,i),l.unlock(),Nt(i.undoCallback)&&i.undoCallback(c),c}).catch(function(c){return l.unlock(),yt().reject(c)})}},{key:"_fireRedoStackChanged",value:function(){this.fire(Mt.REDO_STACK_CHANGED,this._redoStack.length)}},{key:"_fireUndoStackChanged",value:function(){this.fire(Mt.UNDO_STACK_CHANGED,this._undoStack.length)}},{key:"lock",value:function(){this._isLocked=!0}},{key:"unlock",value:function(){this._isLocked=!1}},{key:"executeSilent",value:function(){var i=this;this._isSilent=!0;for(var l=arguments.length,e=new Array(l),c=0;c<l;c++)e[c]=arguments[c];return this.execute.apply(this,F()(e).call(e,[this._isSilent])).then(function(){i._isSilent=!1})}},{key:"execute",value:function(){var i=this;if(this._isLocked)return yt().reject(ue.isLock);for(var l=arguments.length,e=new Array(l),c=0;c<l;c++)e[c]=arguments[c];var C=e[0];return St()(C)&&(C=pe.create.apply(pe,e)),this._invokeExecution(C).then(function(x){return i.clearRedoStack(),x})}},{key:"undo",value:function(){var i=this._undoStack.pop(),l,e="";if(i&&this._isLocked&&(this.pushUndoStack(i,!0),i=null),i)this.isEmptyUndoStack()&&this._fireUndoStackChanged(),l=this._invokeUndo(i);else{if(e=ue.undo,this._isLocked){var c;e=F()(c="".concat(e," Because ")).call(c,ue.isLock)}l=yt().reject(e)}return l}},{key:"redo",value:function(){var i=this._redoStack.pop(),l,e="";if(i&&this._isLocked&&(this.pushRedoStack(i,!0),i=null),i)this.isEmptyRedoStack()&&this._fireRedoStackChanged(),l=this._invokeExecution(i,!0);else{if(e=ue.redo,this._isLocked){var c;e=F()(c="".concat(e," Because ")).call(c,ue.isLock)}l=yt().reject(e)}return l}},{key:"pushUndoStack",value:function(i,l){this._undoStack.push(i),l||this._fireUndoStackChanged()}},{key:"pushRedoStack",value:function(i,l){this._redoStack.push(i),l||this._fireRedoStackChanged()}},{key:"isEmptyRedoStack",value:function(){return this._redoStack.length===0}},{key:"isEmptyUndoStack",value:function(){return this._undoStack.length===0}},{key:"clearUndoStack",value:function(){this.isEmptyUndoStack()||(this._undoStack=[],this._fireUndoStackChanged())}},{key:"clearRedoStack",value:function(){this.isEmptyRedoStack()||(this._redoStack=[],this._fireRedoStackChanged())}}]),M}();gt().mixin(pn);var Qr=pn,Kr=X(5214),Ge=X.n(Kr),$r=function(M){var g,i,l,e,c,C,x,E=M.locale,_=M.biImage,N=M.commonStyle,R=M.headerStyle,et=M.loadButtonStyle,it=M.downloadButtonStyle,ut=M.submenuStyle;return F()(g=F()(i=F()(l=F()(e=F()(c=F()(C=F()(x=`
    <div class="tui-image-editor-main-container" style="`.concat(N,`">
        <div class="tui-image-editor-header" style="`)).call(x,R,`">
            <div class="tui-image-editor-header-logo">
                <img src="`)).call(C,_,`" />
            </div>
            <div class="tui-image-editor-header-buttons">
                <div style="`)).call(c,et,`">
                    `)).call(e,E.localize("Load"),`
                    <input type="file" class="tui-image-editor-load-btn" />
                </div>
                <button class="tui-image-editor-download-btn" style="`)).call(l,it,`">
                    `)).call(i,E.localize("Download"),`
                </button>
            </div>
        </div>
        <div class="tui-image-editor-main">
            <div class="tui-image-editor-submenu">
                <div class="tui-image-editor-submenu-style" style="`)).call(g,ut,`"></div>
            </div>
            <div class="tui-image-editor-wrap">
                <div class="tui-image-editor-size-wrap">
                    <div class="tui-image-editor-align-wrap">
                        <div class="tui-image-editor"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
`)},qr=function(M){var g,i,l,e,c,C=M.locale,x=M.biImage,E=M.loadButtonStyle,_=M.downloadButtonStyle,N=M.menuBarPosition;return F()(g=F()(i=F()(l=F()(e=F()(c=`
    <ul class="tui-image-editor-help-menu `.concat(Ur(N),`"></ul>
    <div class="tui-image-editor-controls">
        <div class="tui-image-editor-controls-logo">
            <img src="`)).call(c,x,`" />
        </div>
        <ul class="tui-image-editor-menu"></ul>

        <div class="tui-image-editor-controls-buttons">
            <div style="`)).call(e,E,`">
                `)).call(l,C.localize("Load"),`
                <input type="file" class="tui-image-editor-load-btn" />
            </div>
            <button class="tui-image-editor-download-btn" style="`)).call(i,_,`">
                `)).call(g,C.localize("Download"),`
            </button>
        </div>
    </div>
`)},ta=X(899),He=X.n(ta),ea=function(M){var g,i,l,e,c,C,x,E,_,N,R,et,it,ut,st,ft,wt,Jt,Kt,qt,zt,se,Ee,Oe,xe,Re,Ve,ke,si,Ei=M.subMenuLabelActive,Ti=M.subMenuLabelNormal,Di=M.subMenuRangeTitle,Ai=M.submenuPartitionVertical,wi=M.submenuPartitionHorizontal,Oi=M.submenuCheckbox,ki=M.submenuRangePointer,Pi=M.submenuRangeValue,Li=M.submenuColorpickerTitle,Ni=M.submenuColorpickerButton,ji=M.submenuRangeBar,Ri=M.submenuRangeSubbar,zi=M.submenuDisabledRangePointer,Fi=M.submenuDisabledRangeBar,Bi=M.submenuDisabledRangeSubbar,Hi=M.submenuIconSize,Ui=M.menuIconSize,Yi=M.biSize,ze=M.menuIconStyle,Ke=M.submenuIconStyle;return F()(g=F()(i=F()(l=F()(e=F()(c=F()(C=F()(x=F()(E=F()(_=F()(N=F()(R=F()(et=F()(it=F()(ut=F()(st=F()(ft=F()(wt=F()(Jt=F()(Kt=F()(qt=F()(zt=F()(se=F()(Ee=F()(Oe=F()(xe=F()(Re=F()(Ve=F()(ke=F()(si=`
    .tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,
    .tie-icon-add-button.icon-heart .tui-image-editor-button[data-icontype="icon-heart"] label,
    .tie-icon-add-button.icon-location .tui-image-editor-button[data-icontype="icon-location"] label,
    .tie-icon-add-button.icon-polygon .tui-image-editor-button[data-icontype="icon-polygon"] label,
    .tie-icon-add-button.icon-star .tui-image-editor-button[data-icontype="icon-star"] label,
    .tie-icon-add-button.icon-star-2 .tui-image-editor-button[data-icontype="icon-star-2"] label,
    .tie-icon-add-button.icon-arrow-3 .tui-image-editor-button[data-icontype="icon-arrow-3"] label,
    .tie-icon-add-button.icon-arrow-2 .tui-image-editor-button[data-icontype="icon-arrow-2"] label,
    .tie-icon-add-button.icon-arrow .tui-image-editor-button[data-icontype="icon-arrow"] label,
    .tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,
    .tie-draw-line-select-button.line .tui-image-editor-button.line label,
    .tie-draw-line-select-button.free .tui-image-editor-button.free label,
    .tie-flip-button.flipX .tui-image-editor-button.flipX label,
    .tie-flip-button.flipY .tui-image-editor-button.flipY label,
    .tie-flip-button.resetFlip .tui-image-editor-button.resetFlip label,
    .tie-crop-button .tui-image-editor-button.apply.active label,
    .tie-crop-preset-button .tui-image-editor-button.preset.active label,
    .tie-resize-button .tui-image-editor-button.apply.active label,
    .tie-resize-preset-button .tui-image-editor-button.preset.active label,
    .tie-shape-button.rect .tui-image-editor-button.rect label,
    .tie-shape-button.circle .tui-image-editor-button.circle label,
    .tie-shape-button.triangle .tui-image-editor-button.triangle label,
    .tie-text-effect-button .tui-image-editor-button.active label,
    .tie-text-align-button.tie-text-align-left .tui-image-editor-button.left label,
    .tie-text-align-button.tie-text-align-center .tui-image-editor-button.center label,
    .tie-text-align-button.tie-text-align-right .tui-image-editor-button.right label,
    .tie-mask-apply.apply.active .tui-image-editor-button.apply label,
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button:hover > label,
    .tui-image-editor-container .tui-image-editor-checkbox label > span {
        `.concat(Ei,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button > label,
    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label,
    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label > span {
        `)).call(si,Ti,`
    }
    .tui-image-editor-container .tui-image-editor-range-wrap label > span {
        `)).call(ke,Di,`
    }
    .tui-image-editor-container .tui-image-editor-partition > div {
        `)).call(Ve,Ai,`
    }
    .tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-partition > div,
    .tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-partition > div {
        `)).call(Re,wi,`
    }
    .tui-image-editor-container .tui-image-editor-checkbox label > span:before {
        `)).call(xe,Oi,`
    }
    .tui-image-editor-container .tui-image-editor-checkbox label > input:checked + span:before {
        border: 0;
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-pointer {
        `)).call(Oe,ki,`
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-bar {
        `)).call(Ee,ji,`
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-subbar {
        `)).call(se,Ri,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-pointer {
        `)).call(zt,zi,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-subbar {
        `)).call(qt,Bi,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-bar {
        `)).call(Kt,Fi,`
    }
    .tui-image-editor-container .tui-image-editor-range-value {
        `)).call(Jt,Pi,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value + label {
        `)).call(wt,Li,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value {
        `)).call(ft,Ni,`
    }
    .tui-image-editor-container .svg_ic-menu {
        `)).call(st,Ui,`
    }
    .tui-image-editor-container .svg_ic-submenu {
        `)).call(ut,Hi,`
    }
    .tui-image-editor-container .tui-image-editor-controls-logo > img,
    .tui-image-editor-container .tui-image-editor-header-logo > img {
        `)).call(it,Yi,`
    }
    .tui-image-editor-menu use.normal.use-default,
    .tui-image-editor-help-menu use.normal.use-default {
        fill-rule: evenodd;
        fill: `)).call(et,ze.normal.color,`;
        stroke: `)).call(R,ze.normal.color,`;
    }
    .tui-image-editor-menu use.active.use-default,
    .tui-image-editor-help-menu use.active.use-default {
        fill-rule: evenodd;
        fill: `)).call(N,ze.active.color,`;
        stroke: `)).call(_,ze.active.color,`;
    }
    .tui-image-editor-menu use.hover.use-default,
    .tui-image-editor-help-menu use.hover.use-default {
        fill-rule: evenodd;
        fill: `)).call(E,ze.hover.color,`;
        stroke: `)).call(x,ze.hover.color,`;
    }
    .tui-image-editor-menu use.disabled.use-default,
    .tui-image-editor-help-menu use.disabled.use-default {
        fill-rule: evenodd;
        fill: `)).call(C,ze.disabled.color,`;
        stroke: `)).call(c,ze.disabled.color,`;
    }
    .tui-image-editor-submenu use.normal.use-default {
        fill-rule: evenodd;
        fill: `)).call(e,Ke.normal.color,`;
        stroke: `)).call(l,Ke.normal.color,`;
    }
    .tui-image-editor-submenu use.active.use-default {
        fill-rule: evenodd;
        fill: `)).call(i,Ke.active.color,`;
        stroke: `)).call(g,Ke.active.color,`;
    }
`)},ia={"common.bi.image":"https://uicdn.toast.com/toastui/img/tui-image-editor-bi.png","common.bisize.width":"251px","common.bisize.height":"21px","common.backgroundImage":"none","common.backgroundColor":"#1e1e1e","common.border":"0px","header.backgroundImage":"none","header.backgroundColor":"transparent","header.border":"0px","loadButton.backgroundColor":"#fff","loadButton.border":"1px solid #ddd","loadButton.color":"#222","loadButton.fontFamily":"'Noto Sans', sans-serif","loadButton.fontSize":"12px","downloadButton.backgroundColor":"#fdba3b","downloadButton.border":"1px solid #fdba3b","downloadButton.color":"#fff","downloadButton.fontFamily":"'Noto Sans', sans-serif","downloadButton.fontSize":"12px","menu.normalIcon.color":"#8a8a8a","menu.activeIcon.color":"#555555","menu.disabledIcon.color":"#434343","menu.hoverIcon.color":"#e9e9e9","submenu.normalIcon.color":"#8a8a8a","submenu.activeIcon.color":"#e9e9e9","menu.iconSize.width":"24px","menu.iconSize.height":"24px","submenu.iconSize.width":"32px","submenu.iconSize.height":"32px","submenu.backgroundColor":"#1e1e1e","submenu.partition.color":"#3c3c3c","submenu.normalLabel.color":"#8a8a8a","submenu.normalLabel.fontWeight":"lighter","submenu.activeLabel.color":"#fff","submenu.activeLabel.fontWeight":"lighter","checkbox.border":"0px","checkbox.backgroundColor":"#fff","range.pointer.color":"#fff","range.bar.color":"#666","range.subbar.color":"#d1d1d1","range.disabledPointer.color":"#414141","range.disabledBar.color":"#282828","range.disabledSubbar.color":"#414141","range.value.color":"#fff","range.value.fontWeight":"lighter","range.value.fontSize":"11px","range.value.border":"1px solid #353535","range.value.backgroundColor":"#151515","range.title.color":"#fff","range.title.fontWeight":"lighter","colorpicker.button.border":"1px solid #1e1e1e","colorpicker.title.color":"#fff"},na=X(2534),ra=function(){function M(g){H(this,M),this.styles=this._changeToObject(Y()({},ia,g)),je(this._styleMaker()),this._loadDefaultSvgIcon()}return q(M,[{key:"getStyle",value:function(i){var l=null,e=i.replace(/\..+$/,""),c=this.styles[i];switch(i){case"common.bi":l=this.styles[i].image;break;case"menu.icon":l={active:this.styles["".concat(e,".activeIcon")],normal:this.styles["".concat(e,".normalIcon")],hover:this.styles["".concat(e,".hoverIcon")],disabled:this.styles["".concat(e,".disabledIcon")]};break;case"submenu.icon":l={active:this.styles["".concat(e,".activeIcon")],normal:this.styles["".concat(e,".normalIcon")]};break;case"submenu.label":l={active:this._makeCssText(this.styles["".concat(e,".activeLabel")]),normal:this._makeCssText(this.styles["".concat(e,".normalLabel")])};break;case"submenu.partition":l={vertical:this._makeCssText(Y()({},c,{borderLeft:"1px solid ".concat(c.color)})),horizontal:this._makeCssText(Y()({},c,{borderBottom:"1px solid ".concat(c.color)}))};break;case"range.disabledPointer":case"range.disabledBar":case"range.disabledSubbar":case"range.pointer":case"range.bar":case"range.subbar":c.backgroundColor=c.color,l=this._makeCssText(c);break;default:l=this._makeCssText(c);break}return l}},{key:"_styleMaker",value:function(){var i=this.getStyle("submenu.label"),l=this.getStyle("submenu.partition");return ea({subMenuLabelActive:i.active,subMenuLabelNormal:i.normal,submenuPartitionVertical:l.vertical,submenuPartitionHorizontal:l.horizontal,biSize:this.getStyle("common.bisize"),subMenuRangeTitle:this.getStyle("range.title"),submenuRangePointer:this.getStyle("range.pointer"),submenuRangeBar:this.getStyle("range.bar"),submenuRangeSubbar:this.getStyle("range.subbar"),submenuDisabledRangePointer:this.getStyle("range.disabledPointer"),submenuDisabledRangeBar:this.getStyle("range.disabledBar"),submenuDisabledRangeSubbar:this.getStyle("range.disabledSubbar"),submenuRangeValue:this.getStyle("range.value"),submenuColorpickerTitle:this.getStyle("colorpicker.title"),submenuColorpickerButton:this.getStyle("colorpicker.button"),submenuCheckbox:this.getStyle("checkbox"),menuIconSize:this.getStyle("menu.iconSize"),submenuIconSize:this.getStyle("submenu.iconSize"),menuIconStyle:this.getStyle("menu.icon"),submenuIconStyle:this.getStyle("submenu.icon")})}},{key:"_changeToObject",value:function(i){var l={};return G()(i,function(e,c){var C=c.match(/^(.+)\.([a-z]+)$/i),x=ot(C,3),E=x[1],_=x[2];l[E]||(l[E]={}),l[E][_]=e}),l}},{key:"_makeCssText",value:function(i){var l=this,e=[];return G()(i,function(c,C){var x,E;f()(x=["backgroundImage"]).call(x,C)>-1&&c!=="none"&&(c="url(".concat(c,")")),e.push(F()(E="".concat(l._toUnderScore(C),": ")).call(E,c))}),e.join(";")}},{key:"_toUnderScore",value:function(i){return i.replace(/([A-Z])/g,function(l,e){return"-".concat(e.toLowerCase())})}},{key:"_loadDefaultSvgIcon",value:function(){if(!document.getElementById("tui-image-editor-svg-default-icons")){var i=new DOMParser,l=na.replace(/data:image\/svg\+xml;base64,/,""),e=i.parseFromString(atob(l),"text/xml");document.body.appendChild(e.documentElement)}}},{key:"_makeIconClassName",value:function(i,l){var e=l?this.getStyle("submenu.icon"):this.getStyle("menu.icon"),c=e[i],C=c.path,x=c.name;return C&&x?i:"".concat(i," use-default")}},{key:"_makeSvgIconPrefix",value:function(i,l){var e,c=l?this.getStyle("submenu.icon"):this.getStyle("menu.icon"),C=c[i],x=C.path,E=C.name;return x&&E?F()(e="".concat(x,"#")).call(e,E,"-"):"#"}},{key:"_makeSvgItem",value:function(i,l,e){var c=this;return He()(i).call(i,function(C){var x,E,_=c._makeSvgIconPrefix(C,e),N=c._toUnderScore(l),R=c._makeIconClassName(C,e);return F()(x=F()(E='<use xlink:href="'.concat(_,"ic-")).call(E,N,'" class="')).call(x,R,'"/>')}).join("")}},{key:"makeMenSvgIconSet",value:function(i,l){var e,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return F()(e='<svg class="svg_ic-'.concat(c?"submenu":"menu",'">')).call(e,this._makeSvgItem(i,l,c),"</svg>")}}]),M}(),aa=ra,oa=X(9146),Et=X.n(oa),sa=X(6623),yn=X(4230);function Vi(M,g){return Vi=yn||function(l,e){return l.__proto__=e,l},Vi(M,g)}function fe(M,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=sa(g&&g.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),g&&Vi(M,g)}var la=X(3742);function Ci(M){return typeof m=="function"&&typeof la=="symbol"?Ci=function(i){return typeof i}:Ci=function(i){return i&&typeof m=="function"&&i.constructor===m&&i!==m.prototype?"symbol":typeof i},Ci(M)}function re(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function de(M,g){if(g&&(Ci(g)==="object"||typeof g=="function"))return g;if(g!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return re(M)}var Cn=X(9856);function Qt(M){return Qt=yn?Cn:function(i){return i.__proto__||Cn(i)},Qt(M)}var ca=X(6092),ni=X.n(ca),ua=X(4858),ha=X.n(ua),fa=["#000000","#2a2a2a","#545454","#7e7e7e","#a8a8a8","#d2d2d2","#ffffff","","#ff4040","#ff6518","#ffbb3b","#03bd9e","#00a9ff","#515ce6","#9e5fff","#ff5583"],Sn=function(){function M(g,i){var l=i.defaultColor,e=l===void 0?"#7e7e7e":l,c=i.toggleDirection,C=c===void 0?"up":c,x=i.usageStatistics;H(this,M),this.colorpickerElement=g,this.usageStatistics=x,this._show=!1,this._colorpickerElement=g,this._toggleDirection=C,this._makePickerButtonElement(e),this._makePickerLayerElement(g,g.getAttribute("title")),this._color=e,this.picker=ha().create({container:this.pickerElement,preset:fa,color:e,usageStatistics:this.usageStatistics}),this._addEvent()}return q(M,[{key:"destroy",value:function(){var i=this;this._removeEvent(),this.picker.destroy(),this.colorpickerElement.innerHTML="",G()(this,function(l,e){i[e]=null})}},{key:"color",get:function(){return this._color},set:function(i){this._color=i,this._changeColorElement(i)}},{key:"_changeColorElement",value:function(i){i?(this.colorElement.classList.remove("transparent"),this.colorElement.style.backgroundColor=i):(this.colorElement.style.backgroundColor="#fff",this.colorElement.classList.add("transparent"))}},{key:"_makePickerButtonElement",value:function(i){this.colorpickerElement.classList.add("tui-image-editor-button"),this.colorElement=document.createElement("div"),this.colorElement.className="color-picker-value",i?this.colorElement.style.backgroundColor=i:this.colorElement.classList.add("transparent")}},{key:"_makePickerLayerElement",value:function(i,l){var e=document.createElement("label"),c=document.createElement("div");this.pickerControl=document.createElement("div"),this.pickerControl.className="color-picker-control",this.pickerElement=document.createElement("div"),this.pickerElement.className="color-picker",e.innerHTML=l,c.className="triangle",this.pickerControl.appendChild(this.pickerElement),this.pickerControl.appendChild(c),i.appendChild(this.pickerControl),i.appendChild(this.colorElement),i.appendChild(e)}},{key:"_addEvent",value:function(){var i=this,l;this.picker.on("selectColor",function(e){i._changeColorElement(e.color),i._color=e.color,i.fire("change",e.color)}),this.eventHandler={pickerToggle:V()(l=this._pickerToggleEventHandler).call(l,this),pickerHide:function(){return i.hide()}},this.colorpickerElement.addEventListener("click",this.eventHandler.pickerToggle),document.body.addEventListener("click",this.eventHandler.pickerHide)}},{key:"_removeEvent",value:function(){this.colorpickerElement.removeEventListener("click",this.eventHandler.pickerToggle),document.body.removeEventListener("click",this.eventHandler.pickerHide),this.picker.off()}},{key:"_pickerToggleEventHandler",value:function(i){var l=i.target,e=l&&this._isElementInColorPickerControl(l);(!e||e&&this._isPaletteButton(l))&&(this._show=!this._show,this.pickerControl.style.display=this._show?"block":"none",this._setPickerControlPosition(),this.fire("changeShow",this)),i.stopPropagation()}},{key:"_isPaletteButton",value:function(i){return i.className==="tui-colorpicker-palette-button"}},{key:"_isElementInColorPickerControl",value:function(i){for(var l=i;l!==document.body&&l;){if(l===this.pickerControl)return!0;l=l.parentNode}return!1}},{key:"hide",value:function(){this._show=!1,this.pickerControl.style.display="none"}},{key:"_setPickerControlPosition",value:function(){var i=this.pickerControl.style,l=this._colorpickerElement.clientWidth/2+2,e=this.pickerControl.offsetWidth/2-l,c=(this.pickerControl.offsetHeight+10)*-1;this._toggleDirection==="down"&&(c=30),i.top="".concat(c,"px"),i.left="-".concat(e,"px")}}]),M}();gt().mixin(Sn);var Xe=Sn,da=/(-?)([0-9]*)[^0-9]*([0-9]*)/g,In=function(){function M(g){var i,l,e,c,C,x,E,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};H(this,M),this._value=_.value||0,this.rangeElement=g.slider,this.rangeInputElement=g.input,this._drawRangeElement(),this.rangeWidth=this._getRangeWidth(),this._min=_.min||0,this._max=_.max||100,this._useDecimal=_.useDecimal,this._absMax=this._min*-1+this._max,this.realTimeEvent=_.realTimeEvent||!1,this._userInputTimer=null,this.eventHandler={startChangingSlide:V()(i=this._startChangingSlide).call(i,this),stopChangingSlide:V()(l=this._stopChangingSlide).call(l,this),changeSlide:V()(e=this._changeSlide).call(e,this),changeSlideFinally:V()(c=this._changeSlideFinally).call(c,this),changeInput:V()(C=this._changeInput).call(C,this),changeInputFinally:V()(x=this._changeValueWithInput).call(x,this,!0),changeInputWithArrow:V()(E=this._changeValueWithInputKeyEvent).call(E,this)},this._addClickEvent(),this._addDragEvent(),this._addInputEvent(),this.value=_.value,this.trigger("change")}return q(M,[{key:"destroy",value:function(){var i=this;this._removeClickEvent(),this._removeDragEvent(),this._removeInputEvent(),this.rangeElement.innerHTML="",G()(this,function(l,e){i[e]=null})}},{key:"max",get:function(){return this._max},set:function(i){this._max=i,this._absMax=this._min*-1+this._max,this.value=this._value}},{key:"min",get:function(){return this._min},set:function(i){this._min=i,this.max=this._max}},{key:"value",get:function(){return this._value},set:function(i){i=this._useDecimal?i:ne(i);var l=i-this._min,e=l*this.rangeWidth/this._absMax;this.rangeWidth<e&&(e=this.rangeWidth),this.pointer.style.left="".concat(e,"px"),this.subbar.style.right="".concat(this.rangeWidth-e,"px"),this._value=i,this.rangeInputElement&&(this.rangeInputElement.value=i)}},{key:"trigger",value:function(i){this.fire(i,this._value)}},{key:"_getRangeWidth",value:function(){var i=function(e){return ne(window.getComputedStyle(e,null).width)};return i(this.rangeElement)-i(this.pointer)}},{key:"_drawRangeElement",value:function(){this.rangeElement.classList.add("tui-image-editor-range"),this.bar=document.createElement("div"),this.bar.className="tui-image-editor-virtual-range-bar",this.subbar=document.createElement("div"),this.subbar.className="tui-image-editor-virtual-range-subbar",this.pointer=document.createElement("div"),this.pointer.className="tui-image-editor-virtual-range-pointer",this.bar.appendChild(this.subbar),this.bar.appendChild(this.pointer),this.rangeElement.appendChild(this.bar)}},{key:"_addInputEvent",value:function(){this.rangeInputElement&&(this.rangeInputElement.addEventListener("keydown",this.eventHandler.changeInputWithArrow),this.rangeInputElement.addEventListener("keydown",this.eventHandler.changeInput),this.rangeInputElement.addEventListener("blur",this.eventHandler.changeInputFinally))}},{key:"_removeInputEvent",value:function(){this.rangeInputElement&&(this.rangeInputElement.removeEventListener("keydown",this.eventHandler.changeInputWithArrow),this.rangeInputElement.removeEventListener("keydown",this.eventHandler.changeInput),this.rangeInputElement.removeEventListener("blur",this.eventHandler.changeInputFinally))}},{key:"_changeValueWithInputKeyEvent",value:function(i){var l,e=i.keyCode,c=i.target;if(!(f()(l=[me.ARROW_UP,me.ARROW_DOWN]).call(l,e)<0)){var C=Number(c.value);C=this._valueUpDownForKeyEvent(C,e);var x=C<this._min||C>this._max;if(!x){var E=$t(C,this._min,this.max);this.value=E,this.fire("change",E,!1)}}}},{key:"_valueUpDownForKeyEvent",value:function(i,l){var e=this._useDecimal?.1:1;return l===me.ARROW_UP?i+=e:l===me.ARROW_DOWN&&(i-=e),i}},{key:"_changeInput",value:function(i){var l=this;clearTimeout(this._userInputTimer);var e=i.keyCode;if(e<me.DIGIT_0||e>me.DIGIT_9){i.preventDefault();return}this._userInputTimer=t()(function(){l._inputSetValue(i.target.value)},350)}},{key:"_inputSetValue",value:function(i){var l=this._useDecimal?Number(i):ne(i);l=$t(l,this._min,this.max),this.value=l,this.fire("change",l,!0)}},{key:"_changeValueWithInput",value:function(i,l){var e,c=l.keyCode,C=l.target;if(!(f()(e=[me.ARROW_UP,me.ARROW_DOWN]).call(e,c)>=0)){var x=this._filterForInputText(C.value),E=!x||isNaN(x);C.value=x,E||this._inputSetValue(x)}}},{key:"_addClickEvent",value:function(){this.rangeElement.addEventListener("click",this.eventHandler.changeSlideFinally)}},{key:"_removeClickEvent",value:function(){this.rangeElement.removeEventListener("click",this.eventHandler.changeSlideFinally)}},{key:"_addDragEvent",value:function(){this.pointer.addEventListener("mousedown",this.eventHandler.startChangingSlide)}},{key:"_removeDragEvent",value:function(){this.pointer.removeEventListener("mousedown",this.eventHandler.startChangingSlide)}},{key:"_changeSlide",value:function(i){var l=i.screenX,e=l-this.firstPosition,c=this.firstLeft+e;c=c>this.rangeWidth?this.rangeWidth:c,c=c<0?0:c,this.pointer.style.left="".concat(c,"px"),this.subbar.style.right="".concat(this.rangeWidth-c,"px");var C=c/this.rangeWidth,x=this._absMax*C+this._min,E=this._useDecimal?x:ne(x),_=this.value!==E;_&&(this.value=E,this.realTimeEvent&&this.fire("change",this._value,!1))}},{key:"_changeSlideFinally",value:function(i){if(i.stopPropagation(),i.target.className==="tui-image-editor-range"){var l=i.offsetX,e=l/this.rangeWidth,c=this._absMax*e+this._min;this.pointer.style.left="".concat(e*this.rangeWidth,"px"),this.subbar.style.right="".concat((1-e)*this.rangeWidth,"px"),this.value=c,this.fire("change",c,!0)}}},{key:"_startChangingSlide",value:function(i){this.firstPosition=i.screenX,this.firstLeft=ne(this.pointer.style.left)||0,document.addEventListener("mousemove",this.eventHandler.changeSlide),document.addEventListener("mouseup",this.eventHandler.stopChangingSlide)}},{key:"_stopChangingSlide",value:function(){this.fire("change",this._value,!0),document.removeEventListener("mousemove",this.eventHandler.changeSlide),document.removeEventListener("mouseup",this.eventHandler.stopChangingSlide)}},{key:"_filterForInputText",value:function(i){return i.replace(da,"$1$2$3")}}]),M}();gt().mixin(In);var Pe=In,xn=function(){function M(g,i){var l=i.locale,e=i.name,c=i.makeSvgIcon,C=i.menuBarPosition,x=i.templateHtml,E=i.usageStatistics;H(this,M),this.subMenuElement=g,this.menuBarPosition=C,this.toggleDirection=C==="top"?"down":"up",this.colorPickerControls=[],this.usageStatistics=E,this.eventHandler={},this._makeSubMenuElement({locale:l,name:e,makeSvgIcon:c,templateHtml:x})}return q(M,[{key:"selector",value:function(i){return this.subMenuElement.querySelector(i)}},{key:"colorPickerChangeShow",value:function(i){var l;Ut()(l=this.colorPickerControls).call(l,function(e){i!==e&&e.hide()})}},{key:"getButtonType",value:function(i,l){return i.className.match(RegExp("(".concat(l.join("|"),")")))[0]}},{key:"changeClass",value:function(i,l,e){i.classList.remove(l),i.classList.add(e)}},{key:"changeStandbyMode",value:function(){}},{key:"changeStartMode",value:function(){}},{key:"_makeSubMenuElement",value:function(i){var l=i.locale,e=i.name,c=i.iconStyle,C=i.makeSvgIcon,x=i.templateHtml,E=document.createElement("div");E.className="tui-image-editor-menu-".concat(e),E.innerHTML=x({locale:l,iconStyle:c,makeSvgIcon:C}),this.subMenuElement.appendChild(E)}},{key:"_onStartEditingInputBox",value:function(){this.fire(Mt.INPUT_BOX_EDITING_STARTED)}},{key:"_onStopEditingInputBox",value:function(){this.fire(Mt.INPUT_BOX_EDITING_STOPPED)}}]),M}();gt().mixin(xn);var Ue=xn,ga=function(M){var g,i,l,e,c,C,x,E,_=M.locale,N=M.makeSvgIcon;return F()(g=F()(i=F()(l=F()(e=F()(c=F()(C=F()(x=F()(E=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-shape-button">
            <div class="tui-image-editor-button rect">
                <div>
                    `.concat(N(["normal","active"],"shape-rectangle",!0),`
                </div>
                <label> `)).call(E,_.localize("Rectangle"),` </label>
            </div>
            <div class="tui-image-editor-button circle">
                <div>
                    `)).call(x,N(["normal","active"],"shape-circle",!0),`
                </div>
                <label> `)).call(C,_.localize("Circle"),` </label>
            </div>
            <div class="tui-image-editor-button triangle">
                <div>
                    `)).call(c,N(["normal","active"],"shape-triangle",!0),`
                </div>
                <label> `)).call(e,_.localize("Triangle"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-shape-color-button">
            <div class="tie-color-fill" title="`)).call(l,_.localize("Fill"),`"></div>
            <div class="tie-color-stroke" title="`)).call(i,_.localize("Stroke"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(g,_.localize("Stroke"),`</label>
            <div class="tie-stroke-range"></div>
            <input class="tie-stroke-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function va(M){var g=ma();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function ma(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var pa={stroke:"#ffbb3b",fill:"",strokeWidth:3},ya=function(M){fe(i,M);var g=va(i);function i(l,e){var c,C=e.locale,x=e.makeSvgIcon,E=e.menuBarPosition,_=e.usageStatistics;return H(this,i),c=g.call(this,l,{locale:C,name:"shape",makeSvgIcon:x,menuBarPosition:E,templateHtml:ga,usageStatistics:_}),c.type=null,c.options=pa,c._els={shapeSelectButton:c.selector(".tie-shape-button"),shapeColorButton:c.selector(".tie-shape-color-button"),strokeRange:new Pe({slider:c.selector(".tie-stroke-range"),input:c.selector(".tie-stroke-range-value")},qe),fillColorpicker:new Xe(c.selector(".tie-color-fill"),{defaultColor:"",toggleDirection:c.toggleDirection,usageStatistics:c.usageStatistics}),strokeColorpicker:new Xe(c.selector(".tie-color-stroke"),{defaultColor:"#ffbb3b",toggleDirection:c.toggleDirection,usageStatistics:c.usageStatistics})},c.colorPickerControls.push(c._els.fillColorpicker),c.colorPickerControls.push(c._els.strokeColorpicker),c.colorPickerInputBoxes=[],c.colorPickerInputBoxes.push(c._els.fillColorpicker.colorpickerElement.querySelector(ge.COLOR_PICKER_INPUT_BOX)),c.colorPickerInputBoxes.push(c._els.strokeColorpicker.colorpickerElement.querySelector(ge.COLOR_PICKER_INPUT_BOX)),c}return q(i,[{key:"destroy",value:function(){this._removeEvent(),this._els.strokeRange.destroy(),this._els.fillColorpicker.destroy(),this._els.strokeColorpicker.destroy(),De(this)}},{key:"addEvent",value:function(e){var c,C,x,E,_,N,R=this;this.eventHandler.shapeTypeSelected=V()(c=this._changeShapeHandler).call(c,this),this.actions=e,this._els.shapeSelectButton.addEventListener("click",this.eventHandler.shapeTypeSelected),this._els.strokeRange.on("change",V()(C=this._changeStrokeRangeHandler).call(C,this)),this._els.fillColorpicker.on("change",V()(x=this._changeFillColorHandler).call(x,this)),this._els.strokeColorpicker.on("change",V()(E=this._changeStrokeColorHandler).call(E,this)),this._els.fillColorpicker.on("changeShow",V()(_=this.colorPickerChangeShow).call(_,this)),this._els.strokeColorpicker.on("changeShow",V()(N=this.colorPickerChangeShow).call(N,this)),ni()(this.colorPickerInputBoxes,function(et){var it,ut;et.addEventListener(Mt.FOCUS,V()(it=R._onStartEditingInputBox).call(it,R)),et.addEventListener(Mt.BLUR,V()(ut=R._onStopEditingInputBox).call(ut,R))},this)}},{key:"_removeEvent",value:function(){var e=this;this._els.shapeSelectButton.removeEventListener("click",this.eventHandler.shapeTypeSelected),this._els.strokeRange.off(),this._els.fillColorpicker.off(),this._els.strokeColorpicker.off(),ni()(this.colorPickerInputBoxes,function(c){var C,x;c.removeEventListener(Mt.FOCUS,V()(C=e._onStartEditingInputBox).call(C,e)),c.removeEventListener(Mt.BLUR,V()(x=e._onStopEditingInputBox).call(x,e))},this)}},{key:"setShapeStatus",value:function(e){var c=e.strokeWidth,C=e.strokeColor,x=e.fillColor;this._els.strokeRange.value=c,this._els.strokeColorpicker.color=C,this._els.fillColorpicker.color=x,this.options.stroke=C,this.options.fill=x,this.options.strokeWidth=c,this.actions.setDrawingShape(this.type,{strokeWidth:c})}},{key:"changeStartMode",value:function(){this.actions.stopDrawingMode()}},{key:"changeStandbyMode",value:function(){this.type=null,this.actions.changeSelectableAll(!0),this._els.shapeSelectButton.classList.remove("circle"),this._els.shapeSelectButton.classList.remove("triangle"),this._els.shapeSelectButton.classList.remove("rect")}},{key:"setMaxStrokeValue",value:function(e){var c=e;c<=0&&(c=qe.max),this._els.strokeRange.max=c}},{key:"setStrokeValue",value:function(e){this._els.strokeRange.value=e,this._els.strokeRange.trigger("change")}},{key:"getStrokeValue",value:function(){return this._els.strokeRange.value}},{key:"_changeShapeHandler",value:function(e){var c=e.target.closest(".tui-image-editor-button");if(c){this.actions.stopDrawingMode(),this.actions.discardSelection();var C=this.getButtonType(c,["circle","triangle","rect"]);if(this.type===C){this.changeStandbyMode();return}this.changeStandbyMode(),this.type=C,e.currentTarget.classList.add(C),this.actions.changeSelectableAll(!1),this.actions.modeChange("shape")}}},{key:"_changeStrokeRangeHandler",value:function(e,c){this.options.strokeWidth=ne(e),this.actions.changeShape({strokeWidth:e},!c),this.actions.setDrawingShape(this.type,this.options)}},{key:"_changeFillColorHandler",value:function(e){e=e||"transparent",this.options.fill=e,this.actions.changeShape({fill:e})}},{key:"_changeStrokeColorHandler",value:function(e){e=e||"transparent",this.options.stroke=e,this.actions.changeShape({stroke:e})}}]),i}(Ue),Ca=ya,Sa=function(M){var g,i,l,e,c,C,x,E,_,N,R,et,it,ut,st,ft,wt,Jt=M.locale,Kt=M.makeSvgIcon;return F()(g=F()(i=F()(l=F()(e=F()(c=F()(C=F()(x=F()(E=F()(_=F()(N=F()(R=F()(et=F()(it=F()(ut=F()(st=F()(ft=F()(wt=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-crop-preset-button">
            <div class="tui-image-editor-button preset preset-none active">
                <div>
                    `.concat(Kt(["normal","active"],"shape-rectangle",!0),`
                </div>
                <label> `)).call(wt,Jt.localize("Custom"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-square">
                <div>
                    `)).call(ft,Kt(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(st,Jt.localize("Square"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-3-2">
                <div>
                    `)).call(ut,Kt(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(it,Jt.localize("3:2"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-4-3">
                <div>
                    `)).call(et,Kt(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(R,Jt.localize("4:3"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-5-4">
                <div>
                    `)).call(N,Kt(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(_,Jt.localize("5:4"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-7-5">
                <div>
                    `)).call(E,Kt(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(x,Jt.localize("7:5"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-16-9">
                <div>
                    `)).call(C,Kt(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(c,Jt.localize("16:9"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline">
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tie-crop-button action">
            <div class="tui-image-editor-button apply">
                `)).call(e,Kt(["normal","active"],"apply"),`
                <label>
                    `)).call(l,Jt.localize("Apply"),`
                </label>
            </div>
            <div class="tui-image-editor-button cancel">
                `)).call(i,Kt(["normal","active"],"cancel"),`
                <label>
                    `)).call(g,Jt.localize("Cancel"),`
                </label>
            </div>
        </li>
    </ul>
`)};function Ia(M){var g=xa();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function xa(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var ba=function(M){fe(i,M);var g=Ia(i);function i(l,e){var c,C=e.locale,x=e.makeSvgIcon,E=e.menuBarPosition,_=e.usageStatistics;return H(this,i),c=g.call(this,l,{locale:C,name:"crop",makeSvgIcon:x,menuBarPosition:E,templateHtml:Sa,usageStatistics:_}),c.status="active",c._els={apply:c.selector(".tie-crop-button .apply"),cancel:c.selector(".tie-crop-button .cancel"),preset:c.selector(".tie-crop-preset-button")},c.defaultPresetButton=c._els.preset.querySelector(".preset-none"),c}return q(i,[{key:"destroy",value:function(){this._removeEvent(),De(this)}},{key:"addEvent",value:function(e){var c,C,x,E=V()(c=this._applyEventHandler).call(c,this),_=V()(C=this._cancelEventHandler).call(C,this),N=V()(x=this._cropzonePresetEventHandler).call(x,this);this.eventHandler={apply:E,cancel:_,cropzonePreset:N},this.actions=e,this._els.apply.addEventListener("click",E),this._els.cancel.addEventListener("click",_),this._els.preset.addEventListener("click",N)}},{key:"_removeEvent",value:function(){this._els.apply.removeEventListener("click",this.eventHandler.apply),this._els.cancel.removeEventListener("click",this.eventHandler.cancel),this._els.preset.removeEventListener("click",this.eventHandler.cropzonePreset)}},{key:"_applyEventHandler",value:function(){this.actions.crop(),this._els.apply.classList.remove("active")}},{key:"_cancelEventHandler",value:function(){this.actions.cancel(),this._els.apply.classList.remove("active")}},{key:"_cropzonePresetEventHandler",value:function(e){var c=e.target.closest(".tui-image-editor-button.preset");if(c){var C=c.className.match(/preset-[^\s]+/),x=ot(C,1),E=x[0];this._setPresetButtonActive(c),this.actions.preset(E)}}},{key:"changeStartMode",value:function(){this.actions.modeChange("crop")}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode(),this._setPresetButtonActive()}},{key:"changeApplyButtonStatus",value:function(e){e?this._els.apply.classList.add("active"):this._els.apply.classList.remove("active")}},{key:"_setPresetButtonActive",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.defaultPresetButton;G()(this._els.preset.querySelectorAll(".preset"),function(c){c.classList.remove("active")}),e&&e.classList.add("active")}}]),i}(Ue),Ma=ba,_a=function(M){var g,i,l,e,c,C,x=M.locale,E=M.makeSvgIcon;return F()(g=F()(i=F()(l=F()(e=F()(c=F()(C=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-range-wrap tui-image-editor-newline">
                <label class="range">`.concat(x.localize("Width"),`&nbsp;</label>
                <div class="tie-width-range"></div>
                <input class="tie-width-range-value tui-image-editor-range-value" value="0" /> <label>px</label>
                <div class="tui-image-editor-partition tui-image-editor-newline"></div>
                <label class="range">`)).call(C,x.localize("Height"),`</label>
                <div class="tie-height-range"></div>
                <input class="tie-height-range-value tui-image-editor-range-value" value="0" /> <label>px</label>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-wrap">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-lock-aspect-ratio">
                        <span>`)).call(c,x.localize("Lock Aspect Ratio"),`</span>
                    </label>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tie-resize-button action">
            <div class="tui-image-editor-button apply">
                `)).call(e,E(["normal","active"],"apply"),`
                <label>
                    `)).call(l,x.localize("Apply"),`
                </label>
            </div>
            <div class="tui-image-editor-button cancel">
                `)).call(i,E(["normal","active"],"cancel"),`
                <label>
                    `)).call(g,x.localize("Cancel"),`
                </label>
            </div>
        </li>
    </ul>
`)};function Ea(M){var g=Ta();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function Ta(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var Da=function(M){fe(i,M);var g=Ea(i);function i(l,e){var c,C=e.locale,x=e.makeSvgIcon,E=e.menuBarPosition,_=e.usageStatistics;return H(this,i),c=g.call(this,l,{locale:C,name:"resize",makeSvgIcon:x,menuBarPosition:E,templateHtml:_a,usageStatistics:_}),c.status="active",c._lockState=!1,c._originalDimensions=null,c._els={widthRange:new Pe({slider:c.selector(".tie-width-range"),input:c.selector(".tie-width-range-value")},Ye),heightRange:new Pe({slider:c.selector(".tie-height-range"),input:c.selector(".tie-height-range-value")},Ye),lockAspectRatio:c.selector(".tie-lock-aspect-ratio"),apply:c.selector(".tie-resize-button .apply"),cancel:c.selector(".tie-resize-button .cancel")},c}return q(i,[{key:"changeStartMode",value:function(){this.actions.modeChange("resize");var e=this.actions.getCurrentDimensions();this._originalDimensions=e,this.setWidthValue(e.width),this.setHeightValue(e.height)}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode(),this.actions.reset(!0)}},{key:"setLimit",value:function(e){this._els.widthRange.min=this.calcMinValue(e.minWidth),this._els.heightRange.min=this.calcMinValue(e.minHeight),this._els.widthRange.max=this.calcMaxValue(e.maxWidth),this._els.heightRange.max=this.calcMaxValue(e.maxHeight)}},{key:"calcMaxValue",value:function(e){return e<=0&&(e=Ye.max),e}},{key:"calcMinValue",value:function(e){return e<=0&&(e=Ye.min),e}},{key:"setWidthValue",value:function(e){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._els.widthRange.value=e,c&&this._els.widthRange.trigger("change")}},{key:"setHeightValue",value:function(e){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._els.heightRange.value=e,c&&this._els.heightRange.trigger("change")}},{key:"destroy",value:function(){this._removeEvent(),De(this)}},{key:"addEvent",value:function(e){var c,C,x,E,_;this._els.widthRange.on("change",V()(c=this._changeWidthRangeHandler).call(c,this)),this._els.heightRange.on("change",V()(C=this._changeHeightRangeHandler).call(C,this)),this._els.lockAspectRatio.addEventListener("change",V()(x=this._changeLockAspectRatio).call(x,this));var N=V()(E=this._applyEventHandler).call(E,this),R=V()(_=this._cancelEventHandler).call(_,this);this.eventHandler={apply:N,cancel:R},this.actions=e,this._els.apply.addEventListener("click",N),this._els.cancel.addEventListener("click",R)}},{key:"_changeWidthRangeHandler",value:function(e){this.actions.preview("width",ne(e),this._lockState)}},{key:"_changeHeightRangeHandler",value:function(e){this.actions.preview("height",ne(e),this._lockState)}},{key:"_changeLockAspectRatio",value:function(e){this._lockState=e.target.checked,this.actions.lockAspectRatio(this._lockState,Ye.min,Ye.max)}},{key:"_removeEvent",value:function(){this._els.apply.removeEventListener("click",this.eventHandler.apply),this._els.cancel.removeEventListener("click",this.eventHandler.cancel)}},{key:"_applyEventHandler",value:function(){this.actions.resize(),this._els.apply.classList.remove("active")}},{key:"_cancelEventHandler",value:function(){this.actions.reset(),this._els.cancel.classList.remove("active")}},{key:"changeApplyButtonStatus",value:function(e){e?this._els.apply.classList.add("active"):this._els.apply.classList.remove("active")}}]),i}(Ue),Aa=Da,wa=function(M){var g,i,l,e,c,C=M.locale,x=M.makeSvgIcon;return F()(g=F()(i=F()(l=F()(e=F()(c=`
    <ul class="tie-flip-button tui-image-editor-submenu-item">
        <li>
            <div class="tui-image-editor-button flipX">
                <div>
                    `.concat(x(["normal","active"],"flip-x",!0),`
                </div>
                <label>
                    `)).call(c,C.localize("Flip X"),`
                </label>
            </div>
            <div class="tui-image-editor-button flipY">
                <div>
                    `)).call(e,x(["normal","active"],"flip-y",!0),`
                </div>
                <label>
                    `)).call(l,C.localize("Flip Y"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tui-image-editor-button resetFlip">
                <div>
                    `)).call(i,x(["normal","active"],"flip-reset",!0),`
                </div>
                <label>
                    `)).call(g,C.localize("Reset"),`
                </label>
            </div>
        </li>
    </ul>
`)};function Oa(M){var g=ka();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function ka(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var Pa=function(M){fe(i,M);var g=Oa(i);function i(l,e){var c,C=e.locale,x=e.makeSvgIcon,E=e.menuBarPosition,_=e.usageStatistics;return H(this,i),c=g.call(this,l,{locale:C,name:"flip",makeSvgIcon:x,menuBarPosition:E,templateHtml:wa,usageStatistics:_}),c.flipStatus=!1,c._els={flipButton:c.selector(".tie-flip-button")},c}return q(i,[{key:"destroy",value:function(){this._removeEvent(),De(this)}},{key:"addEvent",value:function(e){var c;this.eventHandler.changeFlip=V()(c=this._changeFlip).call(c,this),this._actions=e,this._els.flipButton.addEventListener("click",this.eventHandler.changeFlip)}},{key:"_removeEvent",value:function(){this._els.flipButton.removeEventListener("click",this.eventHandler.changeFlip)}},{key:"_changeFlip",value:function(e){var c=this,C=e.target.closest(".tui-image-editor-button");if(C){var x=this.getButtonType(C,["flipX","flipY","resetFlip"]);if(!this.flipStatus&&x==="resetFlip")return;this._actions.flip(x).then(function(E){var _=c._els.flipButton.classList;c.flipStatus=!1,_.remove("resetFlip"),G()(["flipX","flipY"],function(N){_.remove(N),E[N]&&(_.add(N),_.add("resetFlip"),c.flipStatus=!0)})})}}}]),i}(Ue),La=Pa,Na=function(M){var g,i,l=M.locale,e=M.makeSvgIcon;return F()(g=F()(i=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-rotate-button">
            <div class="tui-image-editor-button clockwise">
                <div>
                    `.concat(e(["normal","active"],"rotate-clockwise",!0),`
                </div>
                <label> 30 </label>
            </div>
            <div class="tui-image-editor-button counterclockwise">
                <div>
                    `)).call(i,e(["normal","active"],"rotate-counterclockwise",!0),`
                </div>
                <label> -30 </label>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(g,l.localize("Range"),`</label>
            <div class="tie-rotate-range"></div>
            <input class="tie-rotate-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function ja(M){var g=Ra();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function Ra(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var za=30,Fa=-30,Ba=function(M){fe(i,M);var g=ja(i);function i(l,e){var c,C=e.locale,x=e.makeSvgIcon,E=e.menuBarPosition,_=e.usageStatistics;return H(this,i),c=g.call(this,l,{locale:C,name:"rotate",makeSvgIcon:x,menuBarPosition:E,templateHtml:Na,usageStatistics:_}),c._value=0,c._els={rotateButton:c.selector(".tie-rotate-button"),rotateRange:new Pe({slider:c.selector(".tie-rotate-range"),input:c.selector(".tie-rotate-range-value")},ui)},c}return q(i,[{key:"destroy",value:function(){this._removeEvent(),this._els.rotateRange.destroy(),De(this)}},{key:"setRangeBarAngle",value:function(e,c){var C=c;e==="rotate"&&(C=vt()(this._els.rotateRange.value,10)+c),this._setRangeBarRatio(C)}},{key:"_setRangeBarRatio",value:function(e){this._els.rotateRange.value=e}},{key:"addEvent",value:function(e){var c,C;this.eventHandler.rotationAngleChanged=V()(c=this._changeRotateForButton).call(c,this),this.actions=e,this._els.rotateButton.addEventListener("click",this.eventHandler.rotationAngleChanged),this._els.rotateRange.on("change",V()(C=this._changeRotateForRange).call(C,this))}},{key:"_removeEvent",value:function(){this._els.rotateButton.removeEventListener("click",this.eventHandler.rotationAngleChanged),this._els.rotateRange.off()}},{key:"_changeRotateForRange",value:function(e,c){var C=ne(e);this.actions.setAngle(C,!c),this._value=C}},{key:"_changeRotateForButton",value:function(e){var c=e.target.closest(".tui-image-editor-button"),C=this._els.rotateRange.value;if(c){var x=this.getButtonType(c,["counterclockwise","clockwise"]),E={clockwise:za,counterclockwise:Fa}[x],_=vt()(C,10)+E,N=_>=-360&&_<=360;N&&this.actions.rotate(E)}}}]),i}(Ue),Ha=Ba,Ua=function(M){var g,i,l,e,c,C,x,E,_,N,R,et,it,ut=M.locale,st=M.makeSvgIcon;return F()(g=F()(i=F()(l=F()(e=F()(c=F()(C=F()(x=F()(E=F()(_=F()(N=F()(R=F()(et=F()(it=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-text-effect-button">
            <div class="tui-image-editor-button bold">
                <div>
                    `.concat(st(["normal","active"],"text-bold",!0),`
                </div>
                <label> `)).call(it,ut.localize("Bold"),` </label>
            </div>
            <div class="tui-image-editor-button italic">
                <div>
                    `)).call(et,st(["normal","active"],"text-italic",!0),`
                </div>
                <label> `)).call(R,ut.localize("Italic"),` </label>
            </div>
            <div class="tui-image-editor-button underline">
                <div>
                    `)).call(N,st(["normal","active"],"text-underline",!0),`
                </div>
                <label> `)).call(_,ut.localize("Underline"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-text-align-button">
            <div class="tui-image-editor-button left">
                <div>
                    `)).call(E,st(["normal","active"],"text-align-left",!0),`
                </div>
                <label> `)).call(x,ut.localize("Left"),` </label>
            </div>
            <div class="tui-image-editor-button center">
                <div>
                    `)).call(C,st(["normal","active"],"text-align-center",!0),`
                </div>
                <label> `)).call(c,ut.localize("Center"),` </label>
            </div>
            <div class="tui-image-editor-button right">
                <div>
                    `)).call(e,st(["normal","active"],"text-align-right",!0),`
                </div>
                <label> `)).call(l,ut.localize("Right"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-text-color" title="`)).call(i,ut.localize("Color"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(g,ut.localize("Text size"),`</label>
            <div class="tie-text-range"></div>
            <input class="tie-text-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function Ya(M){var g=Wa();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function Wa(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var Ga=function(M){fe(i,M);var g=Ya(i);function i(l,e){var c,C=e.locale,x=e.makeSvgIcon,E=e.menuBarPosition,_=e.usageStatistics;return H(this,i),c=g.call(this,l,{locale:C,name:"text",makeSvgIcon:x,menuBarPosition:E,templateHtml:Ua,usageStatistics:_}),c.effect={bold:!1,italic:!1,underline:!1},c.align="tie-text-align-left",c._els={textEffectButton:c.selector(".tie-text-effect-button"),textAlignButton:c.selector(".tie-text-align-button"),textColorpicker:new Xe(c.selector(".tie-text-color"),{defaultColor:"#ffbb3b",toggleDirection:c.toggleDirection,usageStatistics:c.usageStatistics}),textRange:new Pe({slider:c.selector(".tie-text-range"),input:c.selector(".tie-text-range-value")},fi)},c.colorPickerInputBox=c._els.textColorpicker.colorpickerElement.querySelector(ge.COLOR_PICKER_INPUT_BOX),c}return q(i,[{key:"destroy",value:function(){this._removeEvent(),this._els.textColorpicker.destroy(),this._els.textRange.destroy(),De(this)}},{key:"addEvent",value:function(e){var c,C,x,E,_,N,R=V()(c=this._setTextEffectHandler).call(c,this),et=V()(C=this._setTextAlignHandler).call(C,this);this.eventHandler={setTextEffect:R,setTextAlign:et},this.actions=e,this._els.textEffectButton.addEventListener("click",R),this._els.textAlignButton.addEventListener("click",et),this._els.textRange.on("change",V()(x=this._changeTextRnageHandler).call(x,this)),this._els.textColorpicker.on("change",V()(E=this._changeColorHandler).call(E,this)),this.colorPickerInputBox.addEventListener(Mt.FOCUS,V()(_=this._onStartEditingInputBox).call(_,this)),this.colorPickerInputBox.addEventListener(Mt.BLUR,V()(N=this._onStopEditingInputBox).call(N,this))}},{key:"_removeEvent",value:function(){var e,c,C=this.eventHandler,x=C.setTextEffect,E=C.setTextAlign;this._els.textEffectButton.removeEventListener("click",x),this._els.textAlignButton.removeEventListener("click",E),this._els.textRange.off(),this._els.textColorpicker.off(),this.colorPickerInputBox.removeEventListener(Mt.FOCUS,V()(e=this._onStartEditingInputBox).call(e,this)),this.colorPickerInputBox.removeEventListener(Mt.BLUR,V()(c=this._onStopEditingInputBox).call(c,this))}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode()}},{key:"changeStartMode",value:function(){this.actions.modeChange("text")}},{key:"textColor",get:function(){return this._els.textColorpicker.color},set:function(e){this._els.textColorpicker.color=e}},{key:"fontSize",get:function(){return this._els.textRange.value},set:function(e){this._els.textRange.value=e}},{key:"fontStyle",get:function(){return this.effect.italic?"italic":"normal"}},{key:"fontWeight",get:function(){return this.effect.bold?"bold":"normal"}},{key:"underline",get:function(){return this.effect.underline}},{key:"setTextStyleStateOnAction",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=mt()(e),C=e.fontSize,x=e.fontStyle,E=e.fontWeight,_=e.textDecoration,N=e.textAlign;this.textColor=c,this.fontSize=C,this.setEffectState("italic",x),this.setEffectState("bold",E),this.setEffectState("underline",_),this.setAlignState("tie-text-align-".concat(N))}},{key:"setEffectState",value:function(e,c){var C=c==="italic"||c==="bold"||c==="underline",x=this._els.textEffectButton.querySelector(".tui-image-editor-button.".concat(e));this.effect[e]=C,x.classList[C?"add":"remove"]("active")}},{key:"setAlignState",value:function(e){var c=this._els.textAlignButton;c.classList.remove(this.align),c.classList.add(e),this.align=e}},{key:"_setTextEffectHandler",value:function(e){var c=e.target.closest(".tui-image-editor-button");if(c){var C=c.className.match(/(bold|italic|underline)/),x=ot(C,1),E=x[0],_={bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},underline:{textDecoration:"underline"}}[E];this.effect[E]=!this.effect[E],c.classList.toggle("active"),this.actions.changeTextStyle(_)}}},{key:"_setTextAlignHandler",value:function(e){var c=e.target.closest(".tui-image-editor-button");if(c){var C=this.getButtonType(c,["left","center","right"]),x="tie-text-align-".concat(C);e.currentTarget.classList.remove(this.align),this.align!==x&&e.currentTarget.classList.add(x),this.actions.changeTextStyle({textAlign:C}),this.align=x}}},{key:"_changeTextRnageHandler",value:function(e,c){this.actions.changeTextStyle({fontSize:e},!c)}},{key:"_changeColorHandler",value:function(e){e=e||"transparent",this.actions.changeTextStyle({fill:e})}}]),i}(Ue),Xa=Ga,Za=function(M){var g,i,l,e=M.locale,c=M.makeSvgIcon;return F()(g=F()(i=F()(l=`
    <ul class="tui-image-editor-submenu-item">
        <li>
            <div class="tui-image-editor-button">
                <div>
                    <input type="file" accept="image/*" class="tie-mask-image-file">
                    `.concat(c(["normal","active"],"mask-load",!0),`
                </div>
                <label> `)).call(l,e.localize("Load Mask Image"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tie-mask-apply tui-image-editor-newline apply" style="margin-top: 22px;margin-bottom: 5px">
            <div class="tui-image-editor-button apply">
                `)).call(i,c(["normal","active"],"apply"),`
                <label>
                    `)).call(g,e.localize("Apply"),`
                </label>
            </div>
        </li>
    </ul>
`)};function Va(M){var g=Ja();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function Ja(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var Qa=function(M){fe(i,M);var g=Va(i);function i(l,e){var c,C=e.locale,x=e.makeSvgIcon,E=e.menuBarPosition,_=e.usageStatistics;return H(this,i),c=g.call(this,l,{locale:C,name:"mask",makeSvgIcon:x,menuBarPosition:E,templateHtml:Za,usageStatistics:_}),c._els={applyButton:c.selector(".tie-mask-apply"),maskImageButton:c.selector(".tie-mask-image-file")},c}return q(i,[{key:"destroy",value:function(){this._removeEvent(),De(this)}},{key:"addEvent",value:function(e){var c,C,x=V()(c=this._loadMaskFile).call(c,this),E=V()(C=this._applyMask).call(C,this);this.eventHandler={loadMaskFile:x,applyMask:E},this.actions=e,this._els.maskImageButton.addEventListener("change",x),this._els.applyButton.addEventListener("click",E)}},{key:"_removeEvent",value:function(){this._els.maskImageButton.removeEventListener("change",this.eventHandler.loadMaskFile),this._els.applyButton.removeEventListener("click",this.eventHandler.applyMask)}},{key:"_applyMask",value:function(){this.actions.applyFilter(),this._els.applyButton.classList.remove("active")}},{key:"_loadMaskFile",value:function(e){var c;_e()||alert("This browser does not support file-api");var C=ot(e.target.files,1),x=C[0];x&&(c=K().createObjectURL(x),this.actions.loadImageFromURL(c,x),this._els.applyButton.classList.add("active"))}}]),i}(Ue),Ka=Qa,$a=function(M){var g,i,l,e,c,C,x,E,_,N,R,et,it,ut,st,ft,wt,Jt,Kt,qt,zt=M.locale,se=M.makeSvgIcon;return F()(g=F()(i=F()(l=F()(e=F()(c=F()(C=F()(x=F()(E=F()(_=F()(N=F()(R=F()(et=F()(it=F()(ut=F()(st=F()(ft=F()(wt=F()(Jt=F()(Kt=F()(qt=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-icon-add-button">
            <div class="tui-image-editor-button" data-icontype="icon-arrow">
                <div>
                    `.concat(se(["normal","active"],"icon-arrow",!0),`
                </div>
                <label>
                    `)).call(qt,zt.localize("Arrow"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-arrow-2">
                <div>
                    `)).call(Kt,se(["normal","active"],"icon-arrow-2",!0),`
                </div>
                <label>
                    `)).call(Jt,zt.localize("Arrow-2"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-arrow-3">
                <div>
                    `)).call(wt,se(["normal","active"],"icon-arrow-3",!0),`
                </div>
                <label>
                    `)).call(ft,zt.localize("Arrow-3"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-star">
                <div>
                    `)).call(st,se(["normal","active"],"icon-star",!0),`
                </div>
                <label>
                    `)).call(ut,zt.localize("Star-1"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-star-2">
                <div>
                    `)).call(it,se(["normal","active"],"icon-star-2",!0),`
                </div>
                <label>
                    `)).call(et,zt.localize("Star-2"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-polygon">
                <div>
                    `)).call(R,se(["normal","active"],"icon-polygon",!0),`
                </div>
                <label>
                    `)).call(N,zt.localize("Polygon"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-location">
                <div>
                    `)).call(_,se(["normal","active"],"icon-location",!0),`
                </div>
                <label>
                    `)).call(E,zt.localize("Location"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-heart">
                <div>
                    `)).call(x,se(["normal","active"],"icon-heart",!0),`
                </div>
                <label>
                    `)).call(C,zt.localize("Heart"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-bubble">
                <div>
                    `)).call(c,se(["normal","active"],"icon-bubble",!0),`
                </div>
                <label>
                    `)).call(e,zt.localize("Bubble"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-icon-add-button">
            <div class="tui-image-editor-button" style="margin:0">
                <div>
                    <input type="file" accept="image/*" class="tie-icon-image-file">
                    `)).call(l,se(["normal","active"],"icon-load",!0),`
                </div>
                <label>
                    `)).call(i,zt.localize("Custom icon"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-icon-color" title="`)).call(g,zt.localize("Color"),`"></div>
        </li>
    </ul>
`)};function qa(M){var g=to();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function to(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var eo=function(M){fe(i,M);var g=qa(i);function i(l,e){var c,C=e.locale,x=e.makeSvgIcon,E=e.menuBarPosition,_=e.usageStatistics;return H(this,i),c=g.call(this,l,{locale:C,name:"icon",makeSvgIcon:x,menuBarPosition:E,templateHtml:$a,usageStatistics:_}),c.iconType=null,c._iconMap={},c._els={registerIconButton:c.selector(".tie-icon-image-file"),addIconButton:c.selector(".tie-icon-add-button"),iconColorpicker:new Xe(c.selector(".tie-icon-color"),{defaultColor:"#ffbb3b",toggleDirection:c.toggleDirection,usageStatistics:c.usageStatistics})},c.colorPickerInputBox=c._els.iconColorpicker.colorpickerElement.querySelector(ge.COLOR_PICKER_INPUT_BOX),c}return q(i,[{key:"destroy",value:function(){this._removeEvent(),this._els.iconColorpicker.destroy(),De(this)}},{key:"addEvent",value:function(e){var c,C,x,E,_,N=V()(c=this._registerIconHandler).call(c,this),R=V()(C=this._addIconHandler).call(C,this);this.eventHandler={registerIcon:N,addIcon:R},this.actions=e,this._els.iconColorpicker.on("change",V()(x=this._changeColorHandler).call(x,this)),this._els.registerIconButton.addEventListener("change",N),this._els.addIconButton.addEventListener("click",R),this.colorPickerInputBox.addEventListener(Mt.FOCUS,V()(E=this._onStartEditingInputBox).call(E,this)),this.colorPickerInputBox.addEventListener(Mt.BLUR,V()(_=this._onStopEditingInputBox).call(_,this))}},{key:"_removeEvent",value:function(){var e,c;this._els.iconColorpicker.off(),this._els.registerIconButton.removeEventListener("change",this.eventHandler.registerIcon),this._els.addIconButton.removeEventListener("click",this.eventHandler.addIcon),this.colorPickerInputBox.removeEventListener(Mt.FOCUS,V()(e=this._onStartEditingInputBox).call(e,this)),this.colorPickerInputBox.removeEventListener(Mt.BLUR,V()(c=this._onStopEditingInputBox).call(c,this))}},{key:"clearIconType",value:function(){this._els.addIconButton.classList.remove(this.iconType),this.iconType=null}},{key:"registerDefaultIcon",value:function(){var e=this;G()(ci,function(c,C){e.actions.registerDefaultIcons(C,c)})}},{key:"setIconPickerColor",value:function(e){this._els.iconColorpicker.color=e}},{key:"changeStandbyMode",value:function(){this.clearIconType(),this.actions.cancelAddIcon()}},{key:"_changeColorHandler",value:function(e){e=e||"transparent",this.actions.changeColor(e)}},{key:"_addIconHandler",value:function(e){var c=e.target.closest(".tui-image-editor-button");if(c){var C=c.getAttribute("data-icontype"),x=this._els.iconColorpicker.color;this.actions.discardSelection(),this.actions.changeSelectableAll(!1),this._els.addIconButton.classList.remove(this.iconType),this._els.addIconButton.classList.add(C),this.iconType===C?this.changeStandbyMode():(this.actions.addIcon(C,x),this.iconType=C)}}},{key:"_registerIconHandler",value:function(e){var c;_e||alert("This browser does not support file-api");var C=ot(e.target.files,1),x=C[0];x&&(c=K().createObjectURL(x),this.actions.registerCustomIcon(c,x))}}]),i}(Ue),io=eo,no=function(M){var g,i,l,e,c,C=M.locale,x=M.makeSvgIcon;return F()(g=F()(i=F()(l=F()(e=F()(c=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-draw-line-select-button">
            <div class="tui-image-editor-button free">
                <div>
                    `.concat(x(["normal","active"],"draw-free",!0),`
                </div>
                <label>
                    `)).call(c,C.localize("Free"),`
                </label>
            </div>
            <div class="tui-image-editor-button line">
                <div>
                    `)).call(e,x(["normal","active"],"draw-line",!0),`
                </div>
                <label>
                    `)).call(l,C.localize("Straight"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-draw-color" title="`)).call(i,C.localize("Color"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(g,C.localize("Range"),`</label>
            <div class="tie-draw-range"></div>
            <input class="tie-draw-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function ro(M){var g=ao();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function ao(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var oo=.7,so=function(M){fe(i,M);var g=ro(i);function i(l,e){var c,C=e.locale,x=e.makeSvgIcon,E=e.menuBarPosition,_=e.usageStatistics;return H(this,i),c=g.call(this,l,{locale:C,name:"draw",makeSvgIcon:x,menuBarPosition:E,templateHtml:no,usageStatistics:_}),c._els={lineSelectButton:c.selector(".tie-draw-line-select-button"),drawColorPicker:new Xe(c.selector(".tie-draw-color"),{defaultColor:"#00a9ff",toggleDirection:c.toggleDirection,usageStatistics:c.usageStatistics}),drawRange:new Pe({slider:c.selector(".tie-draw-range"),input:c.selector(".tie-draw-range-value")},hi)},c.type=null,c.color=c._els.drawColorPicker.color,c.width=c._els.drawRange.value,c.colorPickerInputBox=c._els.drawColorPicker.colorpickerElement.querySelector(ge.COLOR_PICKER_INPUT_BOX),c}return q(i,[{key:"destroy",value:function(){this._removeEvent(),this._els.drawColorPicker.destroy(),this._els.drawRange.destroy(),De(this)}},{key:"addEvent",value:function(e){var c,C,x,E,_;this.eventHandler.changeDrawType=V()(c=this._changeDrawType).call(c,this),this.actions=e,this._els.lineSelectButton.addEventListener("click",this.eventHandler.changeDrawType),this._els.drawColorPicker.on("change",V()(C=this._changeDrawColor).call(C,this)),this._els.drawRange.on("change",V()(x=this._changeDrawRange).call(x,this)),this.colorPickerInputBox.addEventListener(Mt.FOCUS,V()(E=this._onStartEditingInputBox).call(E,this)),this.colorPickerInputBox.addEventListener(Mt.BLUR,V()(_=this._onStopEditingInputBox).call(_,this))}},{key:"_removeEvent",value:function(){var e,c;this._els.lineSelectButton.removeEventListener("click",this.eventHandler.changeDrawType),this._els.drawColorPicker.off(),this._els.drawRange.off(),this.colorPickerInputBox.removeEventListener(Mt.FOCUS,V()(e=this._onStartEditingInputBox).call(e,this)),this.colorPickerInputBox.removeEventListener(Mt.BLUR,V()(c=this._onStopEditingInputBox).call(c,this))}},{key:"setDrawMode",value:function(){this.actions.setDrawMode(this.type,{width:this.width,color:Lt(this.color,oo)})}},{key:"changeStandbyMode",value:function(){this.type=null,this.actions.stopDrawingMode(),this.actions.changeSelectableAll(!0),this._els.lineSelectButton.classList.remove("free"),this._els.lineSelectButton.classList.remove("line")}},{key:"changeStartMode",value:function(){this.type="free",this._els.lineSelectButton.classList.add("free"),this.setDrawMode()}},{key:"_changeDrawType",value:function(e){var c=e.target.closest(".tui-image-editor-button");if(c){var C=this.getButtonType(c,["free","line"]);if(this.actions.discardSelection(),this.type===C){this.changeStandbyMode();return}this.changeStandbyMode(),this.type=C,this._els.lineSelectButton.classList.add(C),this.setDrawMode()}}},{key:"_changeDrawColor",value:function(e){this.color=e||"transparent",this.type?this.setDrawMode():this.changeStartMode()}},{key:"_changeDrawRange",value:function(e){this.width=e,this.type?this.setDrawMode():this.changeStartMode()}}]),i}(Ue),lo=so,co=X(9886),bn=X.n(co),uo=function(M){var g,i,l,e,c,C,x,E,_,N,R,et,it,ut,st,ft,wt=M.locale;return F()(g=F()(i=F()(l=F()(e=F()(c=F()(C=F()(x=F()(E=F()(_=F()(N=F()(R=F()(et=F()(it=F()(ut=F()(st=F()(ft=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-wrap fixed-width">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-grayscale">
                        <span>`.concat(wt.localize("Grayscale"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-invert">
                        <span>`)).call(ft,wt.localize("Invert"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-sepia">
                        <span>`)).call(st,wt.localize("Sepia"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-vintage">
                        <span>`)).call(ut,wt.localize("Sepia2"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-blur">
                        <span>`)).call(it,wt.localize("Blur"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-sharpen">
                        <span>`)).call(et,wt.localize("Sharpen"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-emboss">
                        <span>`)).call(R,wt.localize("Emboss"),`</span>
                    </label>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled" style="margin-bottom: 7px;">
                <div class="tui-image-editor-checkbox-wrap">
                    <div class="tui-image-editor-checkbox">
                        <label>
                            <input type="checkbox" class="tie-remove-white">
                            <span>`)).call(N,wt.localize("Remove White"),`</span>
                        </label>
                    </div>
                </div>
                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">
                    <label>`)).call(_,wt.localize("Distance"),`</label>
                    <div class="tie-removewhite-distance-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-brightness">
                        <span>`)).call(E,wt.localize("Brightness"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-brightness-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-noise">
                        <span>`)).call(x,wt.localize("Noise"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-noise-range"></div>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-pixelate">
                        <span>`)).call(C,wt.localize("Pixelate"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-pixelate-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-newline tui-image-editor-checkbox-wrap">
                    <div class="tui-image-editor-checkbox">
                        <label>
                            <input type="checkbox" class="tie-color-filter">
                            <span>`)).call(c,wt.localize("Color Filter"),`</span>
                        </label>
                    </div>
                </div>
                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">
                    <label>`)).call(e,wt.localize("Threshold"),`</label>
                    <div class="tie-colorfilter-threshold-range"></div>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="filter-color-item">
                <div class="tie-filter-tint-color" title="`)).call(l,wt.localize("Tint"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-tint">
                        <span></span>
                    </label>
                </div>
            </div>
            <div class="filter-color-item">
                <div class="tie-filter-multiply-color" title="`)).call(i,wt.localize("Multiply"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-multiply">
                        <span></span>
                    </label>
                </div>
            </div>
            <div class="filter-color-item">
                <div class="tie-filter-blend-color" title="`)).call(g,wt.localize("Blend"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-blend">
                        <span></span>
                    </label>
                </div>
            </div>
        </li>
    </ul>
`)};function ho(M){var g=fo();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function fo(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var Mn="130px",go=["add","diff","subtract","multiply","screen","lighten","darken"],_n=["grayscale","invert","sepia","vintage","blur","sharpen","emboss","remove-white","brightness","noise","pixelate","color-filter","tint","multiply","blend"],vo={grayscale:"grayscale",invert:"invert",sepia:"sepia",blur:"blur",sharpen:"sharpen",emboss:"emboss",removeWhite:"removeColor",brightness:"brightness",contrast:"contrast",saturation:"saturation",vintage:"vintage",polaroid:"polaroid",noise:"noise",pixelate:"pixelate",colorFilter:"removeColor",tint:"blendColor",multiply:"blendColor",blend:"blendColor",hue:"hue",gamma:"gamma"},En=["removewhiteDistanceRange","colorfilterThresholdRange","pixelateRange","noiseRange","brightnessRange","tintOpacity"],Tn=["filterBlendColor","filterMultiplyColor","filterTintColor"],mo=function(M){fe(i,M);var g=ho(i);function i(l,e){var c,C=e.locale,x=e.menuBarPosition,E=e.usageStatistics;return H(this,i),c=g.call(this,l,{locale:C,name:"filter",menuBarPosition:x,templateHtml:uo,usageStatistics:E}),c.selectBoxShow=!1,c.checkedMap={},c._makeControlElement(),c}return q(i,[{key:"destroy",value:function(){this._removeEvent(),this._destroyToolInstance(),De(this)}},{key:"_removeEvent",value:function(){var e=this,c;G()(_n,function(C){var x=e.selector(".tie-".concat(C)),E=Se(C);x.removeEventListener("change",e.eventHandler[E])}),G()(F()(c=[]).call(c,En,Tn),function(C){e._els[C].off()}),this._els.blendType.removeEventListener("change",this.eventHandler.changeBlendFilter),this._els.blendType.removeEventListener("click",this.eventHandler.changeBlendFilter),ni()(this.colorPickerInputBoxes,function(C){var x,E;C.removeEventListener(Mt.FOCUS,V()(x=e._onStartEditingInputBox).call(x,e)),C.removeEventListener(Mt.BLUR,V()(E=e._onStopEditingInputBox).call(E,e))},this)}},{key:"_destroyToolInstance",value:function(){var e,c=this;G()(F()(e=[]).call(e,En,Tn),function(C){c._els[C].destroy()})}},{key:"addEvent",value:function(e){var c=this,C,x,E,_=e.applyFilter,N=function(it){var ut;return V()(ut=c._changeFilterState).call(ut,c,_,it)},R=function(it){return function(ut,st){return c._changeFilterState(_,it,st)}};this.eventHandler={changeBlendFilter:N("blend"),blandTypeClick:function(it){return it.stopPropagation()}},G()(_n,function(et){var it=c.selector(".tie-".concat(et)),ut=Se(et);c.checkedMap[ut]=it,c.eventHandler[ut]=N(ut),it.addEventListener("change",c.eventHandler[ut])}),this._els.removewhiteDistanceRange.on("change",R("removeWhite")),this._els.colorfilterThresholdRange.on("change",R("colorFilter")),this._els.pixelateRange.on("change",R("pixelate")),this._els.noiseRange.on("change",R("noise")),this._els.brightnessRange.on("change",R("brightness")),this._els.filterBlendColor.on("change",this.eventHandler.changeBlendFilter),this._els.filterMultiplyColor.on("change",N("multiply")),this._els.filterTintColor.on("change",N("tint")),this._els.tintOpacity.on("change",R("tint")),this._els.filterMultiplyColor.on("changeShow",V()(C=this.colorPickerChangeShow).call(C,this)),this._els.filterTintColor.on("changeShow",V()(x=this.colorPickerChangeShow).call(x,this)),this._els.filterBlendColor.on("changeShow",V()(E=this.colorPickerChangeShow).call(E,this)),this._els.blendType.addEventListener("change",this.eventHandler.changeBlendFilter),this._els.blendType.addEventListener("click",this.eventHandler.blandTypeClick),ni()(this.colorPickerInputBoxes,function(et){var it,ut;et.addEventListener(Mt.FOCUS,V()(it=c._onStartEditingInputBox).call(it,c)),et.addEventListener(Mt.BLUR,V()(ut=c._onStopEditingInputBox).call(ut,c))},this)}},{key:"setFilterState",value:function(e){var c=e.type,C=e.options,x=e.action,E=this._getFilterNameFromOptions(c,C),_=x==="remove";_||this._setFilterState(E,C),this.checkedMap[E].checked=!_}},{key:"initFilterCheckBoxState",value:function(){G()(this.checkedMap,function(e){e.checked=!1},this)}},{key:"_setFilterState",value:function(e,c){e==="colorFilter"?this._els.colorfilterThresholdRange.value=c.distance:e==="removeWhite"?this._els.removewhiteDistanceRange.value=c.distance:e==="pixelate"?this._els.pixelateRange.value=c.blocksize:e==="brightness"?this._els.brightnessRange.value=c.brightness:e==="noise"?this._els.noiseRange.value=c.noise:e==="tint"?(this._els.tintOpacity.value=c.alpha,this._els.filterTintColor.color=c.color):e==="blend"?this._els.filterBlendColor.color=c.color:e==="multiply"&&(this._els.filterMultiplyColor.color=c.color)}},{key:"_getFilterNameFromOptions",value:function(e,c){var C=e;return e==="removeColor"?C=bn()(c.useAlpha)?"removeWhite":"colorFilter":e==="blendColor"&&(C={add:"blend",multiply:"multiply",tint:"tint"}[c.mode]),C}},{key:"_changeFilterState",value:function(e,c){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,x=this.checkedMap[c].checked,E=vo[c],_=this.checkedMap[c].closest(".tui-image-editor-checkbox-group");_&&(x?_.classList.remove("tui-image-editor-disabled"):_.classList.add("tui-image-editor-disabled")),e(x,E,this._getFilterOption(c),!C)}},{key:"_getFilterOption",value:function(e){var c={};switch(e){case"removeWhite":c.color="#FFFFFF",c.useAlpha=!1,c.distance=Ge()(this._els.removewhiteDistanceRange.value);break;case"colorFilter":c.color="#FFFFFF",c.distance=Ge()(this._els.colorfilterThresholdRange.value);break;case"pixelate":c.blocksize=ne(this._els.pixelateRange.value);break;case"noise":c.noise=ne(this._els.noiseRange.value);break;case"brightness":c.brightness=Ge()(this._els.brightnessRange.value);break;case"blend":c.mode="add",c.color=this._els.filterBlendColor.color,c.mode=this._els.blendType.value;break;case"multiply":c.mode="multiply",c.color=this._els.filterMultiplyColor.color;break;case"tint":c.mode="tint",c.color=this._els.filterTintColor.color,c.alpha=this._els.tintOpacity.value;break;case"blur":c.blur=this._els.blurRange.value;break}return c}},{key:"_makeControlElement",value:function(){this._els={removewhiteDistanceRange:new Pe({slider:this.selector(".tie-removewhite-distance-range")},Be.removewhiteDistanceRange),brightnessRange:new Pe({slider:this.selector(".tie-brightness-range")},Be.brightnessRange),noiseRange:new Pe({slider:this.selector(".tie-noise-range")},Be.noiseRange),pixelateRange:new Pe({slider:this.selector(".tie-pixelate-range")},Be.pixelateRange),colorfilterThresholdRange:new Pe({slider:this.selector(".tie-colorfilter-threshold-range")},Be.colorfilterThresholdRange),filterTintColor:new Xe(this.selector(".tie-filter-tint-color"),{defaultColor:"#03bd9e",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),filterMultiplyColor:new Xe(this.selector(".tie-filter-multiply-color"),{defaultColor:"#515ce6",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),filterBlendColor:new Xe(this.selector(".tie-filter-blend-color"),{defaultColor:"#ffbb3b",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),blurRange:Be.blurFilterRange},this._els.tintOpacity=this._pickerWithRange(this._els.filterTintColor.pickerControl),this._els.blendType=this._pickerWithSelectbox(this._els.filterBlendColor.pickerControl),this.colorPickerControls.push(this._els.filterTintColor),this.colorPickerControls.push(this._els.filterMultiplyColor),this.colorPickerControls.push(this._els.filterBlendColor),this.colorPickerInputBoxes=[],this.colorPickerInputBoxes.push(this._els.filterTintColor.colorpickerElement.querySelector(ge.COLOR_PICKER_INPUT_BOX)),this.colorPickerInputBoxes.push(this._els.filterMultiplyColor.colorpickerElement.querySelector(ge.COLOR_PICKER_INPUT_BOX)),this.colorPickerInputBoxes.push(this._els.filterBlendColor.colorpickerElement.querySelector(ge.COLOR_PICKER_INPUT_BOX))}},{key:"_pickerWithRange",value:function(e){var c=document.createElement("div"),C=document.createElement("label"),x=document.createElement("div");return x.id="tie-filter-tint-opacity",C.innerHTML="Opacity",c.appendChild(C),c.appendChild(x),e.appendChild(c),e.style.height=Mn,new Pe({slider:x},Be.tintOpacityRange)}},{key:"_pickerWithSelectbox",value:function(e){var c=document.createElement("div"),C=document.createElement("select"),x=document.createElement("ul");return c.className="tui-image-editor-selectlist-wrap",x.className="tui-image-editor-selectlist",c.appendChild(C),c.appendChild(x),this._makeSelectOptionList(C),e.appendChild(c),e.style.height=Mn,this._drawSelectOptionList(C,x),this._pickerWithSelectboxForAddEvent(C,x),C}},{key:"_drawSelectOptionList",value:function(e,c){var C=e.querySelectorAll("option");G()(C,function(x){var E=document.createElement("li");E.innerHTML=x.innerHTML,E.setAttribute("data-item",x.value),c.appendChild(E)})}},{key:"_pickerWithSelectboxForAddEvent",value:function(e,c){var C=this;c.addEventListener("click",function(x){var E=x.target.getAttribute("data-item"),_=document.createEvent("HTMLEvents");e.querySelector('[value="'.concat(E,'"]')).selected=!0,_.initEvent("change",!0,!0),e.dispatchEvent(_),C.selectBoxShow=!1,c.style.display="none"}),e.addEventListener("mousedown",function(x){x.preventDefault(),C.selectBoxShow=!C.selectBoxShow,c.style.display=C.selectBoxShow?"block":"none",c.setAttribute("data-selectitem",e.value),c.querySelector("[data-item='".concat(e.value,"']")).classList.add("active")})}},{key:"_makeSelectOptionList",value:function(e){G()(go,function(c){var C=document.createElement("option");C.setAttribute("value",c),C.innerHTML=c.replace(/^[a-z]/,function(x){return x.toUpperCase()}),e.appendChild(C)})}}]),i}(Ue),po=mo,yo=X(4383),Co=X.n(yo),So=function(){function M(g,i){var l=i.name;H(this,M),this.name=l,this.items=[],this.panelElement=this._makePanelElement(),this.listElement=this._makeListElement(),this.panelElement.appendChild(this.listElement),g.appendChild(this.panelElement)}return q(M,[{key:"_makePanelElement",value:function(){var i=document.createElement("div");return i.className="tie-panel-".concat(this.name),i}},{key:"_makeListElement",value:function(){var i=document.createElement("ol");return i.className="".concat(this.name,"-list"),i}},{key:"makeListItemElement",value:function(i){var l=document.createElement("li");return l.innerHTML=i,l.className="".concat(this.name,"-item"),l.setAttribute("data-index",this.items.length),l}},{key:"pushListItemElement",value:function(i){this.listElement.appendChild(i),this.listElement.scrollTop+=i.offsetHeight,this.items.push(i)}},{key:"deleteListItemElement",value:function(i,l){for(var e=this.items,c=i;c<l;c+=1)this.listElement.removeChild(e[c]);O()(e).call(e,i,l-i+1)}},{key:"getListLength",value:function(){return this.items.length}},{key:"addClass",value:function(i,l){this.items[i]&&this.items[i].classList.add(l)}},{key:"removeClass",value:function(i,l){this.items[i]&&this.items[i].classList.remove(l)}},{key:"toggleClass",value:function(i,l){this.items[i]&&this.items[i].classList.toggle(l)}}]),M}(),Io=So,xo=function(M){var g,i,l,e=M.locale,c=M.makeSvgIcon,C=M.name,x=M.detail;return F()(g=F()(i=F()(l=`
    <div class="tui-image-editor-history-item history">
        <div class="history-item-icon">
            `.concat(c(["normal","active"],"history-".concat(C.toLowerCase()),!0),`
        </div>
        <span>
            `)).call(l,e.localize(C),`
            `)).call(i,x?"(".concat(e.localize(x),")"):"",`
        </span>
        <div class="history-item-checkbox">
            `)).call(g,c(["normal"],"history-check",!0),`
        </div>
    </div>
`)};function bo(M){var g=Mo();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function Mo(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var _o="history-item",Dn="selected-item",An="disabled-item",Eo=function(M){fe(i,M);var g=bo(i);function i(l,e){var c,C=e.locale,x=e.makeSvgIcon;return H(this,i),c=g.call(this,l,{name:"history"}),l.classList.add("enabled"),c.locale=C,c.makeSvgIcon=x,c._eventHandler={},c._historyIndex=c.getListLength(),c}return q(i,[{key:"add",value:function(e){var c=e.name,C=e.detail;this._hasDisabledItem()&&this.deleteListItemElement(this._historyIndex+1,this.getListLength());var x=xo({locale:this.locale,makeSvgIcon:this.makeSvgIcon,name:c,detail:C}),E=this.makeListItemElement(x);this.pushListItemElement(E),this._historyIndex=this.getListLength()-1,this._selectItem(this._historyIndex)}},{key:"init",value:function(){this.deleteListItemElement(1,this.getListLength()),this._historyIndex=0,this._selectItem(this._historyIndex)}},{key:"clear",value:function(){this.deleteListItemElement(0,this.getListLength()),this._historyIndex=-1}},{key:"prev",value:function(){this._historyIndex-=1,this._selectItem(this._historyIndex)}},{key:"next",value:function(){this._historyIndex+=1,this._selectItem(this._historyIndex)}},{key:"_hasDisabledItem",value:function(){return this.getListLength()-1>this._historyIndex}},{key:"_addHistoryEventListener",value:function(){var e=this;this._eventHandler.history=function(c){return e._clickHistoryItem(c)},this.listElement.addEventListener("click",this._eventHandler.history)}},{key:"_removeHistoryEventListener",value:function(){this.listElement.removeEventListener("click",this._eventHandler.history)}},{key:"_clickHistoryItem",value:function(e){var c=e.target,C=c.closest(".".concat(_o));if(!!C){var x=Co()(C.getAttribute("data-index"),10);if(x!==this._historyIndex){var E=Math.abs(x-this._historyIndex);x<this._historyIndex?this._actions.undo(E):this._actions.redo(E)}}}},{key:"_selectItem",value:function(e){for(var c=0;c<this.getListLength();c+=1)this.removeClass(c,Dn),this.removeClass(c,An),c>e&&this.addClass(c,An);this.addClass(e,Dn)}},{key:"destroy",value:function(){this.removeEvent(),De(this)}},{key:"addEvent",value:function(e){this._actions=e,this._addHistoryEventListener()}},{key:"removeEvent",value:function(){this._removeHistoryEventListener()}}]),i}(Io),To=Eo,Do=function(){function M(g){H(this,M),this._locale=g}return q(M,[{key:"localize",value:function(i){return this._locale[i]||i}}]),M}(),Ao=Do,wo={Shape:Ca,Crop:Ma,Resize:Aa,Flip:La,Rotate:Ha,Text:Xa,Mask:Ka,Icon:io,Draw:lo,Filter:po},Oo="1300",wn="history",ko="tie-panel-history",ri="on",ai={ZOOM_IN:"zoomIn",HAND:"hand"},On=function(){function M(g,i,l){H(this,M),this.options=this._initializeOption(i),this._actions=l,this.submenu=!1,this.imageSize={},this.uiSize={},this._locale=new Ao(this.options.locale),this.theme=new aa(this.options.theme),this.eventHandler={},this._submenuChangeTransection=!1,this._selectedElement=null,this._mainElement=null,this._editorElementWrap=null,this._editorElement=null,this._menuBarElement=null,this._subMenuElement=null,this._makeUiElement(g),this._setUiSize(),this._initMenuEvent=!1,this._makeSubMenu(),this._attachHistoryEvent(),this._attachZoomEvent()}return q(M,[{key:"destroy",value:function(){this._removeUiEvent(),this._destroyAllMenu(),this._selectedElement.innerHTML="",De(this)}},{key:"setUiDefaultSelectionStyle",value:function(i){return Y()({applyCropSelectionStyle:!0,applyGroupSelectionStyle:!0,selectionStyle:{cornerStyle:"circle",cornerSize:16,cornerColor:"#fff",cornerStrokeColor:"#fff",transparentCorners:!1,lineWidth:2,borderColor:"#fff"}},i)}},{key:"resizeEditor",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=i.uiSize,e=i.imageSize,c=e===void 0?this.imageSize:e;c!==this.imageSize&&(this.imageSize=c),l&&this._setUiSize(l);var C=this._getCanvasMaxDimension(),x=C.width,E=C.height,_=this._editorElement.style,N=this.options.menuBarPosition;_.height="".concat(E,"px"),_.width="".concat(x,"px"),this._setEditorPosition(N),this._editorElementWrap.style.bottom="0px",this._editorElementWrap.style.top="0px",this._editorElementWrap.style.left="0px",this._editorElementWrap.style.width="100%";var R=this._selectedElement.classList;N==="top"&&this._selectedElement.offsetWidth<Oo?R.add("tui-image-editor-top-optimization"):R.remove("tui-image-editor-top-optimization")}},{key:"toggleZoomButtonStatus",value:function(i){var l=this._buttonElements[i].classList;l.toggle(ri),i===ai.ZOOM_IN?this._buttonElements[ai.HAND].classList.remove(ri):this._buttonElements[ai.ZOOM_IN].classList.remove(ri)}},{key:"offZoomInButtonStatus",value:function(){var i=this._buttonElements[ai.ZOOM_IN].classList;i.remove(ri)}},{key:"changeHandButtonStatus",value:function(i){var l=this._buttonElements[ai.HAND].classList;l[i?"add":"remove"](ri)}},{key:"changeHelpButtonEnabled",value:function(i,l){var e=this._buttonElements[i].classList;e[l?"add":"remove"]("enabled")}},{key:"_initializeOption",value:function(i){return Y()({loadImage:{path:"",name:""},locale:{},menuIconPath:"",menu:["resize","crop","flip","rotate","draw","shape","icon","text","mask","filter"],initMenu:"",uiSize:{width:"100%",height:"100%"},menuBarPosition:"bottom"},i)}},{key:"_setUiSize",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.uiSize,l=this._selectedElement.style;l.width=i.width,l.height=i.height}},{key:"_makeSubMenu",value:function(){var i=this;G()(this.options.menu,function(l){var e,c=wo[l.replace(/^[a-z]/,function(C){return C.toUpperCase()})];i._makeMenuElement(l),i._buttonElements[l]=i._menuBarElement.querySelector(".tie-btn-".concat(l)),i[l]=new c(i._subMenuElement,{locale:i._locale,makeSvgIcon:V()(e=i.theme.makeMenSvgIconSet).call(e,i.theme),menuBarPosition:i.options.menuBarPosition,usageStatistics:i.options.usageStatistics})})}},{key:"_attachHistoryEvent",value:function(){var i,l,e;this.on(Mt.EXECUTE_COMMAND,V()(i=this._addHistory).call(i,this)),this.on(Mt.AFTER_UNDO,V()(l=this._selectPrevHistory).call(l,this)),this.on(Mt.AFTER_REDO,V()(e=this._selectNextHistory).call(e,this))}},{key:"_attachZoomEvent",value:function(){var i=this;this.on(Mt.HAND_STARTED,function(){i.offZoomInButtonStatus(),i.changeHandButtonStatus(!0)}),this.on(Mt.HAND_STOPPED,function(){return i.changeHandButtonStatus(!1)})}},{key:"_makeUiElement",value:function(i){var l,e;i.nodeType?e=i:e=document.querySelector(i);var c=ei(e);e.classList.add("tui-image-editor-container"),e.innerHTML=qr({locale:this._locale,biImage:this.theme.getStyle("common.bi"),loadButtonStyle:this.theme.getStyle("loadButton"),downloadButtonStyle:this.theme.getStyle("downloadButton"),menuBarPosition:this.options.menuBarPosition})+$r({locale:this._locale,biImage:this.theme.getStyle("common.bi"),commonStyle:this.theme.getStyle("common"),headerStyle:this.theme.getStyle("header"),loadButtonStyle:this.theme.getStyle("loadButton"),downloadButtonStyle:this.theme.getStyle("downloadButton"),submenuStyle:this.theme.getStyle("submenu")}),this._selectedElement=e,this._selectedElement.classList.add(this.options.menuBarPosition),this._mainElement=c(".tui-image-editor-main"),this._editorElementWrap=c(".tui-image-editor-wrap"),this._editorElement=c(".tui-image-editor"),this._helpMenuBarElement=c(".tui-image-editor-help-menu"),this._menuBarElement=c(".tui-image-editor-menu"),this._subMenuElement=c(".tui-image-editor-submenu"),this._buttonElements={download:this._selectedElement.querySelectorAll(".tui-image-editor-download-btn"),load:this._selectedElement.querySelectorAll(".tui-image-editor-load-btn")},this._addHelpMenus(),this._historyMenu=new To(this._buttonElements[wn],{locale:this._locale,makeSvgIcon:V()(l=this.theme.makeMenSvgIconSet).call(l,this.theme)}),this._activateZoomMenus()}},{key:"_activateZoomMenus",value:function(){var i=this;G()(ce,function(l){i.changeHelpButtonEnabled(l,!0)})}},{key:"_makeHelpMenuWithPartition",value:function(){var i;return F()(i=[]).call(i,P(ce),[""],P(ye),[""],P(be))}},{key:"_addHelpMenus",value:function(){var i=this,l=this._makeHelpMenuWithPartition();G()(l,function(e){e?(i._makeMenuElement(e,["normal","disabled","hover"],"help"),i._buttonElements[e]=i._helpMenuBarElement.querySelector(".tie-btn-".concat(e))):i._makeMenuPartitionElement()})}},{key:"_makeMenuPartitionElement",value:function(){var i=document.createElement("li"),l=document.createElement("div");i.className=mi("item"),l.className=mi("icpartition"),i.appendChild(l),this._helpMenuBarElement.appendChild(i)}},{key:"_makeMenuElement",value:function(i){var l,e,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["normal","active","hover"],C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal",x=document.createElement("li"),E=this.theme.makeMenSvgIconSet(c,i);this._addTooltipAttribute(x,i),x.className=F()(l=F()(e="tie-btn-".concat(i," ")).call(e,mi("item")," ")).call(l,C),x.innerHTML=E,C==="normal"?this._menuBarElement.appendChild(x):this._helpMenuBarElement.appendChild(x)}},{key:"_addHelpActionEvent",value:function(){var i=this;G()(Tt,function(l){i.eventHandler[l]=function(e){return i._actions.main[l](e)},i._buttonElements[l].addEventListener("click",i.eventHandler[l])})}},{key:"_removeHelpActionEvent",value:function(){var i=this;G()(Tt,function(l){i._buttonElements[l].removeEventListener("click",i.eventHandler[l])})}},{key:"_addHistory",value:function(i){if(!Br(i)){var l=typeof i=="string"?{name:i}:Hr(i);this._historyMenu.add(l)}}},{key:"initHistory",value:function(){this._historyMenu.init()}},{key:"clearHistory",value:function(){this._historyMenu.clear()}},{key:"_selectPrevHistory",value:function(){this._historyMenu.prev()}},{key:"_selectNextHistory",value:function(){this._historyMenu.next()}},{key:"toggleHistoryMenu",value:function(i){var l=i.target,e=l.closest(".".concat(ko));if(!e){var c=this._buttonElements[wn].classList;c.toggle("opened")}}},{key:"_addTooltipAttribute",value:function(i,l){i.setAttribute("tooltip-content",this._locale.localize(l.replace(/^[a-z]/g,function(e){return e.toUpperCase()})))}},{key:"_addDownloadEvent",value:function(){var i=this;this.eventHandler.download=function(){return i._actions.main.download()},G()(this._buttonElements.download,function(l){l.addEventListener("click",i.eventHandler.download)})}},{key:"_removeDownloadEvent",value:function(){var i=this;G()(this._buttonElements.download,function(l){l.removeEventListener("click",i.eventHandler.download)})}},{key:"_addLoadEvent",value:function(){var i=this;this.eventHandler.loadImage=function(l){return i._actions.main.load(l.target.files[0])},G()(this._buttonElements.load,function(l){l.addEventListener("change",i.eventHandler.loadImage)})}},{key:"_removeLoadEvent",value:function(){var i=this;G()(this._buttonElements.load,function(l){l.removeEventListener("change",i.eventHandler.loadImage)})}},{key:"_addMainMenuEvent",value:function(i){var l=this;this.eventHandler[i]=function(){return l.changeMenu(i)},this._buttonElements[i].addEventListener("click",this.eventHandler[i])}},{key:"_addSubMenuEvent",value:function(i){var l=this;this[i].addEvent(this._actions[i]),this[i].on(Mt.INPUT_BOX_EDITING_STARTED,function(){return l.fire(Mt.INPUT_BOX_EDITING_STARTED)}),this[i].on(Mt.INPUT_BOX_EDITING_STOPPED,function(){return l.fire(Mt.INPUT_BOX_EDITING_STOPPED)})}},{key:"_addMenuEvent",value:function(){var i=this;G()(this.options.menu,function(l){i._addMainMenuEvent(l),i._addSubMenuEvent(l)})}},{key:"_removeMainMenuEvent",value:function(){var i=this;G()(this.options.menu,function(l){i._buttonElements[l].removeEventListener("click",i.eventHandler[l]),i[l].off(Mt.INPUT_BOX_EDITING_STARTED),i[l].off(Mt.INPUT_BOX_EDITING_STOPPED)})}},{key:"getEditorArea",value:function(){return this._editorElement}},{key:"activeMenuEvent",value:function(){this._initMenuEvent||(this._addHelpActionEvent(),this._addDownloadEvent(),this._addMenuEvent(),this._initMenu(),this._historyMenu.addEvent(this._actions.history),this._initMenuEvent=!0)}},{key:"_removeUiEvent",value:function(){this._removeHelpActionEvent(),this._removeDownloadEvent(),this._removeLoadEvent(),this._removeMainMenuEvent(),this._historyMenu.removeEvent()}},{key:"_destroyAllMenu",value:function(){var i=this;G()(this.options.menu,function(l){i[l].destroy()}),this._historyMenu.destroy()}},{key:"initCanvas",value:function(){var i=this,l=this._getLoadImage();l.path&&this._actions.main.initLoadImage(l.path,l.name).then(function(){i.activeMenuEvent()}),this._addLoadEvent();var e=document.createElement("div");e.className=mi("grid-visual");var c=`<table>
           <tr><td class="dot left-top"></td><td></td><td class="dot right-top"></td></tr>
           <tr><td></td><td></td><td></td></tr>
           <tr><td class="dot left-bottom"></td><td></td><td class="dot right-bottom"></td></tr>
         </table>`;e.innerHTML=c,this._editorContainerElement=this._editorElement.querySelector(".tui-image-editor-canvas-container"),this._editorContainerElement.appendChild(e)}},{key:"_getLoadImage",value:function(){return this.options.loadImage}},{key:"changeMenu",value:function(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this._submenuChangeTransection||(this._submenuChangeTransection=!0,this._changeMenu(i,l,e),this._submenuChangeTransection=!1)}},{key:"_changeMenu",value:function(i,l,e){this.submenu&&(this._buttonElements[this.submenu].classList.remove("active"),this._mainElement.classList.remove("tui-image-editor-menu-".concat(this.submenu)),e&&this._actions.main.discardSelection(),this._actions.main.changeSelectableAll(!0),this[this.submenu].changeStandbyMode()),this.submenu===i&&l?this.submenu=null:(this._buttonElements[i].classList.add("active"),this._mainElement.classList.add("tui-image-editor-menu-".concat(i)),this.submenu=i,this[this.submenu].changeStartMode()),this.resizeEditor()}},{key:"_initMenu",value:function(){if(this.options.initMenu){var i=document.createEvent("MouseEvents");i.initEvent("click",!0,!1),this._buttonElements[this.options.initMenu].dispatchEvent(i)}this.icon&&this.icon.registerDefaultIcon()}},{key:"_getCanvasMaxDimension",value:function(){var i=this._editorContainerElement.style,l=i.maxWidth,e=i.maxHeight,c=Ge()(l),C=Ge()(e);return{width:c,height:C}}},{key:"_setEditorPosition",value:function(i){var l=this._getCanvasMaxDimension(),e=l.width,c=l.height,C=this._editorElement.style,x=0,E=0;this.submenu&&(i==="bottom"?c>this._editorElementWrap.scrollHeight-150?x=(c-this._editorElementWrap.scrollHeight)/2:x=150/2*-1:i==="top"?c>this._editorElementWrap.offsetHeight-150?x=150/2-(c-(this._editorElementWrap.offsetHeight-150))/2:x=150/2:i==="left"?e>this._editorElementWrap.offsetWidth-248?E=248/2-(e-(this._editorElementWrap.offsetWidth-248))/2:E=248/2:i==="right"&&(e>this._editorElementWrap.scrollWidth-248?E=(e-this._editorElementWrap.scrollWidth)/2:E=248/2*-1)),C.top="".concat(x,"px"),C.left="".concat(E,"px")}}]),M}();gt().mixin(On);var Po=On,Lo=X(381),$e=X.n(Lo),kn=function(){function M(){H(this,M),this.versionnumber="1.2.4",this.optionpresets={default:{corsenabled:!1,ltres:1,qtres:1,pathomit:8,rightangleenhance:!0,colorsampling:2,numberofcolors:16,mincolorratio:0,colorquantcycles:3,layering:0,strokewidth:1,linefilter:!1,scale:1,roundcoords:1,viewbox:!1,desc:!1,lcpr:0,qcpr:0,blurradius:0,blurdelta:20},posterized1:{colorsampling:0,numberofcolors:2},posterized2:{numberofcolors:4,blurradius:5},curvy:{ltres:.01,linefilter:!0,rightangleenhance:!1},sharp:{qtres:.01,linefilter:!1},detailed:{pathomit:0,roundcoords:2,ltres:.5,qtres:.5,numberofcolors:64},smoothed:{blurradius:5,blurdelta:64},grayscale:{colorsampling:0,colorquantcycles:1,numberofcolors:7},fixedpalette:{colorsampling:0,colorquantcycles:1,numberofcolors:27},randomsampling1:{colorsampling:1,numberofcolors:8},randomsampling2:{colorsampling:1,numberofcolors:64},artistic1:{colorsampling:0,colorquantcycles:1,pathomit:0,blurradius:5,blurdelta:64,ltres:.01,linefilter:!0,numberofcolors:16,strokewidth:2},artistic2:{qtres:.01,colorsampling:0,colorquantcycles:1,numberofcolors:4,strokewidth:0},artistic3:{qtres:10,ltres:10,numberofcolors:8},artistic4:{qtres:10,ltres:10,numberofcolors:64,blurradius:5,blurdelta:256,strokewidth:2},posterized3:{ltres:1,qtres:1,pathomit:20,rightangleenhance:!0,colorsampling:0,numberofcolors:3,mincolorratio:0,colorquantcycles:3,blurradius:3,blurdelta:20,strokewidth:0,linefilter:!1,roundcoords:1,pal:[{r:0,g:0,b:100,a:255},{r:255,g:255,b:255,a:255}]}},this.pathscan_combined_lookup=[[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[13,3,0,1],[13,2,-1,0],[7,1,0,-1],[7,0,1,0]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[11,1,0,-1],[14,0,1,0],[14,3,0,1],[11,2,-1,0]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]]],this.gks=[[.27901,.44198,.27901],[.135336,.228569,.272192,.228569,.135336],[.086776,.136394,.178908,.195843,.178908,.136394,.086776],[.063327,.093095,.122589,.144599,.152781,.144599,.122589,.093095,.063327],[.049692,.069304,.089767,.107988,.120651,.125194,.120651,.107988,.089767,.069304,.049692]],this.specpalette=[{r:0,g:0,b:0,a:255},{r:128,g:128,b:128,a:255},{r:0,g:0,b:128,a:255},{r:64,g:64,b:128,a:255},{r:192,g:192,b:192,a:255},{r:255,g:255,b:255,a:255},{r:128,g:128,b:192,a:255},{r:0,g:0,b:192,a:255},{r:128,g:0,b:0,a:255},{r:128,g:64,b:64,a:255},{r:128,g:0,b:128,a:255},{r:168,g:168,b:168,a:255},{r:192,g:128,b:128,a:255},{r:192,g:0,b:0,a:255},{r:255,g:255,b:255,a:255},{r:0,g:128,b:0,a:255}]}return q(M,[{key:"imageToSVG",value:function(i,l,e){var c=this;e=this.checkoptions(e),this.loadImage(i,function(C){l(c.imagedataToSVG(c.getImgdata(C),e))},e)}},{key:"imagedataToSVG",value:function(i,l){l=this.checkoptions(l);var e=this.imagedataToTracedata(i,l);return this.getsvgstring(e,l)}},{key:"imageToTracedata",value:function(i,l,e){var c=this;e=this.checkoptions(e),this.loadImage(i,function(C){l(c.imagedataToTracedata(c.getImgdata(C),e))},e)}},{key:"imagedataToTracedata",value:function(i,l){l=this.checkoptions(l);var e=this.colorquantization(i,l),c;if(l.layering===0){c={layers:[],palette:e.palette,width:e.array[0].length-2,height:e.array.length-2};for(var C=0;C<e.palette.length;C+=1){var x=this.batchtracepaths(this.internodes(this.pathscan(this.layeringstep(e,C),l.pathomit),l),l.ltres,l.qtres);c.layers.push(x)}}else{var E=this.layering(e);l.layercontainerid&&this.drawLayers(E,this.specpalette,l.scale,l.layercontainerid);var _=this.batchpathscan(E,l.pathomit),N=this.batchinternodes(_,l);c={layers:this.batchtracelayers(N,l.ltres,l.qtres),palette:e.palette,width:i.width,height:i.height}}return c}},{key:"checkoptions",value:function(i){i=i||{},typeof i=="string"&&(i=i.toLowerCase(),this.optionpresets[i]?i=this.optionpresets[i]:i={});for(var l=xt()(this.optionpresets.default),e=0;e<l.length;e+=1)i.hasOwnProperty(l[e])||(i[l[e]]=this.optionpresets.default[l[e]]);return i}},{key:"colorquantization",value:function(i,l){var e=[],c=0,C,x,E,_=[],N=i.width*i.height,R,et,it,ut,st;for(et=0;et<i.height+2;et+=1)for(e[et]=[],R=0;R<i.width+2;R+=1)e[et][R]=-1;for(l.pal?st=l.pal:l.colorsampling===0?st=this.generatepalette(l.numberofcolors):l.colorsampling===1?st=this.samplepalette(l.numberofcolors,i):st=this.samplepalette2(l.numberofcolors,i),l.blurradius>0&&(i=this.blur(i,l.blurradius,l.blurdelta)),ut=0;ut<l.colorquantcycles;ut+=1){if(ut>0)for(it=0;it<st.length;it+=1)_[it].n>0&&(st[it]={r:Math.floor(_[it].r/_[it].n),g:Math.floor(_[it].g/_[it].n),b:Math.floor(_[it].b/_[it].n),a:Math.floor(_[it].a/_[it].n)}),_[it].n/N<l.mincolorratio&&ut<l.colorquantcycles-1&&(st[it]={r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)});for(R=0;R<st.length;R+=1)_[R]={r:0,g:0,b:0,a:0,n:0};for(et=0;et<i.height;et+=1)for(R=0;R<i.width;R+=1){for(c=(et*i.width+R)*4,E=0,x=1024,it=0;it<st.length;it+=1)C=Math.abs(st[it].r-i.data[c])+Math.abs(st[it].g-i.data[c+1])+Math.abs(st[it].b-i.data[c+2])+Math.abs(st[it].a-i.data[c+3]),C<x&&(x=C,E=it);_[E].r+=i.data[c],_[E].g+=i.data[c+1],_[E].b+=i.data[c+2],_[E].a+=i.data[c+3],_[E].n+=1,e[et+1][R+1]=E}}return{array:e,palette:st}}},{key:"samplepalette",value:function(i,l){for(var e,c=[],C=0;C<i;C+=1)e=Math.floor(Math.random()*l.data.length/4)*4,c.push({r:l.data[e],g:l.data[e+1],b:l.data[e+2],a:l.data[e+3]});return c}},{key:"samplepalette2",value:function(i,l){for(var e,c=[],C=Math.ceil(Math.sqrt(i)),x=Math.ceil(i/C),E=l.width/(C+1),_=l.height/(x+1),N=0;N<x;N+=1)for(var R=0;R<C&&c.length!==i;R+=1)e=Math.floor((N+1)*_*l.width+(R+1)*E)*4,c.push({r:l.data[e],g:l.data[e+1],b:l.data[e+2],a:l.data[e+3]});return c}},{key:"generatepalette",value:function(i){var l=[],e,c,C;if(i<8)for(var x=Math.floor(255/(i-1)),E=0;E<i;E+=1)l.push({r:E*x,g:E*x,b:E*x,a:255});else{var _=Math.floor(Math.pow(i,.3333333333333333)),N=Math.floor(255/(_-1)),R=i-_*_*_;for(e=0;e<_;e+=1)for(c=0;c<_;c+=1)for(C=0;C<_;C+=1)l.push({r:e*N,g:c*N,b:C*N,a:255});for(e=0;e<R;e+=1)l.push({r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)})}return l}},{key:"layering",value:function(i){var l=[],e=0,c=i.array.length,C=i.array[0].length,x,E,_,N,R,et,it,ut,st,ft,wt;for(wt=0;wt<i.palette.length;wt+=1)for(l[wt]=[],ft=0;ft<c;ft+=1)for(l[wt][ft]=[],st=0;st<C;st+=1)l[wt][ft][st]=0;for(ft=1;ft<c-1;ft+=1)for(st=1;st<C-1;st+=1)e=i.array[ft][st],x=i.array[ft-1][st-1]===e?1:0,E=i.array[ft-1][st]===e?1:0,_=i.array[ft-1][st+1]===e?1:0,N=i.array[ft][st-1]===e?1:0,R=i.array[ft][st+1]===e?1:0,et=i.array[ft+1][st-1]===e?1:0,it=i.array[ft+1][st]===e?1:0,ut=i.array[ft+1][st+1]===e?1:0,l[e][ft+1][st+1]=1+R*2+ut*4+it*8,N||(l[e][ft+1][st]=0+2+it*4+et*8),E||(l[e][ft][st+1]=0+_*2+R*4+8),x||(l[e][ft][st]=0+E*2+4+N*8);return l}},{key:"layeringstep",value:function(i,l){var e=[],c=i.array.length,C=i.array[0].length,x,E;for(E=0;E<c;E+=1)for(e[E]=[],x=0;x<C;x+=1)e[E][x]=0;for(E=1;E<c;E+=1)for(x=1;x<C;x+=1)e[E][x]=(i.array[E-1][x-1]===l?1:0)+(i.array[E-1][x]===l?2:0)+(i.array[E][x-1]===l?8:0)+(i.array[E][x]===l?4:0);return e}},{key:"pathscan",value:function(i,l){for(var e=[],c=0,C=0,x=0,E=0,_=i[0].length,N=i.length,R=0,et=!0,it=!1,ut,st=0;st<N;st+=1)for(var ft=0;ft<_;ft+=1)if(i[st][ft]===4||i[st][ft]===11)for(x=ft,E=st,e[c]={},e[c].points=[],e[c].boundingbox=[x,E,x,E],e[c].holechildren=[],et=!1,C=0,it=i[st][ft]===11,R=1;!et;){if(e[c].points[C]={},e[c].points[C].x=x-1,e[c].points[C].y=E-1,e[c].points[C].t=i[E][x],x-1<e[c].boundingbox[0]&&(e[c].boundingbox[0]=x-1),x-1>e[c].boundingbox[2]&&(e[c].boundingbox[2]=x-1),E-1<e[c].boundingbox[1]&&(e[c].boundingbox[1]=E-1),E-1>e[c].boundingbox[3]&&(e[c].boundingbox[3]=E-1),ut=this.pathscan_combined_lookup[i[E][x]][R],i[E][x]=ut[0],R=ut[1],x+=ut[2],E+=ut[3],x-1===e[c].points[0].x&&E-1===e[c].points[0].y)if(et=!0,e[c].points.length<l)e.pop();else{if(e[c].isholepath=!!it,it){for(var wt=0,Jt=[-1,-1,_+1,N+1],Kt=0;Kt<c;Kt++)!e[Kt].isholepath&&this.boundingboxincludes(e[Kt].boundingbox,e[c].boundingbox)&&this.boundingboxincludes(Jt,e[Kt].boundingbox)&&(wt=Kt,Jt=e[Kt].boundingbox);e[wt].holechildren.push(c)}c+=1}C+=1}return e}},{key:"boundingboxincludes",value:function(i,l){return i[0]<l[0]&&i[1]<l[1]&&i[2]>l[2]&&i[3]>l[3]}},{key:"batchpathscan",value:function(i,l){var e=[];for(var c in i)!i.hasOwnProperty(c)||(e[c]=this.pathscan(i[c],l));return e}},{key:"internodes",value:function(i,l){var e=[],c=0,C=0,x=0,E=0,_=0,N,R;for(N=0;N<i.length;N+=1)for(e[N]={},e[N].points=[],e[N].boundingbox=i[N].boundingbox,e[N].holechildren=i[N].holechildren,e[N].isholepath=i[N].isholepath,c=i[N].points.length,R=0;R<c;R+=1)C=(R+1)%c,x=(R+2)%c,E=(R-1+c)%c,_=(R-2+c)%c,l.rightangleenhance&&this.testrightangle(i[N],_,E,R,C,x)&&(e[N].points.length>0&&(e[N].points[e[N].points.length-1].linesegment=this.getdirection(e[N].points[e[N].points.length-1].x,e[N].points[e[N].points.length-1].y,i[N].points[R].x,i[N].points[R].y)),e[N].points.push({x:i[N].points[R].x,y:i[N].points[R].y,linesegment:this.getdirection(i[N].points[R].x,i[N].points[R].y,(i[N].points[R].x+i[N].points[C].x)/2,(i[N].points[R].y+i[N].points[C].y)/2)})),e[N].points.push({x:(i[N].points[R].x+i[N].points[C].x)/2,y:(i[N].points[R].y+i[N].points[C].y)/2,linesegment:this.getdirection((i[N].points[R].x+i[N].points[C].x)/2,(i[N].points[R].y+i[N].points[C].y)/2,(i[N].points[C].x+i[N].points[x].x)/2,(i[N].points[C].y+i[N].points[x].y)/2)});return e}},{key:"testrightangle",value:function(i,l,e,c,C,x){return i.points[c].x===i.points[l].x&&i.points[c].x===i.points[e].x&&i.points[c].y===i.points[C].y&&i.points[c].y===i.points[x].y||i.points[c].y===i.points[l].y&&i.points[c].y===i.points[e].y&&i.points[c].x===i.points[C].x&&i.points[c].x===i.points[x].x}},{key:"getdirection",value:function(i,l,e,c){var C=8;return i<e?l<c?C=1:l>c?C=7:C=0:i>e?l<c?C=3:l>c?C=5:C=4:l<c?C=2:l>c?C=6:C=8,C}},{key:"batchinternodes",value:function(i,l){var e=[];for(var c in i)!i.hasOwnProperty(c)||(e[c]=this.internodes(i[c],l));return e}},{key:"tracepath",value:function(i,l,e){var c=0,C,x,E,_={};for(_.segments=[],_.boundingbox=i.boundingbox,_.holechildren=i.holechildren,_.isholepath=i.isholepath;c<i.points.length;){var N;for(C=i.points[c].linesegment,x=-1,E=c+1;(i.points[E].linesegment===C||i.points[E].linesegment===x||x===-1)&&E<i.points.length-1;)i.points[E].linesegment!==C&&x===-1&&(x=i.points[E].linesegment),E+=1;E===i.points.length-1&&(E=0),_.segments=F()(N=_.segments).call(N,this.fitseq(i,l,e,c,E)),E>0?c=E:c=i.points.length}return _}},{key:"fitseq",value:function(i,l,e,c,C){var x;if(C>i.points.length||C<0)return[];var E=c,_=0,N=!0,R,et,it,ut=C-c;ut<0&&(ut+=i.points.length);for(var st=(i.points[C].x-i.points[c].x)/ut,ft=(i.points[C].y-i.points[c].y)/ut,wt=(c+1)%i.points.length,Jt;wt!=C;)Jt=wt-c,Jt<0&&(Jt+=i.points.length),R=i.points[c].x+st*Jt,et=i.points[c].y+ft*Jt,it=(i.points[wt].x-R)*(i.points[wt].x-R)+(i.points[wt].y-et)*(i.points[wt].y-et),it>l&&(N=!1),it>_&&(E=wt,_=it),wt=(wt+1)%i.points.length;if(N)return[{type:"L",x1:i.points[c].x,y1:i.points[c].y,x2:i.points[C].x,y2:i.points[C].y}];var Kt=E;N=!0,_=0;var qt=(Kt-c)/ut,zt=(1-qt)*(1-qt),se=2*(1-qt)*qt,Ee=qt*qt,Oe=(zt*i.points[c].x+Ee*i.points[C].x-i.points[Kt].x)/-se,xe=(zt*i.points[c].y+Ee*i.points[C].y-i.points[Kt].y)/-se;for(wt=c+1;wt!=C;)qt=(wt-c)/ut,zt=(1-qt)*(1-qt),se=2*(1-qt)*qt,Ee=qt*qt,R=zt*i.points[c].x+se*Oe+Ee*i.points[C].x,et=zt*i.points[c].y+se*xe+Ee*i.points[C].y,it=(i.points[wt].x-R)*(i.points[wt].x-R)+(i.points[wt].y-et)*(i.points[wt].y-et),it>e&&(N=!1),it>_&&(E=wt,_=it),wt=(wt+1)%i.points.length;if(N)return[{type:"Q",x1:i.points[c].x,y1:i.points[c].y,x2:Oe,y2:xe,x3:i.points[C].x,y3:i.points[C].y}];var Re=Kt;return F()(x=this.fitseq(i,l,e,c,Re)).call(x,this.fitseq(i,l,e,Re,C))}},{key:"batchtracepaths",value:function(i,l,e){var c=[];for(var C in i)!i.hasOwnProperty(C)||c.push(this.tracepath(i[C],l,e));return c}},{key:"batchtracelayers",value:function(i,l,e){var c=[];for(var C in i)!i.hasOwnProperty(C)||(c[C]=this.batchtracepaths(i[C],l,e));return c}},{key:"roundtodec",value:function(i,l){return Number(i.toFixed(l))}},{key:"svgpathstring",value:function(i,l,e,c){var C,x,E=i.layers[l],_=E[e],N="",R;if(c.linefilter&&_.segments.length<3)return N;if(N=F()(C="<path ".concat(c.desc?F()(x='desc="l '.concat(l," p ")).call(x,e,'" '):"")).call(C,this.tosvgcolorstr(i.palette[l],c),'d="'),c.roundcoords===-1){var et;for(N+=F()(et="M ".concat(_.segments[0].x1*c.scale," ")).call(et,_.segments[0].y1*c.scale," "),R=0;R<_.segments.length;R++){var it,ut;if(N+=F()(it=F()(ut="".concat(_.segments[R].type," ")).call(ut,_.segments[R].x2*c.scale," ")).call(it,_.segments[R].y2*c.scale," "),_.segments[R].hasOwnProperty("x3")){var st;N+=F()(st="".concat(_.segments[R].x3*c.scale," ")).call(st,_.segments[R].y3*c.scale," ")}}N+="Z "}else{var ft;for(N+=F()(ft="M ".concat(this.roundtodec(_.segments[0].x1*c.scale,c.roundcoords)," ")).call(ft,this.roundtodec(_.segments[0].y1*c.scale,c.roundcoords)," "),R=0;R<_.segments.length;R++){var wt,Jt;if(N+=F()(wt=F()(Jt="".concat(_.segments[R].type," ")).call(Jt,this.roundtodec(_.segments[R].x2*c.scale,c.roundcoords)," ")).call(wt,this.roundtodec(_.segments[R].y2*c.scale,c.roundcoords)," "),_.segments[R].hasOwnProperty("x3")){var Kt;N+=F()(Kt="".concat(this.roundtodec(_.segments[R].x3*c.scale,c.roundcoords)," ")).call(Kt,this.roundtodec(_.segments[R].y3*c.scale,c.roundcoords)," ")}}N+="Z "}for(var qt=0;qt<_.holechildren.length;qt++){var zt=E[_.holechildren[qt]];if(c.roundcoords===-1){if(zt.segments[zt.segments.length-1].hasOwnProperty("x3")){var se;N+=F()(se="M ".concat(zt.segments[zt.segments.length-1].x3*c.scale," ")).call(se,zt.segments[zt.segments.length-1].y3*c.scale," ")}else{var Ee;N+=F()(Ee="M ".concat(zt.segments[zt.segments.length-1].x2*c.scale," ")).call(Ee,zt.segments[zt.segments.length-1].y2*c.scale," ")}for(R=zt.segments.length-1;R>=0;R--){var Oe;if(N+="".concat(zt.segments[R].type," "),zt.segments[R].hasOwnProperty("x3")){var xe;N+=F()(xe="".concat(zt.segments[R].x2*c.scale," ")).call(xe,zt.segments[R].y2*c.scale," ")}N+=F()(Oe="".concat(zt.segments[R].x1*c.scale," ")).call(Oe,zt.segments[R].y1*c.scale," ")}}else{if(zt.segments[zt.segments.length-1].hasOwnProperty("x3")){var Re;N+=F()(Re="M ".concat(this.roundtodec(zt.segments[zt.segments.length-1].x3*c.scale)," ")).call(Re,this.roundtodec(zt.segments[zt.segments.length-1].y3*c.scale)," ")}else{var Ve;N+=F()(Ve="M ".concat(this.roundtodec(zt.segments[zt.segments.length-1].x2*c.scale)," ")).call(Ve,this.roundtodec(zt.segments[zt.segments.length-1].y2*c.scale)," ")}for(R=zt.segments.length-1;R>=0;R--){var ke;if(N+="".concat(zt.segments[R].type," "),zt.segments[R].hasOwnProperty("x3")){var si;N+=F()(si="".concat(this.roundtodec(zt.segments[R].x2*c.scale)," ")).call(si,this.roundtodec(zt.segments[R].y2*c.scale)," ")}N+=F()(ke="".concat(this.roundtodec(zt.segments[R].x1*c.scale)," ")).call(ke,this.roundtodec(zt.segments[R].y1*c.scale)," ")}}N+="Z "}if(N+='" />',c.lcpr||c.qcpr){for(R=0;R<_.segments.length;R++){if(_.segments[R].hasOwnProperty("x3")&&c.qcpr){var Ei,Ti,Di,Ai,wi,Oi,ki,Pi,Li,Ni,ji,Ri,zi,Fi;N+=F()(Ei=F()(Ti=F()(Di='<circle cx="'.concat(_.segments[R].x2*c.scale,'" cy="')).call(Di,_.segments[R].y2*c.scale,'" r="')).call(Ti,c.qcpr,'" fill="cyan" stroke-width="')).call(Ei,c.qcpr*.2,'" stroke="black" />'),N+=F()(Ai=F()(wi=F()(Oi='<circle cx="'.concat(_.segments[R].x3*c.scale,'" cy="')).call(Oi,_.segments[R].y3*c.scale,'" r="')).call(wi,c.qcpr,'" fill="white" stroke-width="')).call(Ai,c.qcpr*.2,'" stroke="black" />'),N+=F()(ki=F()(Pi=F()(Li=F()(Ni='<line x1="'.concat(_.segments[R].x1*c.scale,'" y1="')).call(Ni,_.segments[R].y1*c.scale,'" x2="')).call(Li,_.segments[R].x2*c.scale,'" y2="')).call(Pi,_.segments[R].y2*c.scale,'" stroke-width="')).call(ki,c.qcpr*.2,'" stroke="cyan" />'),N+=F()(ji=F()(Ri=F()(zi=F()(Fi='<line x1="'.concat(_.segments[R].x2*c.scale,'" y1="')).call(Fi,_.segments[R].y2*c.scale,'" x2="')).call(zi,_.segments[R].x3*c.scale,'" y2="')).call(Ri,_.segments[R].y3*c.scale,'" stroke-width="')).call(ji,c.qcpr*.2,'" stroke="cyan" />')}if(!_.segments[R].hasOwnProperty("x3")&&c.lcpr){var Bi,Hi,Ui;N+=F()(Bi=F()(Hi=F()(Ui='<circle cx="'.concat(_.segments[R].x2*c.scale,'" cy="')).call(Ui,_.segments[R].y2*c.scale,'" r="')).call(Hi,c.lcpr,'" fill="white" stroke-width="')).call(Bi,c.lcpr*.2,'" stroke="black" />')}}for(var qt=0;qt<_.holechildren.length;qt++){var zt=E[_.holechildren[qt]];for(R=0;R<zt.segments.length;R++){if(zt.segments[R].hasOwnProperty("x3")&&c.qcpr){var Yi,ze,Ke,mr,pr,yr,Cr,Sr,Ir,xr,br,Mr,_r,Er;N+=F()(Yi=F()(ze=F()(Ke='<circle cx="'.concat(zt.segments[R].x2*c.scale,'" cy="')).call(Ke,zt.segments[R].y2*c.scale,'" r="')).call(ze,c.qcpr,'" fill="cyan" stroke-width="')).call(Yi,c.qcpr*.2,'" stroke="black" />'),N+=F()(mr=F()(pr=F()(yr='<circle cx="'.concat(zt.segments[R].x3*c.scale,'" cy="')).call(yr,zt.segments[R].y3*c.scale,'" r="')).call(pr,c.qcpr,'" fill="white" stroke-width="')).call(mr,c.qcpr*.2,'" stroke="black" />'),N+=F()(Cr=F()(Sr=F()(Ir=F()(xr='<line x1="'.concat(zt.segments[R].x1*c.scale,'" y1="')).call(xr,zt.segments[R].y1*c.scale,'" x2="')).call(Ir,zt.segments[R].x2*c.scale,'" y2="')).call(Sr,zt.segments[R].y2*c.scale,'" stroke-width="')).call(Cr,c.qcpr*.2,'" stroke="cyan" />'),N+=F()(br=F()(Mr=F()(_r=F()(Er='<line x1="'.concat(zt.segments[R].x2*c.scale,'" y1="')).call(Er,zt.segments[R].y2*c.scale,'" x2="')).call(_r,zt.segments[R].x3*c.scale,'" y2="')).call(Mr,zt.segments[R].y3*c.scale,'" stroke-width="')).call(br,c.qcpr*.2,'" stroke="cyan" />')}if(!zt.segments[R].hasOwnProperty("x3")&&c.lcpr){var Tr,Dr,Ar;N+=F()(Tr=F()(Dr=F()(Ar='<circle cx="'.concat(zt.segments[R].x2*c.scale,'" cy="')).call(Ar,zt.segments[R].y2*c.scale,'" r="')).call(Dr,c.lcpr,'" fill="white" stroke-width="')).call(Tr,c.lcpr*.2,'" stroke="black" />')}}}}return N}},{key:"getsvgstring",value:function(i,l){var e,c,C;l=this.checkoptions(l);for(var x=i.width*l.scale,E=i.height*l.scale,_=F()(e="<svg ".concat(l.viewbox?F()(c='viewBox="0 0 '.concat(x," ")).call(c,E,'" '):F()(C='width="'.concat(x,'" height="')).call(C,E,'" '),'version="1.1" xmlns="http://www.w3.org/2000/svg" desc="Created with imagetracer.js version ')).call(e,this.versionnumber,'" >'),N=0;N<i.layers.length;N+=1)for(var R=0;R<i.layers[N].length;R+=1)i.layers[N][R].isholepath||(_+=this.svgpathstring(i,N,R,l));return _+="</svg>",_}},{key:"compareNumbers",value:function(i,l){return i-l}},{key:"torgbastr",value:function(i){var l,e,c;return F()(l=F()(e=F()(c="rgba(".concat(i.r,",")).call(c,i.g,",")).call(e,i.b,",")).call(l,i.a,")")}},{key:"tosvgcolorstr",value:function(i,l){var e,c,C,x,E,_,N;return F()(e=F()(c=F()(C=F()(x=F()(E=F()(_=F()(N='fill="rgb('.concat(i.r,",")).call(N,i.g,",")).call(_,i.b,')" stroke="rgb(')).call(E,i.r,",")).call(x,i.g,",")).call(C,i.b,')" stroke-width="')).call(c,l.strokewidth,'" opacity="')).call(e,i.a/255,'" ')}},{key:"appendSVGString",value:function(i,l){var e;l?(e=document.getElementById(l),e||(e=document.createElement("div"),e.id=l,document.body.appendChild(e))):(e=document.createElement("div"),document.body.appendChild(e)),e.innerHTML+=i}},{key:"blur",value:function(i,l,e){var c,C,x,E,_,N,R,et,it,ut,st={width:i.width,height:i.height,data:[]};if(l=Math.floor(l),l<1)return i;l>5&&(l=5),e=Math.abs(e),e>1024&&(e=1024);var ft=this.gks[l-1];for(C=0;C<i.height;C++)for(c=0;c<i.width;c++){for(N=0,R=0,et=0,it=0,ut=0,x=-l;x<l+1;x++)c+x>0&&c+x<i.width&&(_=(C*i.width+c+x)*4,N+=i.data[_]*ft[x+l],R+=i.data[_+1]*ft[x+l],et+=i.data[_+2]*ft[x+l],it+=i.data[_+3]*ft[x+l],ut+=ft[x+l]);_=(C*i.width+c)*4,st.data[_]=Math.floor(N/ut),st.data[_+1]=Math.floor(R/ut),st.data[_+2]=Math.floor(et/ut),st.data[_+3]=Math.floor(it/ut)}var wt=new Uint8ClampedArray(st.data);for(C=0;C<i.height;C++)for(c=0;c<i.width;c++){for(N=0,R=0,et=0,it=0,ut=0,x=-l;x<l+1;x++)C+x>0&&C+x<i.height&&(_=((C+x)*i.width+c)*4,N+=wt[_]*ft[x+l],R+=wt[_+1]*ft[x+l],et+=wt[_+2]*ft[x+l],it+=wt[_+3]*ft[x+l],ut+=ft[x+l]);_=(C*i.width+c)*4,st.data[_]=Math.floor(N/ut),st.data[_+1]=Math.floor(R/ut),st.data[_+2]=Math.floor(et/ut),st.data[_+3]=Math.floor(it/ut)}for(C=0;C<i.height;C++)for(c=0;c<i.width;c++)_=(C*i.width+c)*4,E=Math.abs(st.data[_]-i.data[_])+Math.abs(st.data[_+1]-i.data[_+1])+Math.abs(st.data[_+2]-i.data[_+2])+Math.abs(st.data[_+3]-i.data[_+3]),E>e&&(st.data[_]=i.data[_],st.data[_+1]=i.data[_+1],st.data[_+2]=i.data[_+2],st.data[_+3]=i.data[_+3]);return st}},{key:"loadImage",value:function(i,l,e){var c=new Image;e&&e.corsenabled&&(c.crossOrigin="Anonymous"),c.src=i,c.onload=function(){var C=document.createElement("canvas");C.width=c.width,C.height=c.height;var x=C.getContext("2d");x.drawImage(c,0,0),l(C)}}},{key:"getImgdata",value:function(i){var l=i.getContext("2d");return l.getImageData(0,0,i.width,i.height)}},{key:"drawLayers",value:function(i,l,e,c){e=e||1;var C,x,E,_,N,R;c?(R=document.getElementById(c),R||(R=document.createElement("div"),R.id=c,document.body.appendChild(R))):(R=document.createElement("div"),document.body.appendChild(R));for(N in i)if(!!i.hasOwnProperty(N)){C=i[N][0].length,x=i[N].length;var et=document.createElement("canvas");et.width=C*e,et.height=x*e;var it=et.getContext("2d");for(_=0;_<x;_+=1)for(E=0;E<C;E+=1)it.fillStyle=this.torgbastr(l[i[N][_][E]%l.length]),it.fillRect(E*e,_*e,e,e);R.appendChild(et)}}}],[{key:"tracerDefaultOption",value:function(){return{pathomit:100,ltres:.1,qtres:1,scale:1,strokewidth:5,viewbox:!1,linefilter:!0,desc:!1,rightangleenhance:!1,pal:[{r:0,g:0,b:0,a:255},{r:255,g:255,b:255,a:255}]}}}]),M}(),No={getActions:function(){return{main:this._mainAction(),shape:this._shapeAction(),crop:this._cropAction(),resize:this._resizeAction(),flip:this._flipAction(),rotate:this._rotateAction(),text:this._textAction(),mask:this._maskAction(),draw:this._drawAction(),icon:this._iconAction(),filter:this._filterAction(),history:this._historyAction()}},_mainAction:function(){var g=this,i=function(){g.ui.submenu==="crop"&&(g.stopDrawingMode(),g.ui.changeMenu("crop"))},l=function(N){g.ui.submenu==="rotate"&&g.ui.rotate.setRangeBarAngle("setAngle",N)},e=function(N){g.ui.submenu==="filter"&&$e()(g.ui).setFilterState(N)},c=function(N){return l(N),e(N),N},C=function(){var N=g._graphics.getZoomMode();g.stopDrawingMode(),N!==Te.ZOOM?(g.startDrawingMode(oe.ZOOM),g._graphics.startZoomInMode()):g._graphics.endZoomInMode()},x=function(){var N=g._graphics.getZoomMode();g.stopDrawingMode(),N!==Te.HAND?(g.startDrawingMode(oe.ZOOM),g._graphics.startHandMode()):g._graphics.endHandMode()},E=function(){$e()(g.ui)&&$e()(g.ui).initFilterCheckBoxState()};return Y()({initLoadImage:function(N,R){return g.loadImageFromURL(N,R).then(function(et){i(),g.ui.initializeImgUrl=N,g.ui.resizeEditor({imageSize:et}),g.clearUndoStack(),g._invoker.fire(Mt.EXECUTE_COMMAND,ie.LOAD_IMAGE)})},undo:function(){g.isEmptyUndoStack()||(i(),g.deactivateAll(),g.undo().then(c))},redo:function(){g.isEmptyRedoStack()||(i(),g.deactivateAll(),g.redo().then(c))},reset:function(){i(),g.loadImageFromURL(g.ui.initializeImgUrl,"resetImage").then(function(N){i(),E(),g.ui.resizeEditor({imageSize:N}),g.clearUndoStack(),g._initHistory()})},delete:function(){g.ui.changeHelpButtonEnabled("delete",!1),i(),g.removeActiveObject(),g.activeObjectId=null},deleteAll:function(){i(),g.clearObjects(),g.ui.changeHelpButtonEnabled("delete",!1),g.ui.changeHelpButtonEnabled("deleteAll",!1)},load:function(N){_e()||alert("This browser does not support file-api"),g.ui.initializeImgUrl=K().createObjectURL(N),g.loadImageFromFile(N).then(function(R){i(),E(),g.clearUndoStack(),g.ui.activeMenuEvent(),g.ui.resizeEditor({imageSize:R}),g._clearHistory(),g._invoker.fire(Mt.EXECUTE_COMMAND,ie.LOAD_IMAGE)}).catch(function(R){return yt().reject(R)})},download:function(){var N=g.toDataURL(),R=g.getImageName(),et,it,ut;_e()&&window.saveAs?(et=gi(N),it=et.type.split("/")[1],R.split(".").pop()!==it&&(R+=".".concat(it)),saveAs(et,R)):(ut=window.open(),ut.document.body.innerHTML="<img src='".concat(N,"'>"))},history:function(N){g.ui.toggleHistoryMenu(N)},zoomIn:function(){g.ui.toggleZoomButtonStatus("zoomIn"),g.deactivateAll(),C()},zoomOut:function(){g._graphics.zoomOut()},hand:function(){g.ui.offZoomInButtonStatus(),g.ui.toggleZoomButtonStatus("hand"),g.deactivateAll(),x()}},this._commonAction())},_iconAction:function(){var g=this;return Y()({changeColor:function(l){g.activeObjectId&&g.changeIconColor(g.activeObjectId,l)},addIcon:function(l,e){g.startDrawingMode("ICON"),g.setDrawingIcon(l,e)},cancelAddIcon:function(){g.ui.icon.clearIconType(),g.changeSelectableAll(!0),g.changeCursor("default"),g.stopDrawingMode()},registerDefaultIcons:function(l,e){var c={};c[l]=e,g.registerIcons(c)},registerCustomIcon:function(l,e){var c=new kn;c.imageToSVG(l,function(C){var x=C.match(/path[^>]*d="([^"]*)"/),E=ot(x,2),_=E[1],N={};N[e.name]=_,g.registerIcons(N),g.addIcon(e.name,{left:100,top:100})},kn.tracerDefaultOption())}},this._commonAction())},_drawAction:function(){var g=this;return Y()({setDrawMode:function(l,e){g.stopDrawingMode(),l==="free"?g.startDrawingMode("FREE_DRAWING",e):g.startDrawingMode("LINE_DRAWING",e)},setColor:function(l){g.setBrush({color:l})}},this._commonAction())},_maskAction:function(){var g=this;return Y()({loadImageFromURL:function(l,e){return g.loadImageFromURL(g.toDataURL(),"FilterImage").then(function(){g.addImageObject(l).then(function(){K().revokeObjectURL(e)}),g._invoker.fire(Mt.EXECUTE_COMMAND,ie.LOAD_MASK_IMAGE)})},applyFilter:function(){g.applyFilter("mask",{maskObjId:g.activeObjectId})}},this._commonAction())},_textAction:function(){var g=this;return Y()({changeTextStyle:function(l,e){g.activeObjectId&&g.changeTextStyle(g.activeObjectId,l,e)}},this._commonAction())},_rotateAction:function(){var g=this;return Y()({rotate:function(l,e){g.rotate(l,e),g.ui.resizeEditor(),g.ui.rotate.setRangeBarAngle("rotate",l)},setAngle:function(l,e){g.setAngle(l,e),g.ui.resizeEditor(),g.ui.rotate.setRangeBarAngle("setAngle",l)}},this._commonAction())},_shapeAction:function(){var g=this;return Y()({changeShape:function(l,e){g.activeObjectId&&g.changeShape(g.activeObjectId,l,e)},setDrawingShape:function(l){g.setDrawingShape(l)}},this._commonAction())},_cropAction:function(){var g=this;return Y()({crop:function(){var l=g.getCropzoneRect();l&&!Yr(l)&&g.crop(l).then(function(){g.stopDrawingMode(),g.ui.resizeEditor(),g.ui.changeMenu("crop"),g._invoker.fire(Mt.EXECUTE_COMMAND,ie.CROP)}).catch(function(e){return yt().reject(e)})},cancel:function(){g.stopDrawingMode(),g.ui.changeMenu("crop")},preset:function(l){switch(l){case"preset-square":g.setCropzoneRect(1/1);break;case"preset-3-2":g.setCropzoneRect(3/2);break;case"preset-4-3":g.setCropzoneRect(4/3);break;case"preset-5-4":g.setCropzoneRect(5/4);break;case"preset-7-5":g.setCropzoneRect(7/5);break;case"preset-16-9":g.setCropzoneRect(16/9);break;default:g.setCropzoneRect(),g.ui.crop.changeApplyButtonStatus(!1);break}}},this._commonAction())},_resizeAction:function(){var g=this;return Y()({getCurrentDimensions:function(){return g._graphics.getCurrentDimensions()},preview:function(l,e,c){var C=g._graphics.getCurrentDimensions(),x=function(){return C.width/C.height},E={};switch(l){case"width":E.width=e,c?E.height=e/x():E.height=C.height;break;case"height":E.height=e,c?E.width=e*x():E.width=C.width;break;default:E=C}g._graphics.resize(E).then(function(){g.ui.resizeEditor()}),c&&(g.ui.resize.setWidthValue(E.width),g.ui.resize.setHeightValue(E.height))},lockAspectRatio:function(l,e,c){var C=g._graphics.getCurrentDimensions(),x=C.width,E=C.height,_=x/E;if(l)if(x>E){var N=c/_,R=e*_;g.ui.resize.setLimit({minWidth:R>e?R:e,minHeight:e,maxWidth:c,maxHeight:N<c?N:c})}else{var et=c*_,it=e/_;g.ui.resize.setLimit({minWidth:e,minHeight:it>e?it:e,maxWidth:et<c?et:c,maxHeight:c})}else g.ui.resize.setLimit({minWidth:e,minHeight:e,maxWidth:c,maxHeight:c})},resize:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;l||(l=g._graphics.getCurrentDimensions()),g.resize(l).then(function(){g._graphics.setOriginalDimensions(l),g.stopDrawingMode(),g.ui.resizeEditor(),g.ui.changeMenu("resize")}).catch(function(e){return yt().reject(e)})},reset:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=g._graphics.getOriginalDimensions();g.ui.resize.setWidthValue(e.width,!0),g.ui.resize.setHeightValue(e.height,!0),g._graphics.resize(e).then(function(){l||(g.stopDrawingMode(),g.ui.resizeEditor(),g.ui.changeMenu("resize"))})}},this._commonAction())},_flipAction:function(){var g=this;return Y()({flip:function(l){return g[l]()}},this._commonAction())},_filterAction:function(){var g=this;return Y()({applyFilter:function(l,e,c,C){l?g.applyFilter(e,c,C):g.hasFilter(e)&&g.removeFilter(e)}},this._commonAction())},setReAction:function(){var g=this;this.on({undoStackChanged:function(l){l?(g.ui.changeHelpButtonEnabled("undo",!0),g.ui.changeHelpButtonEnabled("reset",!0)):(g.ui.changeHelpButtonEnabled("undo",!1),g.ui.changeHelpButtonEnabled("reset",!1)),g.ui.resizeEditor()},redoStackChanged:function(l){l?g.ui.changeHelpButtonEnabled("redo",!0):g.ui.changeHelpButtonEnabled("redo",!1),g.ui.resizeEditor()},objectActivated:function(l){var e,c;g.activeObjectId=l.id,g.ui.changeHelpButtonEnabled("delete",!0),g.ui.changeHelpButtonEnabled("deleteAll",!0),l.type==="cropzone"?g.ui.crop.changeApplyButtonStatus(!0):f()(e=["rect","circle","triangle"]).call(e,l.type)>-1?(g.stopDrawingMode(),g.ui.submenu!=="shape"&&g.ui.changeMenu("shape",!1,!1),g.ui.shape.setShapeStatus({strokeColor:l.stroke,strokeWidth:l.strokeWidth,fillColor:mt()(l)}),g.ui.shape.setMaxStrokeValue(Math.min(l.width,l.height))):l.type==="path"||l.type==="line"?g.ui.submenu!=="draw"&&(g.ui.changeMenu("draw",!1,!1),g.ui.draw.changeStandbyMode()):f()(c=["i-text","text"]).call(c,l.type)>-1?(g.ui.submenu!=="text"&&g.ui.changeMenu("text",!1,!1),g.ui.text.setTextStyleStateOnAction(l)):l.type==="icon"&&(g.stopDrawingMode(),g.ui.submenu!=="icon"&&g.ui.changeMenu("icon",!1,!1),g.ui.icon.setIconPickerColor(mt()(l)))},addText:function(l){var e=g.ui.text,c=e.textColor,C=e.fontSize,x=e.fontStyle,E=e.fontWeight,_=e.underline,N="Noto Sans";g.addText("Double Click",{position:l.originPosition,styles:{fill:c,fontSize:C,fontFamily:N,fontStyle:x,fontWeight:E,underline:_}}).then(function(){g.changeCursor("default")})},addObjectAfter:function(l){var e;l.type==="icon"?g.ui.icon.changeStandbyMode():f()(e=["rect","circle","triangle"]).call(e,l.type)>-1&&(g.ui.shape.setMaxStrokeValue(Math.min(l.width,l.height)),g.ui.shape.changeStandbyMode())},objectScaled:function(l){var e,c;if(f()(e=["i-text","text"]).call(e,l.type)>-1)g.ui.text.fontSize=ne(l.fontSize);else if(f()(c=["rect","circle","triangle"]).call(c,l.type)>=0){var C=l.width,x=l.height,E=g.ui.shape.getStrokeValue();C<E&&g.ui.shape.setStrokeValue(C),x<E&&g.ui.shape.setStrokeValue(x)}},selectionCleared:function(){g.activeObjectId=null,g.ui.submenu==="text"?g.changeCursor("text"):pi(["draw","crop","resize"],g.ui.submenu)||g.stopDrawingMode()}})},_historyAction:function(){var g=this;return{undo:function(l){return g.undo(l)},redo:function(l){return g.redo(l)}}},_commonAction:function(){var g=this,i,l,e,c,C=oe.TEXT,x=oe.CROPPER,E=oe.SHAPE,_=oe.ZOOM,N=oe.RESIZE;return{modeChange:function(et){switch(et){case Ae.TEXT:g._changeActivateMode(C);break;case Ae.CROP:g.startDrawingMode(x);break;case Ae.SHAPE:g._changeActivateMode(E),g.setDrawingShape(g.ui.shape.type,g.ui.shape.options);break;case Ae.ZOOM:g.startDrawingMode(_);break;case Ae.RESIZE:g.startDrawingMode(N);break}},deactivateAll:V()(i=this.deactivateAll).call(i,this),changeSelectableAll:V()(l=this.changeSelectableAll).call(l,this),discardSelection:V()(e=this.discardSelection).call(e,this),stopDrawingMode:V()(c=this.stopDrawingMode).call(c,this)}},mixin:function(g){Y()(g.prototype,this)}},jo=X(602),Pn=X.n(jo),Ro=X(5573),Si=X.n(Ro),zo=function(){function M(g,i){H(this,M),this.name=g,this.graphics=i}return q(M,[{key:"fire",value:function(){for(var i=this.graphics,l=arguments.length,e=new Array(l),c=0;c<l;c++)e[c]=arguments[c];return this.graphics.fire.apply(i,e)}},{key:"setCanvasImage",value:function(i,l){this.graphics.setCanvasImage(i,l)}},{key:"getCanvasElement",value:function(){return this.graphics.getCanvasElement()}},{key:"getCanvas",value:function(){return this.graphics.getCanvas()}},{key:"getCanvasImage",value:function(){return this.graphics.getCanvasImage()}},{key:"getImageName",value:function(){return this.graphics.getImageName()}},{key:"getEditor",value:function(){return this.graphics.getEditor()}},{key:"getName",value:function(){return this.name}},{key:"setImageProperties",value:function(i,l){this.graphics.setImageProperties(i,l)}},{key:"setCanvasCssDimension",value:function(i){this.graphics.setCanvasCssDimension(i)}},{key:"setCanvasBackstoreDimension",value:function(i){this.graphics.setCanvasBackstoreDimension(i)}},{key:"adjustCanvasDimension",value:function(){this.graphics.adjustCanvasDimension()}},{key:"adjustCanvasDimensionBase",value:function(){this.graphics.adjustCanvasDimensionBase()}}]),M}(),Le=zo;function Fo(M){var g=Bo();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function Bo(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var Ho={padding:0,crossOrigin:"Anonymous"},Uo=function(M){fe(i,M);var g=Fo(i);function i(l){return H(this,i),g.call(this,Pt.IMAGE_LOADER,l)}return q(i,[{key:"load",value:function(e,c){var C=this,x;if(!e&&!c){var E=this.getCanvas();E.backgroundImage=null,E.renderAll(),x=new(yt())(function(_){C.setCanvasImage("",null),_()})}else x=this._setBackgroundImage(c).then(function(_){return C.setCanvasImage(e,_),C.adjustCanvasDimension(),_});return x}},{key:"_setBackgroundImage",value:function(e){var c=this;return e?new(yt())(function(C,x){var E=c.getCanvas();E.setBackgroundImage(e,function(){var _=E.backgroundImage;_&&_.getElement()?C(_):x(ue.loadingImageFailed)},Ho)}):yt().reject(ue.loadImage)}}]),i}(Le),Yo=Uo,Wo="tl",Go="tr",Xo="mt",Zo="ml",Vo="mr",Jo="mb",Qo="bl",Ko="br",Ln=[Wo,Go,Xo,Zo,Vo,Jo,Qo,Ko],Ji=function(){};function $o(M){return f()(Ln).call(Ln,M)>=0}function Ii(M,g){return M>g?"width":"height"}var qo=at.fabric.util.createClass(at.fabric.Rect,{initialize:function(g,i,l){i=Y()(i,l),i.type="cropzone",this.callSuper("initialize",i),this._addEventHandler(),this.canvas=g,this.options=i},canvasEventDelegation:function(g){var i,l="unregistered",e=this.canvasEventTrigger[g]!==Ji;return e?l="registered":f()(i=[Mt.OBJECT_MOVED,Mt.OBJECT_SCALED]).call(i,g)<0&&(l="none"),l},canvasEventRegister:function(g,i){this.canvasEventTrigger[g]=i},_addEventHandler:function(){var g,i,l,e,c;this.canvasEventTrigger=(g={},j(g,Mt.OBJECT_MOVED,Ji),j(g,Mt.OBJECT_SCALED,Ji),g),this.on({moving:V()(i=this._onMoving).call(i,this),scaling:V()(l=this._onScaling).call(l,this)}),at.fabric.util.addListener(document,"keydown",V()(e=this._onKeyDown).call(e,this)),at.fabric.util.addListener(document,"keyup",V()(c=this._onKeyUp).call(c,this))},_renderCropzone:function(g){var i=7,l=7,e=this.flipX?-1:1,c=this.flipY?-1:1,C=e/this.scaleX,x=c/this.scaleY;g.scale(C,x),this._fillOuterRect(g,"rgba(0, 0, 0, 0.5)"),this.options.lineWidth?(this._fillInnerRect(g),this._strokeBorder(g,"rgb(255, 255, 255)",{lineWidth:this.options.lineWidth})):(this._strokeBorder(g,"rgb(0, 0, 0)",{lineDashWidth:i}),this._strokeBorder(g,"rgb(255, 255, 255)",{lineDashWidth:i,lineDashOffset:l})),g.scale(1/C,1/x)},_render:function(g){this.callSuper("_render",g),this._renderCropzone(g)},_fillOuterRect:function(g,i){var l=this._getCoordinates(),e=l.x,c=l.y;g.save(),g.fillStyle=i,g.beginPath(),g.moveTo(e[0]-1,c[0]-1),g.lineTo(e[3]+1,c[0]-1),g.lineTo(e[3]+1,c[3]+1),g.lineTo(e[0]-1,c[3]+1),g.lineTo(e[0]-1,c[0]-1),g.closePath(),g.moveTo(e[1],c[1]),g.lineTo(e[1],c[2]),g.lineTo(e[2],c[2]),g.lineTo(e[2],c[1]),g.lineTo(e[1],c[1]),g.closePath(),mt()(g).call(g),g.restore()},_fillInnerRect:function(g){var i=this._getCoordinates(),l=i.x,e=i.y,c=this._caculateInnerPosition(l,(l[2]-l[1])/3),C=this._caculateInnerPosition(e,(e[2]-e[1])/3);g.save(),g.strokeStyle="rgba(255, 255, 255, 0.7)",g.lineWidth=this.options.lineWidth,g.beginPath(),g.moveTo(c[0],C[1]),g.lineTo(c[3],C[1]),g.moveTo(c[0],C[2]),g.lineTo(c[3],C[2]),g.moveTo(c[1],C[0]),g.lineTo(c[1],C[3]),g.moveTo(c[2],C[0]),g.lineTo(c[2],C[3]),g.stroke(),g.closePath(),g.restore()},_caculateInnerPosition:function(g,i){var l=[];return l[0]=g[1],l[1]=g[1]+i,l[2]=g[1]+i*2,l[3]=g[2],l},_getCoordinates:function(){var g,i,l=this.canvas,e=this.width,c=this.height,C=this.left,x=this.top,E=e/2,_=c/2,N=l.getHeight(),R=l.getWidth();return{x:He()(g=[-(E+C),-E,E,E+(R-C-e)]).call(g,Math.ceil),y:He()(i=[-(_+x),-_,_,_+(N-x-c)]).call(i,Math.ceil)}},_strokeBorder:function(g,i,l){var e=l.lineDashWidth,c=l.lineDashOffset,C=l.lineWidth,x=this.width/2,E=this.height/2;g.save(),g.strokeStyle=i,g.setLineDash&&g.setLineDash([e,e]),c&&(g.lineDashOffset=c),C&&(g.lineWidth=C),g.beginPath(),g.moveTo(-x,-E),g.lineTo(x,-E),g.lineTo(x,E),g.lineTo(-x,E),g.lineTo(-x,-E),g.stroke(),g.restore()},_onMoving:function(){var g=this.height,i=this.width,l=this.left,e=this.top,c=this.canvas.getWidth()-i,C=this.canvas.getHeight()-g;this.left=$t(l,0,c),this.top=$t(e,0,C),this.canvasEventTrigger[Mt.OBJECT_MOVED](this)},_onScaling:function(g){var i=g.transform.corner,l=this.canvas.getPointer(g.e),e=this._calcScalingSizeFromPointer(l,i);this.scale(1).set(e),this.canvasEventTrigger[Mt.OBJECT_SCALED](this)},_calcScalingSizeFromPointer:function(g,i){var l=$o(i);return l&&this._resizeCropZone(g,i)},adjustRatioCropzoneSize:function(g){var i=g.width,l=g.height,e=g.leftMaker,c=g.topMaker,C=g.maxWidth,x=g.maxHeight,E=g.scaleTo;if(i=C?$t(i,1,C):i,l=x?$t(l,1,x):l,!this.presetRatio)return this._withShiftKey&&(i>l?l=i:l>i&&(i=l)),{width:i,height:l,left:e(i),top:c(l)};E==="width"?l=i/this.presetRatio:i=l*this.presetRatio;var _=Math.min(C/i,x/l);if(_<=1){var N,R=He()(N=[i,l]).call(N,function(it){return it*_}),et=ot(R,2);i=et[0],l=et[1]}return{width:i,height:l,left:e(i),top:c(l)}},_getCropzoneRectInfo:function(){var g=this.canvas,i=g.width,l=g.height,e=this.getBoundingRect(!1,!0),c=e.top,C=e.left,x=e.width,E=e.height;return{rectTop:c,rectLeft:C,rectWidth:x,rectHeight:E,rectRight:C+x,rectBottom:c+E,canvasWidth:i,canvasHeight:l}},_resizeCropZone:function(g,i){var l=g.x,e=g.y,c=this._getCropzoneRectInfo(),C=c.rectWidth,x=c.rectHeight,E=c.rectTop,_=c.rectLeft,N=c.rectBottom,R=c.rectRight,et=c.canvasWidth,it=c.canvasHeight,ut={tl:{width:R-l,height:N-e,leftMaker:function(ft){return R-ft},topMaker:function(ft){return N-ft},maxWidth:R,maxHeight:N,scaleTo:Ii(_-l,E-e)},tr:{width:l-_,height:N-e,leftMaker:function(){return _},topMaker:function(ft){return N-ft},maxWidth:et-_,maxHeight:N,scaleTo:Ii(l-R,E-e)},mt:{width:C,height:N-e,leftMaker:function(){return _},topMaker:function(ft){return N-ft},maxWidth:et-_,maxHeight:N,scaleTo:"height"},ml:{width:R-l,height:x,leftMaker:function(ft){return R-ft},topMaker:function(){return E},maxWidth:R,maxHeight:it-E,scaleTo:"width"},mr:{width:l-_,height:x,leftMaker:function(){return _},topMaker:function(){return E},maxWidth:et-_,maxHeight:it-E,scaleTo:"width"},mb:{width:C,height:e-E,leftMaker:function(){return _},topMaker:function(){return E},maxWidth:et-_,maxHeight:it-E,scaleTo:"height"},bl:{width:R-l,height:e-E,leftMaker:function(ft){return R-ft},topMaker:function(){return E},maxWidth:R,maxHeight:it-E,scaleTo:Ii(_-l,e-N)},br:{width:l-_,height:e-E,leftMaker:function(){return _},topMaker:function(){return E},maxWidth:et-_,maxHeight:it-E,scaleTo:Ii(l-R,e-N)}};return this.adjustRatioCropzoneSize(ut[i])},isValid:function(){return this.left>=0&&this.top>=0&&this.width>0&&this.height>0},_onKeyDown:function(g){var i=g.keyCode;i===me.SHIFT&&(this._withShiftKey=!0)},_onKeyUp:function(g){var i=g.keyCode;i===me.SHIFT&&(this._withShiftKey=!1)}}),ts=qo;function es(M){var g=is();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function is(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var ns=10,rs={presetRatio:null,top:-10,left:-10,height:1,width:1},as=function(M){fe(i,M);var g=es(i);function i(l){var e,c,C,x,E,_;return H(this,i),_=g.call(this,Pt.CROPPER,l),_._cropzone=null,_._startX=null,_._startY=null,_._withShiftKey=!1,_._listeners={keydown:V()(e=_._onKeyDown).call(e,re(_)),keyup:V()(c=_._onKeyUp).call(c,re(_)),mousedown:V()(C=_._onFabricMouseDown).call(C,re(_)),mousemove:V()(x=_._onFabricMouseMove).call(x,re(_)),mouseup:V()(E=_._onFabricMouseUp).call(E,re(_))},_}return q(i,[{key:"start",value:function(){if(!this._cropzone){var e=this.getCanvas();e.forEachObject(function(c){c.evented=!1}),this._cropzone=new ts(e,Y()({left:0,top:0,width:.5,height:.5,strokeWidth:0,cornerSize:10,cornerColor:"black",fill:"transparent"},Ie,this.graphics.cropSelectionStyle)),e.discardActiveObject(),e.add(this._cropzone),e.on("mouse:down",this._listeners.mousedown),e.selection=!1,e.defaultCursor="crosshair",at.fabric.util.addListener(document,"keydown",this._listeners.keydown),at.fabric.util.addListener(document,"keyup",this._listeners.keyup)}}},{key:"end",value:function(){var e=this.getCanvas(),c=this._cropzone;!c||(e.remove(c),e.selection=!0,e.defaultCursor="default",e.off("mouse:down",this._listeners.mousedown),e.forEachObject(function(C){C.evented=!0}),this._cropzone=null,at.fabric.util.removeListener(document,"keydown",this._listeners.keydown),at.fabric.util.removeListener(document,"keyup",this._listeners.keyup))}},{key:"changeVisibility",value:function(e){this._cropzone&&this._cropzone.set({visible:e})}},{key:"_onFabricMouseDown",value:function(e){var c=this.getCanvas();if(!e.target){c.selection=!1;var C=c.getPointer(e.e);this._startX=C.x,this._startY=C.y,c.on({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup})}}},{key:"_onFabricMouseMove",value:function(e){var c=this.getCanvas(),C=c.getPointer(e.e),x=C.x,E=C.y,_=this._cropzone;Math.abs(x-this._startX)+Math.abs(E-this._startY)>ns&&(c.remove(_),_.set(this._calcRectDimensionFromPoint(x,E,_.presetRatio)),c.add(_),c.setActiveObject(_))}},{key:"_calcRectDimensionFromPoint",value:function(e,c){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,x=this.getCanvas(),E=x.getWidth(),_=x.getHeight(),N=this._startX,R=this._startY,et=$t(e,0,N),it=$t(c,0,R),ut=$t(e,N,E)-et,st=$t(c,R,_)-it;return this._withShiftKey&&!C?(ut>st?st=ut:st>ut&&(ut=st),N>=e&&(et=N-ut),R>=c&&(it=R-st)):C&&(st=ut/C,N>=e&&(et=$t(N-ut,0,E)),R>=c&&(it=$t(R-st,0,_)),it+st>_&&(st=_-it,ut=st*C,N>=e&&(et=$t(N-ut,0,E)),R>=c&&(it=$t(R-st,0,_)))),{left:et,top:it,width:ut,height:st}}},{key:"_onFabricMouseUp",value:function(){var e=this._cropzone,c=this._listeners,C=this.getCanvas();C.setActiveObject(e),C.off({"mouse:move":c.mousemove,"mouse:up":c.mouseup})}},{key:"getCroppedImageData",value:function(e){var c=this.getCanvas(),C=c.contains(this._cropzone);if(!e)return null;C&&c.remove(this._cropzone);var x={imageName:this.getImageName(),url:c.toDataURL(e)};return C&&c.add(this._cropzone),x}},{key:"getCropzoneRect",value:function(){var e=this._cropzone;return e.isValid()?{left:e.left,top:e.top,width:e.width,height:e.height}:null}},{key:"setCropzoneRect",value:function(e){var c=this.getCanvas(),C=this._cropzone;c.discardActiveObject(),c.selection=!1,c.remove(C),C.set(e?this._getPresetPropertiesForCropSize(e):rs),c.add(C),c.selection=!0,e&&c.setActiveObject(C)}},{key:"_getPresetPropertiesForCropSize",value:function(e){var c,C,x=this.getCanvas(),E=x.getWidth(),_=x.getHeight(),N=E>=_?E:_,R=function(zt,se){return zt>se?se/zt:1},et=N*e,it=N,ut=R(et,E),st=He()(c=[et,it]).call(c,function(qt){return qt*ut}),ft=ot(st,2);et=ft[0],it=ft[1];var wt=R(it,_),Jt=He()(C=[et,it]).call(C,function(qt){return vi(qt*wt)}),Kt=ot(Jt,2);return et=Kt[0],it=Kt[1],{presetRatio:e,top:(_-it)/2,left:(E-et)/2,width:et,height:it}}},{key:"_onKeyDown",value:function(e){e.keyCode===me.SHIFT&&(this._withShiftKey=!0)}},{key:"_onKeyUp",value:function(e){e.keyCode===me.SHIFT&&(this._withShiftKey=!1)}}]),i}(Le),os=as;function ss(M){var g=ls();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function ls(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var cs=function(M){fe(i,M);var g=ss(i);function i(l){return H(this,i),g.call(this,Pt.FLIP,l)}return q(i,[{key:"getCurrentSetting",value:function(){var e=this.getCanvasImage();return{flipX:e.flipX,flipY:e.flipY}}},{key:"set",value:function(e){var c=this.getCurrentSetting(),C=c.flipX!==e.flipX,x=c.flipY!==e.flipY;return!C&&!x?yt().reject(ue.flip):(Y()(c,e),this.setImageProperties(c,!0),this._invertAngle(C,x),this._flipObjects(C,x),yt().resolve({flipX:c.flipX,flipY:c.flipY,angle:this.getCanvasImage().angle}))}},{key:"_invertAngle",value:function(e,c){var C=this.getCanvasImage(),x=C.angle;e&&(x*=-1),c&&(x*=-1),C.rotate(Ge()(x)).setCoords()}},{key:"_flipObjects",value:function(e,c){var C=this.getCanvas();e&&C.forEachObject(function(x){x.set({angle:Ge()(x.angle*-1),flipX:!x.flipX,left:C.width-x.left}).setCoords()}),c&&C.forEachObject(function(x){x.set({angle:Ge()(x.angle*-1),flipY:!x.flipY,top:C.height-x.top}).setCoords()}),C.renderAll()}},{key:"reset",value:function(){return this.set({flipX:!1,flipY:!1})}},{key:"flipX",value:function(){var e=this.getCurrentSetting();return this.set({flipX:!e.flipX,flipY:e.flipY})}},{key:"flipY",value:function(){var e=this.getCurrentSetting();return this.set({flipX:e.flipX,flipY:!e.flipY})}}]),i}(Le),us=cs;function hs(M){var g=fs();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function fs(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var ds=function(M){fe(i,M);var g=hs(i);function i(l){return H(this,i),g.call(this,Pt.ROTATION,l)}return q(i,[{key:"getCurrentAngle",value:function(){return this.getCanvasImage().angle}},{key:"setAngle",value:function(e){var c=this.getCurrentAngle()%360;e%=360;var C=this.getCanvasImage(),x=C.getCenterPoint();C.set({angle:e}).setCoords(),this.adjustCanvasDimension();var E=C.getCenterPoint();return this._rotateForEachObject(x,E,e-c),yt().resolve(e)}},{key:"_rotateForEachObject",value:function(e,c,C){var x=this.getCanvas(),E={x:e.x-c.x,y:e.y-c.y};x.forEachObject(function(_){var N=_.getCenterPoint(),R=at.fabric.util.degreesToRadians(C),et=at.fabric.util.rotatePoint(N,e,R);_.set({left:et.x-E.x,top:et.y-E.y,angle:(_.angle+C)%360}),_.setCoords()}),x.renderAll()}},{key:"rotate",value:function(e){var c=this.getCurrentAngle();return this.setAngle(c+e)}}]),i}(Le),gs=ds;function vs(M){var g=ms();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function ms(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var ps=function(M){fe(i,M);var g=vs(i);function i(l){var e;return H(this,i),e=g.call(this,Pt.FREE_DRAWING,l),e.width=12,e.oColor=new at.fabric.Color("rgba(0, 0, 0, 0.5)"),e}return q(i,[{key:"start",value:function(e){var c=this.getCanvas();c.isDrawingMode=!0,this.setBrush(e)}},{key:"setBrush",value:function(e){var c=this.getCanvas().freeDrawingBrush;e=e||{},this.width=e.width||this.width,e.color&&(this.oColor=new at.fabric.Color(e.color)),c.width=this.width,c.color=this.oColor.toRgba()}},{key:"end",value:function(){var e=this.getCanvas();e.isDrawingMode=!1}}]),i}(Le),ys=ps,Nn=30,Cs=2.7,Ss=1.7,jn=180,Is=at.fabric.util.createClass(at.fabric.Line,{type:"line",initialize:function(g){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.callSuper("initialize",g,i),this.arrowType=i.arrowType},_render:function(g){var i=this.calcLinePoints(),l=i.x1,e=i.y1,c=i.x2,C=i.y2,x={fromX:l,fromY:e,toX:c,toY:C};this.ctx=g,g.lineWidth=this.strokeWidth,this._renderBasicLinePath(x),this._drawDecoratorPath(x),this._renderStroke(g)},_renderBasicLinePath:function(g){var i=g.fromX,l=g.fromY,e=g.toX,c=g.toY;this.ctx.beginPath(),this.ctx.moveTo(i,l),this.ctx.lineTo(e,c)},_drawDecoratorPath:function(g){this._drawDecoratorPathType("head",g),this._drawDecoratorPathType("tail",g)},_drawDecoratorPathType:function(g,i){switch(this.arrowType[g]){case"triangle":this._drawTrianglePath(g,i);break;case"chevron":this._drawChevronPath(g,i);break}},_drawTrianglePath:function(g,i){var l=this.ctx.lineWidth*Ss;this._drawChevronPath(g,i,l),this.ctx.closePath()},_drawChevronPath:function(g,i,l){var e=this,c=i.fromX,C=i.fromY,x=i.toX,E=i.toY,_=this.ctx;l||(l=this.ctx.lineWidth*Cs);var N=g==="head"?[c,C]:[x,E],R=ot(N,2),et=R[0],it=R[1],ut=g==="head"?[x,E]:[c,C],st=ot(ut,2),ft=st[0],wt=st[1],Jt=Math.atan2(wt-it,ft-et)*jn/Math.PI,Kt=function(zt){return e.getRotatePosition(l,zt,{x:et,y:it})};_.moveTo.apply(_,P(Kt(Jt+Nn))),_.lineTo(et,it),_.lineTo.apply(_,P(Kt(Jt-Nn)))},getRotatePosition:function(g,i,l){var e=i*Math.PI/jn,c=l.x,C=l.y;return[g*Math.cos(e)+c,g*Math.sin(e)+C]}}),xs=Is;function bs(M){var g=Ms();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function Ms(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var _s=function(M){fe(i,M);var g=bs(i);function i(l){var e,c,C,x;return H(this,i),x=g.call(this,Pt.LINE,l),x._width=12,x._oColor=new at.fabric.Color("rgba(0, 0, 0, 0.5)"),x._listeners={mousedown:V()(e=x._onFabricMouseDown).call(e,re(x)),mousemove:V()(c=x._onFabricMouseMove).call(c,re(x)),mouseup:V()(C=x._onFabricMouseUp).call(C,re(x))},x}return q(i,[{key:"setHeadOption",value:function(e){var c=e.arrowType,C=c===void 0?{head:null,tail:null}:c;this._arrowType=C}},{key:"start",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=this.getCanvas();c.defaultCursor="crosshair",c.selection=!1,this.setHeadOption(e),this.setBrush(e),c.forEachObject(function(C){C.set({evented:!1})}),c.on({"mouse:down":this._listeners.mousedown})}},{key:"setBrush",value:function(e){var c=this.getCanvas().freeDrawingBrush;e=e||{},this._width=e.width||this._width,e.color&&(this._oColor=new at.fabric.Color(e.color)),c.width=this._width,c.color=this._oColor.toRgba()}},{key:"end",value:function(){var e=this.getCanvas();e.defaultCursor="default",e.selection=!0,e.forEachObject(function(c){c.set({evented:!0})}),e.off("mouse:down",this._listeners.mousedown)}},{key:"_onFabricMouseDown",value:function(e){var c=this.getCanvas(),C=c.getPointer(e.e),x=C.x,E=C.y,_=[x,E,x,E];this._line=new xs(_,{stroke:this._oColor.toRgba(),strokeWidth:this._width,arrowType:this._arrowType,evented:!1}),this._line.set(Ne.SELECTION_STYLE),c.add(this._line),c.on({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup}),this.fire(Mt.ADD_OBJECT,this._createLineEventObjectProperties())}},{key:"_onFabricMouseMove",value:function(e){var c=this.getCanvas(),C=c.getPointer(e.e);this._line.set({x2:C.x,y2:C.y}),this._line.setCoords(),c.renderAll()}},{key:"_onFabricMouseUp",value:function(){var e=this.getCanvas();this.fire(Mt.OBJECT_ADDED,this._createLineEventObjectProperties()),this._line=null,e.off({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup})}},{key:"_createLineEventObjectProperties",value:function(){var e=this.graphics.createObjectProperties(this._line),c=this._line,C=c.x1,x=c.x2,E=c.y1,_=c.y2;return Y()({},e,{startPosition:{x:C,y:E},endPosition:{x,y:_}})}}]),i}(Le),Es=_s;function Ts(M){var g=Ds();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function Ds(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var As={fill:"#000000",left:0,top:0},ws={fill:"#000000",fontStyle:"normal",fontWeight:"normal",textAlign:"tie-text-align-left",underline:!1},Os=500,ks=function(M){fe(i,M);var g=Ts(i);function i(l){var e,c,C,x,E,_;return H(this,i),_=g.call(this,Pt.TEXT,l),_._defaultStyles=As,_._isSelected=!1,_._selectedObj={},_._editingObj={},_._listeners={mousedown:V()(e=_._onFabricMouseDown).call(e,re(_)),select:V()(c=_._onFabricSelect).call(c,re(_)),selectClear:V()(C=_._onFabricSelectClear).call(C,re(_)),scaling:V()(x=_._onFabricScaling).call(x,re(_)),textChanged:V()(E=_._onFabricTextChanged).call(E,re(_))},_._textarea=null,_._ratio=1,_._lastClickTime=new Date().getTime(),_._editingObjInfos={},_.isPrevEditing=!1,_}return q(i,[{key:"start",value:function(){var e=this,c=this.getCanvas();c.selection=!1,c.defaultCursor="text",c.on({"mouse:down":this._listeners.mousedown,"selection:created":this._listeners.select,"selection:updated":this._listeners.select,"before:selection:cleared":this._listeners.selectClear,"object:scaling":this._listeners.scaling,"text:changed":this._listeners.textChanged}),c.forEachObject(function(C){C.type==="i-text"&&e.adjustOriginPosition(C,"start")}),this.setCanvasRatio()}},{key:"end",value:function(){var e=this,c=this.getCanvas();c.selection=!0,c.defaultCursor="default",c.forEachObject(function(C){C.type==="i-text"&&(C.text===""?c.remove(C):e.adjustOriginPosition(C,"end"))}),c.off({"mouse:down":this._listeners.mousedown,"selection:created":this._listeners.select,"selection:updated":this._listeners.select,"before:selection:cleared":this._listeners.selectClear,"object:selected":this._listeners.select,"object:scaling":this._listeners.scaling,"text:changed":this._listeners.textChanged})}},{key:"adjustOriginPosition",value:function(e,c){var C="center",x="center";c==="start"&&(C="left",x="top");var E=e.getPointByOrigin(C,x),_=E.x,N=E.y;e.set({left:_,top:N,originX:C,originY:x}),e.setCoords()}},{key:"add",value:function(e,c){var C=this;return new(yt())(function(x){var E,_=C.getCanvas(),N=null,R=Ne.SELECTION_STYLE,et=C._defaultStyles;C._setInitPos(c.position),c.styles&&(et=Y()(et,c.styles)),bn()(c.autofocus)||(c.autofocus=!0),N=new at.fabric.IText(e,et),R=Y()({},R,{originX:"left",originY:"top"}),N.set(R),N.on({mouseup:V()(E=C._onFabricMouseUp).call(E,C)}),_.add(N),c.autofocus&&(N.enterEditing(),N.selectAll()),_.getActiveObject()||_.setActiveObject(N),C.isPrevEditing=!0,x(C.graphics.createObjectProperties(N))})}},{key:"change",value:function(e,c){var C=this;return new(yt())(function(x){e.set("text",c),C.getCanvas().renderAll(),x()})}},{key:"setStyle",value:function(e,c){var C=this;return new(yt())(function(x){G()(c,function(E,_){e[_]===E&&_!=="fontSize"&&(c[_]=ws[_]||"")},C),"textDecoration"in c&&Y()(c,C._getTextDecorationAdaptObject(c.textDecoration)),e.set(c),C.getCanvas().renderAll(),x()})}},{key:"getText",value:function(e){return e.text}},{key:"setSelectedInfo",value:function(e,c){this._selectedObj=e,this._isSelected=c}},{key:"isSelected",value:function(){return this._isSelected}},{key:"getSelectedObj",value:function(){return this._selectedObj}},{key:"setCanvasRatio",value:function(){var e=this.getCanvasElement(),c=vt()(e.style.maxWidth,10),C=e.width;this._ratio=C/c}},{key:"getCanvasRatio",value:function(){return this._ratio}},{key:"_getTextDecorationAdaptObject",value:function(e){return{underline:e==="underline",linethrough:e==="line-through",overline:e==="overline"}}},{key:"_setInitPos",value:function(e){e=e||this.getCanvasImage().getCenterPoint(),this._defaultStyles.left=e.x,this._defaultStyles.top=e.y}},{key:"_onInput",value:function(){var e=this.getCanvasRatio(),c=this._editingObj,C=this._textarea.style;C.width="".concat(Math.ceil(c.width/e),"px"),C.height="".concat(Math.ceil(c.height/e),"px")}},{key:"_onKeyDown",value:function(){var e=this,c=this.getCanvasRatio(),C=this._editingObj,x=this._textarea.style;t()(function(){C.text(e._textarea.value),x.width="".concat(Math.ceil(C.width/c),"px"),x.height="".concat(Math.ceil(C.height/c),"px")},0)}},{key:"_onBlur",value:function(){var e=this.getCanvasRatio(),c=this._editingObj,C=this._editingObjInfos,x=this._textarea.value,E=c.width/e-C.width/e,_=c.height/e-C.height/e;if(e===1&&(E/=2,_/=2),this._textarea.style.display="none",c.set({left:C.left+E,top:C.top+_}),x.length){this.getCanvas().add(c);var N={id:kt(c),type:c.type,text:x};this.fire(Mt.TEXT_CHANGED,N)}}},{key:"_onScroll",value:function(){this._textarea.scrollLeft=0,this._textarea.scrollTop=0}},{key:"_onFabricScaling",value:function(e){var c=e.target;c.fontSize=c.fontSize*c.scaleY,c.scaleX=1,c.scaleY=1}},{key:"_onFabricTextChanged",value:function(e){this.fire(Mt.TEXT_CHANGED,e.target)}},{key:"_onFabricSelectClear",value:function(e){var c=this.getSelectedObj();this.isPrevEditing=!0,this.setSelectedInfo(e.target,!1),c&&c.text===""&&this.getCanvas().remove(c)}},{key:"_onFabricSelect",value:function(e){this.isPrevEditing=!0,this.setSelectedInfo(e.target,!0)}},{key:"_onFabricMouseDown",value:function(e){var c=e.target;if(!(c&&!c.isType("text"))){if(this.isPrevEditing){this.isPrevEditing=!1;return}this._fireAddText(e)}}},{key:"_fireAddText",value:function(e){var c=e.target,C=e.e||{},x=this.getCanvas().getPointer(C);c||this.fire(Mt.ADD_TEXT,{originPosition:{x:x.x,y:x.y},clientPosition:{x:C.clientX||0,y:C.clientY||0}})}},{key:"_onFabricMouseUp",value:function(e){var c=e.target,C=new Date().getTime();this._isDoubleClick(C)&&!c.isEditing&&c.enterEditing(),c.isEditing&&this.fire(Mt.TEXT_EDITING),this._lastClickTime=C}},{key:"_isDoubleClick",value:function(e){return e-this._lastClickTime<Os}}]),i}(Le),Ps=ks;function Ls(M){var g=Ns();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function Ns(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var js={arrow:"M 0 90 H 105 V 120 L 160 60 L 105 0 V 30 H 0 Z",cancel:"M 0 30 L 30 60 L 0 90 L 30 120 L 60 90 L 90 120 L 120 90 L 90 60 L 120 30 L 90 0 L 60 30 L 30 0 Z"},Rs=function(M){fe(i,M);var g=Ls(i);function i(l){var e,c,C,x;return H(this,i),x=g.call(this,Pt.ICON,l),x._oColor="#000000",x._pathMap=js,x._type=null,x._iconColor=null,x._handlers={mousedown:V()(e=x._onFabricMouseDown).call(e,re(x)),mousemove:V()(c=x._onFabricMouseMove).call(c,re(x)),mouseup:V()(C=x._onFabricMouseUp).call(C,re(x))},x}return q(i,[{key:"setStates",value:function(e,c){this._type=e,this._iconColor=c}},{key:"start",value:function(){var e=this.getCanvas();e.selection=!1,e.on("mouse:down",this._handlers.mousedown)}},{key:"end",value:function(){var e=this.getCanvas();e.selection=!0,e.off({"mouse:down":this._handlers.mousedown})}},{key:"add",value:function(e,c){var C=this;return new(yt())(function(x,E){var _=C.getCanvas(),N=C._pathMap[e],R=Ne.SELECTION_STYLE,et=N?C._createIcon(N):null;C._icon=et,et||E(ue.invalidParameters),et.set(Y()({type:"icon",fill:C._oColor},R,c,C.graphics.controlStyle)),_.add(et).setActiveObject(et),x(C.graphics.createObjectProperties(et))})}},{key:"registerPaths",value:function(e){var c=this;G()(e,function(C,x){c._pathMap[x]=C},this)}},{key:"setColor",value:function(e,c){this._oColor=e,c&&c.get("type")==="icon"&&(c.set({fill:this._oColor}),this.getCanvas().renderAll())}},{key:"getColor",value:function(e){return mt()(e)}},{key:"_createIcon",value:function(e){return new at.fabric.Path(e)}},{key:"_onFabricMouseDown",value:function(e){var c=this,C=this.getCanvas();this._startPoint=C.getPointer(e.e);var x=this._startPoint,E=x.x,_=x.y;this.add(this._type,{left:E,top:_,fill:this._iconColor}).then(function(){c.fire(Mt.ADD_OBJECT,c.graphics.createObjectProperties(c._icon)),C.on("mouse:move",c._handlers.mousemove),C.on("mouse:up",c._handlers.mouseup)})}},{key:"_onFabricMouseMove",value:function(e){var c=this.getCanvas();if(!!this._icon){var C=c.getPointer(e.e),x=(C.x-this._startPoint.x)/this._icon.width,E=(C.y-this._startPoint.y)/this._icon.height;this._icon.set({scaleX:Math.abs(x*2),scaleY:Math.abs(E*2)}),this._icon.setCoords(),c.renderAll()}}},{key:"_onFabricMouseUp",value:function(){var e=this.getCanvas();this.fire(Mt.OBJECT_ADDED,this.graphics.createObjectProperties(this._icon)),this._icon=null,e.off("mouse:down",this._handlers.mousedown),e.off("mouse:move",this._handlers.mousemove),e.off("mouse:up",this._handlers.mouseup)}}]),i}(Le),zs=Rs,Fs=at.fabric.util.createClass(at.fabric.Image.filters.BlendImage,{applyTo:function(g){if(!!this.mask){var i=g.canvasEl,l=i.width,e=i.height,c=this._createCanvasOfMask(l,e),C=i.getContext("2d"),x=c.getContext("2d"),E=C.getImageData(0,0,l,e);this._drawMask(x,i,C),this._mapData(x,E,l,e),g.imageData=E}},_createCanvasOfMask:function(g,i){var l=at.fabric.util.createCanvasElement();return l.width=g,l.height=i,l},_drawMask:function(g){var i=this.mask,l=i.getElement(),e=i.angle,c=i.left,C=i.scaleX,x=i.scaleY,E=i.top;g.save(),g.translate(c,E),g.rotate(e*Math.PI/180),g.scale(C,x),g.drawImage(l,-l.width/2,-l.height/2),g.restore()},_mapData:function(g,i,l,e){for(var c=i.data,C=i.height,x=i.width,E=c,_=x*C*4,N=g.getImageData(0,0,l,e).data,R=0;R<_;R+=4)E[R+3]=N[R]}}),Bs=Fs,Hs=at.fabric.util.createClass(at.fabric.Image.filters.Convolute,{type:"Sharpen",initialize:function(){this.matrix=[0,-1,0,-1,5,-1,0,-1,0]}}),Us=Hs,Ys=at.fabric.util.createClass(at.fabric.Image.filters.Convolute,{type:"Emboss",initialize:function(){this.matrix=[1,1,1,1,.7,-1,-1,-1,-1]}}),Ws=Ys,Gs=at.fabric.util.createClass(at.fabric.Image.filters.BaseFilter,{type:"ColorFilter",initialize:function(g){g||(g={}),this.color=g.color||"#FFFFFF",this.threshold=g.threshold||45,this.x=g.x||null,this.y=g.y||null},applyTo:function(g){var i=g.canvasEl,l=i.getContext("2d"),e=l.getImageData(0,0,i.width,i.height),c=e.data,C=this.threshold,x=at.fabric.Color.sourceFromHex(this.color),E,_;for(this.x&&this.y&&(x=this._getColor(e,this.x,this.y)),E=0,_=c.length;E<_;E+=4)this._isOutsideThreshold(c[E],x[0],C)||this._isOutsideThreshold(c[E+1],x[1],C)||this._isOutsideThreshold(c[E+2],x[2],C)||(c[E]=c[E+1]=c[E+2]=c[E+3]=0);l.putImageData(e,0,0)},_isOutsideThreshold:function(g,i,l){var e=g-i;return Math.abs(e)>l},_getColor:function(g,i,l){var e=[0,0,0,0],c=g.data,C=g.width,x=4,E=(C*l+i)*x;return e[0]=c[E],e[1]=c[E+1],e[2]=c[E+2],e[3]=c[E+3],e}}),Xs=Gs;function Zs(M){var g=Vs();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function Vs(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var xi=at.fabric.Image.filters;xi.Mask=Bs,xi.Sharpen=Us,xi.Emboss=Ws,xi.ColorFilter=Xs;var Js=function(M){fe(i,M);var g=Zs(i);function i(l){return H(this,i),g.call(this,Pt.FILTER,l)}return q(i,[{key:"add",value:function(e,c){var C=this;return new(yt())(function(x,E){var _=C._getSourceImage(),N=C.getCanvas(),R=C._getFilter(_,e);R||(R=C._createFilter(_,e,c)),R||E(ue.invalidParameters),C._changeFilterValues(R,c),C._apply(_,function(){N.renderAll(),x({type:e,action:"add",options:c})})})}},{key:"remove",value:function(e){var c=this;return new(yt())(function(C,x){var E=c._getSourceImage(),_=c.getCanvas(),N=c.getOptions(e);E.filters.length||x(ue.unsupportedOperation),c._removeFilter(E,e),c._apply(E,function(){_.renderAll(),C({type:e,action:"remove",options:N})})})}},{key:"hasFilter",value:function(e){return!!this._getFilter(this._getSourceImage(),e)}},{key:"getOptions",value:function(e){var c=this._getSourceImage(),C=this._getFilter(c,e);return C?Y()({},C.options):null}},{key:"_changeFilterValues",value:function(e,c){G()(c,function(C,x){B()(e[x])||(e[x]=C)}),G()(e.options,function(C,x){B()(c[x])||(e.options[x]=c[x])})}},{key:"_apply",value:function(e,c){e.filters.push();var C=e.applyFilters();C&&c()}},{key:"_getSourceImage",value:function(){return this.getCanvasImage()}},{key:"_createFilter",value:function(e,c,C){var x,E=this._getFabricFilterType(c),_=at.fabric.Image.filters[E];return _&&(x=new _(C),x.options=C,e.filters.push(x)),x}},{key:"_getFilter",value:function(e,c){var C=null;if(e){var x=this._getFabricFilterType(c),E=e.filters.length,_,N;for(N=0;N<E;N+=1)if(_=e.filters[N],_.type===x){C=_;break}}return C}},{key:"_removeFilter",value:function(e,c){var C,x=this._getFabricFilterType(c);e.filters=$e()(C=e.filters).call(C,function(E){return E.type!==x})}},{key:"_getFabricFilterType",value:function(e){return e.charAt(0).toUpperCase()+d()(e).call(e,1)}}]),i}(Le),Qs=Js,Ks=X(1801),We=X.n(Ks),Rn={pixelate:"blocksize",blur:"blur"},Qi={x:"width",y:"height"},$s=Rr(Rn),oi=null;function bi(M){var g=ii(M,"patternSourceCanvas"),i=g.patternSourceCanvas,l=i.getObjects(),e=ot(l,1),c=e[0];return c}function qs(M){var g=M.angle,i=M.flipX,l=M.flipY,e=bi(M),c=hl(M),C=c.right,x=c.bottom,E=c.width,_=c.height,N=(E-M.width)/2,R=(_-M.height)/2,et=M.left-M.width/2-N,it=M.top-M.height/2-R,ut=E/2-N,st=_/2-R,ft=Math.max(E,_)+Math.max(N,R),wt=tl({shapeObj:M,left:ut,top:st,width:E,height:_,cropX:et,cropY:it,flipX:i,flipY:l,right:C,bottom:x}),Jt=ot(wt,4);ut=Jt[0],st=Jt[1],E=Jt[2],_=Jt[3],e.set({angle:i===l?-g:g,left:ut,top:st,width:E,height:_,cropX:et,cropY:it,flipX:i,flipY:l}),Gi(e,{fillImageMaxSize:ft})}function Ki(M){var g;return He()(g=M.filters).call(g,function(i){var l=xt()(i),e=ot(l,1),c=e[0];return j({},$s[c],i[c])})}function tl(M){var g=M.shapeObj,i=M.left,l=M.top,e=M.width,c=M.height,C=M.cropX,x=M.cropY,E=M.flipX,_=M.flipY,N=M.right,R=M.bottom,et=function(qt,zt,se,Ee){return al({type:qt,outDistance:zt,shapeObj:g,flipX:E,flipY:_,left:se,top:Ee})},it=e,ut=c,st=il(et,{left:i,top:l,width:e,height:c,cropX:C,cropY:x}),ft=ot(st,4);i=ft[0],l=ft[1],e=ft[2],c=ft[3];var wt=el(et,{left:i,top:l,insideCanvasRealImageWidth:e,insideCanvasRealImageHeight:c,right:N,bottom:R,cropX:C,cropY:x,originalWidth:it,originalHeight:ut}),Jt=ot(wt,4);return i=Jt[0],l=Jt[1],e=Jt[2],c=Jt[3],[i,l,e,c]}function el(M,g){var i=g.left,l=g.top,e=g.insideCanvasRealImageWidth,c=g.insideCanvasRealImageHeight,C=g.right,x=g.bottom,E=g.cropX,_=g.cropY,N=g.originalWidth,R=g.originalHeight,et=e,it=c,ut=oi,st=ut.width,ft=ut.height;C>st&&E>0&&(et=N-Math.abs(C-st)),x>ft&&_>0&&(it=R-Math.abs(x-ft));var wt={x:(e-et)/2,y:(c-it)/2};return G()(["x","y"],function(Jt){var Kt=wt[Jt];if(Kt>0){var qt=M(Jt,Kt,i,l),zt=ot(qt,2);i=zt[0],l=zt[1]}}),[i,l,et,it]}function il(M,g){var i=g.left,l=g.top,e=g.width,c=g.height,C=g.cropX,x=g.cropY,E={width:e,height:c};return G()(["x","y"],function(_){var N=_==="x"?C:x,R=E[Qi[_]],et=oi[Qi[_]];if(R>et){var it=(R-et)/2;E[Qi[_]]=et;var ut=M(_,it,i,l),st=ot(ut,2);i=st[0],l=st[1]}if(N<0){var ft=M(_,N,i,l),wt=ot(ft,2);i=wt[0],l=wt[1]}}),[i,l,E.width,E.height]}function zn(M,g,i){var l=Fn(M),e=Hn(l,M.angle,g);i.add(e);var c={fill:new at.fabric.Pattern({source:i.getElement(),repeat:"no-repeat"})};return Gi(c,{patternSourceCanvas:i}),c}function nl(M){var g=M.getObjects(),i=ot(g,1),l=i[0],e=ii(l,"fillImageMaxSize"),c=e.fillImageMaxSize;c=Math.max(1,c),M.setDimensions({width:c,height:c}),M.renderAll()}function rl(M,g){var i=ii(M,"patternSourceCanvas"),l=i.patternSourceCanvas,e=l.getObjects(),c=ot(e,1),C=c[0],x=Ki(C);l.remove(C);var E=Fn(g,!0),_=Hn(E,g.angle,x);l.add(_)}function Fn(M){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(!oi||g)&&(oi=M.toCanvasElement()),oi}function al(M){var g=M.type,i=M.shapeObj,l=M.outDistance,e=M.left,c=M.top,C=M.flipX,x=M.flipY,E=Bn(i),_=[[1,2],[0,3],[0,3],[1,2]],N=sl(g,E,_),R=ll(g,E,N),et=N.startPointIndex,it=ol({outDistance:l,startPointIndex:et,flipX:C,flipY:x,reatAngles:R});return[e+it.left,c+it.top]}function ol(M){var g=M.outDistance,i=M.startPointIndex,l=M.flipX,e=M.flipY,c=M.reatAngles,C=g*Math.cos(c[0]*Math.PI/180),x=g*Math.cos(c[1]*Math.PI/180),E=i===2||i===3,_={top:E?C:x,left:E?x:C};return cl(i,l,e)&&(_.left=_.left*-1),ul(i,l,e)&&(_.top=_.top*-1),_}function sl(M,g,i){var l=0,e=0;G()(g,function(E,_){E[M]<l&&(l=E[M],e=_)});var c=ot(i[e],2),C=c[0],x=c[1];return{startPointIndex:e,endPointIndex1:C,endPointIndex2:x}}function ll(M,g,i){var l,e=i.startPointIndex,c=i.endPointIndex1,C=i.endPointIndex2,x=M==="x"?180:270;return He()(l=[c,C]).call(l,function(E){var _=g[e],N=g[E],R=_.y-N.y,et=_.x-N.x;return Math.atan2(R,et)*180/Math.PI-x})}function cl(M,g,i){return(!g&&i||!g&&!i)&&M===0||(g&&i||g&&!i)&&M===1||(!g&&!i||!g&&i)&&M===2||(g&&!i||g&&i)&&M===3}function ul(M,g,i){return(g&&!i||!g&&!i)&&M===0||(!g&&!i||g&&!i)&&M===1||(g&&i||!g&&i)&&M===2||(!g&&i||g&&i)&&M===3}function Bn(M){return[M.getPointByOrigin("left","top"),M.getPointByOrigin("right","top"),M.getPointByOrigin("left","bottom"),M.getPointByOrigin("right","bottom")]}function hl(M){var g=Bn(M),i=ot(g,4),l=i[0],e=l.x,c=l.y,C=i[1],x=C.x,E=C.y,_=i[2],N=_.x,R=_.y,et=i[3],it=et.x,ut=et.y,st=Math.min(e,x,N,it),ft=Math.min(c,E,R,ut),wt=Math.max(e,x,N,it),Jt=Math.max(c,E,R,ut);return{left:st,top:ft,right:wt,bottom:Jt,width:wt-st,height:Jt-ft}}function Hn(M,g,i){var l,e=new at.fabric.Image(M);return G()(Y().apply(void 0,F()(l=[{}]).call(l,P(i))),function(c,C){var x=zr(C),E=new at.fabric.Image.filters[x](j({},Rn[C],c));e.filters.push(E)}),e.applyFilters(),Gi(e,{originalAngle:g,fillImageMaxSize:Math.max(e.width,e.height)}),We().adjustOriginToCenter(e),e}function fl(M){var g=dl();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function dl(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var Un=Y()({strokeWidth:1,stroke:"#000000",fill:"#ffffff",width:1,height:1,rx:0,ry:0},Ce),gl="rect",vl=20,ml=20;function Yn(M,g,i){var l=mt()(M),e=un(mt()(M)),c=l;l.color&&(c=l.color);var C=null;if(e==="filter"){var x=i();C=zn(g,$e()(l),x)}else C={fill:c};return Y()({},M,C)}var pl=function(M){fe(i,M);var g=fl(i);function i(l){var e,c,C,x,E,_;return H(this,i),_=g.call(this,Pt.SHAPE,l),_._shapeObj=null,_._type=gl,_._options=Y()({},Un),_._isSelected=!1,_._startPoint={},_._withShiftKey=!1,_._handlers={mousedown:V()(e=_._onFabricMouseDown).call(e,re(_)),mousemove:V()(c=_._onFabricMouseMove).call(c,re(_)),mouseup:V()(C=_._onFabricMouseUp).call(C,re(_)),keydown:V()(x=_._onKeyDown).call(x,re(_)),keyup:V()(E=_._onKeyUp).call(E,re(_))},_}return q(i,[{key:"start",value:function(){var e=this.getCanvas();this._isSelected=!1,e.defaultCursor="crosshair",e.selection=!1,e.uniformScaling=!0,e.on({"mouse:down":this._handlers.mousedown}),at.fabric.util.addListener(document,"keydown",this._handlers.keydown),at.fabric.util.addListener(document,"keyup",this._handlers.keyup)}},{key:"end",value:function(){var e=this.getCanvas();this._isSelected=!1,e.defaultCursor="default",e.selection=!0,e.uniformScaling=!1,e.off({"mouse:down":this._handlers.mousedown}),at.fabric.util.removeListener(document,"keydown",this._handlers.keydown),at.fabric.util.removeListener(document,"keyup",this._handlers.keyup)}},{key:"setStates",value:function(e,c){this._type=e,c&&(this._options=Y()(this._options,c))}},{key:"add",value:function(e,c){var C=this;return new(yt())(function(x){var E=C.getCanvas(),_=C._extendOptions(c),N=C._createInstance(e,_),R=C.graphics.createObjectProperties(N);C._bindEventOnShape(N),E.add(N).setActiveObject(N),C._resetPositionFillFilter(N),x(R)})}},{key:"change",value:function(e,c){var C=this;return new(yt())(function(x,E){hn(e)||E(ue.unsupportedType);var _=un(mt()(c))==="filter",N=C.graphics,R=N.canvasImage,et=N.createStaticCanvas;e.set(_?Yn(c,R,et):c),_&&C._resetPositionFillFilter(e),C.getCanvas().renderAll(),x()})}},{key:"makeFillPropertyForUserEvent",value:function(e){var c=Xi(e),C={};if(c===At.FILTER){var x=bi(e),E=Ki(x);C.type=c,C.filter=E}else C.type=At.COLOR,C.color=mt()(e)||"transparent";return C}},{key:"processForCopiedObject",value:function(e,c){if(this._bindEventOnShape(e),Xi(e)==="filter"){var C=bi(c),x=Ki(C),E=this.graphics.createStaticCanvas();e.set(zn(this.graphics.canvasImage,x,E)),this._resetPositionFillFilter(e)}}},{key:"_createInstance",value:function(e,c){var C;switch(e){case"rect":C=new at.fabric.Rect(c);break;case"circle":C=new at.fabric.Ellipse(Y()({type:"circle"},c));break;case"triangle":C=new at.fabric.Triangle(c);break;default:C={}}return C}},{key:"_extendOptions",value:function(e){var c=Ne.SELECTION_STYLE,C=this.graphics,x=C.canvasImage,E=C.createStaticCanvas;return e=Y()({},Un,this._options,c,e),Yn(e,x,E)}},{key:"_bindEventOnShape",value:function(e){var c=this,C=this.getCanvas();e.on({added:function(){c._shapeObj=this,We().setOrigins(c._shapeObj)},selected:function(){c._isSelected=!0,c._shapeObj=this,C.uniformScaling=!0,C.defaultCursor="default",We().setOrigins(c._shapeObj)},deselected:function(){c._isSelected=!1,c._shapeObj=null,C.defaultCursor="crosshair",C.uniformScaling=!1},modified:function(){var E=c._shapeObj;We().adjustOriginToCenter(E),We().setOrigins(E)},modifiedInGroup:function(E){c._fillFilterRePositionInGroupSelection(e,E)},moving:function(){c._resetPositionFillFilter(this)},rotating:function(){c._resetPositionFillFilter(this)},scaling:function(E){var _=C.getPointer(E.e),N=c._shapeObj;C.setCursor("crosshair"),We().resize(N,_,!0),c._resetPositionFillFilter(this)}})}},{key:"_onFabricMouseDown",value:function(e){if(e.target||(this._isSelected=!1,this._shapeObj=!1),!this._isSelected&&!this._shapeObj){var c=this.getCanvas();this._startPoint=c.getPointer(e.e),c.on({"mouse:move":this._handlers.mousemove,"mouse:up":this._handlers.mouseup})}}},{key:"_onFabricMouseMove",value:function(e){var c=this,C=this.getCanvas(),x=C.getPointer(e.e),E=this._startPoint.x,_=this._startPoint.y,N=E-x.x,R=_-x.y,et=this._shapeObj;et?(this._shapeObj.set({isRegular:this._withShiftKey}),We().resize(et,x),C.renderAll(),this._resetPositionFillFilter(et)):this.add(this._type,{left:E,top:_,width:N,height:R}).then(function(it){c.fire(Mt.ADD_OBJECT,it)})}},{key:"_onFabricMouseUp",value:function(){var e=this,c=this.getCanvas(),C=this._startPoint.x,x=this._startPoint.y,E=this._shapeObj;E?E&&(We().adjustOriginToCenter(E),this.fire(Mt.OBJECT_ADDED,this.graphics.createObjectProperties(E))):this.add(this._type,{left:C,top:x,width:vl,height:ml}).then(function(_){e.fire(Mt.ADD_OBJECT,_)}),c.off({"mouse:move":this._handlers.mousemove,"mouse:up":this._handlers.mouseup})}},{key:"_onKeyDown",value:function(e){e.keyCode===me.SHIFT&&(this._withShiftKey=!0,this._shapeObj&&(this._shapeObj.isRegular=!0))}},{key:"_onKeyUp",value:function(e){e.keyCode===me.SHIFT&&(this._withShiftKey=!1,this._shapeObj&&(this._shapeObj.isRegular=!1))}},{key:"_resetPositionFillFilter",value:function(e){if(Xi(e)==="filter"){var c=ii(e,"patternSourceCanvas"),C=c.patternSourceCanvas,x=bi(e),E=ii(x,"originalAngle"),_=E.originalAngle;this.graphics.canvasImage.angle!==_&&rl(e,this.graphics.canvasImage);var N=e.originX,R=e.originY;We().adjustOriginToCenter(e),e.width*=e.scaleX,e.height*=e.scaleY,e.rx*=e.scaleX,e.ry*=e.scaleY,e.scaleX=1,e.scaleY=1,qs(e),jr(e,{originX:N,originY:R}),nl(C)}}},{key:"_fillFilterRePositionInGroupSelection",value:function(e,c){(c.scaleX!==1||c.scaleY!==1)&&c.addWithUpdate();var C=e.angle,x=e.left,E=e.top;at.fabric.util.addTransformToObject(e,c.calcTransformMatrix()),this._resetPositionFillFilter(e),e.set({angle:C,left:x,top:E})}}]),i}(Le);function yl(M){var g=Cl();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function Cl(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var $i=10,Wn={left:0,top:0,width:0,height:0,stroke:"#000000",strokeWidth:0,fill:"#000000",opacity:.4,evented:!1,selectable:!1,hoverCursor:"auto"},qi={SIZE:.0045,MARGIN:.003,BORDER_RADIUS:.003},tn={SIZE:.0066,MARGIN:.0044,BORDER_RADIUS:.003},Mi=1,Gn=Mt.ZOOM_CHANGED,Sl=Mt.ADD_TEXT,Il=Mt.TEXT_EDITING,xl=Mt.OBJECT_MODIFIED,Xn=Mt.KEY_DOWN,Zn=Mt.KEY_UP,bl=Mt.HAND_STARTED,Ml=Mt.HAND_STOPPED,_l=function(M){fe(i,M);var g=yl(i);function i(l){var e,c,C,x,E,_,N,R,et,it,ut,st,ft;H(this,i),ft=g.call(this,Pt.ZOOM,l),ft.zoomArea=null,ft._startPoint=null,ft._centerPoints=[],ft.zoomLevel=Mi,ft.zoomMode=Te.DEFAULT,ft._listeners={startZoom:V()(e=ft._onMouseDownWithZoomMode).call(e,re(ft)),moveZoom:V()(c=ft._onMouseMoveWithZoomMode).call(c,re(ft)),stopZoom:V()(C=ft._onMouseUpWithZoomMode).call(C,re(ft)),startHand:V()(x=ft._onMouseDownWithHandMode).call(x,re(ft)),moveHand:V()(E=ft._onMouseMoveWithHandMode).call(E,re(ft)),stopHand:V()(_=ft._onMouseUpWithHandMode).call(_,re(ft)),zoomChanged:V()(N=ft._changeScrollState).call(N,re(ft)),keydown:V()(R=ft._startHandModeWithSpaceBar).call(R,re(ft)),keyup:V()(et=ft._endHandModeWithSpaceBar).call(et,re(ft))};var wt=ft.getCanvas();return ft.aspectRatio=wt.width/wt.height,ft._verticalScroll=new at.fabric.Rect(Wn),ft._horizontalScroll=new at.fabric.Rect(Wn),wt.on(Gn,ft._listeners.zoomChanged),ft.graphics.on(Sl,V()(it=ft._startTextEditingHandler).call(it,re(ft))),ft.graphics.on(Il,V()(ut=ft._startTextEditingHandler).call(ut,re(ft))),ft.graphics.on(xl,V()(st=ft._stopTextEditingHandler).call(st,re(ft))),ft}return q(i,[{key:"attachKeyboardZoomEvents",value:function(){at.fabric.util.addListener(document,Xn,this._listeners.keydown),at.fabric.util.addListener(document,Zn,this._listeners.keyup)}},{key:"detachKeyboardZoomEvents",value:function(){at.fabric.util.removeListener(document,Xn,this._listeners.keydown),at.fabric.util.removeListener(document,Zn,this._listeners.keyup)}},{key:"_startTextEditingHandler",value:function(){this.isTextEditing=!0}},{key:"_stopTextEditingHandler",value:function(){this.isTextEditing=!1}},{key:"_startHandModeWithSpaceBar",value:function(e){this.withSpace||this.isTextEditing||e.keyCode===me.SPACE&&(this.withSpace=!0,this.startHandMode())}},{key:"_endHandModeWithSpaceBar",value:function(e){e.keyCode===me.SPACE&&(this.withSpace=!1,this.endHandMode())}},{key:"startZoomInMode",value:function(){if(!this.zoomArea){this.endHandMode(),this.zoomMode=Te.ZOOM;var e=this.getCanvas();this._changeObjectsEventedState(!1),this.zoomArea=new at.fabric.Rect({left:0,top:0,width:.5,height:.5,stroke:"black",strokeWidth:1,fill:"transparent",hoverCursor:"zoom-in"}),e.discardActiveObject(),e.add(this.zoomArea),e.on("mouse:down",this._listeners.startZoom),e.selection=!1,e.defaultCursor="zoom-in"}}},{key:"endZoomInMode",value:function(){this.zoomMode=Te.DEFAULT;var e=this.getCanvas(),c=this._listeners,C=c.startZoom,x=c.moveZoom,E=c.stopZoom;e.selection=!0,e.defaultCursor="auto",e.off({"mouse:down":C,"mouse:move":x,"mouse:up":E}),this._changeObjectsEventedState(!0),e.remove(this.zoomArea),this.zoomArea=null}},{key:"start",value:function(){this.zoomArea=null,this._startPoint=null,this._startHandPoint=null}},{key:"end",value:function(){this.endZoomInMode(),this.endHandMode()}},{key:"startHandMode",value:function(){this.endZoomInMode(),this.zoomMode=Te.HAND;var e=this.getCanvas();this._changeObjectsEventedState(!1),e.discardActiveObject(),e.off("mouse:down",this._listeners.startHand),e.on("mouse:down",this._listeners.startHand),e.selection=!1,e.defaultCursor="grab",e.fire(bl)}},{key:"endHandMode",value:function(){this.zoomMode=Te.DEFAULT;var e=this.getCanvas();this._changeObjectsEventedState(!0),e.off("mouse:down",this._listeners.startHand),e.selection=!0,e.defaultCursor="auto",this._startHandPoint=null,e.fire(Ml)}},{key:"_onMouseDownWithZoomMode",value:function(e){var c=e.target,C=e.e;if(!c){var x=this.getCanvas();x.selection=!1,this._startPoint=x.getPointer(C),this.zoomArea.set({width:0,height:0});var E=this._listeners,_=E.moveZoom,N=E.stopZoom;x.on({"mouse:move":_,"mouse:up":N})}}},{key:"_onMouseMoveWithZoomMode",value:function(e){var c=e.e,C=this.getCanvas(),x=C.getPointer(c),E=x.x,_=x.y,N=this.zoomArea,R=this._startPoint,et=Math.abs(E-R.x),it=Math.abs(_-R.y);et+it>$i&&(C.remove(N),N.set(this._calcRectDimensionFromPoint(E,_)),C.add(N))}},{key:"_calcRectDimensionFromPoint",value:function(e,c){var C=this.getCanvas(),x=C.getWidth(),E=C.getHeight(),_=this._startPoint,N=_.x,R=_.y,et=Math.min,it=et(N,e),ut=et(R,c),st=$t(e,N,x)-it,ft=$t(c,R,E)-ut;return{left:it,top:ut,width:st,height:ft}}},{key:"_onMouseUpWithZoomMode",value:function(){var e=this.zoomLevel,c=this.zoomArea,C=this._listeners,x=C.moveZoom,E=C.stopZoom,_=this.getCanvas(),N=this._getCenterPoint(),R=N.x,et=N.y;this._isMaxZoomLevel()||(this._centerPoints.push({x:R,y:et,prevZoomLevel:e,zoomLevel:e+1}),e+=1,_.zoomToPoint({x:R,y:et},e),this._fireZoomChanged(_,e),this.zoomLevel=e),_.off({"mouse:move":x,"mouse:up":E}),_.remove(c),this._startPoint=null}},{key:"_getCenterPoint",value:function(){var e=this.zoomArea,c=e.left,C=e.top,x=e.width,E=e.height,_=this._startPoint,N=_.x,R=_.y,et=this.aspectRatio;return x<$i&&E<$i?{x:N,y:R}:x>E?{x:c+et*E/2,y:C+E/2}:{x:c+x/2,y:C+x/et/2}}},{key:"zoom",value:function(e){for(var c=e.x,C=e.y,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.zoomLevel,E=this.getCanvas(),_=this._centerPoints,N=_.length-1;N>=0&&!(_[N].zoomLevel<x);N-=1){var R=_.pop(),et=R.x,it=R.y,ut=R.prevZoomLevel;E.zoomToPoint({x:et,y:it},ut),this.zoomLevel=ut}E.zoomToPoint({x:c,y:C},x),this._isDefaultZoomLevel(x)||this._centerPoints.push({x:c,y:C,zoomLevel:x,prevZoomLevel:this.zoomLevel}),this.zoomLevel=x,this._fireZoomChanged(E,x)}},{key:"zoomOut",value:function(){var e=this._centerPoints;if(!!e.length){var c=this.getCanvas(),C=e.pop(),x=C.x,E=C.y,_=C.prevZoomLevel;this._isDefaultZoomLevel(_)?c.setViewportTransform([1,0,0,1,0,0]):c.zoomToPoint({x,y:E},_),this.zoomLevel=_,this._fireZoomChanged(c,this.zoomLevel)}}},{key:"resetZoom",value:function(){var e=this.getCanvas();e.setViewportTransform([1,0,0,1,0,0]),this.zoomLevel=Mi,this._centerPoints=[],this._fireZoomChanged(e,this.zoomLevel)}},{key:"_isMaxZoomLevel",value:function(){return this.zoomLevel>=5}},{key:"_movePointOfZoom",value:function(e){var c=e.x,C=e.y,x=this._centerPoints;if(!!x.length){var E=this.getCanvas(),_=this.zoomLevel,N=x.pop(),R=N.x,et=N.y,it=N.prevZoomLevel,ut=R-c,st=et-C;E.zoomToPoint({x:R,y:et},it),E.zoomToPoint({x:ut,y:st},_),x.push({x:ut,y:st,prevZoomLevel:it,zoomLevel:_}),this._fireZoomChanged(E,_)}}},{key:"_onMouseDownWithHandMode",value:function(e){var c=e.target,C=e.e;if(!c){var x=this.getCanvas();if(!(this.zoomLevel<=Mi)){x.selection=!1,this._startHandPoint=x.getPointer(C);var E=this._listeners,_=E.moveHand,N=E.stopHand;x.on({"mouse:move":_,"mouse:up":N})}}}},{key:"_onMouseMoveWithHandMode",value:function(e){var c=e.e,C=this.getCanvas(),x=C.getPointer(c),E=x.x,_=x.y,N=E-this._startHandPoint.x,R=_-this._startHandPoint.y;this._movePointOfZoom({x:N,y:R})}},{key:"_onMouseUpWithHandMode",value:function(){var e=this.getCanvas(),c=this._listeners,C=c.moveHand,x=c.stopHand;e.off({"mouse:move":C,"mouse:up":x}),this._startHandPoint=null}},{key:"_changeScrollState",value:function(e){var c=e.viewport,C=e.zoomLevel,x=this.getCanvas();if(x.remove(this._verticalScroll),x.remove(this._horizontalScroll),!this._isDefaultZoomLevel(C)){var E=x.width,_=x.height,N=c.tl,R=c.tr,et=c.bl,it=R.x-N.x,ut=et.y-N.y,st=it*it/E,ft=ut*tn.SIZE,wt=$t(N.x+N.x/E*it,N.x,R.x-st),Jt=ut*tn.MARGIN,Kt=ut*tn.BORDER_RADIUS;this._horizontalScroll.set({left:wt,top:et.y-ft-Jt,width:st,height:ft,rx:Kt,ry:Kt});var qt=it*qi.SIZE,zt=ut*ut/_,se=$t(N.y+N.y/_*ut,R.y,et.y-zt),Ee=it*qi.MARGIN,Oe=it*qi.BORDER_RADIUS;this._verticalScroll.set({left:R.x-qt-Ee,top:se,width:qt,height:zt,rx:Oe,ry:Oe}),this._addScrollBar()}}},{key:"_changeObjectsEventedState",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,c=this.getCanvas();c.forEachObject(function(C){C.evented=e})}},{key:"_addScrollBar",value:function(){var e=this,c=this.getCanvas();c.add(this._horizontalScroll),c.add(this._verticalScroll),this.scrollBarTid&&clearTimeout(this.scrollBarTid),this.scrollBarTid=t()(function(){c.remove(e._horizontalScroll),c.remove(e._verticalScroll)},3e3)}},{key:"_isDefaultZoomLevel",value:function(e){return e===Mi}},{key:"_fireZoomChanged",value:function(e,c){e.fire(Gn,{viewport:e.calcViewportBoundaries(),zoomLevel:c})}},{key:"mode",get:function(){return this.zoomMode}}]),i}(Le),El=_l,Vn=yi.create,Jn=yi.types,Tl=function(){function M(g){H(this,M),this.name=g}return q(M,[{key:"getName",value:function(){return this.name}},{key:"start",value:function(){throw new Error(Vn(Jn.UN_IMPLEMENTATION,"start"))}},{key:"end",value:function(){throw new Error(Vn(Jn.UN_IMPLEMENTATION,"stop"))}}]),M}(),Ze=Tl;function Dl(M){var g=Al();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function Al(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var wl=function(M){fe(i,M);var g=Dl(i);function i(){return H(this,i),g.call(this,oe.CROPPER)}return q(i,[{key:"start",value:function(e){var c=e.getComponent(Pt.CROPPER);c.start()}},{key:"end",value:function(e){var c=e.getComponent(Pt.CROPPER);c.end()}}]),i}(Ze),Ol=wl;function kl(M){var g=Pl();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function Pl(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var Ll=function(M){fe(i,M);var g=kl(i);function i(){return H(this,i),g.call(this,oe.FREE_DRAWING)}return q(i,[{key:"start",value:function(e,c){var C=e.getComponent(Pt.FREE_DRAWING);C.start(c)}},{key:"end",value:function(e){var c=e.getComponent(Pt.FREE_DRAWING);c.end()}}]),i}(Ze),Nl=Ll;function jl(M){var g=Rl();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function Rl(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var zl=function(M){fe(i,M);var g=jl(i);function i(){return H(this,i),g.call(this,oe.LINE_DRAWING)}return q(i,[{key:"start",value:function(e,c){var C=e.getComponent(Pt.LINE);C.start(c)}},{key:"end",value:function(e){var c=e.getComponent(Pt.LINE);c.end()}}]),i}(Ze),Fl=zl;function Bl(M){var g=Hl();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function Hl(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var Ul=function(M){fe(i,M);var g=Bl(i);function i(){return H(this,i),g.call(this,oe.SHAPE)}return q(i,[{key:"start",value:function(e){var c=e.getComponent(Pt.SHAPE);c.start()}},{key:"end",value:function(e){var c=e.getComponent(Pt.SHAPE);c.end()}}]),i}(Ze),Yl=Ul;function Wl(M){var g=Gl();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function Gl(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var Xl=function(M){fe(i,M);var g=Wl(i);function i(){return H(this,i),g.call(this,oe.TEXT)}return q(i,[{key:"start",value:function(e){var c=e.getComponent(Pt.TEXT);c.start()}},{key:"end",value:function(e){var c=e.getComponent(Pt.TEXT);c.end()}}]),i}(Ze),Zl=Xl;function Vl(M){var g=Jl();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function Jl(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var Ql=function(M){fe(i,M);var g=Vl(i);function i(){return H(this,i),g.call(this,oe.ICON)}return q(i,[{key:"start",value:function(e){var c=e.getComponent(Pt.ICON);c.start()}},{key:"end",value:function(e){var c=e.getComponent(Pt.ICON);c.end()}}]),i}(Ze),Kl=Ql;function $l(M){var g=ql();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function ql(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var tc=function(M){fe(i,M);var g=$l(i);function i(){return H(this,i),g.call(this,oe.ZOOM)}return q(i,[{key:"start",value:function(e){var c=e.getComponent(Pt.ZOOM);c.start()}},{key:"end",value:function(e){var c=e.getComponent(Pt.ZOOM);c.end()}}]),i}(Ze),ec=tc,Qn=null;function Kn(M){Qn=M}function ic(){return Qn}function en(M,g){var i;if(M.type==="activeSelection"){var l;i=He()(l=M.getObjects()).call(l,function(e){var c=e.angle,C=e.left,x=e.top,E=e.scaleX,_=e.scaleY,N=e.width,R=e.height;at.fabric.util.addTransformToObject(e,M.calcTransformMatrix());var et=g(e);return e.set({angle:c,left:C,top:x,width:N,height:R,scaleX:E,scaleY:_}),et})}else i=[g(M)];return i}function nn(M,g,i){return i?{id:M,width:g.width,height:g.height,top:g.top,left:g.left,angle:g.angle,scaleX:g.scaleX,scaleY:g.scaleY}:Y()({id:M},g)}function nc(M){var g=rc();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function rc(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var ac=function(M){fe(i,M);var g=nc(i);function i(l){var e;return H(this,i),e=g.call(this,Pt.RESIZE,l),e._dimensions=null,e._originalDimensions=null,e}return q(i,[{key:"getCurrentDimensions",value:function(){var e=this.getCanvasImage();if(!this._dimensions&&e){var c=e.width,C=e.height;this._dimensions={width:c,height:C}}return this._dimensions}},{key:"getOriginalDimensions",value:function(){return this._originalDimensions}},{key:"setOriginalDimensions",value:function(e){this._originalDimensions=e}},{key:"resize",value:function(e){var c=this.getCanvasImage(),C=c.width,x=c.height,E=c.scaleX,_=c.scaleY,N=e.width,R=e.height,et={scaleX:N?N/C:E,scaleY:R?R/x:_};return(E!==et.scaleX||_!==et.scaleY)&&(c.set(et).setCoords(),this._dimensions={width:c.width*c.scaleX,height:c.height*c.scaleY}),this.adjustCanvasDimensionBase(),yt().resolve()}},{key:"start",value:function(){var e=this.getCurrentDimensions();this.setOriginalDimensions(e)}},{key:"end",value:function(){}}]),i}(Le),oc=ac;function sc(M){var g=lc();return function(){var l=Qt(M),e;if(g){var c=Qt(this).constructor;e=Et()(l,arguments,c)}else e=l.apply(this,arguments);return de(this,e)}}function lc(){if(typeof Reflect>"u"||!Et()||Et().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Et()(Boolean,[],function(){})),!0}catch{return!1}}var cc=function(M){fe(i,M);var g=sc(i);function i(){return H(this,i),g.call(this,oe.RESIZE)}return q(i,[{key:"start",value:function(e){var c=e.getComponent(Pt.RESIZE);c.start()}},{key:"end",value:function(e){var c=e.getComponent(Pt.RESIZE);c.end()}}]),i}(Ze),uc=cc,hc=1e3,fc=800,_i=10,dc={cssOnly:!0},gc={backstoreOnly:!0},$n=function(){function M(g){var i,l,e,c,C,x,E,_,N,R,et,it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ut=it.cssMaxWidth,st=it.cssMaxHeight;H(this,M),this.canvasImage=null,this.cssMaxWidth=ut||hc,this.cssMaxHeight=st||fc,this.cropSelectionStyle={},this.targetObjectForCopyPaste=null,this.imageName="",this._objects={},this._canvas=null,this._drawingMode=oe.NORMAL,this._drawingModeMap={},this._componentMap={},this._handler={onMouseDown:V()(i=this._onMouseDown).call(i,this),onObjectAdded:V()(l=this._onObjectAdded).call(l,this),onObjectRemoved:V()(e=this._onObjectRemoved).call(e,this),onObjectMoved:V()(c=this._onObjectMoved).call(c,this),onObjectScaled:V()(C=this._onObjectScaled).call(C,this),onObjectModified:V()(x=this._onObjectModified).call(x,this),onObjectRotated:V()(E=this._onObjectRotated).call(E,this),onObjectSelected:V()(_=this._onObjectSelected).call(_,this),onPathCreated:V()(N=this._onPathCreated).call(N,this),onSelectionCleared:V()(R=this._onSelectionCleared).call(R,this),onSelectionCreated:V()(et=this._onSelectionCreated).call(et,this)},this._setObjectCachingToFalse(),this._setCanvasElement(g),this._createDrawingModeInstances(),this._createComponents(),this._attachCanvasEvents(),this._attachZoomEvents()}return q(M,[{key:"destroy",value:function(){var i=this._canvas.wrapperEl;this._canvas.clear(),i.parentNode.removeChild(i),this._detachZoomEvents()}},{key:"_attachZoomEvents",value:function(){var i=this.getComponent(Pt.ZOOM);i.attachKeyboardZoomEvents()}},{key:"_detachZoomEvents",value:function(){var i=this.getComponent(Pt.ZOOM);i.detachKeyboardZoomEvents()}},{key:"deactivateAll",value:function(){return this._canvas.discardActiveObject(),this}},{key:"renderAll",value:function(){return this._canvas.renderAll(),this}},{key:"add",value:function(i){var l,e=[];Pn()(i)?e=i:e.push(i),(l=this._canvas).add.apply(l,P(e))}},{key:"contains",value:function(i){return this._canvas.contains(i)}},{key:"getObjects",value:function(){var i;return d()(i=this._canvas.getObjects()).call(i)}},{key:"getObject",value:function(i){return this._objects[i]}},{key:"remove",value:function(i){this._canvas.remove(i)}},{key:"removeAll",value:function(i){var l,e=this._canvas,c=d()(l=e.getObjects()).call(l);return e.remove.apply(e,P(this._canvas.getObjects())),i&&e.clear(),c}},{key:"removeObjectById",value:function(i){var l=[],e=this._canvas,c=this.getObject(i),C=c&&c.isType("group")&&!c.isEmpty();return C?(e.discardActiveObject(),c.forEachObject(function(x){l.push(x),e.remove(x)})):e.contains(c)&&(l.push(c),e.remove(c)),l}},{key:"getObjectId",value:function(i){var l=null;for(l in this._objects)if(this._objects.hasOwnProperty(l)&&i===this._objects[l])return l;return null}},{key:"getActiveObject",value:function(){return this._canvas._activeObject}},{key:"getActiveObjectIdForRemove",value:function(){var i=this.getActiveObject(),l=i.type,e=i.left,c=i.top,C=l==="activeSelection";if(C){var x=new at.fabric.Group(P(i.getObjects()),{left:e,top:c});return this._addFabricObject(x)}return this.getObjectId(i)}},{key:"isReadyRemoveObject",value:function(){var i=this.getActiveObject();return i&&!i.isEditing}},{key:"getActiveObjects",value:function(){var i=this._canvas._activeObject;return i&&i.type==="activeSelection"?i:null}},{key:"getActiveSelectionFromObjects",value:function(i){var l=this.getCanvas();return new at.fabric.ActiveSelection(i,{canvas:l})}},{key:"setActiveObject",value:function(i){this._canvas.setActiveObject(i)}},{key:"setCropSelectionStyle",value:function(i){this.cropSelectionStyle=i}},{key:"getComponent",value:function(i){return this._componentMap[i]}},{key:"getDrawingMode",value:function(){return this._drawingMode}},{key:"startDrawingMode",value:function(i,l){if(this._isSameDrawingMode(i))return!0;this.stopDrawingMode();var e=this._getDrawingModeInstance(i);return e&&e.start&&(e.start(this,l),this._drawingMode=i),!!e}},{key:"stopDrawingMode",value:function(){if(!this._isSameDrawingMode(oe.NORMAL)){var i=this._getDrawingModeInstance(this.getDrawingMode());i&&i.end&&i.end(this),this._drawingMode=oe.NORMAL}}},{key:"zoom",value:function(i,l){var e=i.x,c=i.y,C=this.getComponent(Pt.ZOOM);C.zoom({x:e,y:c},l)}},{key:"getZoomMode",value:function(){var i=this.getComponent(Pt.ZOOM);return i.mode}},{key:"startZoomInMode",value:function(){var i=this.getComponent(Pt.ZOOM);i.startZoomInMode()}},{key:"endZoomInMode",value:function(){var i=this.getComponent(Pt.ZOOM);i.endZoomInMode()}},{key:"zoomOut",value:function(){var i=this.getComponent(Pt.ZOOM);i.zoomOut()}},{key:"startHandMode",value:function(){var i=this.getComponent(Pt.ZOOM);i.startHandMode()}},{key:"endHandMode",value:function(){var i=this.getComponent(Pt.ZOOM);i.endHandMode()}},{key:"resetZoom",value:function(){var i=this.getComponent(Pt.ZOOM);i.resetZoom()}},{key:"toDataURL",value:function(i){var l=this.getComponent(Pt.CROPPER);l.changeVisibility(!1);var e=this._canvas&&this._canvas.toDataURL(i);return l.changeVisibility(!0),e}},{key:"setCanvasImage",value:function(i,l){l&&kt(l),this.imageName=i,this.canvasImage=l}},{key:"setCssMaxDimension",value:function(i){this.cssMaxWidth=i.width||this.cssMaxWidth,this.cssMaxHeight=i.height||this.cssMaxHeight}},{key:"adjustCanvasDimension",value:function(){this.adjustCanvasDimensionBase(this.canvasImage.scale(1))}},{key:"adjustCanvasDimensionBase",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;i||(i=this.canvasImage);var l=i.getBoundingRect(),e=l.width,c=l.height,C=this._calcMaxDimension(e,c);this.setCanvasCssDimension({width:"100%",height:"100%","max-width":"".concat(C.width,"px"),"max-height":"".concat(C.height,"px")}),this.setCanvasBackstoreDimension({width:e,height:c}),this._canvas.centerObject(i)}},{key:"setCanvasCssDimension",value:function(i){this._canvas.setDimensions(i,dc)}},{key:"setCanvasBackstoreDimension",value:function(i){this._canvas.setDimensions(i,gc)}},{key:"setImageProperties",value:function(i,l){var e=this.canvasImage;!e||(e.set(i).setCoords(),l&&this._canvas.renderAll())}},{key:"getCanvasElement",value:function(){return this._canvas.getElement()}},{key:"getCanvas",value:function(){return this._canvas}},{key:"getCanvasImage",value:function(){return this.canvasImage}},{key:"getImageName",value:function(){return this.imageName}},{key:"addImageObject",value:function(i){var l,e=this,c=V()(l=this._callbackAfterLoadingImageObject).call(l,this);return new(yt())(function(C){at.fabric.Image.fromURL(i,function(x){c(x),C(e.createObjectProperties(x))},{crossOrigin:"Anonymous"})})}},{key:"getCenter",value:function(){return this._canvas.getCenter()}},{key:"getCropzoneRect",value:function(){return this.getComponent(Pt.CROPPER).getCropzoneRect()}},{key:"setCropzoneRect",value:function(i){this.getComponent(Pt.CROPPER).setCropzoneRect(i)}},{key:"getCroppedImageData",value:function(i){return this.getComponent(Pt.CROPPER).getCroppedImageData(i)}},{key:"setBrush",value:function(i){var l=this._drawingMode,e=Pt.FREE_DRAWING;l===oe.LINE_DRAWING&&(e=Pt.LINE),this.getComponent(e).setBrush(i)}},{key:"setDrawingShape",value:function(i,l){this.getComponent(Pt.SHAPE).setStates(i,l)}},{key:"setIconStyle",value:function(i,l){this.getComponent(Pt.ICON).setStates(i,l)}},{key:"registerPaths",value:function(i){this.getComponent(Pt.ICON).registerPaths(i)}},{key:"changeCursor",value:function(i){var l=this.getCanvas();l.defaultCursor=i,l.renderAll()}},{key:"hasFilter",value:function(i){return this.getComponent(Pt.FILTER).hasFilter(i)}},{key:"setSelectionStyle",value:function(i){Y()(Ne.SELECTION_STYLE,i)}},{key:"setObjectProperties",value:function(i,l){var e=this.getObject(i),c=Y()({},l);return e.set(c),e.setCoords(),this.getCanvas().renderAll(),c}},{key:"getObjectProperties",value:function(i,l){var e=this.getObject(i),c={};return St()(l)?c[l]=e[l]:Pn()(l)?ni()(l,function(C){c[C]=e[C]}):Si()(l,function(C,x){c[x]=e[x]}),c}},{key:"getObjectPosition",value:function(i,l,e){var c=this.getObject(i);return c?c.getPointByOrigin(l,e):null}},{key:"setObjectPosition",value:function(i,l){var e=this.getObject(i),c=l.x,C=l.y,x=l.originX,E=l.originY;if(!e)return!1;var _=e.getPointByOrigin(x,E),N=e.getPointByOrigin("center","center"),R=N.x-_.x,et=N.y-_.y;return e.set({left:c+R,top:C+et}),e.setCoords(),!0}},{key:"getCanvasSize",value:function(){var i=this.getCanvasImage();return{width:i?i.width:0,height:i?i.height:0}}},{key:"createStaticCanvas",value:function(){var i=new at.fabric.StaticCanvas;return i.set({enableRetinaScaling:!1}),i}},{key:"_getDrawingModeInstance",value:function(i){return this._drawingModeMap[i]}},{key:"_setObjectCachingToFalse",value:function(){at.fabric.Object.prototype.objectCaching=!1}},{key:"_setCanvasElement",value:function(i){var l,e;i.nodeType?l=i:l=document.querySelector(i),l.nodeName.toUpperCase()!=="CANVAS"&&(e=document.createElement("canvas"),l.appendChild(e)),this._canvas=new at.fabric.Canvas(e,{containerClass:"tui-image-editor-canvas-container",enableRetinaScaling:!1})}},{key:"_createDrawingModeInstances",value:function(){this._register(this._drawingModeMap,new Ol),this._register(this._drawingModeMap,new Nl),this._register(this._drawingModeMap,new Fl),this._register(this._drawingModeMap,new Yl),this._register(this._drawingModeMap,new Zl),this._register(this._drawingModeMap,new Kl),this._register(this._drawingModeMap,new ec),this._register(this._drawingModeMap,new uc)}},{key:"_createComponents",value:function(){this._register(this._componentMap,new Yo(this)),this._register(this._componentMap,new os(this)),this._register(this._componentMap,new us(this)),this._register(this._componentMap,new gs(this)),this._register(this._componentMap,new ys(this)),this._register(this._componentMap,new Es(this)),this._register(this._componentMap,new Ps(this)),this._register(this._componentMap,new zs(this)),this._register(this._componentMap,new Qs(this)),this._register(this._componentMap,new pl(this)),this._register(this._componentMap,new El(this)),this._register(this._componentMap,new oc(this))}},{key:"_register",value:function(i,l){i[l.getName()]=l}},{key:"_isSameDrawingMode",value:function(i){return this.getDrawingMode()===i}},{key:"_calcMaxDimension",value:function(i,l){var e=this.cssMaxWidth/i,c=this.cssMaxHeight/l,C=Math.min(i,this.cssMaxWidth),x=Math.min(l,this.cssMaxHeight);return e<1&&e<c?(C=i*e,x=l*e):c<1&&c<e&&(C=i*c,x=l*c),{width:Math.floor(C),height:Math.floor(x)}}},{key:"_callbackAfterLoadingImageObject",value:function(i){var l=this.getCanvasImage().getCenterPoint();i.set(Ne.SELECTION_STYLE),i.set({left:l.x,top:l.y,crossOrigin:"Anonymous"}),this.getCanvas().add(i).setActiveObject(i)}},{key:"_attachCanvasEvents",value:function(){var i=this._canvas,l=this._handler;i.on({"mouse:down":l.onMouseDown,"object:added":l.onObjectAdded,"object:removed":l.onObjectRemoved,"object:moving":l.onObjectMoved,"object:scaling":l.onObjectScaled,"object:modified":l.onObjectModified,"object:rotating":l.onObjectRotated,"path:created":l.onPathCreated,"selection:cleared":l.onSelectionCleared,"selection:created":l.onSelectionCreated,"selection:updated":l.onObjectSelected})}},{key:"_onMouseDown",value:function(i){var l=this,e=i.e,c=i.target,C=this._canvas.getPointer(e);if(c){var x=c.type,E=en(c,function(_){return nn(l.getObjectId(_),_,x==="activeSelection")});Kn(E)}this.fire(Mt.MOUSE_DOWN,e,C)}},{key:"_onObjectAdded",value:function(i){var l=i.target;l.isType("cropzone")||this._addFabricObject(l)}},{key:"_onObjectRemoved",value:function(i){var l=i.target;this._removeFabricObject(kt(l))}},{key:"_onObjectMoved",value:function(i){var l=this;this._lazyFire(Mt.OBJECT_MOVED,function(e){return l.createObjectProperties(e)},i.target)}},{key:"_onObjectScaled",value:function(i){var l=this;this._lazyFire(Mt.OBJECT_SCALED,function(e){return l.createObjectProperties(e)},i.target)}},{key:"_onObjectModified",value:function(i){var l=i.target;if(l.type==="activeSelection"){var e=l.getObjects();Ut()(e).call(e,function(c){return c.fire("modifiedInGroup",l)})}this.fire(Mt.OBJECT_MODIFIED,l,this.getObjectId(l))}},{key:"_onObjectRotated",value:function(i){var l=this;this._lazyFire(Mt.OBJECT_ROTATED,function(e){return l.createObjectProperties(e)},i.target)}},{key:"_lazyFire",value:function(i,l,e){var c=this,C=e&&e.canvasEventDelegation,x=C?e.canvasEventDelegation(i):"none";x==="unregistered"&&e.canvasEventRegister(i,function(E){c.fire(i,l(E))}),x==="none"&&this.fire(i,l(e))}},{key:"_onObjectSelected",value:function(i){var l=i.target,e=this.createObjectProperties(l);this.fire(Mt.OBJECT_ACTIVATED,e)}},{key:"_onPathCreated",value:function(i){var l=i.path.getCenterPoint(),e=l.x,c=l.y;i.path.set(Y()({left:e,top:c},Ne.SELECTION_STYLE));var C=this.createObjectProperties(i.path);this.fire(Mt.ADD_OBJECT,C)}},{key:"_onSelectionCleared",value:function(){this.fire(Mt.SELECTION_CLEARED)}},{key:"_onSelectionCreated",value:function(i){var l=i.target,e=this.createObjectProperties(l);this.fire(Mt.OBJECT_ACTIVATED,e),this.fire(Mt.SELECTION_CREATED,i.target)}},{key:"discardSelection",value:function(){this._canvas.discardActiveObject(),this._canvas.renderAll()}},{key:"changeSelectableAll",value:function(i){this._canvas.forEachObject(function(l){l.selectable=i,l.hoverCursor=i?"move":"crosshair"})}},{key:"createObjectProperties",value:function(i){var l=["left","top","width","height","fill","stroke","strokeWidth","opacity","angle"],e={id:kt(i),type:i.type};if(Y()(e,he(i,l)),pi(["i-text","text"],i.type))Y()(e,this._createTextProperties(i,e));else if(pi(["rect","triangle","circle"],i.type)){var c=this.getComponent(Pt.SHAPE);Y()(e,{fill:c.makeFillPropertyForUserEvent(i)})}return e}},{key:"_createTextProperties",value:function(i){var l=["text","fontFamily","fontSize","fontStyle","textAlign","textDecoration","fontWeight"],e={};return Y()(e,he(i,l)),e}},{key:"_addFabricObject",value:function(i){var l=kt(i);return this._objects[l]=i,l}},{key:"_removeFabricObject",value:function(i){delete this._objects[i]}},{key:"resetTargetObjectForCopyPaste",value:function(){var i=this.getActiveObject();i&&(this.targetObjectForCopyPaste=i)}},{key:"pasteObject",value:function(){var i=this;if(!this.targetObjectForCopyPaste)return yt().resolve([]);var l=this.targetObjectForCopyPaste,e=l.type==="activeSelection",c=e?l.getObjects():[l],C=null;return this.discardSelection(),this._cloneObject(c).then(function(x){if(x.length>1)C=i.getActiveSelectionFromObjects(x);else{var E=ot(x,1);C=E[0]}i.targetObjectForCopyPaste=C,i.setActiveObject(C)})}},{key:"_cloneObject",value:function(i){var l=this,e=He()(i).call(i,function(c){return l._cloneObjectItem(c)});return yt().all(e)}},{key:"_cloneObjectItem",value:function(i){var l=this;return this._copyFabricObjectForPaste(i).then(function(e){var c=l.createObjectProperties(e);return l.add(e),l.fire(Mt.ADD_OBJECT,c),e})}},{key:"_copyFabricObjectForPaste",value:function(i){var l=this,e=function(C,x){return x?C-_i:C+_i};return this._copyFabricObject(i).then(function(c){var C=c.left,x=c.top,E=c.width,_=c.height,N=l.getCanvasSize(),R=N.width,et=N.height,it=C+E/2,ut=x+_/2;return c.set(Y()({left:e(C,it+_i>R),top:e(x,ut+_i>et)},Ne.SELECTION_STYLE)),c})}},{key:"_copyFabricObject",value:function(i){var l=this;return new(yt())(function(e){i.clone(function(c){var C=l.getComponent(Pt.SHAPE);hn(c)&&C.processForCopiedObject(c,i),e(c)})})}},{key:"getCurrentDimensions",value:function(){var i=this.getComponent(Pt.RESIZE);return i.getCurrentDimensions()}},{key:"getOriginalDimensions",value:function(){var i=this.getComponent(Pt.RESIZE);return i.getOriginalDimensions()}},{key:"setOriginalDimensions",value:function(i){var l=this.getComponent(Pt.RESIZE);l.setOriginalDimensions(i)}},{key:"resize",value:function(i){var l=this.getComponent(Pt.RESIZE);return l.resize(i)}}]),M}();gt().mixin($n);var vc=$n,mc=Mt.MOUSE_DOWN,pc=Mt.OBJECT_MOVED,yc=Mt.OBJECT_SCALED,Cc=Mt.OBJECT_ACTIVATED,Sc=Mt.OBJECT_ROTATED,qn=Mt.OBJECT_ADDED,Ic=Mt.OBJECT_MODIFIED,xc=Mt.ADD_TEXT,bc=Mt.ADD_OBJECT,Mc=Mt.TEXT_EDITING,_c=Mt.TEXT_CHANGED,Ec=Mt.ICON_CREATE_RESIZE,Tc=Mt.ICON_CREATE_END,tr=Mt.SELECTION_CLEARED,er=Mt.SELECTION_CREATED,Dc=Mt.ADD_OBJECT_AFTER,rn=function(){function M(g,i){var l,e,c,C,x,E,_,N,R,et,it,ut,st,ft,wt,Jt;if(H(this,M),i=Y()({includeUI:!1,usageStatistics:!0},i),this.mode=null,this.activeObjectId=null,i.includeUI){var Kt=i.includeUI;Kt.usageStatistics=i.usageStatistics,this.ui=new Po(g,Kt,this.getActions()),i=this.ui.setUiDefaultSelectionStyle(i)}this._invoker=new Qr,this._graphics=new vc(this.ui?this.ui.getEditorArea():g,{cssMaxWidth:i.cssMaxWidth,cssMaxHeight:i.cssMaxHeight}),this._handlers={keydown:V()(l=this._onKeyDown).call(l,this),mousedown:V()(e=this._onMouseDown).call(e,this),objectActivated:V()(c=this._onObjectActivated).call(c,this),objectMoved:V()(C=this._onObjectMoved).call(C,this),objectScaled:V()(x=this._onObjectScaled).call(x,this),objectRotated:V()(E=this._onObjectRotated).call(E,this),objectAdded:V()(_=this._onObjectAdded).call(_,this),objectModified:V()(N=this._onObjectModified).call(N,this),createdPath:this._onCreatedPath,addText:V()(R=this._onAddText).call(R,this),addObject:V()(et=this._onAddObject).call(et,this),textEditing:V()(it=this._onTextEditing).call(it,this),textChanged:V()(ut=this._onTextChanged).call(ut,this),iconCreateResize:V()(st=this._onIconCreateResize).call(st,this),iconCreateEnd:V()(ft=this._onIconCreateEnd).call(ft,this),selectionCleared:V()(wt=this._selectionCleared).call(wt,this),selectionCreated:V()(Jt=this._selectionCreated).call(Jt,this)},this._attachInvokerEvents(),this._attachGraphicsEvents(),this._attachDomEvents(),this._setSelectionStyle(i.selectionStyle,{applyCropSelectionStyle:i.applyCropSelectionStyle,applyGroupSelectionStyle:i.applyGroupSelectionStyle}),i.usageStatistics&&Me(),this.ui&&(this.ui.initCanvas(),this.setReAction(),this._attachColorPickerInputBoxEvents()),at.fabric.enableGLFiltering=!1}return q(M,[{key:"_attachColorPickerInputBoxEvents",value:function(){var i=this;this.ui.on(Mt.INPUT_BOX_EDITING_STARTED,function(){i.isColorPickerInputBoxEditing=!0}),this.ui.on(Mt.INPUT_BOX_EDITING_STOPPED,function(){i.isColorPickerInputBoxEditing=!1})}},{key:"_detachColorPickerInputBoxEvents",value:function(){this.ui.off(Mt.INPUT_BOX_EDITING_STARTED),this.ui.off(Mt.INPUT_BOX_EDITING_STOPPED)}},{key:"_setSelectionStyle",value:function(i,l){var e=l.applyCropSelectionStyle,c=l.applyGroupSelectionStyle;i&&this._graphics.setSelectionStyle(i),e&&this._graphics.setCropSelectionStyle(i),c&&this.on("selectionCreated",function(C){C.type==="activeSelection"&&C.set(i)})}},{key:"_attachInvokerEvents",value:function(){var i,l,e=this,c=Mt.UNDO_STACK_CHANGED,C=Mt.REDO_STACK_CHANGED,x=Mt.EXECUTE_COMMAND,E=Mt.AFTER_UNDO,_=Mt.AFTER_REDO,N=Mt.HAND_STARTED,R=Mt.HAND_STOPPED;if(this._invoker.on(c,V()(i=this.fire).call(i,this,c)),this._invoker.on(C,V()(l=this.fire).call(l,this,C)),this.ui){var et=this._graphics.getCanvas();this._invoker.on(x,function(it){return e.ui.fire(x,it)}),this._invoker.on(E,function(it){return e.ui.fire(E,it)}),this._invoker.on(_,function(it){return e.ui.fire(_,it)}),et.on(N,function(){return e.ui.fire(N)}),et.on(R,function(){return e.ui.fire(R)})}}},{key:"_attachGraphicsEvents",value:function(){var i;this._graphics.on((i={},j(i,mc,this._handlers.mousedown),j(i,pc,this._handlers.objectMoved),j(i,yc,this._handlers.objectScaled),j(i,Sc,this._handlers.objectRotated),j(i,Cc,this._handlers.objectActivated),j(i,qn,this._handlers.objectAdded),j(i,Ic,this._handlers.objectModified),j(i,xc,this._handlers.addText),j(i,bc,this._handlers.addObject),j(i,Mc,this._handlers.textEditing),j(i,_c,this._handlers.textChanged),j(i,Ec,this._handlers.iconCreateResize),j(i,Tc,this._handlers.iconCreateEnd),j(i,tr,this._handlers.selectionCleared),j(i,er,this._handlers.selectionCreated),i))}},{key:"_attachDomEvents",value:function(){document.addEventListener("keydown",this._handlers.keydown)}},{key:"_detachDomEvents",value:function(){document.removeEventListener("keydown",this._handlers.keydown)}},{key:"_onKeyDown",value:function(i){var l=i.ctrlKey,e=i.keyCode,c=i.metaKey,C=l||c;C&&(e===me.C?this._graphics.resetTargetObjectForCopyPaste():e===me.V?(this._graphics.pasteObject(),this.clearRedoStack()):e===me.Z?this.undo().catch(function(){}):e===me.Y&&this.redo().catch(function(){}));var x=e===me.BACKSPACE||e===me.DEL,E=this._graphics.isReadyRemoveObject();!this.isColorPickerInputBoxEditing&&E&&x&&(i.preventDefault(),this.removeActiveObject())}},{key:"removeActiveObject",value:function(){var i=this._graphics.getActiveObjectIdForRemove();this.removeObject(i)}},{key:"_onMouseDown",value:function(i,l){this.fire(Mt.MOUSE_DOWN,i,l)}},{key:"_pushAddObjectCommand",value:function(i){var l=pe.create(Gt.ADD_OBJECT,this._graphics,i);this._invoker.pushUndoStack(l)}},{key:"_pushModifyObjectCommand",value:function(i){var l=this,e=i.type,c=en(i,function(x){return nn(l._graphics.getObjectId(x),x,e==="activeSelection")}),C=pe.create(Gt.CHANGE_SELECTION,this._graphics,c);C.execute(this._graphics,c),this._invoker.pushUndoStack(C)}},{key:"_onObjectActivated",value:function(i){this.fire(Mt.OBJECT_ACTIVATED,i)}},{key:"_onObjectMoved",value:function(i){this.fire(Mt.OBJECT_MOVED,i)}},{key:"_onObjectScaled",value:function(i){this.fire(Mt.OBJECT_SCALED,i)}},{key:"_onObjectRotated",value:function(i){this.fire(Mt.OBJECT_ROTATED,i)}},{key:"getDrawingMode",value:function(){return this._graphics.getDrawingMode()}},{key:"clearObjects",value:function(){return this.execute(Gt.CLEAR_OBJECTS)}},{key:"deactivateAll",value:function(){this._graphics.deactivateAll(),this._graphics.renderAll()}},{key:"discardSelection",value:function(){this._graphics.discardSelection()}},{key:"changeSelectableAll",value:function(i){this._graphics.changeSelectableAll(i)}},{key:"_initHistory",value:function(){this.ui&&this.ui.initHistory()}},{key:"_clearHistory",value:function(){this.ui&&this.ui.clearHistory()}},{key:"execute",value:function(i){for(var l,e,c,C=arguments.length,x=new Array(C>1?C-1:0),E=1;E<C;E++)x[E-1]=arguments[E];var _=F()(l=[this._graphics]).call(l,x);return(e=this._invoker).execute.apply(e,F()(c=[i]).call(c,P(_)))}},{key:"executeSilent",value:function(i){for(var l,e,c,C=arguments.length,x=new Array(C>1?C-1:0),E=1;E<C;E++)x[E-1]=arguments[E];var _=F()(l=[this._graphics]).call(l,x);return(e=this._invoker).executeSilent.apply(e,F()(c=[i]).call(c,P(_)))}},{key:"undo",value:function(){for(var i=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,e=yt().resolve(),c=0;c<l;c+=1)e=e.then(function(){return i._invoker.undo()});return e}},{key:"redo",value:function(){for(var i=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,e=yt().resolve(),c=0;c<l;c+=1)e=e.then(function(){return i._invoker.redo()});return e}},{key:"zoom",value:function(i){var l=i.x,e=i.y,c=i.zoomLevel;this._graphics.zoom({x:l,y:e},c)}},{key:"resetZoom",value:function(){this._graphics.resetZoom()}},{key:"loadImageFromFile",value:function(i,l){if(!i)return yt().reject(ue.invalidParameters);var e=K().createObjectURL(i);return l=l||i.name,this.loadImageFromURL(e,l).then(function(c){return K().revokeObjectURL(i),c})}},{key:"loadImageFromURL",value:function(i,l){return!l||!i?yt().reject(ue.invalidParameters):this.execute(Gt.LOAD_IMAGE,l,i)}},{key:"addImageObject",value:function(i){return i?this.execute(Gt.ADD_IMAGE_OBJECT,i):yt().reject(ue.invalidParameters)}},{key:"startDrawingMode",value:function(i,l){return this._graphics.startDrawingMode(i,l)}},{key:"stopDrawingMode",value:function(){this._graphics.stopDrawingMode()}},{key:"crop",value:function(i){var l=this._graphics.getCroppedImageData(i);return l?this.loadImageFromURL(l.url,l.imageName):yt().reject(ue.invalidParameters)}},{key:"getCropzoneRect",value:function(){return this._graphics.getCropzoneRect()}},{key:"setCropzoneRect",value:function(i){this._graphics.setCropzoneRect(i)}},{key:"_flip",value:function(i){return this.execute(Gt.FLIP_IMAGE,i)}},{key:"flipX",value:function(){return this._flip("flipX")}},{key:"flipY",value:function(){return this._flip("flipY")}},{key:"resetFlip",value:function(){return this._flip("reset")}},{key:"_rotate",value:function(i,l,e){var c=null;return e?c=this.executeSilent(Gt.ROTATE_IMAGE,i,l):c=this.execute(Gt.ROTATE_IMAGE,i,l),c}},{key:"rotate",value:function(i,l){return this._rotate("rotate",i,l)}},{key:"setAngle",value:function(i,l){return this._rotate("setAngle",i,l)}},{key:"setBrush",value:function(i){this._graphics.setBrush(i)}},{key:"setDrawingShape",value:function(i,l){this._graphics.setDrawingShape(i,l)}},{key:"setDrawingIcon",value:function(i,l){this._graphics.setIconStyle(i,l)}},{key:"addShape",value:function(i,l){return l=l||{},this._setPositions(l),this.execute(Gt.ADD_SHAPE,i,l)}},{key:"changeShape",value:function(i,l,e){var c=e?"executeSilent":"execute";return this[c](Gt.CHANGE_SHAPE,i,l)}},{key:"addText",value:function(i,l){return i=i||"",l=l||{},this.execute(Gt.ADD_TEXT,i,l)}},{key:"changeText",value:function(i,l){return l=l||"",this.execute(Gt.CHANGE_TEXT,i,l)}},{key:"changeTextStyle",value:function(i,l,e){var c=e?"executeSilent":"execute";return this[c](Gt.CHANGE_TEXT_STYLE,i,l)}},{key:"_changeActivateMode",value:function(i){i!=="ICON"&&this.getDrawingMode()!==i&&this.startDrawingMode(i)}},{key:"_onTextChanged",value:function(i){this.fire(Mt.TEXT_CHANGED,i)}},{key:"_onIconCreateResize",value:function(i){this.fire(Mt.ICON_CREATE_RESIZE,i)}},{key:"_onIconCreateEnd",value:function(i){this.fire(Mt.ICON_CREATE_END,i)}},{key:"_onTextEditing",value:function(){this.fire(Mt.TEXT_EDITING)}},{key:"_onAddText",value:function(i){this.fire(Mt.ADD_TEXT,{originPosition:i.originPosition,clientPosition:i.clientPosition})}},{key:"_onAddObject",value:function(i){var l=this._graphics.getObject(i.id);this._invoker.fire(Mt.EXECUTE_COMMAND,Zi(l.type)),this._pushAddObjectCommand(l)}},{key:"_onObjectAdded",value:function(i){this.fire(qn,i),this.fire(Dc,i)}},{key:"_onObjectModified",value:function(i){i.type!==Ht.CROPZONE&&(this._invoker.fire(Mt.EXECUTE_COMMAND,Zi(i.type)),this._pushModifyObjectCommand(i))}},{key:"_selectionCleared",value:function(){this.fire(tr)}},{key:"_selectionCreated",value:function(i){this.fire(er,i)}},{key:"registerIcons",value:function(i){this._graphics.registerPaths(i)}},{key:"changeCursor",value:function(i){this._graphics.changeCursor(i)}},{key:"addIcon",value:function(i,l){return l=l||{},this._setPositions(l),this.execute(Gt.ADD_ICON,i,l)}},{key:"changeIconColor",value:function(i,l){return this.execute(Gt.CHANGE_ICON_COLOR,i,l)}},{key:"removeObject",value:function(i){var l=this._graphics.getObject(i),e=l.type;return this.execute(Gt.REMOVE_OBJECT,i,Zi(e))}},{key:"hasFilter",value:function(i){return this._graphics.hasFilter(i)}},{key:"removeFilter",value:function(i){return this.execute(Gt.REMOVE_FILTER,i)}},{key:"applyFilter",value:function(i,l,e){var c=e?"executeSilent":"execute";return this[c](Gt.APPLY_FILTER,i,l)}},{key:"toDataURL",value:function(i){return this._graphics.toDataURL(i)}},{key:"getImageName",value:function(){return this._graphics.getImageName()}},{key:"clearUndoStack",value:function(){this._invoker.clearUndoStack()}},{key:"clearRedoStack",value:function(){this._invoker.clearRedoStack()}},{key:"isEmptyUndoStack",value:function(){return this._invoker.isEmptyUndoStack()}},{key:"isEmptyRedoStack",value:function(){return this._invoker.isEmptyRedoStack()}},{key:"resizeCanvasDimension",value:function(i){return i?this.execute(Gt.RESIZE_CANVAS_DIMENSION,i):yt().reject(ue.invalidParameters)}},{key:"destroy",value:function(){var i=this;this.stopDrawingMode(),this._detachDomEvents(),this._graphics.destroy(),this._graphics=null,this.ui&&(this._detachColorPickerInputBoxEvents(),this.ui.destroy()),G()(this,function(l,e){i[e]=null},this)}},{key:"_setPositions",value:function(i){var l=this._graphics.getCenter();B()(i.left)&&(i.left=l.left),B()(i.top)&&(i.top=l.top)}},{key:"setObjectProperties",value:function(i,l){return this.execute(Gt.SET_OBJECT_PROPERTIES,i,l)}},{key:"setObjectPropertiesQuietly",value:function(i,l){this._graphics.setObjectProperties(i,l)}},{key:"getObjectProperties",value:function(i,l){var e=this._graphics.getObject(i);return e?this._graphics.getObjectProperties(i,l):null}},{key:"getCanvasSize",value:function(){return this._graphics.getCanvasSize()}},{key:"getObjectPosition",value:function(i,l,e){return this._graphics.getObjectPosition(i,l,e)}},{key:"setObjectPosition",value:function(i,l){return this.execute(Gt.SET_OBJECT_POSITION,i,l)}},{key:"resize",value:function(i){return this.execute(Gt.RESIZE_IMAGE,i)}}]),M}();No.mixin(rn),gt().mixin(rn);var Ac=rn,wc=Pt.ICON,Oc={name:Gt.ADD_ICON,execute:function(g,i,l){var e=this,c=g.getComponent(wc);return c.add(i,l).then(function(C){return e.undoData.object=g.getObject(C.id),C})},undo:function(g){return g.remove(this.undoData.object),yt().resolve()}};pe.register(Oc);var kc={name:Gt.ADD_IMAGE_OBJECT,execute:function(g,i){var l=this;return g.addImageObject(i).then(function(e){return l.undoData.object=g.getObject(e.id),e})},undo:function(g){return g.remove(this.undoData.object),yt().resolve()}};pe.register(kc);var Pc={name:Gt.ADD_OBJECT,execute:function(g,i){return new(yt())(function(l,e){g.contains(i)?e(ue.addedObject):(g.add(i),l(i))})},undo:function(g,i){return new(yt())(function(l,e){g.contains(i)?(g.remove(i),l(i)):e(ue.noObject)})}};pe.register(Pc);var Lc=Pt.SHAPE,Nc={name:Gt.ADD_SHAPE,execute:function(g,i,l){var e=this,c=g.getComponent(Lc);return c.add(i,l).then(function(C){var x=C.id;return e.undoData.object=g.getObject(x),C})},undo:function(g){return g.remove(this.undoData.object),yt().resolve()}};pe.register(Nc);var jc=Pt.TEXT,Rc={name:Gt.ADD_TEXT,execute:function(g,i,l){var e=this,c=g.getComponent(jc);if(this.undoData.object){var C=this.undoData.object;return new(yt())(function(x,E){g.contains(C)?E(ue.redo):(g.add(C),x(C))})}return c.add(i,l).then(function(x){var E=x.id,_=g.getObject(E);return e.undoData.object=_,Kn(en(_,function(){return nn(E,_,!1)})),x})},undo:function(g){return g.remove(this.undoData.object),yt().resolve()}};pe.register(Rc);var ir=Pt.FILTER,nr=null;function zc(M,g,i){var l={};return M==="mask"&&(l.object=i.mask),l.options=g,l}var Fc={name:Gt.APPLY_FILTER,execute:function(g,i,l,e){var c=g.getComponent(ir);if(i==="mask"){var C=g.getObject(l.maskObjId);if(!(C&&C.isType("image")))return yt().reject(ue.invalidParameters);Y()(l,{mask:C}),g.remove(l.mask)}if(!this.isRedo){var x=c.getOptions(i),E=zc(i,x,l);nr=this.setUndoData(E,nr,e)}return c.add(i,l)},undo:function(g,i){var l=g.getComponent(ir);if(i==="mask"){var e=this.undoData.object;return g.add(e),g.setActiveObject(e),l.remove(i)}return this.undoData.options?l.add(i,this.undoData.options):l.remove(i)}};pe.register(Fc);var rr=Pt.ICON,Bc={name:Gt.CHANGE_ICON_COLOR,execute:function(g,i,l){var e=this;return new(yt())(function(c,C){var x=g.getComponent(rr),E=g.getObject(i);E||C(ue.noObject),e.undoData.object=E,e.undoData.color=x.getColor(E),x.setColor(l,E),c()})},undo:function(g){var i=g.getComponent(rr),l=this.undoData,e=l.object,c=l.color;return i.setColor(c,e),yt().resolve()}};pe.register(Bc);var ar=Pt.SHAPE,or=null;function Hc(M,g){var i={object:g,options:{}};return Si()(M,function(l,e){i.options[e]=g[e]}),i}var Uc={name:Gt.CHANGE_SHAPE,execute:function(g,i,l,e){var c=g.getComponent(ar),C=g.getObject(i);if(!C)return yt().reject(ue.noObject);if(!this.isRedo){var x=Hc(l,C);or=this.setUndoData(x,or,e)}return c.change(C,l)},undo:function(g){var i=g.getComponent(ar),l=this.undoData,e=l.object,c=l.options;return i.change(e,c)}};pe.register(Uc);var sr=Pt.TEXT,Yc={name:Gt.CHANGE_TEXT,execute:function(g,i,l){var e=g.getComponent(sr),c=g.getObject(i);return c?(this.undoData.object=c,this.undoData.text=e.getText(c),e.change(c,l)):yt().reject(ue.noObject)},undo:function(g){var i=g.getComponent(sr),l=this.undoData,e=l.object,c=l.text;return i.change(e,c)}};pe.register(Yc);var lr=Pt.TEXT,cr=null;function Wc(M,g){var i={object:g,styles:{}};return Si()(M,function(l,e){var c=g[e];i.styles[e]=c}),i}var Gc={name:Gt.CHANGE_TEXT_STYLE,execute:function(g,i,l,e){var c=g.getComponent(lr),C=g.getObject(i);if(!C)return yt().reject(ue.noObject);if(!this.isRedo){var x=Wc(l,C);cr=this.setUndoData(x,cr,e)}return c.setStyle(C,l)},undo:function(g){var i=g.getComponent(lr),l=this.undoData,e=l.object,c=l.styles;return i.setStyle(e,c)}};pe.register(Gc);var Xc={name:Gt.CLEAR_OBJECTS,execute:function(g){var i=this;return new(yt())(function(l){i.undoData.objects=g.removeAll(),l()})},undo:function(g){return g.add(this.undoData.objects),yt().resolve()}};pe.register(Xc);var ur=Pt.FLIP,Zc={name:Gt.FLIP_IMAGE,execute:function(g,i){var l=g.getComponent(ur);return this.undoData.setting=l.getCurrentSetting(),l[i]()},undo:function(g){var i=g.getComponent(ur);return i.set(this.undoData.setting)}};pe.register(Zc);var hr=Pt.IMAGE_LOADER,Vc={name:Gt.LOAD_IMAGE,execute:function(g,i,l){var e,c=g.getComponent(hr),C=c.getCanvasImage(),x=C?C.width:0,E=C?C.height:0,_=$e()(e=g.removeAll(!0)).call(e,function(N){return N.type!=="cropzone"});return Ut()(_).call(_,function(N){N.evented=!0}),this.undoData={name:c.getImageName(),image:C,objects:_},c.load(i,l).then(function(N){return{oldWidth:x,oldHeight:E,newWidth:N.width,newHeight:N.height}})},undo:function(g){var i=g.getComponent(hr),l=this.undoData,e=l.objects,c=l.name,C=l.image;return g.removeAll(!0),g.add(e),i.load(c,C)}};pe.register(Vc);var fr=Pt.FILTER,Jc={name:Gt.REMOVE_FILTER,execute:function(g,i){var l=g.getComponent(fr);return this.undoData.options=l.getOptions(i),l.remove(i)},undo:function(g,i){var l=g.getComponent(fr),e=this.undoData.options;return l.add(i,e)}};pe.register(Jc);var Qc={name:Gt.REMOVE_OBJECT,execute:function(g,i){var l=this;return new(yt())(function(e,c){l.undoData.objects=g.removeObjectById(i),l.undoData.objects.length?e():c(ue.noObject)})},undo:function(g){return g.add(this.undoData.objects),yt().resolve()}};pe.register(Qc);var Kc={name:Gt.RESIZE_CANVAS_DIMENSION,execute:function(g,i){var l=this;return new(yt())(function(e){l.undoData.size={width:g.cssMaxWidth,height:g.cssMaxHeight},g.setCssMaxDimension(i),g.adjustCanvasDimension(),e()})},undo:function(g){return g.setCssMaxDimension(this.undoData.size),g.adjustCanvasDimension(),yt().resolve()}};pe.register(Kc);var dr=Pt.ROTATION,gr=null;function $c(M){return{angle:M.getCurrentAngle()}}var qc={name:Gt.ROTATE_IMAGE,execute:function(g,i,l,e){var c=g.getComponent(dr);if(!this.isRedo){var C=$c(c);gr=this.setUndoData(C,gr,e)}return c[i](l)},undo:function(g){var i=g.getComponent(dr),l=ot(this.args,3),e=l[1],c=l[2];return e==="setAngle"?i[e](this.undoData.angle):i.rotate(-c)}};pe.register(qc);var tu={name:Gt.SET_OBJECT_PROPERTIES,execute:function(g,i,l){var e=this,c=g.getObject(i);return c?(this.undoData.props={},Si()(l,function(C,x){e.undoData.props[x]=c[x]}),g.setObjectProperties(i,l),yt().resolve()):yt().reject(ue.noObject)},undo:function(g,i){var l=this.undoData.props;return g.setObjectProperties(i,l),yt().resolve()}};pe.register(tu);var eu={name:Gt.SET_OBJECT_POSITION,execute:function(g,i,l){var e=g.getObject(i);return e?(this.undoData.objectId=i,this.undoData.props=g.getObjectProperties(i,["left","top"]),g.setObjectPosition(i,l),g.renderAll(),yt().resolve()):yt().reject(ue.noObject)},undo:function(g){var i=this.undoData,l=i.objectId,e=i.props;return g.setObjectProperties(l,e),g.renderAll(),yt().resolve()}};pe.register(eu);var iu={name:Gt.CHANGE_SELECTION,execute:function(g,i){return this.isRedo?Ut()(i).call(i,function(l){g.setObjectProperties(l.id,l)}):this.undoData=ic(),yt().resolve()},undo:function(g){var i;return Ut()(i=this.undoData).call(i,function(l){g.setObjectProperties(l.id,l)}),yt().resolve()}};pe.register(iu);var vr=Pt.RESIZE,nu={name:Gt.RESIZE_IMAGE,execute:function(g,i){var l=g.getComponent(vr),e=l.getOriginalDimensions();return e||(e=l.getCurrentDimensions()),this.undoData.dimensions=e,l.resize(i)},undo:function(g){var i=g.getComponent(vr);return i.resize(this.undoData.dimensions)}};pe.register(nu);var ru=Ac}(),dt=dt.default,dt}()})})(Nr);const fu=ou(Nr.exports),du={ZoomIn:"\u653E\u5927",ZoomOut:"\u7F29\u5C0F",Hand:"\u79FB\u52A8",History:"\u64CD\u4F5C\u8BB0\u5F55",Crop:"\u88C1\u526A",Load:"\u66FF\u6362\u56FE\u7247",DeleteAll:"\u5168\u90E8\u5220\u9664",Delete:"\u5220\u9664",Undo:"\u64A4\u9500",Redo:"\u53CD\u64A4\u9500",Reset:"\u91CD\u7F6E",Flip:"\u955C\u50CF",Rotate:"\u65CB\u8F6C",Draw:"\u753B",Shape:"\u5F62\u72B6\u6807\u6CE8",Icon:"\u56FE\u6807\u6807\u6CE8",Text:"\u6587\u5B57\u6807\u6CE8",Mask:"\u906E\u7F69",Filter:"\u6EE4\u955C",Bold:"\u52A0\u7C97",Italic:"\u659C\u4F53",Underline:"\u4E0B\u5212\u7EBF",Left:"\u5DE6\u5BF9\u9F50",Center:"\u5C45\u4E2D",Right:"\u53F3\u5BF9\u9F50",Color:"\u989C\u8272","Text size":"\u5B57\u4F53\u5927\u5C0F",Custom:"\u81EA\u5B9A\u4E49",Square:"\u6B63\u65B9\u5F62",Apply:"\u5E94\u7528",Cancel:"\u53D6\u6D88","Flip X":"X \u8F74","Flip Y":"Y \u8F74",Range:"\u533A\u95F4",Stroke:"\u63CF\u8FB9",Fill:"\u586B\u5145",Circle:"\u5706",Triangle:"\u4E09\u89D2",Rectangle:"\u77E9\u5F62",Free:"\u66F2\u7EBF",Straight:"\u76F4\u7EBF",Arrow:"\u7BAD\u5934","Arrow-2":"\u7BAD\u59342","Arrow-3":"\u7BAD\u59343","Star-1":"\u661F\u661F1","Star-2":"\u661F\u661F2",Polygon:"\u591A\u8FB9\u5F62",Location:"\u5B9A\u4F4D",Heart:"\u5FC3\u5F62",Bubble:"\u6C14\u6CE1","Custom icon":"\u81EA\u5B9A\u4E49\u56FE\u6807","Load Mask Image":"\u52A0\u8F7D\u8499\u5C42\u56FE\u7247",Grayscale:"\u7070\u5EA6",Blur:"\u6A21\u7CCA",Sharpen:"\u9510\u5316",Emboss:"\u6D6E\u96D5","Remove White":"\u9664\u53BB\u767D\u8272",Distance:"\u8DDD\u79BB",Brightness:"\u4EAE\u5EA6",Noise:"\u566A\u97F3","Color Filter":"\u5F69\u8272\u6EE4\u955C",Sepia:"\u68D5\u8272",Sepia2:"\u68D5\u82722",Invert:"\u8D1F\u7247",Pixelate:"\u50CF\u7D20\u5316",Threshold:"\u9608\u503C",Tint:"\u8272\u8C03",Multiply:"\u6B63\u7247\u53E0\u5E95",Blend:"\u6DF7\u5408\u8272",Double:"\u53CC\u51FB",Download:"\u9884\u89C8\u56FE\u7247",Resize:"\u8C03\u6574\u5BBD\u9AD8"},gu={"common.bi.image":"","common.bisize.width":"0px","common.bisize.height":"0px","common.backgroundImage":"none","common.backgroundColor":"#f3f4f6","common.border":"1px solid #444","header.backgroundImage":"none","header.backgroundColor":"#f3f4f6","header.border":"0px","header.margin":"0px auto","loadButton.backgroundColor":"#fff","loadButton.border":"1px solid #ddd","loadButton.color":"#222","loadButton.fontFamily":"NotoSans, sans-serif","loadButton.fontSize":"12px","downloadButton.backgroundColor":"#fdba3b","downloadButton.border":"1px solid #fdba3b","downloadButton.color":"#fff","downloadButton.fontFamily":"NotoSans, sans-serif","downloadButton.fontSize":"12px","menu.normalIcon.color":"#8a8a8a","menu.activeIcon.color":"#555555","menu.disabledIcon.color":"#434343","menu.hoverIcon.color":"#e9e9e9","submenu.normalIcon.color":"#8a8a8a","submenu.activeIcon.color":"#e9e9e9","menu.iconSize.width":"24px","menu.iconSize.height":"24px","submenu.iconSize.width":"32px","submenu.iconSize.height":"32px","submenu.backgroundColor":"#1e1e1e","submenu.partition.color":"#858585","submenu.normalLabel.color":"#858585","submenu.normalLabel.fontWeight":"lighter","submenu.activeLabel.color":"#fff","submenu.activeLabel.fontWeight":"lighter","checkbox.border":"1px solid #ccc","checkbox.backgroundColor":"#fff","range.pointer.color":"#fff","range.bar.color":"#666","range.subbar.color":"#d1d1d1","range.disabledPointer.color":"#414141","range.disabledBar.color":"#282828","range.disabledSubbar.color":"#414141","range.value.color":"#fff","range.value.fontWeight":"lighter","range.value.fontSize":"11px","range.value.border":"1px solid #353535","range.value.backgroundColor":"#151515","range.title.color":"#fff","range.title.fontWeight":"lighter","colorpicker.button.border":"1px solid #1e1e1e","colorpicker.title.color":"#fff"};function vu(Fe,Je){const It=Fe.split(","),Wt=It[0].match(/:(.*?);/)[1],$=atob(It[1]);let X=$.length;const dt=new Uint8Array(X);for(;X--;)dt[X]=$.charCodeAt(X);return new File([dt],Je,{type:Wt})}const mu=Wi({name:"ImageEditor"}),pu=Wi({...mu,props:{url:{type:String,default:"http://pic.yupoo.com/454539387/b51791f0/2a9ef9f2.jpg"},fileName:{type:String,default:"SampleImage"},fileSuffix:{type:String,default:"png"},menu:{type:Array,required:!1,default(){return["crop","flip","rotate","draw","shape","icon","text","mask","filter"]}},uiSize:{type:Object,required:!1,default(){return{width:"1000px",height:"700px"}}},menuBarPosition:{type:String,default:"bottom"},cssMaxWidth:{type:Number,default:700},cssMaxHeight:{type:Number,default:900}},setup(Fe,{expose:Je}){const It=Fe,Wt=ln(),$=ln(null);return su(()=>{const S=Wt.value,D={usageStatistics:!1,includeUI:{loadImage:{path:It.url,name:It.fileName},menu:It.menu,uiSize:It.uiSize,menuBarPosition:It.menuBarPosition,locale:du,theme:gu,initMenu:"filter"},cssMaxWidth:It.cssMaxWidth,cssMaxHeight:It.cssMaxHeight,selectionStyle:{cornerSize:20,rotatingPointOffset:70}};$.value=new fu(S,D)}),Je({uploadImg:async()=>{},getFile:(S=!0)=>{if(!$.value)return"";const D=$.value.toDataURL(),v=`${It.fileName}.${It.fileSuffix}`;return S?D:vu(D,v)}}),(S,D)=>(Lr(),lu("div",{id:"tui-image-editor",ref_key:"editorEl",ref:Wt},null,512))}});const sn=cu(pu,[["__scopeId","data-v-4d32c67a"]]),yu=Object.assign(sn,{install(Fe){Fe.component(sn.name,sn)}}),Cu={class:"app-container"},Su=cn("div",{class:"card-header"},[cn("span",null,"ImageEditor")],-1),Iu=Wi({name:"ImageEditor"}),Mu=Wi({...Iu,setup(Fe){const Je=ln();return(It,Wt)=>{const $=Or("el-link"),X=Or("el-card");return Lr(),uu(wr(au),{title:"Tui-Image-Editor"},{head:li(()=>[kr(" \u56FE\u7247\u7F16\u8F91\u5668 ImageEditor "),an($,{type:"primary",href:"http://nhn.github.io/tui.image-editor/latest/",target:"_blank",underline:!1},{default:li(()=>[kr("\u70B9\u6211\u67E5\u770B\u66F4\u591A")]),_:1})]),body:li(()=>[cn("div",Cu,[an(X,{class:"box-card"},{header:li(()=>[Su]),default:li(()=>[an(wr(yu),{ref_key:"editor",ref:Je},null,512)]),_:1})])]),_:1})}}});export{Mu as default};
